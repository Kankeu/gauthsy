/*! For license information please see app.js.LICENSE.txt */
(self.webpackChunk=self.webpackChunk||[]).push([[773],{226:(t,e,r)=>{"use strict";r.d(e,{Ri:()=>B,Ct:()=>j,h4:()=>Dt,yD:()=>U,ab:()=>ut,uG:()=>gt,QS:()=>dt});var n=function(){return Object.create(null)},i=Array.prototype,o=i.forEach,s=i.slice,a=function(){function t(t,e){void 0===t&&(t=!0),void 0===e&&(e=n),this.weakness=t,this.makeData=e}return t.prototype.lookup=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.lookupArray(t)},t.prototype.lookupArray=function(t){var e=this;return o.call(t,(function(t){return e=e.getChildTrie(t)})),e.data||(e.data=this.makeData(s.call(t)))},t.prototype.getChildTrie=function(e){var r=this.weakness&&function(t){switch(typeof t){case"object":if(null===t)break;case"function":return!0}return!1}(e)?this.weak||(this.weak=new WeakMap):this.strong||(this.strong=new Map),n=r.get(e);return n||r.set(e,n=new t(this.weakness,this.makeData)),n},t}();var l=null,u={},h=1,c="@wry/context:Slot",f=Array,d=f[c]||function(){var t=function(){function t(){this.id=["slot",h++,Date.now(),Math.random().toString(36).slice(2)].join(":")}return t.prototype.hasValue=function(){for(var t=l;t;t=t.parent)if(this.id in t.slots){var e=t.slots[this.id];if(e===u)break;return t!==l&&(l.slots[this.id]=e),!0}return l&&(l.slots[this.id]=u),!1},t.prototype.getValue=function(){if(this.hasValue())return l.slots[this.id]},t.prototype.withValue=function(t,e,r,n){var i,o=((i={__proto__:null})[this.id]=t,i),s=l;l={parent:s,slots:o};try{return e.apply(n,r)}finally{l=s}},t.bind=function(t){var e=l;return function(){var r=l;try{return l=e,t.apply(this,arguments)}finally{l=r}}},t.noContext=function(t,e,r){if(!l)return t.apply(r,e);var n=l;try{return l=null,t.apply(r,e)}finally{l=n}},t}();try{Object.defineProperty(f,c,{value:f[c]=t,enumerable:!1,writable:!1,configurable:!1})}finally{return t}}();d.bind,d.noContext;function p(){}var m=function(){function t(t,e){void 0===t&&(t=1/0),void 0===e&&(e=p),this.max=t,this.dispose=e,this.map=new Map,this.newest=null,this.oldest=null}return t.prototype.has=function(t){return this.map.has(t)},t.prototype.get=function(t){var e=this.getNode(t);return e&&e.value},t.prototype.getNode=function(t){var e=this.map.get(t);if(e&&e!==this.newest){var r=e.older,n=e.newer;n&&(n.older=r),r&&(r.newer=n),e.older=this.newest,e.older.newer=e,e.newer=null,this.newest=e,e===this.oldest&&(this.oldest=n)}return e},t.prototype.set=function(t,e){var r=this.getNode(t);return r?r.value=e:(r={key:t,value:e,newer:null,older:this.newest},this.newest&&(this.newest.newer=r),this.newest=r,this.oldest=this.oldest||r,this.map.set(t,r),r.value)},t.prototype.clean=function(){for(;this.oldest&&this.map.size>this.max;)this.delete(this.oldest.key)},t.prototype.delete=function(t){var e=this.map.get(t);return!!e&&(e===this.newest&&(this.newest=e.older),e===this.oldest&&(this.oldest=e.newer),e.newer&&(e.newer.older=e.older),e.older&&(e.older.newer=e.newer),this.map.delete(t),this.dispose(e.value,t),!0)},t}(),g=new d;function v(t){var e=t.unsubscribe;"function"==typeof e&&(t.unsubscribe=void 0,e())}var w=[];function y(t,e){if(!t)throw new Error(e||"assertion failure")}function b(t){switch(t.length){case 0:throw new Error("unknown value");case 1:return t[0];case 2:throw t[1]}}var _=function(){function t(e){this.fn=e,this.parents=new Set,this.childValues=new Map,this.dirtyChildren=null,this.dirty=!0,this.recomputing=!1,this.value=[],this.deps=null,++t.count}return t.prototype.peek=function(){if(1===this.value.length&&!k(this))return this.value[0]},t.prototype.recompute=function(t){return y(!this.recomputing,"already recomputing"),function(t){var e=g.getValue();if(e)t.parents.add(e),e.childValues.has(t)||e.childValues.set(t,[]),k(t)?E(e,t):A(e,t)}(this),k(this)?function(t,e){D(t),g.withValue(t,x,[t,e]),function(t,e){if("function"==typeof t.subscribe)try{v(t),t.unsubscribe=t.subscribe.apply(null,e)}catch(e){return t.setDirty(),!1}return!0}(t,e)&&function(t){if(t.dirty=!1,k(t))return;S(t)}(t);return b(t.value)}(this,t):b(this.value)},t.prototype.setDirty=function(){this.dirty||(this.dirty=!0,this.value.length=0,M(this),D(this),v(this))},t.prototype.dispose=function(){var t=this;D(this),v(this),this.parents.forEach((function(e){e.setDirty(),O(e,t)}))},t.prototype.dependOn=function(t){t.add(this),this.deps||(this.deps=w.pop()||new Set),this.deps.add(t)},t.prototype.forgetDeps=function(){var t=this;this.deps&&(this.deps.forEach((function(e){return e.delete(t)})),this.deps.clear(),w.push(this.deps),this.deps=null)},t.count=0,t}();function x(t,e){t.recomputing=!0,t.value.length=0;try{t.value[0]=t.fn.apply(null,e)}catch(e){t.value[1]=e}t.recomputing=!1}function k(t){return t.dirty||!(!t.dirtyChildren||!t.dirtyChildren.size)}function M(t){t.parents.forEach((function(e){return E(e,t)}))}function S(t){t.parents.forEach((function(e){return A(e,t)}))}function E(t,e){if(y(t.childValues.has(e)),y(k(e)),t.dirtyChildren){if(t.dirtyChildren.has(e))return}else t.dirtyChildren=w.pop()||new Set;t.dirtyChildren.add(e),M(t)}function A(t,e){y(t.childValues.has(e)),y(!k(e));var r,n,i,o=t.childValues.get(e);0===o.length?t.childValues.set(e,e.value.slice(0)):(r=o,n=e.value,(i=r.length)>0&&i===n.length&&r[i-1]===n[i-1]||t.setDirty()),C(t,e),k(t)||S(t)}function C(t,e){var r=t.dirtyChildren;r&&(r.delete(e),0===r.size&&(w.length<100&&w.push(r),t.dirtyChildren=null))}function D(t){t.childValues.size>0&&t.childValues.forEach((function(e,r){O(t,r)})),t.forgetDeps(),y(null===t.dirtyChildren)}function O(t,e){e.parents.delete(t),t.childValues.delete(e),C(t,e)}function P(t){var e=new Map,r=t&&t.subscribe;function n(t){var n=g.getValue();if(n){var i=e.get(t);i||e.set(t,i=new Set),n.dependOn(i),"function"==typeof r&&(v(i),i.unsubscribe=r(t))}}return n.dirty=function(t){var r=e.get(t);r&&(r.forEach((function(t){return t.setDirty()})),e.delete(t),v(r))},n}var R=new a("function"==typeof WeakMap);function I(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return R.lookupArray(t)}var T=new Set;function F(t,e){void 0===e&&(e=Object.create(null));var r=new m(e.max||Math.pow(2,16),(function(t){return t.dispose()})),n=e.keyArgs,i=e.makeCacheKey||I;function o(){var o=i.apply(null,n?n.apply(null,arguments):arguments);if(void 0===o)return t.apply(null,arguments);var s=r.get(o);s||(r.set(o,s=new _(t)),s.subscribe=e.subscribe);var a=s.recompute(Array.prototype.slice.call(arguments));return r.set(o,s),T.add(r),g.hasValue()||(T.forEach((function(t){return t.clean()})),T.clear()),a}function s(){var t=i.apply(null,arguments);if(void 0!==t)return r.get(t)}return o.dirty=function(){var t=s.apply(null,arguments);t&&t.setDirty()},o.peek=function(){var t=s.apply(null,arguments);if(t)return t.peek()},o.forget=function(){var t=i.apply(null,arguments);return void 0!==t&&r.delete(t)},o}var j,N=r(6313),B=function(){function t(){this.getFragmentDoc=F(N.Yk)}return t.prototype.recordOptimisticTransaction=function(t,e){this.performTransaction(t,e)},t.prototype.transformDocument=function(t){return t},t.prototype.identify=function(t){},t.prototype.gc=function(){return[]},t.prototype.modify=function(t){return!1},t.prototype.transformForLink=function(t){return t},t.prototype.readQuery=function(t,e){return void 0===e&&(e=!!t.optimistic),this.read({rootId:t.id||"ROOT_QUERY",query:t.query,variables:t.variables,returnPartialData:t.returnPartialData,optimistic:e})},t.prototype.readFragment=function(t,e){return void 0===e&&(e=!!t.optimistic),this.read({query:this.getFragmentDoc(t.fragment,t.fragmentName),variables:t.variables,rootId:t.id,returnPartialData:t.returnPartialData,optimistic:e})},t.prototype.writeQuery=function(t){return this.write({dataId:t.id||"ROOT_QUERY",result:t.data,query:t.query,variables:t.variables,broadcast:t.broadcast})},t.prototype.writeFragment=function(t){return this.write({dataId:t.id,result:t.data,variables:t.variables,query:this.getFragmentDoc(t.fragment,t.fragmentName),broadcast:t.broadcast})},t}();j||(j={});var U=function(t,e,r,n,i){this.message=t,this.path=e,this.query=r,this.clientOnly=n,this.variables=i},L=r(655),$=r(4361),z=r(1465),q=Object.prototype.hasOwnProperty;var V=/^[_a-z][_0-9a-z]*/i;function Y(t){var e=t.match(V);return e?e[0]:t}function Z(t,e,r){return!(!e||"object"!=typeof e)&&(Array.isArray(e)?e.every((function(e){return Z(t,e,r)})):t.selections.every((function(t){if((0,N.My)(t)&&(0,N.LZ)(t,r)){var n=(0,N.u2)(t);return q.call(e,n)&&(!t.selectionSet||Z(t.selectionSet,e[n],r))}return!0})))}function G(t){return null!==t&&"object"==typeof t&&!(0,N.hh)(t)&&!Array.isArray(t)}var X=Object.create(null),H=function(){return X},Q=Object.create(null),W=function(){function t(t,e){var r=this;this.policies=t,this.group=e,this.data=Object.create(null),this.rootIds=Object.create(null),this.refs=Object.create(null),this.getFieldValue=function(t,e){return(0,N.Jv)((0,N.hh)(t)?r.get(t.__ref,e):t&&t[e])},this.canRead=function(t){return(0,N.hh)(t)?r.has(t.__ref):"object"==typeof t},this.toReference=function(t,e){if("string"==typeof t)return(0,N.kQ)(t);if((0,N.hh)(t))return t;var n=r.policies.identify(t)[0];if(n){var i=(0,N.kQ)(n);return e&&r.merge(n,t),i}}}return t.prototype.toObject=function(){return(0,L.pi)({},this.data)},t.prototype.has=function(t){return void 0!==this.lookup(t,!0)},t.prototype.get=function(t,e){if(this.group.depend(t,e),q.call(this.data,t)){var r=this.data[t];if(r&&q.call(r,e))return r[e]}return"__typename"===e&&q.call(this.policies.rootTypenamesById,t)?this.policies.rootTypenamesById[t]:this instanceof tt?this.parent.get(t,e):void 0},t.prototype.lookup=function(t,e){return e&&this.group.depend(t,"__exists"),q.call(this.data,t)?this.data[t]:this instanceof tt?this.parent.lookup(t,e):this.policies.rootTypenamesById[t]?Object.create(null):void 0},t.prototype.merge=function(t,e){var r=this,n=this.lookup(t),i=new N.w0(et).merge(n,e);if(this.data[t]=i,i!==n&&(delete this.refs[t],this.group.caching)){var o=Object.create(null);n||(o.__exists=1),Object.keys(e).forEach((function(t){if(!n||n[t]!==i[t]){o[t]=1;var e=Y(t);e===t||r.policies.hasKeyArgs(i.__typename,e)||(o[e]=1),void 0!==i[t]||r instanceof tt||delete i[t]}})),Object.keys(o).forEach((function(e){return r.group.dirty(t,e)}))}},t.prototype.modify=function(t,e){var r=this,n=this.lookup(t);if(n){var i=Object.create(null),o=!1,s=!0,a={DELETE:X,INVALIDATE:Q,isReference:N.hh,toReference:this.toReference,canRead:this.canRead,readField:function(e,n){return r.policies.readField("string"==typeof e?{fieldName:e,from:n||(0,N.kQ)(t)}:e,{store:r})}};if(Object.keys(n).forEach((function(l){var u=Y(l),h=n[l];if(void 0!==h){var c="function"==typeof e?e:e[l]||e[u];if(c){var f=c===H?X:c((0,N.Jv)(h),(0,L.pi)((0,L.pi)({},a),{fieldName:u,storeFieldName:l,storage:r.getStorage(t,l)}));f===Q?r.group.dirty(t,l):(f===X&&(f=void 0),f!==h&&(i[l]=f,o=!0,h=f))}void 0!==h&&(s=!1)}})),o)return this.merge(t,i),s&&(this instanceof tt?this.data[t]=void 0:delete this.data[t],this.group.dirty(t,"__exists")),!0}return!1},t.prototype.delete=function(t,e,r){var n,i=this.lookup(t);if(i){var o=this.getFieldValue(i,"__typename"),s=e&&r?this.policies.getStoreFieldName({typename:o,fieldName:e,args:r}):e;return this.modify(t,s?((n={})[s]=H,n):H)}return!1},t.prototype.evict=function(t){var e=!1;return t.id&&(q.call(this.data,t.id)&&(e=this.delete(t.id,t.fieldName,t.args)),this instanceof tt&&(e=this.parent.evict(t)||e),(t.fieldName||e)&&this.group.dirty(t.id,t.fieldName||"__exists")),e},t.prototype.clear=function(){this.replace(null)},t.prototype.extract=function(){var t=this,e=this.toObject(),r=[];return this.getRootIdSet().forEach((function(e){q.call(t.policies.rootTypenamesById,e)||r.push(e)})),r.length&&(e.__META={extraRootIds:r.sort()}),e},t.prototype.replace=function(t){var e=this;if(Object.keys(this.data).forEach((function(r){t&&q.call(t,r)||e.delete(r)})),t){var r=t.__META,n=(0,L._T)(t,["__META"]);Object.keys(n).forEach((function(t){e.merge(t,n[t])})),r&&r.extraRootIds.forEach(this.retain,this)}},t.prototype.retain=function(t){return this.rootIds[t]=(this.rootIds[t]||0)+1},t.prototype.release=function(t){if(this.rootIds[t]>0){var e=--this.rootIds[t];return e||delete this.rootIds[t],e}return 0},t.prototype.getRootIdSet=function(t){return void 0===t&&(t=new Set),Object.keys(this.rootIds).forEach(t.add,t),this instanceof tt?this.parent.getRootIdSet(t):Object.keys(this.policies.rootTypenamesById).forEach(t.add,t),t},t.prototype.gc=function(){var t=this,e=this.getRootIdSet(),r=this.toObject();e.forEach((function(n){q.call(r,n)&&(Object.keys(t.findChildRefIds(n)).forEach(e.add,e),delete r[n])}));var n=Object.keys(r);if(n.length){for(var i=this;i instanceof tt;)i=i.parent;n.forEach((function(t){return i.delete(t)}))}return n},t.prototype.findChildRefIds=function(t){if(!q.call(this.refs,t)){var e=this.refs[t]=Object.create(null),r=new Set([this.data[t]]),n=function(t){return null!==t&&"object"==typeof t};r.forEach((function(t){(0,N.hh)(t)?e[t.__ref]=!0:n(t)&&Object.values(t).filter(n).forEach(r.add,r)}))}return this.refs[t]},t.prototype.makeCacheKey=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.group.keyMaker.lookupArray(t)},t}(),K=function(){function t(t){this.caching=t,this.d=null,this.keyMaker=new a(N.mr),this.d=t?P():null}return t.prototype.depend=function(t,e){if(this.d){this.d(J(t,e));var r=Y(e);r!==e&&this.d(J(t,r))}},t.prototype.dirty=function(t,e){this.d&&this.d.dirty(J(t,e))},t}();function J(t,e){return e+"#"+t}!function(t){var e=function(t){function e(e){var r=e.policies,n=e.resultCaching,i=void 0===n||n,o=e.seed,s=t.call(this,r,new K(i))||this;return s.storageTrie=new a(N.mr),s.sharedLayerGroup=new K(i),o&&s.replace(o),s}return(0,L.ZT)(e,t),e.prototype.addLayer=function(t,e){return new tt(t,this,e,this.sharedLayerGroup)},e.prototype.removeLayer=function(){return this},e.prototype.getStorage=function(){return this.storageTrie.lookupArray(arguments)},e}(t);t.Root=e}(W||(W={}));var tt=function(t){function e(e,r,n,i){var o=t.call(this,r.policies,i)||this;return o.id=e,o.parent=r,o.replay=n,o.group=i,n(o),o}return(0,L.ZT)(e,t),e.prototype.addLayer=function(t,r){return new e(t,this,r,this.group)},e.prototype.removeLayer=function(t){var e=this,r=this.parent.removeLayer(t);return t===this.id?(this.group.caching&&Object.keys(this.data).forEach((function(t){e.data[t]!==r.lookup(t)&&e.delete(t)})),r):r===this.parent?this:r.addLayer(this.id,this.replay)},e.prototype.toObject=function(){return(0,L.pi)((0,L.pi)({},this.parent.toObject()),this.data)},e.prototype.findChildRefIds=function(e){var r=this.parent.findChildRefIds(e);return q.call(this.data,e)?(0,L.pi)((0,L.pi)({},r),t.prototype.findChildRefIds.call(this,e)):r},e.prototype.getStorage=function(){for(var t=this.parent;t.parent;)t=t.parent;return t.getStorage.apply(t,arguments)},e}(W);function et(t,e,r){var n=t[r],i=e[r];return(0,z.D)(n,i)?n:i}function rt(t){return!!(t instanceof W&&t.group.caching)}function nt(t,e){return new U(t.message,e.path.slice(),e.query,e.clientOnly,e.variables)}var it=function(){function t(t){var e=this;this.config=t,this.executeSelectionSet=F((function(t){return e.execSelectionSetImpl(t)}),{keyArgs:function(t){return[t.selectionSet,t.objectOrReference,t.context]},makeCacheKey:function(t,e,r){if(rt(r.store))return r.store.makeCacheKey(t,(0,N.hh)(e)?e.__ref:e,r.varString)}}),this.knownResults=new WeakMap,this.executeSubSelectedArray=F((function(t){return e.execSubSelectedArrayImpl(t)}),{makeCacheKey:function(t){var e=t.field,r=t.array,n=t.context;if(rt(n.store))return n.store.makeCacheKey(e,r,n.varString)}}),this.config=(0,L.pi)({addTypename:!0},t)}return t.prototype.diffQueryAgainstStore=function(t){var e=t.store,r=t.query,n=t.rootId,i=void 0===n?"ROOT_QUERY":n,o=t.variables,s=t.returnPartialData,a=void 0===s||s,l=this.config.cache.policies;o=(0,L.pi)((0,L.pi)({},(0,N.O4)((0,N.iW)(r))),o);var u=this.executeSelectionSet({selectionSet:(0,N.p$)(r).selectionSet,objectOrReference:(0,N.kQ)(i),context:{store:e,query:r,policies:l,variables:o,varString:JSON.stringify(o),fragmentMap:(0,N.F)((0,N.kU)(r)),path:[],clientOnly:!1}}),h=u.missing&&u.missing.length>0;if(h&&!a)throw u.missing[0];return{result:u.result,missing:u.missing,complete:!h}},t.prototype.isFresh=function(t,e,r,n){if(rt(n.store)&&this.knownResults.get(t)===r){var i=this.executeSelectionSet.peek(r,e,n);if(i&&t===i.result)return!0}return!1},t.prototype.execSelectionSetImpl=function(t){var e=this,r=t.selectionSet,n=t.objectOrReference,i=t.context;if((0,N.hh)(n)&&!i.policies.rootTypenamesById[n.__ref]&&!i.store.has(n.__ref))return{result:{},missing:[nt(new $.ej(4),i)]};var o=i.variables,s=i.policies,a=i.store,l=[],u={result:null},h=a.getFieldValue(n,"__typename");function c(){return u.missing||(u.missing=[])}function f(t){var e;return t.missing&&(e=c()).push.apply(e,t.missing),t.result}this.config.addTypename&&"string"==typeof h&&!s.rootIdsByTypename[h]&&l.push({__typename:h});var d=new Set(r.selections);return d.forEach((function(t){var r;if((0,N.LZ)(t,o))if((0,N.My)(t)){var a=s.readField({fieldName:t.name.value,field:t,variables:i.variables,from:n},i),u=(0,N.u2)(t);i.path.push(u);var p=i.clientOnly;i.clientOnly=p||!(!t.directives||!t.directives.some((function(t){return"client"===t.name.value}))),void 0===a?N.Gw.added(t)||c().push(nt(new $.ej(5),i)):Array.isArray(a)?a=f(e.executeSubSelectedArray({field:t,array:a,context:i})):t.selectionSet&&null!=a&&(a=f(e.executeSelectionSet({selectionSet:t.selectionSet,objectOrReference:a,context:i}))),void 0!==a&&l.push(((r={})[u]=a,r)),i.clientOnly=p,(0,$.kG)(i.path.pop()===u)}else{var m=(0,N.hi)(t,i.fragmentMap);m&&s.fragmentMatches(m,h)&&m.selectionSet.selections.forEach(d.add,d)}})),u.result=(0,N.bw)(l),this.knownResults.set(u.result,r),u},t.prototype.execSubSelectedArrayImpl=function(t){var e,r=this,n=t.field,i=t.array,o=t.context;function s(t,r){return t.missing&&(e=e||[]).push.apply(e,t.missing),(0,$.kG)(o.path.pop()===r),t.result}return n.selectionSet&&(i=i.filter(o.store.canRead)),{result:i=i.map((function(t,e){return null===t?null:(o.path.push(e),Array.isArray(t)?s(r.executeSubSelectedArray({field:n,array:t,context:o}),e):n.selectionSet?s(r.executeSelectionSet({selectionSet:n.selectionSet,objectOrReference:t,context:o}),e):((0,$.kG)(o.path.pop()===e),t))})),missing:e}},t}();var ot=function(){function t(t,e){this.cache=t,this.reader=e}return t.prototype.writeToStore=function(t){var e=t.query,r=t.result,n=t.dataId,i=t.store,o=t.variables,s=(0,N.$H)(e),a=new N.w0;o=(0,L.pi)((0,L.pi)({},(0,N.O4)(s)),o);var l=this.processSelectionSet({result:r||Object.create(null),dataId:n,selectionSet:s.selectionSet,mergeTree:{map:new Map},context:{store:i,written:Object.create(null),merge:function(t,e){return a.merge(t,e)},variables:o,varString:JSON.stringify(o),fragmentMap:(0,N.F)((0,N.kU)(e))}});if(!(0,N.hh)(l))throw new $.ej(7);return i.retain(l.__ref),l},t.prototype.processSelectionSet=function(t){var e=this,r=t.dataId,n=t.result,i=t.selectionSet,o=t.context,s=t.mergeTree,a=this.cache.policies,l=a.identify(n,i,o.fragmentMap),u=l[0],h=l[1];if("string"==typeof(r=r||u)){var c=o.written[r]||(o.written[r]=[]),f=(0,N.kQ)(r);if(c.indexOf(i)>=0)return f;if(c.push(i),this.reader&&this.reader.isFresh(n,f,i,o))return f}var d=Object.create(null);h&&(d=o.merge(d,h));var p=r&&a.rootTypenamesById[r]||(0,N.qw)(n,i,o.fragmentMap)||r&&o.store.get(r,"__typename");"string"==typeof p&&(d.__typename=p);var m=new Set(i.selections);if(m.forEach((function(t){var r;if((0,N.LZ)(t,o.variables))if((0,N.My)(t)){var i=(0,N.u2)(t),l=n[i];if(void 0!==l){var u=a.getStoreFieldName({typename:p,fieldName:t.name.value,field:t,variables:o.variables}),h=at(s,u),c=e.processFieldValue(l,t,o,h),f=t.selectionSet&&o.store.getFieldValue(c,"__typename")||void 0,g=a.getMergeFunction(p,t.name.value,f);g?h.info={field:t,typename:p,merge:g}:lt(s,u),d=o.merge(d,((r={})[u]=c,r))}else if(a.usingPossibleTypes&&!(0,N.FS)(["defer","client"],t))throw new $.ej(8)}else{var v=(0,N.hi)(t,o.fragmentMap);v&&a.fragmentMatches(v,p,n,o.variables)&&v.selectionSet.selections.forEach(m.add,m)}})),"string"==typeof r){var g=(0,N.kQ)(r);return s.map.size&&(d=this.applyMerges(s,g,d,o)),o.store.merge(r,d),g}return d},t.prototype.processFieldValue=function(t,e,r,n){var i=this;return e.selectionSet&&null!==t?Array.isArray(t)?t.map((function(t,o){var s=i.processFieldValue(t,e,r,at(n,o));return lt(n,o),s})):this.processSelectionSet({result:t,selectionSet:e.selectionSet,context:r,mergeTree:n}):t},t.prototype.applyMerges=function(t,e,r,n,i){var o,s=this;if(t.map.size&&!(0,N.hh)(r)){var a,l=Array.isArray(r)||!(0,N.hh)(e)&&!G(e)?void 0:e,u=r;l&&!i&&(i=[(0,N.hh)(l)?l.__ref:l]);var h=function(t,e){return Array.isArray(t)?"number"==typeof e?t[e]:void 0:n.store.getFieldValue(t,String(e))};t.map.forEach((function(t,e){i&&i.push(e);var r=h(l,e),o=h(u,e),c=s.applyMerges(t,r,o,n,i);c!==o&&(a=a||new Map).set(e,c),i&&(0,$.kG)(i.pop()===e)})),a&&(r=Array.isArray(u)?u.slice(0):(0,L.pi)({},u),a.forEach((function(t,e){r[e]=t})))}return t.info?this.cache.policies.runMergeFunction(e,r,t.info,n,i&&(o=n.store).getStorage.apply(o,i)):r},t}(),st=[];function at(t,e){var r=t.map;return r.has(e)||r.set(e,st.pop()||{map:new Map}),r.get(e)}function lt(t,e){var r=t.map,n=r.get(e);!n||n.info||n.map.size||(st.push(n),r.delete(e))}new Set;var ut=new d;function ht(t,e){if(t.size){var r=[];t.forEach((function(t){return r.push(t)})),t.clear(),r.forEach(e)}}var ct=new WeakMap;function ft(t){var e=ct.get(t);return e||ct.set(t,e={vars:new Set,dep:P()}),e}function dt(t){var e=new Set,r=new Set,n=function(o){if(arguments.length>0)t!==o&&(t=o,e.forEach((function(t){ft(t).dep.dirty(n),pt(t)})),ht(r,(function(e){return e(t)})));else{var s=ut.getValue();s&&(i(s),ft(s).dep(n))}return t};n.onNextChange=function(t){return r.add(t),function(){r.delete(t)}};var i=n.attachCache=function(t){return e.add(t),ft(t).vars.add(n),n};return n.forgetCache=function(t){return e.delete(t)},n}function pt(t){t.broadcastWatches&&t.broadcastWatches()}function mt(t){return void 0!==t.args?t.args:t.field?(0,N.NC)(t.field,t.variables):null}var gt=function(t,e){var r=t.__typename,n=t.id,i=t._id;if("string"==typeof r&&(e&&(e.keyObject=void 0!==n?{id:n}:void 0!==i?{_id:i}:void 0),void 0===n&&(n=i),void 0!==n))return r+":"+("number"==typeof n||"string"==typeof n?n:JSON.stringify(n))},vt=function(){},wt=function(t,e){return e.fieldName},yt=function(t,e,r){return(0,r.mergeObjects)(t,e)},bt=function(t,e){return e},_t=function(){function t(t){this.config=t,this.typePolicies=Object.create(null),this.toBeAdded=Object.create(null),this.supertypeMap=new Map,this.fuzzySubtypes=new Map,this.rootIdsByTypename=Object.create(null),this.rootTypenamesById=Object.create(null),this.usingPossibleTypes=!1,this.config=(0,L.pi)({dataIdFromObject:gt},t),this.cache=this.config.cache,this.setRootTypename("Query"),this.setRootTypename("Mutation"),this.setRootTypename("Subscription"),t.possibleTypes&&this.addPossibleTypes(t.possibleTypes),t.typePolicies&&this.addTypePolicies(t.typePolicies)}return t.prototype.identify=function(t,e,r){var n=e&&r?(0,N.qw)(t,e,r):t.__typename;if(n===this.rootTypenamesById.ROOT_QUERY)return["ROOT_QUERY"];for(var i,o={typename:n,selectionSet:e,fragmentMap:r},s=n&&this.getTypePolicy(n),a=s&&s.keyFn||this.config.dataIdFromObject;a;){var l=a(t,o);if(!Array.isArray(l)){i=l;break}a=St(l)}return i=i&&String(i),o.keyObject?[i,o.keyObject]:[i]},t.prototype.addTypePolicies=function(t){var e=this;Object.keys(t).forEach((function(r){var n=t[r],i=n.queryType,o=n.mutationType,s=n.subscriptionType,a=(0,L._T)(n,["queryType","mutationType","subscriptionType"]);i&&e.setRootTypename("Query",r),o&&e.setRootTypename("Mutation",r),s&&e.setRootTypename("Subscription",r),q.call(e.toBeAdded,r)?e.toBeAdded[r].push(a):e.toBeAdded[r]=[a]}))},t.prototype.updateTypePolicy=function(t,e){var r=this,n=this.getTypePolicy(t),i=e.keyFields,o=e.fields;function s(t,e){t.merge="function"==typeof e?e:!0===e?yt:!1===e?bt:t.merge}s(n,e.merge),n.keyFn=!1===i?vt:Array.isArray(i)?St(i):"function"==typeof i?i:n.keyFn,o&&Object.keys(o).forEach((function(e){var n=r.getFieldPolicy(t,e,!0),i=o[e];if("function"==typeof i)n.read=i;else{var a=i.keyArgs,l=i.read,u=i.merge;n.keyFn=!1===a?wt:Array.isArray(a)?Mt(a):"function"==typeof a?a:n.keyFn,"function"==typeof l&&(n.read=l),s(n,u)}n.read&&n.merge&&(n.keyFn=n.keyFn||wt)}))},t.prototype.setRootTypename=function(t,e){void 0===e&&(e=t);var r="ROOT_"+t.toUpperCase(),n=this.rootTypenamesById[r];e!==n&&((0,$.kG)(!n||n===t,1),n&&delete this.rootIdsByTypename[n],this.rootIdsByTypename[e]=r,this.rootTypenamesById[r]=e)},t.prototype.addPossibleTypes=function(t){var e=this;this.usingPossibleTypes=!0,Object.keys(t).forEach((function(r){e.getSupertypeSet(r,!0),t[r].forEach((function(t){e.getSupertypeSet(t,!0).add(r);var n=t.match(V);n&&n[0]===t||e.fuzzySubtypes.set(t,new RegExp(t))}))}))},t.prototype.getTypePolicy=function(t){var e=this;if(!q.call(this.typePolicies,t)){var r=this.typePolicies[t]=Object.create(null);r.fields=Object.create(null);var n=this.supertypeMap.get(t);n&&n.size&&n.forEach((function(t){var n=e.getTypePolicy(t),i=n.fields,o=(0,L._T)(n,["fields"]);Object.assign(r,o),Object.assign(r.fields,i)}))}var i=this.toBeAdded[t];return i&&i.length&&this.updateTypePolicy(t,N.oA.apply(void 0,i.splice(0))),this.typePolicies[t]},t.prototype.getFieldPolicy=function(t,e,r){if(t){var n=this.getTypePolicy(t).fields;return n[e]||r&&(n[e]=Object.create(null))}},t.prototype.getSupertypeSet=function(t,e){var r=this.supertypeMap.get(t);return!r&&e&&this.supertypeMap.set(t,r=new Set),r},t.prototype.fragmentMatches=function(t,e,r,n){var i=this;if(!t.typeCondition)return!0;if(!e)return!1;var o=t.typeCondition.name.value;if(e===o)return!0;if(this.usingPossibleTypes&&this.supertypeMap.has(o))for(var s=this.getSupertypeSet(e,!0),a=[s],l=function(t){var e=i.getSupertypeSet(t,!1);e&&e.size&&a.indexOf(e)<0&&a.push(e)},u=!(!r||!this.fuzzySubtypes.size),h=0;h<a.length;++h){var c=a[h];if(c.has(o))return s.has(o)||s.add(o),!0;c.forEach(l),u&&h===a.length-1&&Z(t.selectionSet,r,n)&&(u=!1,!0,this.fuzzySubtypes.forEach((function(t,r){var n=e.match(t);n&&n[0]===e&&l(r)})))}return!1},t.prototype.hasKeyArgs=function(t,e){var r=this.getFieldPolicy(t,e,!1);return!(!r||!r.keyFn)},t.prototype.getStoreFieldName=function(t){var e,r=t.typename,n=t.fieldName,i=this.getFieldPolicy(r,n,!1),o=i&&i.keyFn;if(o&&r)for(var s={typename:r,fieldName:n,field:t.field||null,variables:t.variables},a=mt(t);o;){var l=o(a,s);if(!Array.isArray(l)){e=l||n;break}o=Mt(l)}return void 0===e&&(e=t.field?(0,N.vf)(t.field,t.variables):(0,N.PT)(n,mt(t))),n===Y(e)?e:n+":"+e},t.prototype.readField=function(t,e){var r=t.from;if(r&&(t.field||t.fieldName)){if(void 0===t.typename){var n=e.store.getFieldValue(r,"__typename");n&&(t.typename=n)}var i=this.getStoreFieldName(t),o=Y(i),s=e.store.getFieldValue(r,i),a=this.getFieldPolicy(t.typename,o,!1),l=a&&a.read;if(l){var u=xt(this,r,t,e,e.store.getStorage((0,N.hh)(r)?r.__ref:r,i));return ut.withValue(this.cache,l,[s,u])}return s}},t.prototype.getMergeFunction=function(t,e,r){var n=this.getFieldPolicy(t,e,!1),i=n&&n.merge;return!i&&r&&(i=(n=this.getTypePolicy(r))&&n.merge),i},t.prototype.runMergeFunction=function(t,e,r,n,i){var o=r.field,s=r.typename,a=r.merge;return a===yt?kt(n.store.getFieldValue)(t,e):a===bt?e:a(t,e,xt(this,void 0,{typename:s,fieldName:o.name.value,field:o,variables:n.variables},n,i||Object.create(null)))},t}();function xt(t,e,r,n,i){var o=t.getStoreFieldName(r),s=Y(o),a=r.variables||n.variables,l=n.store,u=l.getFieldValue,h=l.toReference,c=l.canRead;return{args:mt(r),field:r.field||null,fieldName:s,storeFieldName:o,variables:a,isReference:N.hh,toReference:h,storage:i,cache:t.cache,canRead:c,readField:function(r,i){var o="string"==typeof r?{fieldName:r,from:i}:(0,L.pi)({},r);return void 0===o.from&&(o.from=e),void 0===o.variables&&(o.variables=a),t.readField(o,n)},mergeObjects:kt(u)}}function kt(t){return function(e,r){if(Array.isArray(e)||Array.isArray(r))throw new $.ej(2);if(e&&"object"==typeof e&&r&&"object"==typeof r){var n=t(e,"__typename"),i=t(r,"__typename");return!(n&&i&&n!==i)&&G(e)&&G(r)?(0,L.pi)((0,L.pi)({},e),r):r}return r}}function Mt(t){return function(e,r){return e?r.fieldName+":"+JSON.stringify(At(e,t,!1)):r.fieldName}}function St(t){var e=new a(N.mr);return function(r,n){var i;if(n.selectionSet&&n.fragmentMap){var o=e.lookupArray([n.selectionSet,n.fragmentMap]);i=o.aliasMap||(o.aliasMap=Et(n.selectionSet,n.fragmentMap))}var s=n.keyObject=At(r,t,!0,i);return n.typename+":"+JSON.stringify(s)}}function Et(t,e){var r=Object.create(null),n=new Set([t]);return n.forEach((function(t){t.selections.forEach((function(t){if((0,N.My)(t)){if(t.alias){var i=t.alias.value,o=t.name.value;if(o!==i)(r.aliases||(r.aliases=Object.create(null)))[o]=i}if(t.selectionSet)(r.subsets||(r.subsets=Object.create(null)))[t.name.value]=Et(t.selectionSet,e)}else{var s=(0,N.hi)(t,e);s&&n.add(s.selectionSet)}}))})),r}function At(t,e,r,n){var i,o=Object.create(null);return e.forEach((function(e){if(Array.isArray(e)){if("string"==typeof i){var s=n&&n.subsets,a=s&&s[i];o[i]=At(t[i],e,r,a)}}else{var l=n&&n.aliases,u=l&&l[e]||e;q.call(t,u)?o[i=e]=t[u]:((0,$.kG)(!r,3),i=void 0)}})),o}var Ct={dataIdFromObject:gt,addTypename:!0,resultCaching:!0,typePolicies:{}},Dt=function(t){function e(e){void 0===e&&(e={});var r=t.call(this)||this;return r.watches=new Set,r.typenameDocumentCache=new Map,r.makeVar=dt,r.txCount=0,r.maybeBroadcastWatch=F((function(t,e){return r.broadcastWatch.call(r,t,!!e)}),{makeCacheKey:function(t){var e=t.optimistic?r.optimisticData:r.data;if(rt(e)){var n=t.optimistic,i=t.rootId,o=t.variables;return e.makeCacheKey(t.query,t.callback,JSON.stringify({optimistic:n,rootId:i,variables:o}))}}}),r.watchDep=P(),r.config=(0,L.pi)((0,L.pi)({},Ct),e),r.addTypename=!!r.config.addTypename,r.policies=new _t({cache:r,dataIdFromObject:r.config.dataIdFromObject,possibleTypes:r.config.possibleTypes,typePolicies:r.config.typePolicies}),r.data=new W.Root({policies:r.policies,resultCaching:r.config.resultCaching}),r.optimisticData=r.data,r.storeWriter=new ot(r,r.storeReader=new it({cache:r,addTypename:r.addTypename})),r}return(0,L.ZT)(e,t),e.prototype.restore=function(t){return t&&this.data.replace(t),this},e.prototype.extract=function(t){return void 0===t&&(t=!1),(t?this.optimisticData:this.data).extract()},e.prototype.read=function(t){var e=t.returnPartialData,r=void 0!==e&&e;try{return this.storeReader.diffQueryAgainstStore({store:t.optimistic?this.optimisticData:this.data,query:t.query,variables:t.variables,rootId:t.rootId,config:this.config,returnPartialData:r}).result||null}catch(t){if(t instanceof U)return null;throw t}},e.prototype.write=function(t){try{return++this.txCount,this.storeWriter.writeToStore({store:this.data,query:t.query,result:t.result,dataId:t.dataId,variables:t.variables})}finally{--this.txCount||!1===t.broadcast||this.broadcastWatches()}},e.prototype.modify=function(t){if(q.call(t,"id")&&!t.id)return!1;var e=t.optimistic?this.optimisticData:this.data;try{return++this.txCount,e.modify(t.id||"ROOT_QUERY",t.fields)}finally{--this.txCount||!1===t.broadcast||this.broadcastWatches()}},e.prototype.diff=function(t){return this.storeReader.diffQueryAgainstStore({store:t.optimistic?this.optimisticData:this.data,rootId:t.id||"ROOT_QUERY",query:t.query,variables:t.variables,returnPartialData:t.returnPartialData,config:this.config})},e.prototype.watch=function(t){var e,r=this;return this.watches.size||ft(e=this).vars.forEach((function(t){return t.attachCache(e)})),this.watches.add(t),t.immediate&&this.maybeBroadcastWatch(t),function(){r.watches.delete(t)&&!r.watches.size&&function(t){ft(t).vars.forEach((function(e){return e.forgetCache(t)}))}(r),r.watchDep.dirty(t),r.maybeBroadcastWatch.forget(t)}},e.prototype.gc=function(){return this.optimisticData.gc()},e.prototype.retain=function(t,e){return(e?this.optimisticData:this.data).retain(t)},e.prototype.release=function(t,e){return(e?this.optimisticData:this.data).release(t)},e.prototype.identify=function(t){return(0,N.hh)(t)?t.__ref:this.policies.identify(t)[0]},e.prototype.evict=function(t){if(!t.id){if(q.call(t,"id"))return!1;t=(0,L.pi)((0,L.pi)({},t),{id:"ROOT_QUERY"})}try{return++this.txCount,this.optimisticData.evict(t)}finally{--this.txCount||!1===t.broadcast||this.broadcastWatches()}},e.prototype.reset=function(){return this.data.clear(),this.optimisticData=this.data,this.broadcastWatches(),Promise.resolve()},e.prototype.removeOptimistic=function(t){var e=this.optimisticData.removeLayer(t);e!==this.optimisticData&&(this.optimisticData=e,this.broadcastWatches())},e.prototype.performTransaction=function(t,e){var r=this,n=function(e){var n=r,i=n.data,o=n.optimisticData;++r.txCount,e&&(r.data=r.optimisticData=e);try{t(r)}finally{--r.txCount,r.data=i,r.optimisticData=o}},i=!1;"string"==typeof e?(this.optimisticData=this.optimisticData.addLayer(e,n),i=!0):null===e?n(this.data):n(),this.broadcastWatches(i)},e.prototype.transformDocument=function(t){if(this.addTypename){var e=this.typenameDocumentCache.get(t);return e||(e=(0,N.Gw)(t),this.typenameDocumentCache.set(t,e),this.typenameDocumentCache.set(e,e)),e}return t},e.prototype.broadcastWatches=function(t){var e=this;this.txCount||this.watches.forEach((function(r){return e.maybeBroadcastWatch(r,t)}))},e.prototype.broadcastWatch=function(t,e){this.watchDep.dirty(t),this.watchDep(t);var r=this.diff({query:t.query,variables:t.variables,optimistic:t.optimistic});t.optimistic&&e&&(r.fromOptimisticTransaction=!0),t.callback(r)},e}(B)},6258:()=>{},5765:(t,e,r)=>{"use strict";r.d(e,{f:()=>k,J:()=>x});var n=r(655),i=r(4361),o=r(1707),s=r(6313),a=r(6593),l=r(1465),u=r(1498),h=r(6282),c=r(5942),f=r(7636),d=r(226),p=function(){function t(t){var e=t.cache,r=t.client,n=t.resolvers,i=t.fragmentMatcher;this.cache=e,r&&(this.client=r),n&&this.addResolvers(n),i&&this.setFragmentMatcher(i)}return t.prototype.addResolvers=function(t){var e=this;this.resolvers=this.resolvers||{},Array.isArray(t)?t.forEach((function(t){e.resolvers=(0,s.Ee)(e.resolvers,t)})):this.resolvers=(0,s.Ee)(this.resolvers,t)},t.prototype.setResolvers=function(t){this.resolvers={},this.addResolvers(t)},t.prototype.getResolvers=function(){return this.resolvers||{}},t.prototype.runResolvers=function(t){var e=t.document,r=t.remoteResult,i=t.context,o=t.variables,s=t.onlyRunForcedResolvers,a=void 0!==s&&s;return(0,n.mG)(this,void 0,void 0,(function(){return(0,n.Jh)(this,(function(t){return e?[2,this.resolveDocument(e,r.data,i,o,this.fragmentMatcher,a).then((function(t){return(0,n.pi)((0,n.pi)({},r),{data:t.result})}))]:[2,r]}))}))},t.prototype.setFragmentMatcher=function(t){this.fragmentMatcher=t},t.prototype.getFragmentMatcher=function(){return this.fragmentMatcher},t.prototype.clientQuery=function(t){return(0,s.FS)(["client"],t)&&this.resolvers?t:null},t.prototype.serverQuery=function(t){return(0,s.ob)(t)},t.prototype.prepareContext=function(t){var e=this.cache;return(0,n.pi)((0,n.pi)({},t),{cache:e,getCacheKey:function(t){return e.identify(t)}})},t.prototype.addExportedVariables=function(t,e,r){return void 0===e&&(e={}),void 0===r&&(r={}),(0,n.mG)(this,void 0,void 0,(function(){return(0,n.Jh)(this,(function(i){return t?[2,this.resolveDocument(t,this.buildRootValueFromCache(t,e)||{},this.prepareContext(r),e).then((function(t){return(0,n.pi)((0,n.pi)({},e),t.exportedVariables)}))]:[2,(0,n.pi)({},e)]}))}))},t.prototype.shouldForceResolvers=function(t){var e=!1;return(0,f.Vn)(t,{Directive:{enter:function(t){if("client"===t.name.value&&t.arguments&&(e=t.arguments.some((function(t){return"always"===t.name.value&&"BooleanValue"===t.value.kind&&!0===t.value.value}))))return f.$_}}}),e},t.prototype.buildRootValueFromCache=function(t,e){return this.cache.diff({query:(0,s.aL)(t),variables:e,returnPartialData:!0,optimistic:!1}).result},t.prototype.resolveDocument=function(t,e,r,i,o,a){return void 0===r&&(r={}),void 0===i&&(i={}),void 0===o&&(o=function(){return!0}),void 0===a&&(a=!1),(0,n.mG)(this,void 0,void 0,(function(){var l,u,h,c,f,d,p,m,g;return(0,n.Jh)(this,(function(v){return l=(0,s.p$)(t),u=(0,s.kU)(t),h=(0,s.F)(u),c=l.operation,f=c?c.charAt(0).toUpperCase()+c.slice(1):"Query",p=(d=this).cache,m=d.client,g={fragmentMap:h,context:(0,n.pi)((0,n.pi)({},r),{cache:p,client:m}),variables:i,fragmentMatcher:o,defaultOperationType:f,exportedVariables:{},onlyRunForcedResolvers:a},[2,this.resolveSelectionSet(l.selectionSet,e,g).then((function(t){return{result:t,exportedVariables:g.exportedVariables}}))]}))}))},t.prototype.resolveSelectionSet=function(t,e,r){return(0,n.mG)(this,void 0,void 0,(function(){var o,a,l,u,h,c=this;return(0,n.Jh)(this,(function(f){return o=r.fragmentMap,a=r.context,l=r.variables,u=[e],h=function(t){return(0,n.mG)(c,void 0,void 0,(function(){var h,c;return(0,n.Jh)(this,(function(n){return(0,s.LZ)(t,l)?(0,s.My)(t)?[2,this.resolveField(t,e,r).then((function(e){var r;void 0!==e&&u.push(((r={})[(0,s.u2)(t)]=e,r))}))]:((0,s.Ao)(t)?h=t:(h=o[t.name.value],(0,i.kG)(h,11)),h&&h.typeCondition&&(c=h.typeCondition.name.value,r.fragmentMatcher(e,c,a))?[2,this.resolveSelectionSet(h.selectionSet,e,r).then((function(t){u.push(t)}))]:[2]):[2]}))}))},[2,Promise.all(t.selections.map(h)).then((function(){return(0,s.bw)(u)}))]}))}))},t.prototype.resolveField=function(t,e,r){return(0,n.mG)(this,void 0,void 0,(function(){var i,o,a,l,u,h,c,f,p,m=this;return(0,n.Jh)(this,(function(n){return i=r.variables,o=t.name.value,a=(0,s.u2)(t),l=o!==a,u=e[a]||e[o],h=Promise.resolve(u),r.onlyRunForcedResolvers&&!this.shouldForceResolvers(t)||(c=e.__typename||r.defaultOperationType,(f=this.resolvers&&this.resolvers[c])&&(p=f[l?o:a])&&(h=Promise.resolve(d.ab.withValue(this.cache,p,[e,(0,s.NC)(t,i),r.context,{field:t,fragmentMap:r.fragmentMap}])))),[2,h.then((function(e){return void 0===e&&(e=u),t.directives&&t.directives.forEach((function(t){"export"===t.name.value&&t.arguments&&t.arguments.forEach((function(t){"as"===t.name.value&&"StringValue"===t.value.kind&&(r.exportedVariables[t.value.value]=e)}))})),t.selectionSet?null==e?e:Array.isArray(e)?m.resolveSubSelectedArray(t,e,r):t.selectionSet?m.resolveSelectionSet(t.selectionSet,e,r):void 0:e}))]}))}))},t.prototype.resolveSubSelectedArray=function(t,e,r){var n=this;return Promise.all(e.map((function(e){return null===e?null:Array.isArray(e)?n.resolveSubSelectedArray(t,e,r):t.selectionSet?n.resolveSelectionSet(t.selectionSet,e,r):void 0})))},t}(),m=new(s.mr?WeakMap:Map);function g(t,e){var r=t[e];"function"==typeof r&&(t[e]=function(){return m.set(t,(m.get(t)+1)%1e15),r.apply(this,arguments)})}function v(t){t.notifyTimeout&&(clearTimeout(t.notifyTimeout),t.notifyTimeout=void 0)}var w=function(){function t(t){this.cache=t,this.listeners=new Set,this.document=null,this.lastRequestId=1,this.subscriptions=new Set,this.stopped=!1,this.dirty=!1,this.diff=null,this.observableQuery=null,m.has(t)||(m.set(t,0),g(t,"evict"),g(t,"modify"),g(t,"reset"))}return t.prototype.init=function(t){var e=t.networkStatus||c.I.loading;return this.variables&&this.networkStatus!==c.I.loading&&!(0,l.D)(this.variables,t.variables)&&(e=c.I.setVariables),(0,l.D)(t.variables,this.variables)||(this.diff=null),Object.assign(this,{document:t.document,variables:t.variables,networkError:null,graphQLErrors:this.graphQLErrors||[],networkStatus:e}),t.observableQuery&&this.setObservableQuery(t.observableQuery),t.lastRequestId&&(this.lastRequestId=t.lastRequestId),this},t.prototype.reset=function(){v(this),this.diff=null,this.dirty=!1},t.prototype.getDiff=function(t){return void 0===t&&(t=this.variables),this.diff&&(0,l.D)(t,this.variables)?this.diff:(this.updateWatch(this.variables=t),this.diff=this.cache.diff({query:this.document,variables:t,returnPartialData:!0,optimistic:!0}))},t.prototype.setDiff=function(t){var e=this,r=this.diff;this.diff=t,this.dirty||(t&&t.result)===(r&&r.result)||(this.dirty=!0,this.notifyTimeout||(this.notifyTimeout=setTimeout((function(){return e.notify()}),0)))},t.prototype.setObservableQuery=function(t){var e=this;t!==this.observableQuery&&(this.oqListener&&this.listeners.delete(this.oqListener),this.observableQuery=t,t?(t.queryInfo=this,this.listeners.add(this.oqListener=function(){e.getDiff().fromOptimisticTransaction?t.observe():t.reobserve()})):delete this.oqListener)},t.prototype.notify=function(){var t=this;v(this),this.shouldNotify()&&this.listeners.forEach((function(e){return e(t)})),this.dirty=!1},t.prototype.shouldNotify=function(){if(!this.dirty||!this.listeners.size)return!1;if((0,c.O)(this.networkStatus)&&this.observableQuery){var t=this.observableQuery.options.fetchPolicy;if("cache-only"!==t&&"cache-and-network"!==t)return!1}return!0},t.prototype.stop=function(){if(!this.stopped){this.stopped=!0,this.cancel(),delete this.cancel,this.subscriptions.forEach((function(t){return t.unsubscribe()}));var t=this.observableQuery;t&&t.stopPolling()}},t.prototype.cancel=function(){},t.prototype.updateWatch=function(t){var e=this;void 0===t&&(t=this.variables);var r=this.observableQuery;r&&"no-cache"===r.options.fetchPolicy||this.lastWatch&&this.lastWatch.query===this.document&&(0,l.D)(t,this.lastWatch.variables)||(this.cancel(),this.cancel=this.cache.watch(this.lastWatch={query:this.document,variables:t,optimistic:!0,callback:function(t){return e.setDiff(t)}}))},t.prototype.shouldWrite=function(t,e){var r=this.lastWrite;return!(r&&r.dmCount===m.get(this.cache)&&(0,l.D)(e,r.variables)&&(0,l.D)(t.data,r.result.data))},t.prototype.markResult=function(t,e,r){var n=this;this.graphQLErrors=(0,s.Of)(t.errors)?t.errors:[],this.reset(),"no-cache"===e.fetchPolicy?this.diff={result:t.data,complete:!0}:!this.stopped&&r&&(y(t,e.errorPolicy)?this.cache.performTransaction((function(r){if(n.shouldWrite(t,e.variables))r.writeQuery({query:n.document,data:t.data,variables:e.variables}),n.lastWrite={result:t,variables:e.variables,dmCount:m.get(n.cache)};else if(n.diff&&n.diff.complete)return void(t.data=n.diff.result);var i=r.diff({query:n.document,variables:e.variables,returnPartialData:!0,optimistic:!0});n.stopped||n.updateWatch(e.variables),n.diff=i,i.complete&&(t.data=i.result)})):this.lastWrite=void 0)},t.prototype.markReady=function(){return this.networkError=null,this.networkStatus=c.I.ready},t.prototype.markError=function(t){return this.networkStatus=c.I.error,this.lastWrite=void 0,this.reset(),t.graphQLErrors&&(this.graphQLErrors=t.graphQLErrors),t.networkError&&(this.networkError=t.networkError),t},t}();function y(t,e){void 0===e&&(e="none");var r="ignore"===e||"all"===e,n=!(0,s.d2)(t);return!n&&r&&t.data&&(n=!0),n}var b=Object.prototype.hasOwnProperty,_=function(){function t(t){var e=t.cache,r=t.link,n=t.queryDeduplication,i=void 0!==n&&n,o=t.onBroadcast,a=t.ssrMode,l=void 0!==a&&a,u=t.clientAwareness,h=void 0===u?{}:u,c=t.localState,f=t.assumeImmutableResults;this.clientAwareness={},this.queries=new Map,this.fetchCancelFns=new Map,this.transformCache=new(s.mr?WeakMap:Map),this.queryIdCounter=1,this.requestIdCounter=1,this.mutationIdCounter=1,this.inFlightLinkObservables=new Map,this.cache=e,this.link=r,this.queryDeduplication=i,this.clientAwareness=h,this.localState=c||new p({cache:e}),this.ssrMode=l,this.assumeImmutableResults=!!f,(this.onBroadcast=o)&&(this.mutationStore=Object.create(null))}return t.prototype.stop=function(){var t=this;this.queries.forEach((function(e,r){t.stopQueryNoBroadcast(r)})),this.cancelPendingFetches(new i.ej(12))},t.prototype.cancelPendingFetches=function(t){this.fetchCancelFns.forEach((function(e){return e(t)})),this.fetchCancelFns.clear()},t.prototype.mutate=function(t){var e=t.mutation,r=t.variables,o=t.optimisticResponse,a=t.updateQueries,l=t.refetchQueries,h=void 0===l?[]:l,c=t.awaitRefetchQueries,f=void 0!==c&&c,d=t.update,p=t.errorPolicy,m=void 0===p?"none":p,g=t.fetchPolicy,v=t.context,w=void 0===v?{}:v;return(0,n.mG)(this,void 0,void 0,(function(){var t,l,c;return(0,n.Jh)(this,(function(p){switch(p.label){case 0:return(0,i.kG)(e,13),(0,i.kG)(!g||"no-cache"===g,14),t=this.generateMutationId(),e=this.transform(e).document,r=this.getVariables(e,r),this.transform(e).hasClientExports?[4,this.localState.addExportedVariables(e,r,w)]:[3,2];case 1:r=p.sent(),p.label=2;case 2:return l=this.mutationStore&&(this.mutationStore[t]={mutation:e,variables:r,loading:!0,error:null}),o&&this.markMutationOptimistic(o,{mutationId:t,document:e,variables:r,errorPolicy:m,updateQueries:a,update:d}),this.broadcastQueries(),c=this,[2,new Promise((function(i,p){var v,y;c.getObservableFromLink(e,(0,n.pi)((0,n.pi)({},w),{optimisticResponse:o}),r,!1).subscribe({next:function(n){if((0,s.d2)(n)&&"none"===m)y=new u.c({graphQLErrors:n.errors});else{if(l&&(l.loading=!1,l.error=null),"no-cache"!==g)try{c.markMutationResult({mutationId:t,result:n,document:e,variables:r,errorPolicy:m,updateQueries:a,update:d})}catch(t){return void(y=new u.c({networkError:t}))}v=n}},error:function(e){l&&(l.loading=!1,l.error=e),o&&c.cache.removeOptimistic(t),c.broadcastQueries(),p(new u.c({networkError:e}))},complete:function(){if(y&&l&&(l.loading=!1,l.error=y),o&&c.cache.removeOptimistic(t),c.broadcastQueries(),y)p(y);else{"function"==typeof h&&(h=h(v));var e=[];(0,s.Of)(h)&&h.forEach((function(t){if("string"==typeof t)c.queries.forEach((function(r){var n=r.observableQuery;n&&n.queryName===t&&e.push(n.refetch())}));else{var r={query:t.query,variables:t.variables,fetchPolicy:"network-only"};t.context&&(r.context=t.context),e.push(c.query(r))}})),Promise.all(f?e:[]).then((function(){"ignore"===m&&v&&(0,s.d2)(v)&&delete v.errors,i(v)}),p)}}})}))]}}))}))},t.prototype.markMutationResult=function(t,e){var r=this;if(void 0===e&&(e=this.cache),y(t.result,t.errorPolicy)){var n=[{result:t.result.data,dataId:"ROOT_MUTATION",query:t.document,variables:t.variables}],i=t.updateQueries;i&&this.queries.forEach((function(o,a){var l=o.observableQuery,u=l&&l.queryName;if(u&&b.call(i,u)){var h=i[u],c=r.queries.get(a),f=c.document,d=c.variables,p=e.diff({query:f,variables:d,returnPartialData:!0,optimistic:!1}),m=p.result;if(p.complete&&m){var g=h(m,{mutationResult:t.result,queryName:f&&(0,s.rY)(f)||void 0,queryVariables:d});g&&n.push({result:g,dataId:"ROOT_QUERY",query:f,variables:d})}}})),e.performTransaction((function(e){n.forEach((function(t){return e.write(t)}));var r=t.update;r&&r(e,t.result)}),null)}},t.prototype.markMutationOptimistic=function(t,e){var r=this,i="function"==typeof t?t(e.variables):t;return this.cache.recordOptimisticTransaction((function(t){try{r.markMutationResult((0,n.pi)((0,n.pi)({},e),{result:{data:i}}),t)}catch(t){}}),e.mutationId)},t.prototype.fetchQuery=function(t,e,r){return this.fetchQueryObservable(t,e,r).promise},t.prototype.getQueryStore=function(){var t=Object.create(null);return this.queries.forEach((function(e,r){t[r]={variables:e.variables,networkStatus:e.networkStatus,networkError:e.networkError,graphQLErrors:e.graphQLErrors}})),t},t.prototype.resetErrors=function(t){var e=this.queries.get(t);e&&(e.networkError=void 0,e.graphQLErrors=[])},t.prototype.transform=function(t){var e=this.transformCache;if(!e.has(t)){var r=this.cache.transformDocument(t),n=(0,s.Fo)(this.cache.transformForLink(r)),i=this.localState.clientQuery(r),o=n&&this.localState.serverQuery(n),a={document:r,hasClientExports:(0,s.mj)(r),hasForcedResolvers:this.localState.shouldForceResolvers(r),clientQuery:i,serverQuery:o,defaultVars:(0,s.O4)((0,s.$H)(r))},l=function(t){t&&!e.has(t)&&e.set(t,a)};l(t),l(r),l(i),l(o)}return e.get(t)},t.prototype.getVariables=function(t,e){return(0,n.pi)((0,n.pi)({},this.transform(t).defaultVars),e)},t.prototype.watchQuery=function(t){void 0===(t=(0,n.pi)((0,n.pi)({},t),{variables:this.getVariables(t.query,t.variables)})).notifyOnNetworkStatusChange&&(t.notifyOnNetworkStatusChange=!1);var e=new w(this.cache),r=new h.u({queryManager:this,queryInfo:e,options:t});return this.queries.set(r.queryId,e),e.init({document:t.query,observableQuery:r,variables:t.variables}),r},t.prototype.query=function(t){var e=this;(0,i.kG)(t.query,15),(0,i.kG)("Document"===t.query.kind,16),(0,i.kG)(!t.returnPartialData,17),(0,i.kG)(!t.pollInterval,18);var r=this.generateQueryId();return this.fetchQuery(r,t).finally((function(){return e.stopQuery(r)}))},t.prototype.generateQueryId=function(){return String(this.queryIdCounter++)},t.prototype.generateRequestId=function(){return this.requestIdCounter++},t.prototype.generateMutationId=function(){return String(this.mutationIdCounter++)},t.prototype.stopQueryInStore=function(t){this.stopQueryInStoreNoBroadcast(t),this.broadcastQueries()},t.prototype.stopQueryInStoreNoBroadcast=function(t){var e=this.queries.get(t);e&&e.stop()},t.prototype.clearStore=function(){return this.cancelPendingFetches(new i.ej(19)),this.queries.forEach((function(t){t.observableQuery?t.networkStatus=c.I.loading:t.stop()})),this.mutationStore&&(this.mutationStore=Object.create(null)),this.cache.reset()},t.prototype.resetStore=function(){var t=this;return this.clearStore().then((function(){return t.reFetchObservableQueries()}))},t.prototype.reFetchObservableQueries=function(t){var e=this;void 0===t&&(t=!1);var r=[];return this.queries.forEach((function(n,i){var o=n.observableQuery;if(o&&o.hasObservers()){var s=o.options.fetchPolicy;o.resetLastResults(),"cache-only"===s||!t&&"standby"===s||r.push(o.refetch()),e.getQuery(i).setDiff(null)}})),this.broadcastQueries(),Promise.all(r)},t.prototype.setObservableQuery=function(t){this.getQuery(t.queryId).setObservableQuery(t)},t.prototype.startGraphQLSubscription=function(t){var e=this,r=t.query,n=t.fetchPolicy,i=t.errorPolicy,o=t.variables,a=t.context,l=void 0===a?{}:a;r=this.transform(r).document,o=this.getVariables(r,o);var h=function(t){return e.getObservableFromLink(r,l,t,!1).map((function(o){if("no-cache"!==n&&(y(o,i)&&e.cache.write({query:r,result:o.data,dataId:"ROOT_SUBSCRIPTION",variables:t}),e.broadcastQueries()),(0,s.d2)(o))throw new u.c({graphQLErrors:o.errors});return o}))};if(this.transform(r).hasClientExports){var c=this.localState.addExportedVariables(r,o,l).then(h);return new s.y$((function(t){var e=null;return c.then((function(r){return e=r.subscribe(t)}),t.error),function(){return e&&e.unsubscribe()}}))}return h(o)},t.prototype.stopQuery=function(t){this.stopQueryNoBroadcast(t),this.broadcastQueries()},t.prototype.stopQueryNoBroadcast=function(t){this.stopQueryInStoreNoBroadcast(t),this.removeQuery(t)},t.prototype.removeQuery=function(t){this.fetchCancelFns.delete(t),this.getQuery(t).stop(),this.queries.delete(t)},t.prototype.broadcastQueries=function(){this.onBroadcast&&this.onBroadcast(),this.queries.forEach((function(t){return t.notify()}))},t.prototype.getLocalState=function(){return this.localState},t.prototype.getObservableFromLink=function(t,e,r,i){var a,l,u=this;void 0===i&&(i=null!==(a=null==e?void 0:e.queryDeduplication)&&void 0!==a?a:this.queryDeduplication);var h=this.transform(t).serverQuery;if(h){var c=this.inFlightLinkObservables,f=this.link,d={query:h,variables:r,operationName:(0,s.rY)(h)||void 0,context:this.prepareContext((0,n.pi)((0,n.pi)({},e),{forceFetch:!i}))};if(e=d.context,i){var p=c.get(h)||new Map;c.set(h,p);var m=JSON.stringify(r);if(!(l=p.get(m))){var g=new s.X_([(0,o.execute)(f,d)]);p.set(m,l=g),g.cleanup((function(){p.delete(m)&&p.size<1&&c.delete(h)}))}}else l=new s.X_([(0,o.execute)(f,d)])}else l=new s.X_([s.y$.of({data:{}})]),e=this.prepareContext(e);var v=this.transform(t).clientQuery;return v&&(l=(0,s.sz)(l,(function(t){return u.localState.runResolvers({document:v,remoteResult:t,context:e,variables:r})}))),l},t.prototype.getResultsFromLink=function(t,e,r){var n=t.lastRequestId;return(0,s.sz)(this.getObservableFromLink(t.document,r.context,r.variables),(function(i){var o=(0,s.Of)(i.errors);if(n>=t.lastRequestId){if(o&&"none"===r.errorPolicy)throw t.markError(new u.c({graphQLErrors:i.errors}));t.markResult(i,r,e),t.markReady()}var a={data:i.data,loading:!1,networkStatus:t.networkStatus||c.I.ready};return o&&"ignore"!==r.errorPolicy&&(a.errors=i.errors),a}),(function(e){var r=(0,u.M)(e)?e:new u.c({networkError:e});throw n>=t.lastRequestId&&t.markError(r),r}))},t.prototype.fetchQueryObservable=function(t,e,r){var n=this;void 0===r&&(r=c.I.loading);var i=this.transform(e.query).document,o=this.getVariables(i,e.variables),a=this.getQuery(t),l=a.networkStatus,u=e.fetchPolicy,h=void 0===u?"cache-first":u,f=e.errorPolicy,d=void 0===f?"none":f,p=e.returnPartialData,m=void 0!==p&&p,g=e.notifyOnNetworkStatusChange,v=void 0!==g&&g,w=e.context,y=void 0===w?{}:w;("cache-first"===h||"cache-and-network"===h||"network-only"===h||"no-cache"===h)&&v&&"number"==typeof l&&l!==r&&(0,c.O)(r)&&("cache-first"!==h&&(h="cache-and-network"),m=!0);var b=Object.assign({},e,{query:i,variables:o,fetchPolicy:h,errorPolicy:d,returnPartialData:m,notifyOnNetworkStatusChange:v,context:y}),_=function(t){return b.variables=t,n.fetchQueryByPolicy(a,b,r)};this.fetchCancelFns.set(t,(function(t){Promise.resolve().then((function(){return x.cancel(t)}))}));var x=new s.X_(this.transform(b.query).hasClientExports?this.localState.addExportedVariables(b.query,b.variables,b.context).then(_):_(b.variables));return x.cleanup((function(){n.fetchCancelFns.delete(t);var r=e.nextFetchPolicy;r&&(e.nextFetchPolicy=void 0,e.fetchPolicy="function"==typeof r?r.call(e,e.fetchPolicy||"cache-first"):r)})),x},t.prototype.fetchQueryByPolicy=function(t,e,r){var i=this,o=e.query,a=e.variables,l=e.fetchPolicy,u=e.errorPolicy,h=e.returnPartialData,f=e.context;t.init({document:o,variables:a,lastRequestId:this.generateRequestId(),networkStatus:r});var d=function(){return t.getDiff(a)},p=function(e,r){void 0===r&&(r=t.networkStatus||c.I.loading);var l=e.result;var u=function(t){return s.y$.of((0,n.pi)({data:t,loading:(0,c.O)(r),networkStatus:r},e.complete?null:{partial:!0}))};return i.transform(o).hasForcedResolvers?i.localState.runResolvers({document:o,remoteResult:{data:l},context:f,variables:a,onlyRunForcedResolvers:!0}).then((function(t){return u(t.data)})):u(l)},m=function(e){return i.getResultsFromLink(t,e,{variables:a,context:f,fetchPolicy:l,errorPolicy:u})};switch(l){default:case"cache-first":return(g=d()).complete?[p(g,t.markReady())]:h?[p(g),m(!0)]:[m(!0)];case"cache-and-network":var g;return(g=d()).complete||h?[p(g),m(!0)]:[m(!0)];case"cache-only":return[p(d(),t.markReady())];case"network-only":return[m(!0)];case"no-cache":return[m(!1)];case"standby":return[]}},t.prototype.getQuery=function(t){return t&&!this.queries.has(t)&&this.queries.set(t,new w(this.cache)),this.queries.get(t)},t.prototype.prepareContext=function(t){void 0===t&&(t={});var e=this.localState.prepareContext(t);return(0,n.pi)((0,n.pi)({},e),{clientAwareness:this.clientAwareness})},t}();function x(t,e){return(0,s.oA)(t,e,e.variables&&{variables:(0,n.pi)((0,n.pi)({},t.variables),e.variables)})}var k=function(){function t(t){var e=this;this.defaultOptions={},this.resetStoreCallbacks=[],this.clearStoreCallbacks=[];var r=t.uri,n=t.credentials,s=t.headers,l=t.cache,u=t.ssrMode,h=void 0!==u&&u,c=t.ssrForceFetchDelay,f=void 0===c?0:c,d=t.connectToDevTools,m=void 0===d?"object"==typeof window&&!window.__APOLLO_CLIENT__&&!1:d,g=t.queryDeduplication,v=void 0===g||g,w=t.defaultOptions,y=t.assumeImmutableResults,b=void 0!==y&&y,x=t.resolvers,k=t.typeDefs,M=t.fragmentMatcher,S=t.name,E=t.version,A=t.link;if(A||(A=r?new a.HttpLink({uri:r,credentials:n,headers:s}):o.ApolloLink.empty()),!l)throw new i.ej(9);this.link=A,this.cache=l,this.disableNetworkFetches=h||f>0,this.queryDeduplication=v,this.defaultOptions=w||{},this.typeDefs=k,f&&setTimeout((function(){return e.disableNetworkFetches=!1}),f),this.watchQuery=this.watchQuery.bind(this),this.query=this.query.bind(this),this.mutate=this.mutate.bind(this),this.resetStore=this.resetStore.bind(this),this.reFetchObservableQueries=this.reFetchObservableQueries.bind(this),m&&"object"==typeof window&&(window.__APOLLO_CLIENT__=this),this.version="3.3.12",this.localState=new p({cache:l,client:this,resolvers:x,fragmentMatcher:M}),this.queryManager=new _({cache:this.cache,link:this.link,queryDeduplication:v,ssrMode:h,clientAwareness:{name:S,version:E},localState:this.localState,assumeImmutableResults:b,onBroadcast:m?function(){e.devToolsHookCb&&e.devToolsHookCb({action:{},state:{queries:e.queryManager.getQueryStore(),mutations:e.queryManager.mutationStore||{}},dataWithOptimisticResults:e.cache.extract(!0)})}:void 0})}return t.prototype.stop=function(){this.queryManager.stop()},t.prototype.watchQuery=function(t){return this.defaultOptions.watchQuery&&(t=x(this.defaultOptions.watchQuery,t)),!this.disableNetworkFetches||"network-only"!==t.fetchPolicy&&"cache-and-network"!==t.fetchPolicy||(t=(0,n.pi)((0,n.pi)({},t),{fetchPolicy:"cache-first"})),this.queryManager.watchQuery(t)},t.prototype.query=function(t){return this.defaultOptions.query&&(t=x(this.defaultOptions.query,t)),(0,i.kG)("cache-and-network"!==t.fetchPolicy,10),this.disableNetworkFetches&&"network-only"===t.fetchPolicy&&(t=(0,n.pi)((0,n.pi)({},t),{fetchPolicy:"cache-first"})),this.queryManager.query(t)},t.prototype.mutate=function(t){return this.defaultOptions.mutate&&(t=x(this.defaultOptions.mutate,t)),this.queryManager.mutate(t)},t.prototype.subscribe=function(t){return this.queryManager.startGraphQLSubscription(t)},t.prototype.readQuery=function(t,e){return void 0===e&&(e=!1),this.cache.readQuery(t,e)},t.prototype.readFragment=function(t,e){return void 0===e&&(e=!1),this.cache.readFragment(t,e)},t.prototype.writeQuery=function(t){this.cache.writeQuery(t),this.queryManager.broadcastQueries()},t.prototype.writeFragment=function(t){this.cache.writeFragment(t),this.queryManager.broadcastQueries()},t.prototype.__actionHookForDevTools=function(t){this.devToolsHookCb=t},t.prototype.__requestRaw=function(t){return(0,o.execute)(this.link,t)},t.prototype.resetStore=function(){var t=this;return Promise.resolve().then((function(){return t.queryManager.clearStore()})).then((function(){return Promise.all(t.resetStoreCallbacks.map((function(t){return t()})))})).then((function(){return t.reFetchObservableQueries()}))},t.prototype.clearStore=function(){var t=this;return Promise.resolve().then((function(){return t.queryManager.clearStore()})).then((function(){return Promise.all(t.clearStoreCallbacks.map((function(t){return t()})))}))},t.prototype.onResetStore=function(t){var e=this;return this.resetStoreCallbacks.push(t),function(){e.resetStoreCallbacks=e.resetStoreCallbacks.filter((function(e){return e!==t}))}},t.prototype.onClearStore=function(t){var e=this;return this.clearStoreCallbacks.push(t),function(){e.clearStoreCallbacks=e.clearStoreCallbacks.filter((function(e){return e!==t}))}},t.prototype.reFetchObservableQueries=function(t){return this.queryManager.reFetchObservableQueries(t)},t.prototype.extract=function(t){return this.cache.extract(t)},t.prototype.restore=function(t){return this.cache.restore(t)},t.prototype.addResolvers=function(t){this.localState.addResolvers(t)},t.prototype.setResolvers=function(t){this.localState.setResolvers(t)},t.prototype.getResolvers=function(){return this.localState.getResolvers()},t.prototype.setLocalStateFragmentMatcher=function(t){this.localState.setFragmentMatcher(t)},t.prototype.setLink=function(t){this.link=this.queryManager.link=t},t}()},6282:(t,e,r)=>{"use strict";r.d(e,{u:()=>u});var n=r(655),i=r(4361),o=r(1465),s=r(5942),a=r(6313),l=function(){function t(t,e,r,n){this.observer=t,this.options=e,this.fetch=r,this.shouldFetch=n}return t.prototype.reobserve=function(t,e){t?this.updateOptions(t):this.updatePolling();var r=this.fetch(this.options,e);return this.concast&&this.concast.removeObserver(this.observer,!0),r.addObserver(this.observer),(this.concast=r).promise},t.prototype.updateOptions=function(t){return Object.assign(this.options,(0,a.oA)(t)),this.updatePolling(),this},t.prototype.stop=function(){this.concast&&(this.concast.removeObserver(this.observer),delete this.concast),this.pollingInfo&&(clearTimeout(this.pollingInfo.timeout),this.options.pollInterval=0,this.updatePolling())},t.prototype.updatePolling=function(){var t=this,e=this.pollingInfo,r=this.options.pollInterval;if(r){if((!e||e.interval!==r)&&((0,i.kG)(r,20),!1!==this.shouldFetch)){(e||(this.pollingInfo={})).interval=r;var n=function(){t.pollingInfo&&(t.shouldFetch&&t.shouldFetch()?t.reobserve({fetchPolicy:"network-only",nextFetchPolicy:t.options.fetchPolicy||"cache-first"},s.I.poll).then(o,o):o())},o=function(){var e=t.pollingInfo;e&&(clearTimeout(e.timeout),e.timeout=setTimeout(n,e.interval))};o()}}else e&&(clearTimeout(e.timeout),delete this.pollingInfo)},t}(),u=function(t){function e(e){var r=e.queryManager,i=e.queryInfo,o=e.options,l=t.call(this,(function(t){return l.onSubscribe(t)}))||this;l.observers=new Set,l.subscriptions=new Set,l.observer={next:function(t){(l.lastError||l.isDifferentFromLastResult(t))&&(l.updateLastResult(t),(0,a.pM)(l.observers,"next",t))},error:function(t){l.updateLastResult((0,n.pi)((0,n.pi)({},l.lastResult),{error:t,errors:t.graphQLErrors,networkStatus:s.I.error,loading:!1})),(0,a.pM)(l.observers,"error",l.lastError=t)}},l.isTornDown=!1,l.options=o,l.queryId=r.generateQueryId();var u=(0,a.$H)(o.query);return l.queryName=u&&u.name&&u.name.value,l.queryManager=r,l.queryInfo=i,l}return(0,n.ZT)(e,t),Object.defineProperty(e.prototype,"variables",{get:function(){return this.options.variables},enumerable:!1,configurable:!0}),e.prototype.result=function(){var t=this;return new Promise((function(e,r){var n={next:function(r){e(r),t.observers.delete(n),t.observers.size||t.queryManager.removeQuery(t.queryId),setTimeout((function(){i.unsubscribe()}),0)},error:r},i=t.subscribe(n)}))},e.prototype.getCurrentResult=function(t){void 0===t&&(t=!0);var e=this.lastResult,r=this.queryInfo.networkStatus||e&&e.networkStatus||s.I.ready,i=(0,n.pi)((0,n.pi)({},e),{loading:(0,s.O)(r),networkStatus:r});if(this.isTornDown)return i;var o=this.options.fetchPolicy,a=void 0===o?"cache-first":o;if("no-cache"===a||"network-only"===a)delete i.partial;else if(!i.data||!this.queryManager.transform(this.options.query).hasForcedResolvers){var l=this.queryInfo.getDiff();i.data=l.complete||this.options.returnPartialData?l.result:void 0,l.complete?(i.networkStatus!==s.I.loading||"cache-first"!==a&&"cache-only"!==a||(i.networkStatus=s.I.ready,i.loading=!1),delete i.partial):i.partial=!0}return t&&this.updateLastResult(i),i},e.prototype.isDifferentFromLastResult=function(t){return!(0,o.D)(this.lastResultSnapshot,t)},e.prototype.getLastResult=function(){return this.lastResult},e.prototype.getLastError=function(){return this.lastError},e.prototype.resetLastResults=function(){delete this.lastResult,delete this.lastResultSnapshot,delete this.lastError,this.isTornDown=!1},e.prototype.resetQueryStoreErrors=function(){this.queryManager.resetErrors(this.queryId)},e.prototype.refetch=function(t){var e={pollInterval:0},r=this.options.fetchPolicy;return"no-cache"!==r&&"cache-and-network"!==r&&(e.fetchPolicy="network-only",e.nextFetchPolicy=r||"cache-first"),t&&!(0,o.D)(this.options.variables,t)&&(e.variables=this.options.variables=(0,n.pi)((0,n.pi)({},this.options.variables),t)),this.newReobserver(!1).reobserve(e,s.I.refetch)},e.prototype.fetchMore=function(t){var e=this,r=(0,n.pi)((0,n.pi)({},t.query?t:(0,n.pi)((0,n.pi)((0,n.pi)({},this.options),t),{variables:(0,n.pi)((0,n.pi)({},this.options.variables),t.variables)})),{fetchPolicy:"no-cache"}),i=this.queryManager.generateQueryId();return r.notifyOnNetworkStatusChange&&(this.queryInfo.networkStatus=s.I.fetchMore,this.observe()),this.queryManager.fetchQuery(i,r,s.I.fetchMore).then((function(n){var i=n.data,o=t.updateQuery;return o?e.updateQuery((function(t){return o(t,{fetchMoreResult:i,variables:r.variables})})):e.queryManager.cache.writeQuery({query:r.query,variables:r.variables,data:i}),n})).finally((function(){e.queryManager.stopQuery(i),e.reobserve()}))},e.prototype.subscribeToMore=function(t){var e=this,r=this.queryManager.startGraphQLSubscription({query:t.document,variables:t.variables,context:t.context}).subscribe({next:function(r){var n=t.updateQuery;n&&e.updateQuery((function(t,e){var i=e.variables;return n(t,{subscriptionData:r,variables:i})}))},error:function(e){t.onError&&t.onError(e)}});return this.subscriptions.add(r),function(){e.subscriptions.delete(r)&&r.unsubscribe()}},e.prototype.setOptions=function(t){return this.reobserve(t)},e.prototype.setVariables=function(t){if((0,o.D)(this.variables,t))return this.observers.size?this.result():Promise.resolve();if(this.options.variables=t,!this.observers.size)return Promise.resolve();var e=this.options.fetchPolicy,r=void 0===e?"cache-first":e,n={fetchPolicy:r,variables:t};return"cache-first"!==r&&"no-cache"!==r&&"network-only"!==r&&(n.fetchPolicy="cache-and-network",n.nextFetchPolicy=r),this.reobserve(n,s.I.setVariables)},e.prototype.updateQuery=function(t){var e,r=this.queryManager,n=t(r.cache.diff({query:this.options.query,variables:this.variables,previousResult:null===(e=this.lastResult)||void 0===e?void 0:e.data,returnPartialData:!0,optimistic:!1}).result,{variables:this.variables});n&&(r.cache.writeQuery({query:this.options.query,data:n,variables:this.variables}),r.broadcastQueries())},e.prototype.startPolling=function(t){this.getReobserver().updateOptions({pollInterval:t})},e.prototype.stopPolling=function(){this.reobserver&&this.reobserver.updateOptions({pollInterval:0})},e.prototype.updateLastResult=function(t){var e=this.lastResult;return this.lastResult=t,this.lastResultSnapshot=this.queryManager.assumeImmutableResults?t:(0,a.Xh)(t),(0,a.Of)(t.errors)||delete this.lastError,e},e.prototype.onSubscribe=function(t){var e=this;if(t===this.observer)return function(){};try{var r=t._subscription._observer;r&&!r.error&&(r.error=h)}catch(t){}var n=!this.observers.size;return this.observers.add(t),this.lastError?t.error&&t.error(this.lastError):this.lastResult&&t.next&&t.next(this.lastResult),n&&this.reobserve().catch((function(t){})),function(){e.observers.delete(t)&&!e.observers.size&&e.tearDownQuery()}},e.prototype.getReobserver=function(){return this.reobserver||(this.reobserver=this.newReobserver(!0))},e.prototype.newReobserver=function(t){var e=this,r=this.queryManager,i=this.queryId;return r.setObservableQuery(this),new l(this.observer,t?this.options:(0,n.pi)({},this.options),(function(t,n){return r.setObservableQuery(e),r.fetchQueryObservable(i,t,n)}),!r.ssrMode&&function(){return!(0,s.O)(e.queryInfo.networkStatus)})},e.prototype.reobserve=function(t,e){return this.isTornDown=!1,this.getReobserver().reobserve(t,e)},e.prototype.observe=function(){this.observer.next(this.getCurrentResult(!1))},e.prototype.hasObservers=function(){return this.observers.size>0},e.prototype.tearDownQuery=function(){this.isTornDown||(this.reobserver&&(this.reobserver.stop(),delete this.reobserver),this.subscriptions.forEach((function(t){return t.unsubscribe()})),this.subscriptions.clear(),this.queryManager.stopQuery(this.queryId),this.observers.clear(),this.isTornDown=!0)},e}(a.y$);function h(t){}(0,a.Dy)(u)},1439:(t,e,r)=>{"use strict";r.r(e),r.d(e,{ApolloClient:()=>n.f,mergeOptions:()=>n.J,ObservableQuery:()=>i.u,NetworkStatus:()=>o.I,isApolloError:()=>l.M,ApolloError:()=>l.c,Cache:()=>u.Ct,ApolloCache:()=>u.Ri,InMemoryCache:()=>u.h4,MissingFieldError:()=>u.yD,defaultDataIdFromObject:()=>u.uG,makeVar:()=>u.QS,HttpLink:()=>f.HttpLink,checkFetcher:()=>f.checkFetcher,createHttpLink:()=>f.createHttpLink,createSignalIfSupported:()=>f.createSignalIfSupported,fallbackHttpConfig:()=>f.fallbackHttpConfig,parseAndCheckHttpResponse:()=>f.parseAndCheckHttpResponse,rewriteURIForGET:()=>f.rewriteURIForGET,selectHttpOptionsAndBody:()=>f.selectHttpOptionsAndBody,selectURI:()=>f.selectURI,serializeFetchParameter:()=>f.serializeFetchParameter,fromError:()=>d.Qc,toPromise:()=>d.Vi,fromPromise:()=>d.p4,throwServerError:()=>d.PW,Observable:()=>p.y$,isReference:()=>p.hh,makeReference:()=>p.kQ,setLogVerbosity:()=>m.U6,resetCaches:()=>v,disableFragmentWarnings:()=>w,enableExperimentalFragmentVariables:()=>y,disableExperimentalFragmentVariables:()=>b,gql:()=>g.ZP});var n=r(5765),i=r(6282),o=r(5942),s=r(2191),a={};for(const t in s)["default","ApolloClient","mergeOptions","ObservableQuery","NetworkStatus","isApolloError","ApolloError","Cache","ApolloCache","InMemoryCache","MissingFieldError","defaultDataIdFromObject","makeVar","fromError","toPromise","fromPromise","throwServerError","Observable","isReference","makeReference","setLogVerbosity","resetCaches","disableFragmentWarnings","enableExperimentalFragmentVariables","disableExperimentalFragmentVariables","gql"].indexOf(t)<0&&(a[t]=()=>s[t]);r.d(e,a);var l=r(1498),u=r(226),h=r(6258);a={};for(const t in h)["default","ApolloClient","mergeOptions","ObservableQuery","NetworkStatus","isApolloError","ApolloError","Cache","ApolloCache","InMemoryCache","MissingFieldError","defaultDataIdFromObject","makeVar","fromError","toPromise","fromPromise","throwServerError","Observable","isReference","makeReference","setLogVerbosity","resetCaches","disableFragmentWarnings","enableExperimentalFragmentVariables","disableExperimentalFragmentVariables","gql"].indexOf(t)<0&&(a[t]=()=>h[t]);r.d(e,a);var c=r(1707);a={};for(const t in c)["default","ApolloClient","mergeOptions","ObservableQuery","NetworkStatus","isApolloError","ApolloError","Cache","ApolloCache","InMemoryCache","MissingFieldError","defaultDataIdFromObject","makeVar","fromError","toPromise","fromPromise","throwServerError","Observable","isReference","makeReference","setLogVerbosity","resetCaches","disableFragmentWarnings","enableExperimentalFragmentVariables","disableExperimentalFragmentVariables","gql"].indexOf(t)<0&&(a[t]=()=>c[t]);r.d(e,a);var f=r(6593),d=r(4913),p=r(6313),m=r(4361),g=r(9289);(0,m.U6)("log");var v=g.ZP.resetCaches,w=g.ZP.disableFragmentWarnings,y=g.ZP.enableExperimentalFragmentVariables,b=g.ZP.disableExperimentalFragmentVariables},5942:(t,e,r)=>{"use strict";var n;function i(t){return!!t&&t<7}r.d(e,{I:()=>n,O:()=>i}),function(t){t[t.loading=1]="loading",t[t.setVariables=2]="setVariables",t[t.fetchMore=3]="fetchMore",t[t.refetch=4]="refetch",t[t.poll=6]="poll",t[t.ready=7]="ready",t[t.error=8]="error"}(n||(n={}))},2191:()=>{},1498:(t,e,r)=>{"use strict";r.d(e,{M:()=>o,c:()=>s});var n=r(655),i=r(6313);function o(t){return t.hasOwnProperty("graphQLErrors")}var s=function(t){function e(r){var n,o,s=r.graphQLErrors,a=r.networkError,l=r.errorMessage,u=r.extraInfo,h=t.call(this,l)||this;return h.graphQLErrors=s||[],h.networkError=a||null,h.message=l||(n=h,o="",(0,i.Of)(n.graphQLErrors)&&n.graphQLErrors.forEach((function(t){var e=t?t.message:"Error message not found.";o+=e+"\n"})),n.networkError&&(o+=n.networkError.message+"\n"),o=o.replace(/\n$/,"")),h.extraInfo=u,h.__proto__=e.prototype,h}return(0,n.ZT)(e,t),e}(Error)},7222:(t,e,r)=>{"use strict";r.d(e,{i:()=>h});var n=r(655),i=r(4361),o=r(6313),s=r(4913);function a(t,e){return e?e(t):o.y$.of()}function l(t){return"function"==typeof t?new h(t):t}function u(t){return t.request.length<=1}!function(t){function e(e,r){var n=t.call(this,e)||this;return n.link=r,n}(0,n.ZT)(e,t)}(Error);var h=function(){function t(t){t&&(this.request=t)}return t.empty=function(){return new t((function(){return o.y$.of()}))},t.from=function(e){return 0===e.length?t.empty():e.map(l).reduce((function(t,e){return t.concat(e)}))},t.split=function(e,r,n){var i=l(r),s=l(n||new t(a));return u(i)&&u(s)?new t((function(t){return e(t)?i.request(t)||o.y$.of():s.request(t)||o.y$.of()})):new t((function(t,r){return e(t)?i.request(t,r)||o.y$.of():s.request(t,r)||o.y$.of()}))},t.execute=function(t,e){return t.request((0,s.zi)(e.context,(0,s.DQ)((0,s.Ak)(e))))||o.y$.of()},t.concat=function(e,r){var n=l(e);if(u(n))return n;var i=l(r);return u(i)?new t((function(t){return n.request(t,(function(t){return i.request(t)||o.y$.of()}))||o.y$.of()})):new t((function(t,e){return n.request(t,(function(t){return i.request(t,e)||o.y$.of()}))||o.y$.of()}))},t.prototype.split=function(e,r,n){return this.concat(t.split(e,r,n||new t(a)))},t.prototype.concat=function(e){return t.concat(this,e)},t.prototype.request=function(t,e){throw new i.ej(21)},t.prototype.onError=function(t,e){if(e&&e.error)return e.error(t),!1;throw t},t.prototype.setOnError=function(t){return this.onError=t,this},t}()},4957:(t,e,r)=>{"use strict";r.d(e,{z:()=>n});var n=r(7222).i.concat},7325:(t,e,r)=>{"use strict";r.d(e,{c:()=>n});var n=r(7222).i.empty},2550:(t,e,r)=>{"use strict";r.d(e,{h:()=>n});var n=r(7222).i.execute},4674:(t,e,r)=>{"use strict";r.d(e,{D:()=>n});var n=r(7222).i.from},1707:(t,e,r)=>{"use strict";r.r(e),r.d(e,{empty:()=>n.c,from:()=>i.D,split:()=>o.V,concat:()=>s.z,execute:()=>a.h,ApolloLink:()=>l.i});var n=r(7325),i=r(4674),o=r(4738),s=r(4957),a=r(2550),l=r(7222),u=r(9875),h={};for(const t in u)["default","empty","from","split","concat","execute","ApolloLink"].indexOf(t)<0&&(h[t]=()=>u[t]);r.d(e,h)},4738:(t,e,r)=>{"use strict";r.d(e,{V:()=>n});var n=r(7222).i.split},9875:()=>{},6593:(t,e,r)=>{"use strict";r.r(e),r.d(e,{HttpLink:()=>b,checkFetcher:()=>f,createHttpLink:()=>y,createSignalIfSupported:()=>d,fallbackHttpConfig:()=>h,parseAndCheckHttpResponse:()=>o,rewriteURIForGET:()=>w,selectHttpOptionsAndBody:()=>c,selectURI:()=>p,serializeFetchParameter:()=>a});var n=r(4913),i=Object.prototype.hasOwnProperty;function o(t){return function(e){return e.text().then((function(t){try{return JSON.parse(t)}catch(n){var r=n;throw r.name="ServerParseError",r.response=e,r.statusCode=e.status,r.bodyText=t,r}})).then((function(r){return e.status>=300&&(0,n.PW)(e,r,"Response not successful: Received status code "+e.status),Array.isArray(r)||i.call(r,"data")||i.call(r,"errors")||(0,n.PW)(e,r,"Server response was missing for query '"+(Array.isArray(t)?t.map((function(t){return t.operationName})):t.operationName)+"'."),r}))}}var s=r(4361),a=function(t,e){var r;try{r=JSON.stringify(t)}catch(t){var n=new s.ej(23);throw n.parseError=t,n}return r},l=r(655),u=r(778),h={http:{includeQuery:!0,includeExtensions:!1},headers:{accept:"*/*","content-type":"application/json"},options:{method:"POST"}},c=function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=(0,l.pi)((0,l.pi)({},e.options),{headers:e.headers,credentials:e.credentials}),o=e.http||{};r.forEach((function(t){i=(0,l.pi)((0,l.pi)((0,l.pi)({},i),t.options),{headers:(0,l.pi)((0,l.pi)({},i.headers),t.headers)}),t.credentials&&(i.credentials=t.credentials),o=(0,l.pi)((0,l.pi)({},o),t.http)}));var s=t.operationName,a=t.extensions,h=t.variables,c=t.query,f={operationName:s,variables:h};return o.includeExtensions&&(f.extensions=a),o.includeQuery&&(f.query=(0,u.S)(c)),{options:i,body:f}},f=function(t){if(!t&&"undefined"==typeof fetch)throw new s.ej(22)},d=function(){if("undefined"==typeof AbortController)return{controller:!1,signal:!1};var t=new AbortController;return{controller:t,signal:t.signal}},p=function(t,e){var r=t.getContext().uri;return r||("function"==typeof e?e(t):e||"/graphql")},m=r(7636),g=r(1707),v=r(6313);function w(t,e){var r=[],n=function(t,e){r.push(t+"="+encodeURIComponent(e))};if("query"in e&&n("query",e.query),e.operationName&&n("operationName",e.operationName),e.variables){var i=void 0;try{i=a(e.variables,"Variables map")}catch(t){return{parseError:t}}n("variables",i)}if(e.extensions){var o=void 0;try{o=a(e.extensions,"Extensions map")}catch(t){return{parseError:t}}n("extensions",o)}var s="",l=t,u=t.indexOf("#");-1!==u&&(s=t.substr(u),l=t.substr(0,u));var h=-1===l.indexOf("?")?"?":"&";return{newURI:l+h+r.join("&")+s}}var y=function(t){void 0===t&&(t={});var e=t.uri,r=void 0===e?"/graphql":e,i=t.fetch,s=t.includeExtensions,u=t.useGETForQueries,y=t.includeUnusedVariables,b=void 0!==y&&y,_=(0,l._T)(t,["uri","fetch","includeExtensions","useGETForQueries","includeUnusedVariables"]);f(i),i||(i=fetch);var x={http:{includeExtensions:s},options:_.fetchOptions,credentials:_.credentials,headers:_.headers};return new g.ApolloLink((function(t){var e=p(t,r),s=t.getContext(),f={};if(s.clientAwareness){var g=s.clientAwareness,y=g.name,_=g.version;y&&(f["apollographql-client-name"]=y),_&&(f["apollographql-client-version"]=_)}var k,M=(0,l.pi)((0,l.pi)({},f),s.headers),S={http:s.http,options:s.fetchOptions,credentials:s.credentials,headers:M},E=c(t,h,x,S),A=E.options,C=E.body;if(C.variables&&!b){var D=new Set(Object.keys(C.variables));(0,m.Vn)(t.query,{Variable:function(t,e,r){r&&"VariableDefinition"!==r.kind&&D.delete(t.name.value)}}),D.size&&(C.variables=(0,l.pi)({},C.variables),D.forEach((function(t){delete C.variables[t]})))}if(!A.signal){var O=d(),P=O.controller,R=O.signal;(k=P)&&(A.signal=R)}if(u&&!t.query.definitions.some((function(t){return"OperationDefinition"===t.kind&&"mutation"===t.operation}))&&(A.method="GET"),"GET"===A.method){var I=w(e,C),T=I.newURI,F=I.parseError;if(F)return(0,n.Qc)(F);e=T}else try{A.body=a(C,"Payload")}catch(F){return(0,n.Qc)(F)}return new v.y$((function(r){return i(e,A).then((function(e){return t.setContext({response:e}),e})).then(o(t)).then((function(t){return r.next(t),r.complete(),t})).catch((function(t){"AbortError"!==t.name&&(t.result&&t.result.errors&&t.result.data&&r.next(t.result),r.error(t))})),function(){k&&k.abort()}}))}))},b=function(t){function e(e){void 0===e&&(e={});var r=t.call(this,y(e).request)||this;return r.options=e,r}return(0,l.ZT)(e,t),e}(g.ApolloLink)},4913:(t,e,r)=>{"use strict";r.d(e,{zi:()=>c,Qc:()=>i,p4:()=>a,PW:()=>l,Vi:()=>s,DQ:()=>f,Ak:()=>u});var n=r(6313);function i(t){return new n.y$((function(e){e.error(t)}))}var o=r(4361);function s(t){var e=!1;return new Promise((function(r,n){t.subscribe({next:function(t){e||(e=!0,r(t))},error:n})}))}function a(t){return new n.y$((function(e){t.then((function(t){e.next(t),e.complete()})).catch(e.error.bind(e))}))}var l=function(t,e,r){var n=new Error(r);throw n.name="ServerError",n.response=t,n.statusCode=t.status,n.result=e,n};function u(t){for(var e=["query","operationName","variables","extensions","context"],r=0,n=Object.keys(t);r<n.length;r++){var i=n[r];if(e.indexOf(i)<0)throw new o.ej(26)}return t}var h=r(655);function c(t,e){var r=(0,h.pi)({},t);return Object.defineProperty(e,"setContext",{enumerable:!1,value:function(t){r="function"==typeof t?(0,h.pi)((0,h.pi)({},r),t(r)):(0,h.pi)((0,h.pi)({},r),t)}}),Object.defineProperty(e,"getContext",{enumerable:!1,value:function(){return(0,h.pi)({},r)}}),e}function f(t){var e={variables:t.variables||{},extensions:t.extensions||{},operationName:t.operationName,query:t.query};return e.operationName||(e.operationName="string"!=typeof e.query?(0,n.rY)(e.query)||void 0:""),e}},1465:(t,e,r)=>{"use strict";r.d(e,{D:()=>l});var n=Object.prototype,i=n.toString,o=n.hasOwnProperty,s=Function.prototype.toString,a=new Map;function l(t,e){try{return u(t,e)}finally{a.clear()}}function u(t,e){if(t===e)return!0;var r,n,a,l=i.call(t);if(l!==i.call(e))return!1;switch(l){case"[object Array]":if(t.length!==e.length)return!1;case"[object Object]":if(d(t,e))return!0;var c=h(t),p=h(e),m=c.length;if(m!==p.length)return!1;for(var g=0;g<m;++g)if(!o.call(e,c[g]))return!1;for(g=0;g<m;++g){var v=c[g];if(!u(t[v],e[v]))return!1}return!0;case"[object Error]":return t.name===e.name&&t.message===e.message;case"[object Number]":if(t!=t)return e!=e;case"[object Boolean]":case"[object Date]":return+t==+e;case"[object RegExp]":case"[object String]":return t==""+e;case"[object Map]":case"[object Set]":if(t.size!==e.size)return!1;if(d(t,e))return!0;for(var w=t.entries(),y="[object Map]"===l;;){var b=w.next();if(b.done)break;var _=b.value,x=_[0],k=_[1];if(!e.has(x))return!1;if(y&&!u(k,e.get(x)))return!1}return!0;case"[object AsyncFunction]":case"[object GeneratorFunction]":case"[object AsyncGeneratorFunction]":case"[object Function]":var M=s.call(t);return M===s.call(e)&&(n=f,!((a=(r=M).length-n.length)>=0&&r.indexOf(n,a)===a))}return!1}function h(t){return Object.keys(t).filter(c,t)}function c(t){return void 0!==this[t]}var f="{ [native code] }";function d(t,e){var r=a.get(t);if(r){if(r.has(e))return!0}else a.set(t,r=new Set);return r.add(e),!1}},1494:(t,e,r)=>{"use strict";t=r.hmd(t);!function(t){var e,r=t.Symbol;if("function"==typeof r)if(r.observable)e=r.observable;else{e=r.for("https://github.com/benlesh/symbol-observable");try{r.observable=e}catch(t){}}else e="@@observable"}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==r.g?r.g:t)},4361:(t,e,r)=>{"use strict";r.d(e,{ej:()=>h,kG:()=>c,U6:()=>m});var n=r(655);!function(t){function e(){var e=this||self;e.globalThis=e,delete t.prototype._T_}"object"!=typeof globalThis&&(this?e():(t.defineProperty(t.prototype,"_T_",{configurable:!0,get:e}),_T_))}(Object);const i=globalThis;var o=i,s=o.console,a="Invariant Violation",l=Object.setPrototypeOf,u=void 0===l?function(t,e){return t.__proto__=e,t}:l,h=function(t){function e(r){void 0===r&&(r=a);var n=t.call(this,"number"==typeof r?a+": "+r+" (see https://github.com/apollographql/invariant-packages)":r)||this;return n.framesToPop=1,n.name=a,u(n,e.prototype),n}return(0,n.ZT)(e,t),e}(Error);function c(t,e){if(!t)throw new h(e)}var f=["log","warn","error","silent"],d=f.indexOf("log");function p(t){return function(){if(f.indexOf(t)>=d)return s[t].apply(s,arguments)}}function m(t){var e=f[d];return d=Math.max(0,f.indexOf(t)),e}!function(t){t.log=p("log"),t.warn=p("warn"),t.error=p("error")}(c||(c={}));var g=o.process||{env:{}};if(!o.process)try{Object.defineProperty(i,"process",{value:g,writable:!0,enumerable:!1,configurable:!0})}catch(t){}},6313:(t,e,r)=>{"use strict";r.d(e,{X_:()=>st,w0:()=>H,y$:()=>W(),Gw:()=>B,NC:()=>b,sz:()=>nt,aL:()=>z,mr:()=>ut,Xh:()=>J,oA:()=>ht,F:()=>h,Dy:()=>it,O4:()=>P,kU:()=>C,hi:()=>c,Yk:()=>u,p$:()=>O,$H:()=>E,rY:()=>A,iW:()=>D,PT:()=>y,qw:()=>x,d2:()=>lt,mj:()=>a,FS:()=>s,My:()=>k,Ao:()=>M,Of:()=>at,hh:()=>m,pM:()=>rt,kQ:()=>p,Jv:()=>et,Ee:()=>Y,bw:()=>Z,ob:()=>q,Fo:()=>L,u2:()=>_,LZ:()=>o,vf:()=>v});var n=r(7636),i=r(4361);function o(t,e){var r=t.directives;return!r||!r.length||function(t){var e=[];t&&t.length&&t.forEach((function(t){if(function(t){var e=t.name.value;return"skip"===e||"include"===e}(t)){var r=t.arguments;t.name.value;(0,i.kG)(r&&1===r.length,39);var n=r[0];(0,i.kG)(n.name&&"if"===n.name.value,40);var o=n.value;(0,i.kG)(o&&("Variable"===o.kind||"BooleanValue"===o.kind),41),e.push({directive:t,ifArgument:n})}}));return e}(r).every((function(t){var r=t.directive,n=t.ifArgument,o=!1;return"Variable"===n.value.kind?(o=e&&e[n.value.name.value],(0,i.kG)(void 0!==o,38)):o=n.value.value,"skip"===r.name.value?!o:o}))}function s(t,e){return function(t){var e=[];return(0,n.Vn)(t,{Directive:function(t){e.push(t.name.value)}}),e}(e).some((function(e){return t.indexOf(e)>-1}))}function a(t){return t&&s(["client"],t)&&s(["export"],t)}var l=r(655);function u(t,e){var r=e,n=[];return t.definitions.forEach((function(t){if("OperationDefinition"===t.kind)throw new i.ej(42);"FragmentDefinition"===t.kind&&n.push(t)})),void 0===r&&((0,i.kG)(1===n.length,43),r=n[0].name.value),(0,l.pi)((0,l.pi)({},t),{definitions:(0,l.pr)([{kind:"OperationDefinition",operation:"query",selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:r}}]}}],t.definitions)})}function h(t){void 0===t&&(t=[]);var e={};return t.forEach((function(t){e[t.name.value]=t})),e}function c(t,e){switch(t.kind){case"InlineFragment":return t;case"FragmentSpread":var r=e&&e[t.name.value];return(0,i.kG)(r,44),r;default:return null}}var f=r(5035),d=r.n(f);function p(t){return{__ref:String(t)}}function m(t){return Boolean(t&&"object"==typeof t&&"string"==typeof t.__ref)}function g(t,e,r,n){if(function(t){return"IntValue"===t.kind}(r)||function(t){return"FloatValue"===t.kind}(r))t[e.value]=Number(r.value);else if(function(t){return"BooleanValue"===t.kind}(r)||function(t){return"StringValue"===t.kind}(r))t[e.value]=r.value;else if(function(t){return"ObjectValue"===t.kind}(r)){var o={};r.fields.map((function(t){return g(o,t.name,t.value,n)})),t[e.value]=o}else if(function(t){return"Variable"===t.kind}(r)){var s=(n||{})[r.name.value];t[e.value]=s}else if(function(t){return"ListValue"===t.kind}(r))t[e.value]=r.values.map((function(t){var r={};return g(r,e,t,n),r[e.value]}));else if(function(t){return"EnumValue"===t.kind}(r))t[e.value]=r.value;else{if(!function(t){return"NullValue"===t.kind}(r))throw new i.ej(53);t[e.value]=null}}function v(t,e){var r=null;t.directives&&(r={},t.directives.forEach((function(t){r[t.name.value]={},t.arguments&&t.arguments.forEach((function(n){var i=n.name,o=n.value;return g(r[t.name.value],i,o,e)}))})));var n=null;return t.arguments&&t.arguments.length&&(n={},t.arguments.forEach((function(t){var r=t.name,i=t.value;return g(n,r,i,e)}))),y(t.name.value,n,r)}var w=["connection","include","skip","client","rest","export"];function y(t,e,r){if(e&&r&&r.connection&&r.connection.key){if(r.connection.filter&&r.connection.filter.length>0){var n=r.connection.filter?r.connection.filter:[];n.sort();var i={};return n.forEach((function(t){i[t]=e[t]})),r.connection.key+"("+JSON.stringify(i)+")"}return r.connection.key}var o=t;if(e){var s=d()(e);o+="("+s+")"}return r&&Object.keys(r).forEach((function(t){-1===w.indexOf(t)&&(r[t]&&Object.keys(r[t]).length?o+="@"+t+"("+JSON.stringify(r[t])+")":o+="@"+t)})),o}function b(t,e){if(t.arguments&&t.arguments.length){var r={};return t.arguments.forEach((function(t){var n=t.name,i=t.value;return g(r,n,i,e)})),r}return null}function _(t){return t.alias?t.alias.value:t.name.value}function x(t,e,r){if("string"==typeof t.__typename)return t.__typename;for(var n=0,i=e.selections;n<i.length;n++){var o=i[n];if(k(o)){if("__typename"===o.name.value)return t[_(o)]}else{var s=x(t,c(o,r).selectionSet,r);if("string"==typeof s)return s}}}function k(t){return"Field"===t.kind}function M(t){return"InlineFragment"===t.kind}function S(t){(0,i.kG)(t&&"Document"===t.kind,45);var e=t.definitions.filter((function(t){return"FragmentDefinition"!==t.kind})).map((function(t){if("OperationDefinition"!==t.kind)throw new i.ej(46);return t}));return(0,i.kG)(e.length<=1,47),t}function E(t){return S(t),t.definitions.filter((function(t){return"OperationDefinition"===t.kind}))[0]}function A(t){return t.definitions.filter((function(t){return"OperationDefinition"===t.kind&&t.name})).map((function(t){return t.name.value}))[0]||null}function C(t){return t.definitions.filter((function(t){return"FragmentDefinition"===t.kind}))}function D(t){var e=E(t);return(0,i.kG)(e&&"query"===e.operation,48),e}function O(t){var e;S(t);for(var r=0,n=t.definitions;r<n.length;r++){var o=n[r];if("OperationDefinition"===o.kind){var s=o.operation;if("query"===s||"mutation"===s||"subscription"===s)return o}"FragmentDefinition"!==o.kind||e||(e=o)}if(e)return e;throw new i.ej(52)}function P(t){var e=Object.create(null),r=t&&t.variableDefinitions;return r&&r.length&&r.forEach((function(t){t.defaultValue&&g(e,t.variable.name,t.defaultValue)})),e}function R(t,e,r){var n=0;return t.forEach((function(r,i){e.call(this,r,i,t)&&(t[n++]=r)}),r),t.length=n,t}var I={kind:"Field",name:{kind:"Name",value:"__typename"}};function T(t,e){return t.selectionSet.selections.every((function(t){return"FragmentSpread"===t.kind&&T(e[t.name.value],e)}))}function F(t){return T(E(t)||function(t){(0,i.kG)("Document"===t.kind,49),(0,i.kG)(t.definitions.length<=1,50);var e=t.definitions[0];return(0,i.kG)("FragmentDefinition"===e.kind,51),e}(t),h(C(t)))?null:t}function j(t){return function(e){return t.some((function(t){return t.name&&t.name===e.name.value||t.test&&t.test(e)}))}}function N(t,e){var r=Object.create(null),i=[],o=Object.create(null),s=[],a=F((0,n.Vn)(e,{Variable:{enter:function(t,e,n){"VariableDefinition"!==n.kind&&(r[t.name.value]=!0)}},Field:{enter:function(e){if(t&&e.directives&&(t.some((function(t){return t.remove}))&&e.directives&&e.directives.some(j(t))))return e.arguments&&e.arguments.forEach((function(t){"Variable"===t.value.kind&&i.push({name:t.value.name.value})})),e.selectionSet&&$(e.selectionSet).forEach((function(t){s.push({name:t.name.value})})),null}},FragmentSpread:{enter:function(t){o[t.name.value]=!0}},Directive:{enter:function(e){if(j(t)(e))return null}}}));return a&&R(i,(function(t){return!!t.name&&!r[t.name]})).length&&(a=function(t,e){var r=function(t){return function(e){return t.some((function(t){return e.value&&"Variable"===e.value.kind&&e.value.name&&(t.name===e.value.name.value||t.test&&t.test(e))}))}}(t);return F((0,n.Vn)(e,{OperationDefinition:{enter:function(e){return(0,l.pi)((0,l.pi)({},e),{variableDefinitions:e.variableDefinitions?e.variableDefinitions.filter((function(e){return!t.some((function(t){return t.name===e.variable.name.value}))})):[]})}},Field:{enter:function(e){if(t.some((function(t){return t.remove}))){var n=0;if(e.arguments&&e.arguments.forEach((function(t){r(t)&&(n+=1)})),1===n)return null}}},Argument:{enter:function(t){if(r(t))return null}}}))}(i,a)),a&&R(s,(function(t){return!!t.name&&!o[t.name]})).length&&(a=function(t,e){function r(e){if(t.some((function(t){return t.name===e.name.value})))return null}return F((0,n.Vn)(e,{FragmentSpread:{enter:r},FragmentDefinition:{enter:r}}))}(s,a)),a}function B(t){return(0,n.Vn)(S(t),{SelectionSet:{enter:function(t,e,r){if(!r||"OperationDefinition"!==r.kind){var n=t.selections;if(n)if(!n.some((function(t){return k(t)&&("__typename"===t.name.value||0===t.name.value.lastIndexOf("__",0))}))){var i=r;if(!(k(i)&&i.directives&&i.directives.some((function(t){return"export"===t.name.value}))))return(0,l.pi)((0,l.pi)({},t),{selections:(0,l.pr)(n,[I])})}}}}})}B.added=function(t){return t===I};var U={test:function(t){var e="connection"===t.name.value;return e&&(!t.arguments||t.arguments.some((function(t){return"key"===t.name.value}))),e}};function L(t){return N([U],S(t))}function $(t){var e=[];return t.selections.forEach((function(t){(k(t)||M(t))&&t.selectionSet?$(t.selectionSet).forEach((function(t){return e.push(t)})):"FragmentSpread"===t.kind&&e.push(t)})),e}function z(t){return"query"===O(t).operation?t:(0,n.Vn)(t,{OperationDefinition:{enter:function(t){return(0,l.pi)((0,l.pi)({},t),{operation:"query"})}}})}function q(t){S(t);var e=N([{test:function(t){return"client"===t.name.value},remove:!0}],t);return e&&(e=(0,n.Vn)(e,{FragmentDefinition:{enter:function(t){if(t.selectionSet&&t.selectionSet.selections.every((function(t){return k(t)&&"__typename"===t.name.value})))return null}}})),e}var V=Object.prototype.hasOwnProperty;function Y(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Z(t)}function Z(t){var e=t[0]||{},r=t.length;if(r>1)for(var n=new H,i=1;i<r;++i)e=n.merge(e,t[i]);return e}function G(t){return null!==t&&"object"==typeof t}var X=function(t,e,r){return this.merge(t[r],e[r])},H=function(){function t(t){void 0===t&&(t=X),this.reconciler=t,this.isObject=G,this.pastCopies=new Set}return t.prototype.merge=function(t,e){for(var r=this,n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return G(e)&&G(t)?(Object.keys(e).forEach((function(i){if(V.call(t,i)){var o=t[i];if(e[i]!==o){var s=r.reconciler.apply(r,(0,l.pr)([t,e,i],n));s!==o&&((t=r.shallowCopyForMerge(t))[i]=s)}}else(t=r.shallowCopyForMerge(t))[i]=e[i]})),t):e},t.prototype.shallowCopyForMerge=function(t){return G(t)&&!this.pastCopies.has(t)&&(t=Array.isArray(t)?t.slice(0):(0,l.pi)({__proto__:Object.getPrototypeOf(t)},t),this.pastCopies.add(t)),t},t}();var Q=r(9329),W=r.n(Q);r(1494);W().prototype["@@observable"]=function(){return this};var K=Object.prototype.toString;function J(t){return tt(t)}function tt(t,e){switch(K.call(t)){case"[object Array]":if((e=e||new Map).has(t))return e.get(t);var r=t.slice(0);return e.set(t,r),r.forEach((function(t,n){r[n]=tt(t,e)})),r;case"[object Object]":if((e=e||new Map).has(t))return e.get(t);var n=Object.create(Object.getPrototypeOf(t));return e.set(t,n),Object.keys(t).forEach((function(r){n[r]=tt(t[r],e)})),n;default:return t}}r(4155);function et(t){return t}function rt(t,e,r){var n=[];t.forEach((function(t){return t[e]&&n.push(t)})),n.forEach((function(t){return t[e](r)}))}function nt(t,e,r){return new(W())((function(n){var i=n.next,o=n.error,s=n.complete,a=0,l=!1,u={then:function(t){return new Promise((function(e){return e(t())}))}};function h(t,e){return t?function(e){++a;var r=function(){return t(e)};u=u.then(r,r).then((function(t){--a,i&&i.call(n,t),l&&c.complete()}),(function(t){throw--a,t})).catch((function(t){o&&o.call(n,t)}))}:function(t){return e&&e.call(n,t)}}var c={next:h(e,i),error:h(r,o),complete:function(){l=!0,a||s&&s.call(n)}},f=t.subscribe(c);return function(){return f.unsubscribe()}}))}function it(t){function e(e){Object.defineProperty(t,e,{value:W()})}return"function"==typeof Symbol&&Symbol.species&&e(Symbol.species),e("@@species"),t}function ot(t){return t&&"function"==typeof t.then}var st=function(t){function e(e){var r=t.call(this,(function(t){return r.addObserver(t),function(){return r.removeObserver(t)}}))||this;return r.observers=new Set,r.addCount=0,r.promise=new Promise((function(t,e){r.resolve=t,r.reject=e})),r.handlers={next:function(t){null!==r.sub&&(r.latest=["next",t],rt(r.observers,"next",t))},error:function(t){var e=r.sub;null!==e&&(e&&Promise.resolve().then((function(){return e.unsubscribe()})),r.sub=null,r.latest=["error",t],r.reject(t),rt(r.observers,"error",t))},complete:function(){if(null!==r.sub){var t=r.sources.shift();t?ot(t)?t.then((function(t){return r.sub=t.subscribe(r.handlers)})):r.sub=t.subscribe(r.handlers):(r.sub=null,r.latest&&"next"===r.latest[0]?r.resolve(r.latest[1]):r.resolve(),rt(r.observers,"complete"))}}},r.cancel=function(t){r.reject(t),r.sources=[],r.handlers.complete()},r.promise.catch((function(t){})),"function"==typeof e&&(e=[new(W())(e)]),ot(e)?e.then((function(t){return r.start(t)}),r.handlers.error):r.start(e),r}return(0,l.ZT)(e,t),e.prototype.start=function(t){void 0===this.sub&&(this.sources=Array.from(t),this.handlers.complete())},e.prototype.deliverLastMessage=function(t){if(this.latest){var e=this.latest[0],r=t[e];r&&r.call(t,this.latest[1]),null===this.sub&&"next"===e&&t.complete&&t.complete()}},e.prototype.addObserver=function(t){this.observers.has(t)||(this.deliverLastMessage(t),this.observers.add(t),++this.addCount)},e.prototype.removeObserver=function(t,e){this.observers.delete(t)&&--this.addCount<1&&!e&&this.handlers.error(new Error("Observable cancelled prematurely"))},e.prototype.cleanup=function(t){var e=this,r=!1,n=function(){r||(r=!0,e.observers.delete(i),t())},i={next:n,error:n,complete:n},o=this.addCount;this.addObserver(i),this.addCount=o},e}(W());function at(t){return Array.isArray(t)&&t.length>0}function lt(t){return t.errors&&t.errors.length>0||!1}it(st);var ut="function"==typeof WeakMap&&!("object"==typeof navigator&&"ReactNative"===navigator.product);function ht(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object.create(null);return t.forEach((function(t){t&&Object.keys(t).forEach((function(e){var n=t[e];void 0!==n&&(r[e]=n)}))})),r}},7154:t=>{function e(){return t.exports=e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},t.exports.default=t.exports,t.exports.__esModule=!0,e.apply(this,arguments)}t.exports=e,t.exports.default=t.exports,t.exports.__esModule=!0},7757:(t,e,r)=>{t.exports=r(5666)},2152:(t,e,r)=>{"use strict";r.d(e,{D:()=>a});var n=Object.prototype,i=n.toString,o=n.hasOwnProperty,s=new Map;function a(t,e){try{return l(t,e)}finally{s.clear()}}function l(t,e){if(t===e)return!0;var r=i.call(t);if(r!==i.call(e))return!1;switch(r){case"[object Array]":if(t.length!==e.length)return!1;case"[object Object]":if(u(t,e))return!0;var n=Object.keys(t),s=Object.keys(e),a=n.length;if(a!==s.length)return!1;for(var h=0;h<a;++h)if(!o.call(e,n[h]))return!1;for(h=0;h<a;++h){var c=n[h];if(!l(t[c],e[c]))return!1}return!0;case"[object Error]":return t.name===e.name&&t.message===e.message;case"[object Number]":if(t!=t)return e!=e;case"[object Boolean]":case"[object Date]":return+t==+e;case"[object RegExp]":case"[object String]":return t==""+e;case"[object Map]":case"[object Set]":if(t.size!==e.size)return!1;if(u(t,e))return!0;for(var f=t.entries(),d="[object Map]"===r;;){var p=f.next();if(p.done)break;var m=p.value,g=m[0],v=m[1];if(!e.has(g))return!1;if(d&&!l(v,e.get(g)))return!1}return!0}return!1}function u(t,e){var r=s.get(t);if(r){if(r.has(e))return!0}else s.set(t,r=new Set);return r.add(e),!1}},2644:(t,e,r)=>{"use strict";r.d(e,{R:()=>l});var n=r(1045);function i(t){return{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GeneratedClientQuery"},selectionSet:o(t)}]}}function o(t){if("number"==typeof t||"boolean"==typeof t||"string"==typeof t||null==t)return null;if(Array.isArray(t))return o(t[0]);var e=[];return Object.keys(t).forEach((function(r){var n={kind:"Field",name:{kind:"Name",value:r},selectionSet:o(t[r])||void 0};e.push(n)})),{kind:"SelectionSet",selections:e}}var s,a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:null,variableDefinitions:null,directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"__typename"},arguments:[],directives:[],selectionSet:null}]}}]},l=function(){function t(){}return t.prototype.transformDocument=function(t){return t},t.prototype.transformForLink=function(t){return t},t.prototype.readQuery=function(t,e){return void 0===e&&(e=!1),this.read({query:t.query,variables:t.variables,optimistic:e})},t.prototype.readFragment=function(t,e){return void 0===e&&(e=!1),this.read({query:(0,n.Yk)(t.fragment,t.fragmentName),variables:t.variables,rootId:t.id,optimistic:e})},t.prototype.writeQuery=function(t){this.write({dataId:"ROOT_QUERY",result:t.data,query:t.query,variables:t.variables})},t.prototype.writeFragment=function(t){this.write({dataId:t.id,result:t.data,variables:t.variables,query:(0,n.Yk)(t.fragment,t.fragmentName)})},t.prototype.writeData=function(t){var e,r,n=t.id,s=t.data;if(void 0!==n){var l=null;try{l=this.read({rootId:n,optimistic:!1,query:a})}catch(t){}var u=l&&l.__typename||"__ClientData",h=Object.assign({__typename:u},s);this.writeFragment({id:n,fragment:(e=h,r=u,{kind:"Document",definitions:[{kind:"FragmentDefinition",typeCondition:{kind:"NamedType",name:{kind:"Name",value:r||"__FakeType"}},name:{kind:"Name",value:"GeneratedClientQuery"},selectionSet:o(e)}]}),data:h})}else this.writeQuery({query:i(s),data:s})},t}();s||(s={})},1803:(t,e,r)=>{"use strict";r.d(e,{i0:()=>m,ht:()=>g});var n=r(9904),i=r(7591),o=r(655),s=r(1045);!function(t){function e(e,r){var n=t.call(this,e)||this;return n.link=r,n}(0,o.ZT)(e,t)}(Error);function a(t){return t.request.length<=1}function l(t,e){var r=(0,o.pi)({},t);return Object.defineProperty(e,"setContext",{enumerable:!1,value:function(t){r="function"==typeof t?(0,o.pi)({},r,t(r)):(0,o.pi)({},r,t)}}),Object.defineProperty(e,"getContext",{enumerable:!1,value:function(){return(0,o.pi)({},r)}}),Object.defineProperty(e,"toKey",{enumerable:!1,value:function(){return function(t){var e=t.query,r=t.variables,n=t.operationName;return JSON.stringify([n,e,r])}(e)}}),e}function u(t,e){return e?e(t):n.Z.of()}function h(t){return"function"==typeof t?new m(t):t}function c(){return new m((function(){return n.Z.of()}))}function f(t){return 0===t.length?c():t.map(h).reduce((function(t,e){return t.concat(e)}))}function d(t,e,r){var i=h(e),o=h(r||new m(u));return a(i)&&a(o)?new m((function(e){return t(e)?i.request(e)||n.Z.of():o.request(e)||n.Z.of()})):new m((function(e,r){return t(e)?i.request(e,r)||n.Z.of():o.request(e,r)||n.Z.of()}))}var p=function(t,e){var r=h(t);if(a(r))return r;var i=h(e);return a(i)?new m((function(t){return r.request(t,(function(t){return i.request(t)||n.Z.of()}))||n.Z.of()})):new m((function(t,e){return r.request(t,(function(t){return i.request(t,e)||n.Z.of()}))||n.Z.of()}))},m=function(){function t(t){t&&(this.request=t)}return t.prototype.split=function(e,r,n){return this.concat(d(e,r,n||new t(u)))},t.prototype.concat=function(t){return p(this,t)},t.prototype.request=function(t,e){throw new i.ej(1)},t.empty=c,t.from=f,t.split=d,t.execute=g,t}();function g(t,e){return t.request(l(e.context,function(t){var e={variables:t.variables||{},extensions:t.extensions||{},operationName:t.operationName,query:t.query};return e.operationName||(e.operationName="string"!=typeof e.query?(0,s.rY)(e.query):""),e}(function(t){for(var e=["query","operationName","variables","extensions","context"],r=0,n=Object.keys(t);r<n.length;r++){var o=n[r];if(e.indexOf(o)<0)throw new i.ej(2)}return t}(e))))||n.Z.of()}},1045:(t,e,r)=>{"use strict";r.d(e,{Gw:()=>$,NC:()=>d,f0:()=>E,aL:()=>Y,mr:()=>G,Xh:()=>H,F:()=>I,O4:()=>T,Qy:()=>b,kU:()=>O,Yk:()=>S,p$:()=>R,$H:()=>C,rY:()=>D,iW:()=>P,PT:()=>f,d2:()=>et,mj:()=>k,FS:()=>x,My:()=>m,cQ:()=>v,Ao:()=>g,v4:()=>y,yv:()=>K,Y8:()=>J,Jv:()=>nt,Ee:()=>ot,bw:()=>st,ob:()=>Z,Fo:()=>q,u2:()=>p,LZ:()=>_,vf:()=>h,aX:()=>w,XY:()=>tt});var n=r(7636),i=r(7591),o=r(655),s=r(5035),a=r.n(s),l=(r(2152),r(4155));function u(t,e,r,n){if(function(t){return"IntValue"===t.kind}(r)||function(t){return"FloatValue"===t.kind}(r))t[e.value]=Number(r.value);else if(function(t){return"BooleanValue"===t.kind}(r)||function(t){return"StringValue"===t.kind}(r))t[e.value]=r.value;else if(function(t){return"ObjectValue"===t.kind}(r)){var o={};r.fields.map((function(t){return u(o,t.name,t.value,n)})),t[e.value]=o}else if(function(t){return"Variable"===t.kind}(r)){var s=(n||{})[r.name.value];t[e.value]=s}else if(function(t){return"ListValue"===t.kind}(r))t[e.value]=r.values.map((function(t){var r={};return u(r,e,t,n),r[e.value]}));else if(function(t){return"EnumValue"===t.kind}(r))t[e.value]=r.value;else{if(!function(t){return"NullValue"===t.kind}(r))throw new i.ej(17);t[e.value]=null}}function h(t,e){var r=null;t.directives&&(r={},t.directives.forEach((function(t){r[t.name.value]={},t.arguments&&t.arguments.forEach((function(n){var i=n.name,o=n.value;return u(r[t.name.value],i,o,e)}))})));var n=null;return t.arguments&&t.arguments.length&&(n={},t.arguments.forEach((function(t){var r=t.name,i=t.value;return u(n,r,i,e)}))),f(t.name.value,n,r)}var c=["connection","include","skip","client","rest","export"];function f(t,e,r){if(r&&r.connection&&r.connection.key){if(r.connection.filter&&r.connection.filter.length>0){var n=r.connection.filter?r.connection.filter:[];n.sort();var i=e,o={};return n.forEach((function(t){o[t]=i[t]})),r.connection.key+"("+JSON.stringify(o)+")"}return r.connection.key}var s=t;if(e){var l=a()(e);s+="("+l+")"}return r&&Object.keys(r).forEach((function(t){-1===c.indexOf(t)&&(r[t]&&Object.keys(r[t]).length?s+="@"+t+"("+JSON.stringify(r[t])+")":s+="@"+t)})),s}function d(t,e){if(t.arguments&&t.arguments.length){var r={};return t.arguments.forEach((function(t){var n=t.name,i=t.value;return u(r,n,i,e)})),r}return null}function p(t){return t.alias?t.alias.value:t.name.value}function m(t){return"Field"===t.kind}function g(t){return"InlineFragment"===t.kind}function v(t){return t&&"id"===t.type&&"boolean"==typeof t.generated}function w(t,e){return void 0===e&&(e=!1),(0,o.pi)({type:"id",generated:e},"string"==typeof t?{id:t,typename:void 0}:t)}function y(t){return null!=t&&"object"==typeof t&&"json"===t.type}function b(t,e){if(t.directives&&t.directives.length){var r={};return t.directives.forEach((function(t){r[t.name.value]=d(t,e)})),r}return null}function _(t,e){return void 0===e&&(e={}),(r=t.directives,r?r.filter(M).map((function(t){var e=t.arguments;t.name.value,(0,i.kG)(e&&1===e.length,14);var r=e[0];(0,i.kG)(r.name&&"if"===r.name.value,15);var n=r.value;return(0,i.kG)(n&&("Variable"===n.kind||"BooleanValue"===n.kind),16),{directive:t,ifArgument:r}})):[]).every((function(t){var r=t.directive,n=t.ifArgument,o=!1;return"Variable"===n.value.kind?(o=e[n.value.name.value],(0,i.kG)(void 0!==o,13)):o=n.value.value,"skip"===r.name.value?!o:o}));var r}function x(t,e){return function(t){var e=[];return(0,n.Vn)(t,{Directive:function(t){e.push(t.name.value)}}),e}(e).some((function(e){return t.indexOf(e)>-1}))}function k(t){return t&&x(["client"],t)&&x(["export"],t)}function M(t){var e=t.name.value;return"skip"===e||"include"===e}function S(t,e){var r=e,n=[];return t.definitions.forEach((function(t){if("OperationDefinition"===t.kind)throw new i.ej(11);"FragmentDefinition"===t.kind&&n.push(t)})),void 0===r&&((0,i.kG)(1===n.length,12),r=n[0].name.value),(0,o.pi)((0,o.pi)({},t),{definitions:(0,o.pr)([{kind:"OperationDefinition",operation:"query",selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:r}}]}}],t.definitions)})}function E(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return e.forEach((function(e){null!=e&&Object.keys(e).forEach((function(r){t[r]=e[r]}))})),t}function A(t){(0,i.kG)(t&&"Document"===t.kind,2);var e=t.definitions.filter((function(t){return"FragmentDefinition"!==t.kind})).map((function(t){if("OperationDefinition"!==t.kind)throw new i.ej(3);return t}));return(0,i.kG)(e.length<=1,4),t}function C(t){return A(t),t.definitions.filter((function(t){return"OperationDefinition"===t.kind}))[0]}function D(t){return t.definitions.filter((function(t){return"OperationDefinition"===t.kind&&t.name})).map((function(t){return t.name.value}))[0]||null}function O(t){return t.definitions.filter((function(t){return"FragmentDefinition"===t.kind}))}function P(t){var e=C(t);return(0,i.kG)(e&&"query"===e.operation,6),e}function R(t){var e;A(t);for(var r=0,n=t.definitions;r<n.length;r++){var o=n[r];if("OperationDefinition"===o.kind){var s=o.operation;if("query"===s||"mutation"===s||"subscription"===s)return o}"FragmentDefinition"!==o.kind||e||(e=o)}if(e)return e;throw new i.ej(10)}function I(t){void 0===t&&(t=[]);var e={};return t.forEach((function(t){e[t.name.value]=t})),e}function T(t){if(t&&t.variableDefinitions&&t.variableDefinitions.length){var e=t.variableDefinitions.filter((function(t){return t.defaultValue})).map((function(t){var e=t.variable,r=t.defaultValue,n={};return u(n,e.name,r),n}));return E.apply(void 0,(0,o.pr)([{}],e))}return{}}function F(t,e,r){var n=0;return t.forEach((function(r,i){e.call(this,r,i,t)&&(t[n++]=r)}),r),t.length=n,t}var j={kind:"Field",name:{kind:"Name",value:"__typename"}};function N(t,e){return t.selectionSet.selections.every((function(t){return"FragmentSpread"===t.kind&&N(e[t.name.value],e)}))}function B(t){return N(C(t)||function(t){(0,i.kG)("Document"===t.kind,7),(0,i.kG)(t.definitions.length<=1,8);var e=t.definitions[0];return(0,i.kG)("FragmentDefinition"===e.kind,9),e}(t),I(O(t)))?null:t}function U(t){return function(e){return t.some((function(t){return t.name&&t.name===e.name.value||t.test&&t.test(e)}))}}function L(t,e){var r=Object.create(null),i=[],s=Object.create(null),a=[],l=B((0,n.Vn)(e,{Variable:{enter:function(t,e,n){"VariableDefinition"!==n.kind&&(r[t.name.value]=!0)}},Field:{enter:function(e){if(t&&e.directives&&(t.some((function(t){return t.remove}))&&e.directives&&e.directives.some(U(t))))return e.arguments&&e.arguments.forEach((function(t){"Variable"===t.value.kind&&i.push({name:t.value.name.value})})),e.selectionSet&&V(e.selectionSet).forEach((function(t){a.push({name:t.name.value})})),null}},FragmentSpread:{enter:function(t){s[t.name.value]=!0}},Directive:{enter:function(e){if(U(t)(e))return null}}}));return l&&F(i,(function(t){return!r[t.name]})).length&&(l=function(t,e){var r=function(t){return function(e){return t.some((function(t){return e.value&&"Variable"===e.value.kind&&e.value.name&&(t.name===e.value.name.value||t.test&&t.test(e))}))}}(t);return B((0,n.Vn)(e,{OperationDefinition:{enter:function(e){return(0,o.pi)((0,o.pi)({},e),{variableDefinitions:e.variableDefinitions.filter((function(e){return!t.some((function(t){return t.name===e.variable.name.value}))}))})}},Field:{enter:function(e){if(t.some((function(t){return t.remove}))){var n=0;if(e.arguments.forEach((function(t){r(t)&&(n+=1)})),1===n)return null}}},Argument:{enter:function(t){if(r(t))return null}}}))}(i,l)),l&&F(a,(function(t){return!s[t.name]})).length&&(l=function(t,e){function r(e){if(t.some((function(t){return t.name===e.name.value})))return null}return B((0,n.Vn)(e,{FragmentSpread:{enter:r},FragmentDefinition:{enter:r}}))}(a,l)),l}function $(t){return(0,n.Vn)(A(t),{SelectionSet:{enter:function(t,e,r){if(!r||"OperationDefinition"!==r.kind){var n=t.selections;if(n)if(!n.some((function(t){return m(t)&&("__typename"===t.name.value||0===t.name.value.lastIndexOf("__",0))}))){var i=r;if(!(m(i)&&i.directives&&i.directives.some((function(t){return"export"===t.name.value}))))return(0,o.pi)((0,o.pi)({},t),{selections:(0,o.pr)(n,[j])})}}}}})}var z={test:function(t){var e="connection"===t.name.value;return e&&(!t.arguments||t.arguments.some((function(t){return"key"===t.name.value}))),e}};function q(t){return L([z],A(t))}function V(t){var e=[];return t.selections.forEach((function(t){(m(t)||g(t))&&t.selectionSet?V(t.selectionSet).forEach((function(t){return e.push(t)})):"FragmentSpread"===t.kind&&e.push(t)})),e}function Y(t){return"query"===R(t).operation?t:(0,n.Vn)(t,{OperationDefinition:{enter:function(t){return(0,o.pi)((0,o.pi)({},t),{operation:"query"})}}})}function Z(t){A(t);var e=L([{test:function(t){return"client"===t.name.value},remove:!0}],t);return e&&(e=(0,n.Vn)(e,{FragmentDefinition:{enter:function(t){if(t.selectionSet&&t.selectionSet.selections.every((function(t){return m(t)&&"__typename"===t.name.value})))return null}}})),e}var G="function"==typeof WeakMap&&!("object"==typeof navigator&&"ReactNative"===navigator.product),X=Object.prototype.toString;function H(t){return Q(t,new Map)}function Q(t,e){switch(X.call(t)){case"[object Array]":if(e.has(t))return e.get(t);var r=t.slice(0);return e.set(t,r),r.forEach((function(t,n){r[n]=Q(t,e)})),r;case"[object Object]":if(e.has(t))return e.get(t);var n=Object.create(Object.getPrototypeOf(t));return e.set(t,n),Object.keys(t).forEach((function(r){n[r]=Q(t[r],e)})),n;default:return t}}function W(t){return(void 0!==l?"production":"development")===t}function K(){return!0===W("production")}function J(){return!0===W("test")}function tt(t){try{return t()}catch(t){console.error&&console.error(t)}}function et(t){return t.errors&&t.errors.length}function rt(t){return Object.freeze(t),Object.getOwnPropertyNames(t).forEach((function(e){null===t[e]||"object"!=typeof t[e]&&"function"!=typeof t[e]||Object.isFrozen(t[e])||rt(t[e])})),t}function nt(t){if((!0===W("development")||J())&&!("function"==typeof Symbol&&"string"==typeof Symbol("")))return rt(t);return t}var it=Object.prototype.hasOwnProperty;function ot(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return st(t)}function st(t){var e=t[0]||{},r=t.length;if(r>1){var n=[];e=ut(e,n);for(var i=1;i<r;++i)e=lt(e,t[i],n)}return e}function at(t){return null!==t&&"object"==typeof t}function lt(t,e,r){return at(e)&&at(t)?(Object.isExtensible&&!Object.isExtensible(t)&&(t=ut(t,r)),Object.keys(e).forEach((function(n){var i=e[n];if(it.call(t,n)){var o=t[n];i!==o&&(t[n]=lt(ut(o,r),i,r))}else t[n]=i})),t):e}function ut(t,e){return null!==t&&"object"==typeof t&&e.indexOf(t)<0&&(t=Array.isArray(t)?t.slice(0):(0,o.pi)({__proto__:Object.getPrototypeOf(t)},t),e.push(t)),t}Object.create({})},6099:(t,e,r)=>{r(9064)},9064:(t,e,r)=>{"use strict";r.r(e);var n=r(538),i=r(5464),o=r.n(i),s=r(8345),a=(r(1617),r(2987)),l=r(2489),u=r(1462),h=r(9776),c=r.n(h),f=r(2088),d=r(7975),p=r(8285),m=r(2896),g=r(3857);function v(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function w(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?v(Object(r),!0).forEach((function(e){y(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function y(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const b={props:{value:{type:Boolean,default:!1}},data:function(){return{form:{email:null,password:null}}},computed:{hasRetrieve:function(){return null!=this.$route.query.retrieve&&this.$route.query.retrieve.length>0},origin:function(){return this.$route.query.redirect}},methods:{login:function(t){var e=this;if(!this.$refs.form.validate())return this.$snackbar.show({text:"Invalid form",color:"error"});var r=w({},this.form);console.log(r),t({variables:{data:r},update:function(t,r){var n=r.data;if(console.log(n),opt(n).login)if(e.form={email:null,password:null},null==n.login.me.email_verified_at)e.$router.replace(w(w({},e.$route),{},{query:{email_verification:n.login.me.id}}));else{var i=e.$route.name;e.$repositories.auth.login(n.login),"starting"===i&&i===e.$route.name&&e.$router.push({name:"home"})}else e.$snackbar.show({text:"Email or password invalid",color:"error"})}})}},watch:{value:function(t){var e=this;t&&null!=this.$refs.form&&this.$nextTick((function(t){e.$refs.form.reset()}))}}};var _=r(1900);const x=(0,_.Z)(b,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{"hide-overlay":"",persistent:"",value:t.value,"max-width":"350"},on:{input:function(e){return t.$emit("input",e)}}},[n("v-card",{staticClass:"align-self-center",attrs:{light:""}},[n("v-card-title",[t._v("\n            Sign In\n            "),n("v-spacer"),t._v(" "),n("v-btn",{attrs:{icon:""},on:{click:function(e){return t.popQuery("sign_in")}}},[n("v-icon",[t._v("close")])],1)],1),t._v(" "),n("v-card-text",[n("v-layout",{attrs:{column:"","fill-height":"","justify-center":""}},[n("v-avatar",{staticClass:"align-self-center",attrs:{size:"100"}},[n("v-img",{attrs:{src:t.$config.images.logo}})],1)],1),t._v(" "),n("v-layout",{attrs:{column:"","fill-height":"","justify-center":""}},[t.hasRetrieve?n("v-alert",{staticClass:"mt-3",attrs:{type:"info",outlined:""}},[t._v("\n                    Sign in to share your data with\n                    "),n("v-btn",{attrs:{link:"",text:"",small:"",target:"_blank",href:t.origin}},[t._v(t._s(t.origin))])],1):t._e(),t._v(" "),n("MApolloMutation",{attrs:{"error-messages":{"auth:4":"Email or password invalid"},mutation:r(7290).ym},scopedSlots:t._u([{key:"props",fn:function(e){var r=e.mutate,i=e.loading;return[n("v-form",{ref:"form",staticClass:"mt-3"},[n("v-layout",{attrs:{column:""}},[n("v-flex",{attrs:{md12:""}},[n("v-text-field",{attrs:{required:"",label:"Email",maxlength:"30",rules:t.$validations.make("required","filled","email","maxLength(30)"),type:"email"},on:{keyup:function(e){return e.type.indexOf("key")||13===e.keyCode?t.login(r):null}},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email","string"==typeof e?e.trim():e)},expression:"form.email"}})],1),t._v(" "),n("v-flex",{attrs:{md12:""}},[n("v-text-field",{attrs:{required:"",type:"password",minlength:"6",rules:t.$validations.make("required","filled","minLength(6)"),label:"Password"},on:{keyup:function(e){return e.type.indexOf("key")||13===e.keyCode?t.login(r):null}},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password","string"==typeof e?e.trim():e)},expression:"form.password"}})],1),t._v(" "),n("v-flex",{staticClass:"mb-3",attrs:{md12:""}},[n("v-layout",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{text:"",small:"",link:"",color:"primary"},on:{click:function(e){return t.pushQuery({forgot_password:"1"})}}},[t._v("\n                                        forgot password?\n                                    ")])],1)],1),t._v(" "),n("v-flex",{attrs:{md12:""}},[n("v-layout",[n("v-btn",{attrs:{color:"accent",link:"",text:"",depressed:""},on:{click:function(e){return t.pushQuery({sign_up:"1"})}}},[t._v("\n                                        Create\n                                        account\n                                    ")]),t._v(" "),n("v-spacer"),t._v(" "),n("v-btn",{attrs:{color:"primary",loading:i,depressed:""},on:{click:function(e){return t.login(r)}}},[t._v("Sign\n                                        In\n                                    ")])],1)],1)],1)],1)]}}])})],1)],1)],1)],1)}),[],!1,null,null,null).exports;const k={};const M=(0,_.Z)(k,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-card",{staticClass:"blue-grey darken-4 white--text text-center",attrs:{tile:"",flat:""}},[r("v-layout",[r("v-flex",{attrs:{md3:"",xs0:"",sm1:""}}),t._v(" "),r("v-flex",{attrs:{sm10:"",xs12:"",md6:""}},[r("v-card-text",[t._v("\n                The speed of the process helped us enormously in making our onboarding process and our service scalable. Moreover, we were able to reduce the operational workload on our back-office team. It is important to us that identification is secure for us and our customers. We work with sensitive data and were looking for a partner we could trust, with security expertise, and knowledge of regulatory requirements and the divergent legislative situations. ")])],1),t._v(" "),r("v-flex",{attrs:{md3:"",xs0:"",sm1:""}})],1)],1)}),[],!1,null,null,null).exports;function S(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function E(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const A={data:function(){return{form:{full_name:"",email:"",message:""}}},methods:{send:function(t){var e=this;if(!this.$refs.form.validate())return this.$snackbar.show({text:"Invalid form",color:"error"});var r=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?S(Object(r),!0).forEach((function(e){E(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},this.form);console.log(r),t({variables:{data:r},update:function(t,r){var n=r.data;console.log(n),n.createContact&&(e.$snackbar.show({text:"The "+e.$config.appName+"'s team thanks you for your message and promises you an answer as soon as possible.",color:"success",timeout:9e3}),e.form={full_name:"",email:"",message:""},e.$refs.form.reset())}})}}};var C=r(3379),D=r.n(C),O=r(9247),P={insert:"head",singleton:!1};D()(O.Z,P);O.Z.locals;const R=(0,_.Z)(A,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{staticClass:"blue-grey darken-4 white--text text-center",attrs:{tile:"",flat:""}},[n("v-layout",[n("v-flex",{attrs:{md3:"",xs0:"",sm1:""}}),t._v(" "),n("v-flex",{attrs:{sm10:"",xs12:"",md6:""}},[n("v-card-text",[n("v-form",{ref:"form"},[n("v-layout",{attrs:{column:""}},[n("v-flex",{attrs:{md12:""}},[n("v-text-field",{attrs:{solo:"",required:"",label:"Email",maxlength:"30",rules:t.$validations.make("required","filled","email","maxLength(30)"),type:"email"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email","string"==typeof e?e.trim():e)},expression:"form.email"}})],1),t._v(" "),n("v-flex",{attrs:{md12:""}},[n("v-text-field",{attrs:{solo:"",required:"",maxlength:"30",rules:t.$validations.make("required","filled","maxLength(30)"),label:"Full name"},model:{value:t.form.full_name,callback:function(e){t.$set(t.form,"full_name","string"==typeof e?e.trim():e)},expression:"form.full_name"}})],1),t._v(" "),n("v-flex",{attrs:{md12:""}},[n("v-textarea",{attrs:{counter:"640",maxlength:"640",solo:"",rules:t.$validations.make("required","filled","maxLength(640)"),label:"Message",required:""},model:{value:t.form.message,callback:function(e){t.$set(t.form,"message","string"==typeof e?e.trim():e)},expression:"form.message"}})],1)],1)],1),t._v(" "),n("v-layout",[n("v-spacer"),t._v(" "),n("MApolloMutation",{attrs:{mutation:r(8763).J},scopedSlots:t._u([{key:"props",fn:function(e){var r=e.mutate,i=e.loading;return[n("v-btn",{staticClass:"mr-0",attrs:{color:"accent",loading:i,outlined:""},on:{click:function(e){return t.send(r)}}},[t._v("\n                            Send\n                            "),n("v-icon",{attrs:{right:""}},[t._v("send")])],1)]}}])})],1)],1)],1),t._v(" "),n("v-flex",{attrs:{md3:"",xs0:"",sm1:""}})],1)],1)}),[],!1,null,"01f304ba",null).exports;const I={};var T=r(6212),F={insert:"head",singleton:!1};D()(T.Z,F);T.Z.locals;const j=(0,_.Z)(I,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-card",{staticClass:"blue-grey darken-4 white--text text-center",attrs:{tile:"",flat:""}},[r("v-layout",[r("v-flex",{attrs:{md3:"",xs0:"",sm1:""}}),t._v(" "),r("v-flex",{attrs:{sm10:"",xs12:"",md6:""}},[r("v-card-text",[r("v-layout",{attrs:{"align-center":"","justify-space-around":"",wrap:""}},[r("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,i=e.attrs;return[r("div",t._g(t._b({staticClass:"elevation-5 image"},"div",i,!1),n),[r("a",{attrs:{href:"https://twitter.com/Ikankeu12",target:"_blank"},on:{click:function(t){t.stopPropagation()}}},[r("v-avatar",{attrs:{size:"150"}},[r("v-img",{staticClass:"white--text",attrs:{src:"https://pbs.twimg.com/profile_images/848610718983364609/c0jTUMLU_400x400.jpg"}})],1)],1)])]}}])},[r("span",{staticClass:"m-headline"},[t._v("Ivan Kankeu")])]),t._v(" "),r("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,i=e.attrs;return[r("div",t._g(t._b({staticClass:"elevation-5 image"},"div",i,!1),n),[r("a",{attrs:{href:"https://de.linkedin.com/in/dannick-arnold-kwengang-tankeu-b13636153/de-de",target:"_blank"},on:{click:function(t){t.stopPropagation()}}},[r("v-avatar",{attrs:{size:"150"}},[r("v-img",{staticClass:"white--text",attrs:{src:"https://media-exp1.licdn.com/dms/image/C5603AQHjcg89u9j68Q/profile-displayphoto-shrink_200_200/0/1594829207973?e=1622073600&v=beta&t=5SHrDmfEtrofbnM3YszsI86QBYQKUbGEby_FV_ZSarQ"}})],1)],1)])]}}])},[r("span",{staticClass:"m-headline"},[t._v("Dannick Kwengang")])])],1)],1)],1),t._v(" "),r("v-flex",{attrs:{md3:"",xs0:"",sm1:""}})],1)],1)}),[],!1,null,"50c73a56",null).exports;const N='\n    <p align="center">\n    <u><strong>Politique de confidentialit.</strong></u>\n</p>\n<ol type="A">\n    <li>\n        <p>\n            <strong>Introduction</strong>\n        </p>\n    </li>\n</ol>\n<p>\n    1. The privacy of visitors to our website is really important to us. This\n    policy explains what we do with your personal data.\n</p>\n<p>\n    2. You agree to the use of cookies during each of your visits in accordance\n    with the terms of this policy when you first visit our website.\n</p>\n<ol type="A" start="2">\n    <li>\n        <p>\n            <strong>Credit</strong>\n        </p>\n    </li>\n</ol>\n<p>\n    1. This document is inspired by that of <a href="http://www.vpnmentor.com/">www.vpnmentor.com</a>\n</p>\n<ol type="A" start="3">\n    <li>\n        <p>\n            <strong>How we select your personal data</strong>\n        </p>\n    </li>\n</ol>\n<p>\n    The following data types are collected, stored, and used:\n</p>\n<p>\n    1. The information you enter when you create an account on our website. For\n    example your name.\n</p>\n<ol type="A" start="4">\n    <li>\n        <p>\n            <strong>Use of your personal data</strong>\n        </p>\n    </li>\n</ol>\n<p>\n    Your personal data submitted to us via our website will be used for the\n    purposes specified in this policy or on the relevant page on the website.\n    We use your personal data for:\n</p>\n<p>\n    1. Keep our website safe and prevent frauds.\n</p>\n<p>\n    We will not, without your express consent, provide your personal data to\n    third parties\n</p>\n<ol type="A" start="5">\n    <li>\n        <p>\n            <strong>Disclosure of your personal data</strong>\n        </p>\n    </li>\n</ol>\n<p>\n    We may make your personal data available to any of our employees, officers,\n    professional advisors to the extent reasonably necessary for the purposes\n    set out in this policy.\n</p>\n<p>\n    We may disclose your personal information:\n</p>\n<p>\n    1. to the extent that the law obliges us;\n</p>\n<p>\n    2. in the context of ongoing or future judicial proceedings;\n</p>\n<p>\n    3. In order to establish, exercise our legal rights (including the\n    provision of information to third parties for the prevention of fraud);\n</p>\n<p>\n    4. To the buyer of (or potential buyer) of any business or asset we sell\n    (or plan to sell);\n</p>\n<p>\n    5. To any person who may reasonably request the disclosure of such personal\n    data to a court or other competent authority where, in our opinion, such\n    court or authority would reasonably be liable to order disclosure of such\n    data personal;\n</p>\n<p>\n    Unless otherwise stated in this policy, we do not share your personal\n    information with third parties.\n</p>\n<ol type="A" start="6">\n    <li>\n        <p>\n            <strong>International data transfers</strong>\n        </p>\n    </li>\n</ol>\n<p>\n    1. The personal data we collect may be stored, processed and transferred\n    between all the countries in which we operate in order to enable us to use\n    the information in accordance with this policy;\n</p>\n<p>\n    2. The data we collect may be transferred to countries that do not all have\n    equivalent data protection laws from one country to another;\n</p>\n<p>\n    3. Personal data that you post on our website or that you submit for\n    publication on our website may be available via the Internet worldwide. We\n    can not prevent the use or misuse of this information by third parties.\n</p>\n<p>\n    4. You expressly agree to the transfers of personal information described\n    in this section F.\n</p>\n<ol type="A" start="7">\n    <li>\n        <p>\n            <strong>Retention of personal data</strong>\n        </p>\n    </li>\n</ol>\n<p>\n    a. This Section G describes our data retention policies and procedures,\n    which are designed to help us comply with our legal obligations regarding\n    the retention and removal of personal information.\n</p>\n<p>\n    b. Notwithstanding the other provisions of this Section G, we retain\n    documents (including electronic documents) containing personal data:\n</p>\n<p>\n    1. To the extent required by law;\n</p>\n<p>\n    2. If we believe that the documents may be relevant to any ongoing or\n    future litigation proceeding;\n</p>\n<p>\n    3. To establish, exercise or defend our legal rights (including the\n    provision of information to third parties for fraud prevention and credit\n    risk reduction purposes);\n</p>\n<ol type="A" start="8">\n    <li>\n        <p>\n            <strong>Security of your personal data</strong>\n        </p>\n        <ol>\n            <li>\n                <p>\n                    We will prescribe reasonable technical and organizational\n                    precaution to prevent the loss, misuse or alteration of\n                    your personal data;\n                </p>\n            </li>\n            <li>\n                <p>\n                    We will store all personal information you provide on\n                    secure servers (protected by a password and a firewall);\n                </p>\n            </li>\n            <li>\n                <p>\n                    You acknowledge that the transmission of information over\n                    the Internet is inherently insecure, and we can not\n                    guarantee the security of data sent over the Internet;\n                </p>\n            </li>\n            <li>\n                <p>\n                    You are responsible for the confidentiality of the password\n                    you use to access your account on our website. We will not\n                    send you your password (except when you log in to our\n                    website)\n                </p>\n            </li>\n        </ol>\n    </li>\n</ol>\n<ol type="A" start="9">\n    <li>\n        <p>\n            <strong>Modifications</strong>\n        </p>\n    </li>\n</ol>\n<p>\n    We may update this policy from time to time by posting a new version on our\n    website. You should check this page from time to time to make sure you\n    understand any changes to this policy. We may notify you of changes to this\n    policy by e-mail or through the private messaging system of our website.\n</p>\n<ol type="A" start="10">\n    <li>\n        <p>\n            <strong>Third party websites</strong>\n        </p>\n    </li>\n</ol>\n<p>\n    Our website contains hyperlinks to third party websites and details about\n    them. We have no control over, and are not responsible for, the privacy\n    policies and practices of third parties.\n</p>\n<ol type="A" start="11">\n    <li>\n        <p>\n            <strong>Cookie</strong>\n            s\n        </p>\n    </li>\n</ol>\n<p>\n    Our website uses cookies. A cookie is a file containing an identifier (a\n    chain of letters and numbers) sent by a web server to your browser and\n    stored by the latter. Cookies do not usually contain any information that\n    personally identifies the user, but the personal information we store about\n    you may be related to the information stored in the cookies and obtained\n    from them. We used session cookies and persistent cookies on our website.\n</p>\n<p>\n    Most browsers allow you to refuse to accept cookies. However, blocking all\n    cookies will negatively affect the usability of many websites. If you block\n    cookies, you will not be able to use certain features of our website.\n</p>\n<p>\n    You can delete cookies already stored in your device.\n</p>\n    ',B={data:function(){return{dialog:!1,htmlPrivp:N}},methods:{agree:function(){this.dialog=!1}},mounted:function(){this.$route.query.privacy_policy&&this.popQuery("privacy_policy")},watch:{dialog:function(t){t||this.popQuery("privacy_policy")},"$route.query.privacy_policy":function(t){this.dialog=!!t}}};const U={components:{AboutUs:M,ContactUs:R,Team:j,PrivacyPolicyDialog:(0,_.Z)(B,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-dialog",{attrs:{width:"600px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[t._v("Use "+t._s(t.$config.appName)+"'s service?")])]),t._v(" "),r("v-card-text",{domProps:{innerHTML:t._s(t.htmlPrivp)}}),t._v(" "),r("v-card-actions",[r("v-spacer"),t._v(" "),r("v-btn",{attrs:{depressed:""},on:{click:function(e){t.dialog=!1}}},[t._v("Disagree")]),t._v(" "),r("v-btn",{attrs:{color:"success",depressed:""},on:{click:t.agree}},[t._v("Agree")])],1)],1)],1)}),[],!1,null,null,null).exports},data:function(){return{tab:0}},computed:{year:function(){return(new Date).getFullYear()},hasDrawer:function(){return["restaurant","mcf","ptc"].includes(this.$route.name)&&!this.$vuetify.breakpoint.xsOnly}},methods:{privacyDialog:function(){this.pushQuery({privacy_policy:1})}}};const L=(0,_.Z)(U,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-layout",{attrs:{column:""}},["splash"!==t.$route.name?r("v-footer",{staticClass:"mt-5",style:"z-index:6;max-width:"+(t.innerWidth-(t.hasDrawer?266:0))+"px",attrs:{dark:"",padless:""}},[r("v-card",{staticClass:"blue-grey darken-4 white--text text-center",attrs:{flat:"",tile:"",width:"100%"}},[r("v-tabs",{attrs:{"background-color":"blue-grey darken-4",centered:"","fixed-tabs":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[r("v-tab",{key:"about_us",staticClass:"blue-grey darken-4 white--text"},[t._v("About us")]),t._v(" "),r("v-tab",{key:"contact_us",staticClass:"blue-grey darken-4 white--text"},[t._v("Contact us")]),t._v(" "),r("v-tab",{key:"team",staticClass:"blue-grey darken-4 white--text"},[t._v("Team")])],1),t._v(" "),r("v-divider"),t._v(" "),r("v-tabs-items",{staticClass:"overflow-y-auto",model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[r("v-tab-item",{key:"about_us"},[r("AboutUs")],1),t._v(" "),r("v-tab-item",{key:"contact_us"},[r("ContactUs")],1),t._v(" "),r("v-tab-item",{key:"team"},[r("Team")],1)],1),t._v(" "),r("v-divider"),t._v(" "),r("v-card-text",{staticClass:"white--text"},[r("v-layout",{staticClass:"pl-5 pr-5",attrs:{"justify-space-around":"","align-center":""}},[r("div",[t._v("\n                        "+t._s(t.year)+" \n                        "),r("strong",[t._v(t._s(t.$config.appName))])]),t._v(" "),r("v-spacer"),t._v(" "),r("v-btn",{attrs:{small:"",color:"accent",dark:"",depressed:""},on:{click:t.privacyDialog}},[t._v("Private policy")])],1)],1)],1)],1):t._e(),t._v(" "),r("PrivacyPolicyDialog")],1)}),[],!1,null,null,null).exports;function $(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function z(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?$(Object(r),!0).forEach((function(e){q(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function q(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const V={props:{value:{type:Boolean,default:!1}},data:function(){return{form:{forename:null,surname:null,email:null,password:null}}},methods:{signUp:function(t){var e=this;if(!this.$refs.form.validate())return this.$snackbar.show({text:"Invalid form",color:"error"});var r=z({},this.form);console.log(r),t({variables:{data:r},update:function(t,r){var n=r.data;console.log(n),opt(n).signUp&&(e.$snackbar.show({text:"Email verification sent. \nCheck your mailbox.",color:"success",timeout:1e4}),e.form={forename:null,surname:null,email:null,password:null},e.$router.replace(z(z({},e.$route),{},{query:{email_verification:n.signUp.id}})))}})}},watch:{value:function(t){var e=this;t&&this.$nextTick((function(t){e.$refs.form.reset()}))}}};const Y=(0,_.Z)(V,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{"hide-overlay":"",persistent:"",value:t.value,"max-width":"350"},on:{input:function(e){return t.$emit("input",e)}}},[n("v-card",{staticClass:"align-self-center",attrs:{light:""}},[n("v-card-title",[t._v("\n            Sign Up\n            "),n("v-spacer"),t._v(" "),n("v-btn",{attrs:{icon:""},on:{click:function(e){return t.popQuery("sign_up")}}},[n("v-icon",[t._v("close")])],1)],1),t._v(" "),n("v-card-text",[n("v-layout",{attrs:{column:"","fill-height":"","justify-center":""}},[n("v-avatar",{staticClass:"align-self-center",attrs:{size:"100"}},[n("v-img",{attrs:{src:t.$config.images.logo}})],1)],1),t._v(" "),n("v-layout",{attrs:{column:"","fill-height":"","justify-center":""}},[n("v-form",{ref:"form",staticClass:"mt-3"},[n("v-layout",{attrs:{column:""}},[n("v-flex",{attrs:{md12:""}},[n("v-text-field",{attrs:{required:"",label:"Forename",maxlength:"30",rules:t.$validations.make("required","filled","maxLength(30)"),type:"text"},model:{value:t.form.forename,callback:function(e){t.$set(t.form,"forename","string"==typeof e?e.trim():e)},expression:"form.forename"}})],1),t._v(" "),n("v-flex",{attrs:{md12:""}},[n("v-text-field",{attrs:{required:"",label:"Surname",maxlength:"30",rules:t.$validations.make("required","filled","maxLength(30)"),type:"text"},model:{value:t.form.surname,callback:function(e){t.$set(t.form,"surname","string"==typeof e?e.trim():e)},expression:"form.surname"}})],1),t._v(" "),n("v-flex",{attrs:{md12:""}},[n("v-text-field",{attrs:{required:"",label:"Email",maxlength:"30",rules:t.$validations.make("required","filled","email","maxLength(30)"),type:"email"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email","string"==typeof e?e.trim():e)},expression:"form.email"}})],1),t._v(" "),n("v-flex",{attrs:{md12:""}},[n("v-text-field",{attrs:{required:"",type:"password",minlength:"6",rules:t.$validations.make("required","filled","minLength(6)"),label:"Password"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password","string"==typeof e?e.trim():e)},expression:"form.password"}})],1),t._v(" "),n("v-flex",{attrs:{md12:""}},[n("v-text-field",{attrs:{required:"",type:"password",minlength:"6",rules:t.$validations.make("required","filled","minLength(6)","confirmed("+t.form.password+")"),label:"Confirm Password"}})],1),t._v(" "),n("v-flex",{staticClass:"mb-3",attrs:{md12:""}},[n("v-layout",[n("v-checkbox",{attrs:{rules:t.$validations.make("required")},scopedSlots:t._u([{key:"label",fn:function(){return[t._v("\n                                         I accept \n                                        "),n("v-btn",{attrs:{text:"",small:"",link:"",color:"primary"},on:{click:function(e){return t.pushQuery({privacy_policy:"1"})}}},[t._v("the privacy policy")])]},proxy:!0}])}),t._v(" "),n("v-spacer")],1)],1),t._v(" "),n("v-flex",{attrs:{md12:""}},[n("MApolloMutation",{attrs:{"only-validation-errors":"",mutation:r(7290)._5},scopedSlots:t._u([{key:"props",fn:function(e){var r=e.mutate,i=e.loading;return[n("v-btn",{attrs:{color:"primary",block:"",loading:i,depressed:""},on:{click:function(e){return t.signUp(r)}}},[t._v("Sign\n                                    Up\n                                ")])]}}])})],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports;function Z(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function G(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Z(Object(r),!0).forEach((function(e){X(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function X(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const H={props:{link:{type:Boolean,default:!1},value:{type:Boolean,default:!1}},data:function(){return{form:{email:null}}},methods:{send:function(t){var e=this;if(!this.$refs.form.validate())return this.$snackbar.show({text:"Invalid form",color:"error"});var r=G({},this.form);console.log(r),t({variables:{data:r},update:function(t,r){var n=r.data;console.log(n),opt(n).forgotPassword&&(e.$snackbar.show({text:"We have sent you an account recovery email, please check your mailbox to reset your password",color:"success",timeout:9e3}),e.form={email:null},e.$router.replace(G(G({},e.$route),{},{query:{reset_password:""}})))}})}},watch:{value:function(t){var e=this;t&&this.$nextTick((function(t){e.$refs.form.reset()}))}}};const Q=(0,_.Z)(H,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{"hide-overlay":"",persistent:"",value:t.value,"max-width":"350"},on:{input:function(e){return t.$emit("input",e)}}},[n("v-card",{staticClass:"align-self-center",attrs:{light:""}},[n("v-card-title",[t._v("\n            Password Forgot\n            "),n("v-spacer"),t._v(" "),n("v-btn",{attrs:{icon:""},on:{click:function(e){return t.popQuery("forgot_password")}}},[n("v-icon",[t._v("close")])],1)],1),t._v(" "),n("v-card-text",[n("v-layout",{attrs:{column:"","fill-height":"","justify-center":""}},[n("v-avatar",{staticClass:"align-self-center",attrs:{size:"100"}},[n("v-img",{attrs:{src:t.$config.images.logo}})],1)],1),t._v(" "),n("v-layout",{attrs:{column:"","fill-height":"","justify-center":""}},[n("MApolloMutation",{attrs:{mutation:r(7290).lP},scopedSlots:t._u([{key:"props",fn:function(e){var r=e.mutate,i=e.loading;return[n("v-form",{ref:"form",staticClass:"mt-3",on:{submit:function(e){return e.preventDefault(),e.stopPropagation(),t.send(r)}}},[n("v-layout",{attrs:{column:""}},[n("v-flex",{attrs:{md12:""}},[n("v-text-field",{attrs:{required:"",label:"Email",maxlength:"30",rules:t.$validations.make("required","filled","email","maxLength(30)"),type:"email"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email","string"==typeof e?e.trim():e)},expression:"form.email"}})],1),t._v(" "),n("v-flex",{staticClass:"mt-3",attrs:{md12:""}},[n("v-btn",{attrs:{color:"primary",block:"",loading:i,depressed:""},on:{click:function(e){return t.send(r)}}},[t._v("send\n                                    verification code\n                                ")])],1)],1)],1)]}}])})],1)],1)],1)],1)}),[],!1,null,null,null).exports;function W(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function K(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?W(Object(r),!0).forEach((function(e){J(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function J(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const tt={props:{link:{type:Boolean,default:!1},value:{type:Boolean,default:!1}},data:function(){return{}},computed:{id:function(){var t=(this.$route.query.email_verification||"").split(":");return t.length<1?null:t[0]},token:function(){var t=(this.$route.query.email_verification||"").split(":");return t.length<2?null:t[1]}},methods:{resent:function(t){var e=this;if(null==this.id)return this.$snackbar.show({text:"Invalid url",color:"error"});t({variables:{data:{id:this.id}},update:function(t,r){var n=r.data;console.log(n),opt(n).resentEmailVerified&&e.$snackbar.show({text:"Email resent",color:"success"})}})},verify:function(t){var e=this;if(!this.$refs.form.validate())return this.$snackbar.show({text:"Invalid form",color:"error"});var r={token:this.token};console.log(r),t({variables:{data:r},update:function(t,r){var n=r.data;console.log(n),opt(n).verifyEmail&&(e.$snackbar.show({text:"Email verified",color:"success"}),e.$refs.form.reset(),e.$router.replace(K(K({},e.$route),{},{query:{sign_in:"1"}})))}})}},watch:{value:function(t){var e=this;t&&this.$nextTick((function(t){e.$refs.form.validate()&&e.$refs.button.$el.click()}))}}};const et=(0,_.Z)(tt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{"hide-overlay":"",value:t.value,"max-width":"350"},on:{input:function(e){return t.$emit("input",e)}}},[n("v-card",{staticClass:"align-self-center",attrs:{light:""}},[n("v-card-title",[t._v("\n            Email Verification\n            "),n("v-spacer"),t._v(" "),n("v-btn",{attrs:{icon:""},on:{click:function(e){return t.popQuery("email_verification")}}},[n("v-icon",[t._v("close")])],1)],1),t._v(" "),n("v-card-text",[n("v-layout",{attrs:{column:"","fill-height":"","justify-center":""}},[n("v-avatar",{staticClass:"align-self-center",attrs:{size:"100"}},[n("v-img",{attrs:{src:t.$config.images.logo}})],1)],1),t._v(" "),n("v-layout",{attrs:{column:"","fill-height":"","justify-center":""}},[n("v-form",{ref:"form",staticClass:"mt-3"},[n("v-layout",{attrs:{column:""}},[n("v-flex",{staticClass:"mb-3",attrs:{md12:""}},[n("v-text-field",{attrs:{required:"",label:"Token (last part of confirmation link)",maxlength:"30",rules:t.$validations.make("required","filled"),type:"text"},model:{value:t.token,callback:function(e){t.token="string"==typeof e?e.trim():e},expression:"token"}})],1),t._v(" "),n("v-flex",{staticClass:"mb-3",attrs:{md12:""}},[n("v-layout",[n("v-spacer"),t._v(" "),n("MApolloMutation",{attrs:{mutation:r(7290).$3},scopedSlots:t._u([{key:"props",fn:function(e){var r=e.mutate,i=e.loading;return[n("v-btn",{attrs:{text:"",small:"",link:"",color:"primary",loading:i},on:{click:function(e){return t.resent(r)}}},[t._v("Resent\n                                        Verification email\n                                    ")])]}}])})],1)],1),t._v(" "),n("v-flex",{attrs:{md12:""}},[n("MApolloMutation",{attrs:{mutation:r(7290).yz},scopedSlots:t._u([{key:"props",fn:function(e){var r=e.mutate,i=e.loading;return[n("v-btn",{ref:"button",attrs:{color:"primary",block:"",loading:i,depressed:""},on:{click:function(e){return t.verify(r)}}},[t._v("\n                                    Verify\n                                ")])]}}])})],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports;function rt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function nt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?rt(Object(r),!0).forEach((function(e){it(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function it(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const ot={props:{link:{type:Boolean,default:!1},value:{type:Boolean,default:!1}},data:function(){return{form:{token:null,password:null}}},computed:{confirmationLink:{get:function(){return this.$route.query.reset_password},set:function(t){null!=t?this.pushQuery({reset_password:t}):this.popQuery("reset_password")}}},methods:{reset:function(t){var e=this;if(!this.$refs.form.validate())return this.$snackbar.show({text:"Invalid form",color:"error"});var r={token:this.confirmationLink.split("/").reverse()[0],password:this.form.password};console.log(r),t({variables:{data:r},update:function(t,r){var n=r.data;console.log(n),opt(n).resetPassword&&(e.$snackbar.show({text:"Your password has been successfully changed",color:"success",timeout:9e3}),e.form={token:null,password:null},e.confirmationLink=null,e.$router.replace(nt(nt({},e.$route),{},{query:{sign_in:"1"}})))}})}},watch:{value:function(t){var e=this;t||this.$nextTick((function(t){e.$refs.form.reset()}))}}};const st=(0,_.Z)(ot,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{"hide-overlay":"",persistent:"",value:t.value,"max-width":"350"},on:{input:function(e){return t.$emit("input",e)}}},[n("v-card",{staticClass:"align-self-center",attrs:{light:""}},[n("v-card-title",[t._v("\n            Reset Password\n            "),n("v-spacer"),t._v(" "),n("v-btn",{attrs:{icon:""},on:{click:function(e){return t.popQuery("reset_password")}}},[n("v-icon",[t._v("close")])],1)],1),t._v(" "),n("v-card-text",[n("v-layout",{attrs:{column:"","fill-height":"","justify-center":""}},[n("v-avatar",{staticClass:"align-self-center",attrs:{size:"100"}},[n("v-img",{attrs:{src:t.$config.images.logo}})],1)],1),t._v(" "),n("v-layout",{attrs:{column:"","fill-height":"","justify-center":""}},[n("MApolloMutation",{attrs:{mutation:r(7290).bk},scopedSlots:t._u([{key:"props",fn:function(e){var r=e.mutate,i=e.loading;return[n("v-form",{ref:"form",staticClass:"mt-3"},[n("v-layout",{attrs:{column:""}},[n("v-flex",{attrs:{md12:""}},[n("v-text-field",{attrs:{required:"",type:"password",minlength:"6",rules:t.$validations.make("required","filled","minLength(6)"),label:"New Password"},on:{keyup:function(e){return e.type.indexOf("key")||13===e.keyCode?t.reset(r):null}},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password","string"==typeof e?e.trim():e)},expression:"form.password"}})],1),t._v(" "),n("v-flex",{attrs:{md12:""}},[n("v-text-field",{attrs:{required:"",type:"password",minlength:"6",rules:t.$validations.make("required","filled","minLength(6)","confirmed("+t.form.password+")"),label:"Confirm New Password"},on:{keyup:function(e){return e.type.indexOf("key")||13===e.keyCode?t.reset(r):null}}})],1),t._v(" "),n("v-flex",{attrs:{md12:""}},[n("v-text-field",{attrs:{required:"",label:"Token (last part of confirmation link)",maxlength:"30",rules:t.$validations.make("required","filled"),type:"text"},on:{keyup:function(e){return e.type.indexOf("key")||13===e.keyCode?t.reset(r):null}},model:{value:t.confirmationLink,callback:function(e){t.confirmationLink="string"==typeof e?e.trim():e},expression:"confirmationLink"}})],1),t._v(" "),n("v-flex",{staticClass:"mt-3",attrs:{md12:""}},[n("v-btn",{attrs:{color:"primary",block:"",loading:i,depressed:""},on:{click:function(e){return t.reset(r)}}},[t._v("\n                                    reset password\n                                ")])],1)],1)],1)]}}])})],1)],1)],1)],1)}),[],!1,null,null,null).exports;var at=r(3729),lt=r.n(at);const ut={props:{value:{type:Boolean,default:!1}},methods:{download:function(){lt()("/app/gauthsy.apk"),this.popQuery("download")}}};const ht=(0,_.Z)(ut,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-dialog",{attrs:{"hide-overlay":"",persistent:"",value:t.value,"max-width":"350"},on:{input:function(e){return t.$emit("input",e)}}},[r("v-card",{staticClass:"align-self-center",attrs:{light:""}},[r("v-card-title",[t._v("\n            Mobile App\n            "),r("v-spacer"),t._v(" "),r("v-btn",{attrs:{icon:""},on:{click:function(e){return t.popQuery("download")}}},[r("v-icon",[t._v("close")])],1)],1),t._v(" "),r("v-card-text",[r("v-layout",{attrs:{column:"","fill-height":"","justify-center":""}},[r("v-avatar",{staticClass:"align-self-center",attrs:{size:"100"}},[r("v-img",{attrs:{src:t.$config.images.logo}})],1)],1),t._v(" "),r("v-layout",{attrs:{column:"","fill-height":"","justify-center":""}},[r("v-card-title",[t._v("Download the application for Android")]),t._v(" "),r("v-btn",{attrs:{large:"",block:"",color:"primary",depressed:""},on:{click:t.download}},[t._v("Download apk")])],1)],1)],1)],1)}),[],!1,null,null,null).exports;function ct(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ft(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const dt={props:{value:{type:Boolean,default:!1}},data:function(){return{form:{forename:null,surname:null,email:null,lastPassword:null,password:null}}},methods:{updateBasicProfile:function(t){var e=this;if(!this.$refs.basicForm.validate())return this.$snackbar.show({text:"Invalid form",color:"error"});var r={surname:this.form.surname,forename:this.form.forename};console.log(r),t({variables:{data:r},update:function(t,r){var n=r.data;console.log(n),opt(n).updateUser&&(e.$snackbar.show({text:"Updated",color:"success"}),e.$repositories.auth.user=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ct(Object(r),!0).forEach((function(e){ft(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ct(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},n.updateUser))}})},updateAddress:function(t){var e=this;if(!this.$refs.addressForm.validate())return this.$snackbar.show({text:"Invalid form",color:"error"});var r={email:this.form.email};console.log(r),t({variables:{data:r},update:function(t,r){var n=r.data;console.log(n),opt(n).updateUser&&e.$snackbar.show({text:"Email verification sent. \nCheck your mailbox.",color:"success",timeout:1e4})}})},updatePassword:function(t){var e=this;if(!this.$refs.passwordForm.validate())return this.$snackbar.show({text:"Invalid form",color:"error"});var r={last_password:this.form.lastPassword,password:this.form.password};console.log(r),t({variables:{data:r},update:function(t,r){var n=r.data;console.log(n),opt(n).updateUser&&e.$snackbar.show({text:"Updated",color:"success"})}})},updateTokens:function(t){var e=this;t({update:function(t,r){var n=r.data;console.log(n),opt(n).revokeAllTokens&&(e.$snackbar.show({text:"Done",color:"success"}),e.$repositories.auth.logout())}})}},watch:{value:function(t){t&&(this.form.surname=this.$repositories.auth.user.surname,this.form.forename=this.$repositories.auth.user.forename,this.form.email=this.$repositories.auth.user.email)}}};const pt={components:{EditProfileDialog:(0,_.Z)(dt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{"hide-overlay":"",persistent:"",value:t.value,"max-width":"400"},on:{input:function(e){return t.$emit("input",e)}}},[n("v-card",{staticClass:"align-self-center",attrs:{light:""}},[n("v-card-title",[t._v("\n            Edit Profile\n            "),n("v-spacer"),t._v(" "),n("v-btn",{attrs:{icon:""},on:{click:function(e){return t.popQuery("edit_profile")}}},[n("v-icon",[t._v("close")])],1)],1),t._v(" "),n("v-card-text",[n("v-layout",{attrs:{column:"","fill-height":"","justify-center":""}},[n("v-avatar",{staticClass:"align-self-center",attrs:{size:"100"}},[n("v-img",{attrs:{src:t.$config.images.logo}})],1)],1),t._v(" "),n("v-layout",{attrs:{column:"","fill-height":"","justify-center":""}},[n("v-form",{ref:"form",staticClass:"mt-3"},[n("v-layout",{attrs:{column:""}},[n("v-card",{staticClass:"pa-2 mb-3",staticStyle:{border:"1px solid #e2e2e2"},attrs:{flat:""}},[n("v-card-title",{staticClass:"pl-0 pt-0"},[t._v("Profile")]),t._v(" "),n("v-form",{ref:"basicForm"},[n("v-text-field",{attrs:{required:"",label:"Forename",maxlength:"30",rules:t.$validations.make("required","filled","maxLength(30)"),type:"text"},model:{value:t.form.forename,callback:function(e){t.$set(t.form,"forename","string"==typeof e?e.trim():e)},expression:"form.forename"}}),t._v(" "),n("v-text-field",{attrs:{required:"",label:"Surname",maxlength:"30",rules:t.$validations.make("required","filled","maxLength(30)"),type:"text"},model:{value:t.form.surname,callback:function(e){t.$set(t.form,"surname","string"==typeof e?e.trim():e)},expression:"form.surname"}}),t._v(" "),n("MApolloMutation",{attrs:{"only-validation-errors":"",mutation:r(7290).Rd},scopedSlots:t._u([{key:"props",fn:function(e){var r=e.mutate,i=e.loading;return[n("v-btn",{attrs:{color:"primary",block:"",loading:i,depressed:""},on:{click:function(e){return t.updateBasicProfile(r)}}},[t._v("\n                                        Save\n                                    ")])]}}])})],1)],1),t._v(" "),n("v-card",{staticClass:"pa-2 mb-3",staticStyle:{border:"1px solid #e2e2e2"},attrs:{flat:""}},[n("v-card-title",{staticClass:"pl-0 pt-0"},[t._v("Address")]),t._v(" "),n("v-form",{ref:"addressForm"},[n("v-text-field",{attrs:{required:"",label:"Email",maxlength:"30",rules:t.$validations.make("required","filled","email","maxLength(30)"),type:"email"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email","string"==typeof e?e.trim():e)},expression:"form.email"}}),t._v(" "),n("MApolloMutation",{attrs:{"only-validation-errors":"",mutation:r(7290).jc},scopedSlots:t._u([{key:"props",fn:function(e){var r=e.mutate,i=e.loading;return[n("v-btn",{attrs:{color:"primary",block:"",loading:i,depressed:""},on:{click:function(e){return t.updateAddress(r)}}},[t._v("\n                                        Save\n                                    ")])]}}])})],1)],1),t._v(" "),n("v-card",{staticClass:"pa-2 mb-3",staticStyle:{border:"1px solid #e2e2e2"},attrs:{flat:""}},[n("v-card-title",{staticClass:"pl-0 pt-0"},[t._v("Password")]),t._v(" "),n("v-form",{ref:"passwordForm"},[n("v-text-field",{attrs:{required:"",type:"password",minlength:"6",rules:t.$validations.make("required","filled","minLength(6)"),label:"Last Password"},model:{value:t.form.lastPassword,callback:function(e){t.$set(t.form,"lastPassword","string"==typeof e?e.trim():e)},expression:"form.lastPassword"}}),t._v(" "),n("v-text-field",{attrs:{required:"",type:"password",minlength:"6",rules:t.$validations.make("required","filled","minLength(6)"),label:"Password"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password","string"==typeof e?e.trim():e)},expression:"form.password"}}),t._v(" "),n("v-text-field",{attrs:{required:"",type:"password",minlength:"6",rules:t.$validations.make("required","filled","minLength(6)","confirmed("+t.form.password+")"),label:"Confirm New Password"}}),t._v(" "),n("MApolloMutation",{attrs:{"only-validation-errors":"",mutation:r(7290).D3},scopedSlots:t._u([{key:"props",fn:function(e){var r=e.mutate,i=e.loading;return[n("v-btn",{attrs:{color:"primary",block:"",loading:i,depressed:""},on:{click:function(e){return t.updatePassword(r)}}},[t._v("\n                                        Save\n                                    ")])]}}])})],1)],1),t._v(" "),n("MApolloMutation",{attrs:{"only-validation-errors":"",mutation:r(7290).w4},scopedSlots:t._u([{key:"props",fn:function(e){var r=e.mutate,i=e.loading;return[n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.attrs,s=e.on;return[n("v-btn",t._g(t._b({staticClass:"my-3",attrs:{depressed:"",loading:i,color:"primary"},on:{click:function(e){return t.updateTokens(r)}}},"v-btn",o,!1),s),[t._v("Logout all the connected devices")])]}}],null,!0)},[t._v(" "),n("span",[t._v("You can use it, if you want to prevent a stranger from using your lost device to access your account")])])]}}])})],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports,DownloadDialog:ht,ResetPasswordDialog:st,EmailVerificationDialog:et,ForgotPasswordDialog:Q,SignUpDialog:Y,Footer:L,SignInDialog:x},data:function(){return{toTop:!1,snackbar:{text:null,opened:!1}}},computed:{signInDialog:{get:function(){return"1"===this.$route.query.sign_in},set:function(t){t?this.pushQuery({sign_in:"1"}):this.popQuery("sign_in")}},forgotPasswordDialog:{get:function(){return"1"===this.$route.query.forgot_password},set:function(t){t?this.pushQuery({forgot_password:"1"}):this.popQuery("forgot_password")}},resetPasswordDialog:{get:function(){return Object.keys(this.$route.query).includes("reset_password")},set:function(t){t?this.pushQuery({reset_password:"1"}):this.popQuery("reset_password")}},signUpDialog:{get:function(){return"1"===this.$route.query.sign_up},set:function(t){t?this.pushQuery({sign_up:"1"}):this.popQuery("sign_up")}},emailVerificationDialog:{get:function(){return Object.keys(this.$route.query).includes("email_verification")},set:function(t){null!=t?this.pushQuery({email_verification:t}):this.popQuery("email_verification")}},downloadDialog:{get:function(){return"1"===this.$route.query.download},set:function(t){t?this.pushQuery({download:"1"}):this.popQuery("download")}},editProfileDialog:{get:function(){return"1"===this.$route.query.edit_profile},set:function(t){t?this.pushQuery({edit_profile:"1"}):this.popQuery("edit_profile")}}},methods:{onScroll:function(t){this.toTop=t.target.documentElement.scrollTop>=500}},mounted:function(){var t=this;this.$snackbar.listen((function(e){var r=e.text,n=e.color,i=e.timeout;null==r?t.snackbar.opened=!1:(t.snackbar.text=r,t.snackbar.color=n||"info",t.snackbar.opened=!1,t.snackbar.timeout=i||3e3,t.$nextTick((function(){return t.snackbar.opened=!0})))})),this.$repositories.auth.init(this),this.$managers.em.attach("logged_in",(function(e){return t.signInDialog=!1}))}};var mt=r(7278),gt={insert:"head",singleton:!1};D()(mt.Z,gt);mt.Z.locals;const vt=(0,_.Z)(pt,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-app",{directives:[{name:"scroll",rawName:"v-scroll",value:t.onScroll,expression:"onScroll"}],staticClass:"overflow-y-auto",staticStyle:{position:"relative"}},[r("router-view",{staticStyle:{height:"100%"}}),t._v(" "),r("Footer"),t._v(" "),r("v-fab-transition",[t.toTop?r("v-btn",{staticStyle:{"z-index":"6"},attrs:{fab:"",color:"accent darken-4",bottom:"",small:t.$vuetify.breakpoint.xsOnly,fixed:"",right:""},on:{click:function(e){return t.$vuetify.goTo("body")}}},[r("v-icon",[t._v("expand_less")])],1):t._e()],1),t._v(" "),r("v-snackbar",{attrs:{timeout:t.snackbar.timeout,top:"",color:t.snackbar.color||"info",elevation:"24"},model:{value:t.snackbar.opened,callback:function(e){t.$set(t.snackbar,"opened",e)},expression:"snackbar.opened"}},[r("v-layout",{attrs:{"justify-space-between":"","align-center":""}},[r("div",{staticStyle:{"font-weight":"700"}},[t._v("\n                "+t._s(t.snackbar.text)+"\n            ")]),t._v(" "),r("v-btn",{attrs:{small:"",icon:""},on:{click:function(e){t.snackbar.opened=!1}}},[r("v-icon",[t._v("close")])],1)],1)],1),t._v(" "),r("SignInDialog",{model:{value:t.signInDialog,callback:function(e){t.signInDialog=e},expression:"signInDialog"}}),t._v(" "),r("SignUpDialog",{model:{value:t.signUpDialog,callback:function(e){t.signUpDialog=e},expression:"signUpDialog"}}),t._v(" "),r("DownloadDialog",{model:{value:t.downloadDialog,callback:function(e){t.downloadDialog=e},expression:"downloadDialog"}}),t._v(" "),r("EditProfileDialog",{model:{value:t.editProfileDialog,callback:function(e){t.editProfileDialog=e},expression:"editProfileDialog"}}),t._v(" "),r("ForgotPasswordDialog",{model:{value:t.forgotPasswordDialog,callback:function(e){t.forgotPasswordDialog=e},expression:"forgotPasswordDialog"}}),t._v(" "),r("ResetPasswordDialog",{model:{value:t.resetPasswordDialog,callback:function(e){t.resetPasswordDialog=e},expression:"resetPasswordDialog"}}),t._v(" "),r("EmailVerificationDialog",{model:{value:t.emailVerificationDialog,callback:function(e){t.emailVerificationDialog=e},expression:"emailVerificationDialog"}})],1)}),[],!1,null,null,null).exports;var wt=r(8634),yt=r(7757),bt=r.n(yt),_t=r(2737);function xt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function kt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?xt(Object(r),!0).forEach((function(e){Mt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Mt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function St(t,e,r,n,i,o,s){try{var a=t[o](s),l=a.value}catch(t){return void r(t)}a.done?e(l):Promise.resolve(l).then(n,i)}var Et=r(735);window.assert=function(t,e){if(!t)throw e||"Assertion failed"},NodeList.prototype.map=Array.prototype.map,NodeList.prototype.find=Array.prototype.find,window.loaders={googleLoading:!1},window.opt=function(t,e){return t||(e||{})},window.truncNum=function(t){return Number(t.toFixed(2))},window.toFullPrice=function(t){return t instanceof Object?truncNum(t.price)+" "+t.currency:truncNum(t)+" "+g.Z.currency},window.sleep=function(t){return new Promise((function(e){return setTimeout(e,t)}))},window.tapAsync=function(){var t,e=(t=bt().mark((function t(e){var r,n,i=arguments;return bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=i.length>1&&void 0!==i[1]?i[1]:3,n=1;case 2:if(!(n<=r)){t.next=15;break}return t.prev=3,t.next=6,e();case 6:return t.abrupt("return",t.sent);case 9:t.prev=9,t.t0=t.catch(3),console.error(t.t0);case 12:n++,t.next=2;break;case 15:case"end":return t.stop()}}),t,null,[[3,9]])})),function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function s(t){St(o,n,i,s,a,"next",t)}function a(t){St(o,n,i,s,a,"throw",t)}s(void 0)}))});return function(t){return e.apply(this,arguments)}}();var At=function(t,e,r){var n=t.split("."),i=n[n.length-1];return n[n.length-1]="".concat(e,"x").concat(r),n.push(i),wt.Z.appUrl+n.join(".")},Ct=function(t){return t.startsWith("http")?t:wt.Z.appUrl+t};const Dt={filters:{fromIntToDate:function(t){if(null==t)return null;if(6!==(t+="").length)return null;var e=((new Date).getFullYear()+"").substr(0,2),r=e+t.substr(0,2)+"-"+t.substr(2,2)+"-"+t.substr(4,2);return((new Date).getFullYear()+"").substr(2,2)>=t.substr(0,2)?r:(e=e-1+"")+t.substr(0,2)+"-"+t.substr(2,2)+"-"+t.substr(4,2)},imageSm:function(t){return t.resized?At(t.path,400,200):Ct(t.path)},pathBySize:function(t,e,r){return At(t,e,r)},fullName:function(t){return t.forename+" "+t.surname},fullPath:function(t){return Ct(t)},truncNum:window.window.truncNum,toFullPrice:window.window.toFullPrice,capitalize:function(t){return t?(t=t.toString()).charAt(0).toUpperCase()+t.slice(1):""}},computed:{window:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return window})),$snackbar:function(){return null==window.snackbar&&(window.snackbar={show:function(t){null!=this.func&&this.func(t)},listen:function(t){this.func=t}}),window.snackbar},breakpointIndex:function(){return this.$vuetify.breakpoint.xsOnly?0:this.$vuetify.breakpoint.smOnly?1:this.$vuetify.breakpoint.mdOnly?2:this.$vuetify.breakpoint.lgAndUp?3:void 0},$managers:function(){return{em:_t.Z}},$repositories:function(){return{auth:g.Z}},$config:function(){return wt.Z},innerWidth:function(){return this.$vuetify.breakpoint.width},innerHeight:function(){return this.$vuetify.breakpoint.height},opt:function(){return window.opt},$validations:function(){return{gt:function(t){return function(e){return!e&&0!=e||Number(e)>Number(t)||"This field must be greater than "+t}},gte:function(t){return function(e){return!e&&0!=e||Number(e)>=Number(t)||"This field must be greater or equal to "+t}},lt:function(t){return function(e){return!e&&0!=e||Number(e)<Number(t)||"This field must be less than "+t}},lte:function(t){return function(e){return!e&&0!=e||Number(e)<=Number(t)||"This field must be less or equal to "+t}},required:function(t){return!!t||0==t||"This field is required"},confirmed:function(t){return function(e){return e===t||"The passwords should be equals"}},filled:function(t){return t instanceof File||(t instanceof Object?Object.keys(t).length>0:t&&(t+"").trim().length>0)||!isNaN(parseInt(t))&&0==t||"This field must be filled"},email:function(t){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)||"Invalid e-mail"},integer:function(t){return/^[0123456789]{1,}$/.test(t)||"This field must only contain number(s)"},minLength:function(t){return function(e){return e&&e.length>=t||"This field must contain at least "+t+" characters"}},maxLength:function(t){return function(e){return!e||e.length<=t||"This field must contain at most "+t+" characters"}},minDate:function(t){return function(e){return!e||new Date(e)>=new Date(t)||"The date must be greater than "+t}},minTime:function(t){return function(e){return!e||parseInt(e.replace(":",""))>=parseInt(t.replace(":",""))||"The time must be greater than "+t}},maxSize:function(t){return function(e){return!e||e.size/1024<=Number(t)||"The file must be smaller than "+t+" KB"}},make:function(){for(var t=this,e=function(e,r,n){var i=e.split("("),o=t[i[0]];return i.length>1&&(o=o(i[1].split(")")[0])),!0!==n?o:o(r)},r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return n.filter((function(t){return"string"==typeof t})).reduce((function(t,r,n){return 0===t.length?t.push(e(r)):t.push((function(i){return!0!==t[n-1](i)?t[n-1](i):e(r,i,!0)})),t}),[])}}},loremImg:function(){var t=Math.ceil(0),e=Math.floor(10);return"http://lorempixel.com/400/200/food/"+(Math.floor(Math.random()*(e-t+1))+t)}},methods:{toCSSSelector:function(t){return CSS.escape(t)},pushQuery:function(t){this.$router.replace(kt(kt({},this.$route),{},{query:kt(kt({},this.$route.query),t)})).catch((function(t){}))},popQuery:function(){for(var t=kt({},this.$route.query),e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];r.forEach((function(e){return delete t[e]})),this.$router.replace({query:t}).catch((function(t){}))},equalsJson:function(t,e){var r=this;return null==Object.keys(t).find((function(n){return t[n]instanceof Object&&e[n]instanceof Object?r.equalsJson(t[n],e[n]):t[n]!==e[n]}))},tapAsync:window.tapAsync,copy:function(t){Et(t),this.$snackbar.show({color:"success",text:"Copied"})},cloneJson:function(t){var e=this,r={};return Object.keys(t).forEach((function(n){Array.isArray(t[n])?r[n]=t[n].map((function(t){return t})):t[n]instanceof Object?r[n]=e.cloneJson(t[n]):r[n]=t[n]})),r},jsonWithoutNullable:function(t){var e=this;if(!t instanceof Object)return t;if(Array.isArray(t))return t.map((function(t){return e.jsonWithoutNullable(t)}));var r={};return Object.keys(t).forEach((function(n){if(Array.isArray(t[n])){var i=e.jsonWithoutNullable(t[n]);i.length>0&&(r[n]=i)}else if(t[n]instanceof Object){var o=e.jsonWithoutNullable(t[n]);Object.keys(o).length>0&&(r[n]=o)}else null!=t[n]&&(t[n]+"").length>0&&(r[n]=t[n])})),r}}};const Ot=(0,_.Z)({},(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-card",{staticClass:"pa-2",attrs:{hover:"",elevation:"1",height:"210"}},[r("v-layout",{attrs:{"fill-height":""}},[r("v-flex",{attrs:{md4:""}},[r("v-layout",{attrs:{column:"","fill-height":"","justify-space-between":"","align-start":""}},[r("div",{staticClass:"headline font-weight-bold"},[r("v-skeleton-loader",{attrs:{width:"50",type:"text"}})],1),t._v(" "),r("div",[r("v-skeleton-loader",{staticStyle:{"border-top-left-radius":"4px","border-bottom-left-radius":"4px"},attrs:{type:"image",width:"100",height:"100"}})],1)])],1),t._v(" "),r("v-flex",{attrs:{md8:""}},[r("v-layout",{attrs:{column:"","fill-height":"","justify-space-between":"","align-end":""}},[r("v-flex",{staticStyle:{width:"100%"},attrs:{"align-self-start":""}},[r("v-layout",{attrs:{column:""}},[r("v-layout",[r("div",{staticClass:"font-weight-bold"},[r("v-skeleton-loader",{attrs:{width:"100",type:"text"}})],1),t._v(" "),r("v-spacer"),t._v(" "),r("div",{staticClass:"font-weight-bold"},[r("v-skeleton-loader",{attrs:{width:"100",type:"text"}})],1)],1),t._v(" "),r("div",{staticClass:"text-caption font-weight-medium"},[t._v("\n                            Surname\n                        ")]),t._v(" "),r("div",{staticClass:"font-weight-bold text--h6"},[r("v-skeleton-loader",{attrs:{type:"text"}})],1),t._v(" "),r("div",{staticClass:"text-caption font-weight-medium"},[t._v("\n                            Forename\n                        ")]),t._v(" "),r("div",{staticClass:"font-weight-bold text--h6"},[r("v-skeleton-loader",{attrs:{type:"text"}})],1),t._v(" "),r("div",{staticClass:"text-caption font-weight-medium"},[t._v("\n                            Birth date\n                        ")]),t._v(" "),r("div",{staticClass:"font-weight-bold text--h6"},[r("v-skeleton-loader",{attrs:{type:"text"}})],1)],1)],1),t._v(" "),r("v-btn",{attrs:{color:"primary",depressed:""}},[t._v("See more\n                    "),r("v-icon",[t._v("navigate_next")])],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports;const Pt={props:{src:{type:String,default:!1},width:{type:String,default:"100"},height:{type:String,default:"100"},contains:{type:Boolean,default:!1}},data:function(){return{image:null,dialog:!1}},computed:{headers:function(){return{Authorization:this.$repositories.auth.auth.token_type+" "+this.$repositories.auth.auth.access_token}}},mounted:function(){var t=this;fetch(this.src,{headers:this.headers}).then((function(t){return t.blob()})).then((function(e){return t.image=window.URL.createObjectURL(e)}))}};const Rt=(0,_.Z)(Pt,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-hover",{scopedSlots:t._u([{key:"default",fn:function(e){var n=e.hover;return[r("v-card",{staticStyle:{width:"100%",height:"100%"},attrs:{elevation:n?12:0},on:{click:function(e){t.dialog=!0}}},[r("v-img",{attrs:{contain:t.contains,"max-width":t.width,"max-height":t.height,src:t.image}}),t._v(" "),r("v-dialog",{attrs:{"max-width":"600"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[r("v-card",[r("v-card-title",[t._v("Image\n                    "),r("v-spacer"),t._v(" "),r("v-btn",{attrs:{icon:""},on:{click:function(e){t.dialog=!1}}},[r("v-icon",[t._v("close")])],1)],1),t._v(" "),r("v-card-text",[r("v-img",{attrs:{src:t.image,contain:""}})],1)],1)],1)],1)]}}])})}),[],!1,null,null,null).exports;const It={props:{confirmHintText:{type:String,require:!0},confirmTitle:{type:String,require:!0},depressed:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},preventAndStop:{type:Boolean,default:!1},styleBtn:{type:String},block:{type:Boolean,default:!1},classNames:{type:String},small:{type:Boolean,default:!1},tile:{type:Boolean,default:!1},fab:{type:Boolean,default:!1},color:{type:String},height:{type:Number}},data:function(){return{dialog:!1}},methods:{open:function(){this.dialog=!0},confirm:function(){this.$emit("click"),this.dialog=!1},cancel:function(){this.dialog=!1}}};function Tt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ft(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Tt(Object(r),!0).forEach((function(e){jt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Tt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function jt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const Nt={components:{MBtnConfirm:(0,_.Z)(It,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-dialog",{attrs:{"max-width":"400"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,i=e.attrs;return[t.preventAndStop?r("v-btn",t._g(t._b({class:t.classNames,style:t.styleBtn,attrs:{small:t.small,fab:t.fab,height:t.height,depressed:t.depressed,color:t.color,loading:t.loading,tile:t.tile,block:t.block},on:{click:function(t){t.preventDefault(),t.stopPropagation()}}},"v-btn",i,!1),n),[t._t("default")],2):r("v-btn",t._g(t._b({class:t.classNames,style:t.styleBtn,attrs:{small:t.small,fab:t.fab,height:t.height,depressed:t.depressed,color:t.color,loading:t.loading,tile:t.tile,block:t.block}},"v-btn",i,!1),n),[t._t("default")],2)]}}],null,!0),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),r("v-card",[r("v-card-title",[t._v(t._s(t.confirmTitle))]),t._v(" "),r("v-card-text",{domProps:{innerHTML:t._s(t.confirmHintText)}}),t._v(" "),r("v-card-actions",[r("v-spacer"),t._v(" "),r("v-btn",{attrs:{text:""},on:{click:t.cancel}},[t._v("Cancel")]),t._v(" "),r("v-btn",{attrs:{text:"",color:"accent"},on:{click:t.confirm}},[t._v("Confirm")])],1)],1)],1)}),[],!1,null,null,null).exports,MImage:Rt},props:{value:{type:Boolean,default:!1},isAdmin:{type:Boolean,default:!1},document:{type:Object,required:!0}},data:function(){return{dialog:!1,form:{item:null,reason:null},validateDialog:!1}},computed:{items:function(){return["Other","The scanned information does not match the information in the document","This document seems to be invalid","The document has expired","The document images are not clear enough","The face photo is not clear enough","The face on the document does not match the scanned face"]},front:function(){return this.document.images.data.find((function(t){return"FRONT"===t.type}))},back:function(){return this.document.images.data.find((function(t){return"BACK"===t.type}))},face:function(){return this.document.images.data.find((function(t){return"FACE"===t.type}))}},methods:{reject:function(t){var e=this;if(!this.$refs.form.validate())return this.$snackbar.show({text:"Invalid form",color:"error"});var r={id:this.document.id,reason:"Other"!==this.form.item?this.form.item:this.form.reason};console.log(r),t({variables:{data:r},update:function(t,r){var n=r.data;console.log(n),opt(n).rejectDocument&&(e.$snackbar.show({text:"Document rejected",color:"success"}),e.removeFromCache(t),e.$emit("close"))}})},validate:function(t){var e=this,r={id:this.document.id};console.log(r),t({variables:{data:r},update:function(t,r){var n=r.data;console.log(n),opt(n).validateDocument&&(e.$snackbar.show({text:"Document validated",color:"success"}),e.removeFromCache(t),e.$emit("close"))}})},removeFromCache:function(t){for(var e,n,i=this,o=-1,s=1;o<0;)try{e={query:r(4924).Kg,variables:{first:20,page:s}},(o=(n=t.readQuery(e)).documents.data.findIndex((function(t){return t.id===i.document.id})))>-1&&(n.documents.data.splice(o,1),t.writeQuery(Ft(Ft({},e),{},{data:n})))}catch(t){break}s++},remove:function(t){var e=this;t({variables:{data:{id:this.document.id}},update:function(t,r){r.data.deleteDocument&&(e.$emit("close"),e.$emit("deleted"),e.$snackbar.show({text:"Document deleted",color:"success"}))}})}}};const Bt={components:{DocumentDetailsDialog:(0,_.Z)(Nt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{persistent:"",value:t.value,"max-width":"500"},on:{input:function(e){return t.$emit("input",e)}}},[n("v-card",{staticClass:"align-self-center",attrs:{light:""}},[n("v-card-title",[t._v("\n            "+t._s("ID"===t.document.type?"Identity Card":"Residence Permit")+"\n            "),n("v-spacer"),t._v(" "),n("v-btn",{attrs:{icon:""},on:{click:function(e){return t.$emit("close")}}},[n("v-icon",[t._v("close")])],1)],1),t._v(" "),n("v-container",{staticClass:"pa-6"},[t.isAdmin?n("v-layout",{staticClass:"mb-3",attrs:{"align-baseline":""}},[n("v-flex",{attrs:{md6:""}},[n("v-dialog",{attrs:{width:"500"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,i=e.attrs;return[n("v-btn",t._g(t._b({staticStyle:{"border-bottom-right-radius":"0","border-top-right-radius":"0"},attrs:{color:"error",block:"",depressed:""}},"v-btn",i,!1),r),[t._v("\n                                Reject\n                            ")])]}}],null,!1,2152400298),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),n("v-card",[n("v-card-title",[t._v("Do you want to reject this document?\n                                "),n("v-spacer")],1),t._v(" "),n("v-card-text",[n("v-form",{ref:"form"},[n("v-select",{attrs:{label:"For which reason do you want to reject this document?",rules:t.$validations.make("required","filled"),items:t.items},model:{value:t.form.item,callback:function(e){t.$set(t.form,"item",e)},expression:"form.item"}}),t._v(" "),"Other"===t.form.item?n("v-textarea",{attrs:{maxlength:"640",rules:t.$validations.make("required","filled","maxLength(320)"),label:"Reason"},model:{value:t.form.message,callback:function(e){t.$set(t.form,"message","string"==typeof e?e.trim():e)},expression:"form.message"}}):t._e()],1)],1),t._v(" "),n("v-card-actions",{staticClass:"align-baseline"},[n("v-spacer"),t._v(" "),n("v-btn",{staticClass:"mr-3",attrs:{depressed:""},on:{click:function(e){t.dialog=!1}}},[t._v("Cancel")]),t._v(" "),n("MApolloMutation",{staticClass:"mt-3",attrs:{"error-messages":{"constraint:2":"This document has been already verified"},guarded:"",mutation:r(4924).M4},scopedSlots:t._u([{key:"props",fn:function(e){var r=e.mutate,i=(e.error,e.loading);return[n("v-btn",{attrs:{color:"primary",loading:i,depressed:""},on:{click:function(e){return t.reject(r)}}},[t._v("\n                                        Reject\n                                    ")])]}}],null,!1,3509738282)})],1)],1)],1)],1),t._v(" "),n("v-flex",{attrs:{md6:""}},[n("MApolloMutation",{staticClass:"mt-3",attrs:{guarded:"","error-messages":{"constraint:3":"This document has been already verified"},mutation:r(4924).sO},scopedSlots:t._u([{key:"props",fn:function(e){var r=e.mutate,i=(e.error,e.loading);return[n("MBtnConfirm",{attrs:{block:"","confirm-hint-text":"Do you really want to validate this document?","confirm-title":"Validate document",color:"primary",depressed:"",loading:i,"style-btn":"border-bottom-left-radius: 0;border-top-left-radius: 0"},on:{click:function(e){return t.validate(r)}}},[t._v("Validate\n                        ")])]}}],null,!1,3456566794)})],1)],1):n("v-alert",{attrs:{outlined:"",type:t.document.valid?"success":null==t.document.verified_at?"info":"error",prominent:""}},[t.document.valid?n("span",[t._v("This document is valid")]):null==t.document.verified_at?n("span",[t._v("Waiting for verification")]):n("div",[t._v("This document is invalid. "),n("br"),t._v('Reason: "'+t._s(t.document.message)+'"')])]),t._v(" "),n("div",{staticClass:"text-caption font-weight-medium"},[t._v("\n                Document type\n            ")]),t._v(" "),n("div",{staticClass:"font-weight-bold text--h6"},[t._v("\n                "+t._s(t.document.payload.document_type)+"\n            ")]),t._v(" "),n("v-divider",{staticClass:"my-3"}),t._v(" "),n("div",{staticClass:"text-caption font-weight-medium"},[t._v("\n                Surname\n            ")]),t._v(" "),n("div",{staticClass:"font-weight-bold text--h6"},[t._v("\n                "+t._s(t.document.payload.surname)+"\n            ")]),t._v(" "),n("v-divider",{staticClass:"my-3"}),t._v(" "),n("div",{staticClass:"text-caption font-weight-medium"},[t._v("\n                Forename\n            ")]),t._v(" "),n("div",{staticClass:"font-weight-bold text--h6"},[t._v("\n                "+t._s(t.document.payload.forename)+"\n            ")]),t._v(" "),n("v-divider",{staticClass:"my-3"}),t._v(" "),n("div",{staticClass:"text-caption font-weight-medium"},[t._v("\n                Birth date\n            ")]),t._v(" "),n("div",{staticClass:"font-weight-bold text--h6"},[t._v("\n                "+t._s(t.document.payload.birth_date)+"\n            ")]),t._v(" "),n("v-divider",{staticClass:"my-3"}),t._v(" "),n("div",{staticClass:"text-caption font-weight-medium"},[t._v("\n                Expiry date\n            ")]),t._v(" "),n("div",{staticClass:"font-weight-bold text--h6"},[t._v("\n                "+t._s(t.document.payload.expiry_date)+"\n            ")]),t._v(" "),n("v-divider",{staticClass:"my-3"}),t._v(" "),n("div",{staticClass:"text-caption font-weight-medium"},[t._v("\n                Document number\n            ")]),t._v(" "),n("div",{staticClass:"font-weight-bold text--h6"},[t._v("\n                "+t._s(t.document.payload.document_number)+"\n            ")]),t._v(" "),n("v-divider",{staticClass:"my-3"}),t._v(" "),n("div",{staticClass:"text-caption font-weight-medium"},[t._v("\n                Sex\n            ")]),t._v(" "),n("div",{staticClass:"font-weight-bold text--h6"},[t._v("\n                "+t._s(t.document.payload.sex)+"\n            ")]),t._v(" "),n("v-divider",{staticClass:"my-3"}),t._v(" "),n("div",{staticClass:"text-caption font-weight-medium"},[t._v("\n                Nationality country code\n            ")]),t._v(" "),n("div",{staticClass:"font-weight-bold text--h6"},[t._v("\n                "+t._s(t.document.payload.nationality_country_code)+"\n            ")]),t._v(" "),n("v-divider",{staticClass:"my-3"}),t._v(" "),n("div",{staticClass:"text-caption font-weight-medium"},[t._v("\n                Personal number\n            ")]),t._v(" "),n("div",{staticClass:"font-weight-bold text--h6"},[t._v("\n                "+t._s(t.document.payload.personal_number)+"\n            ")]),t._v(" "),n("v-divider",{staticClass:"my-3"}),t._v(" "),n("div",{staticClass:"text-caption font-weight-medium"},[t._v("\n                Personal number 2\n            ")]),t._v(" "),n("div",{staticClass:"font-weight-bold text--h6"},[t._v("\n                "+t._s(t.document.payload.personal_number2)+"\n            ")]),t._v(" "),n("MImage",{staticClass:"my-3",attrs:{width:"100%",height:"210",src:t.front.path}}),t._v(" "),n("MImage",{staticClass:"mb-3",attrs:{src:t.back.path,width:"100%",height:"210"}}),t._v(" "),n("MImage",{attrs:{src:t.face.path,width:"100%",height:"400"}}),t._v(" "),t.isAdmin?t._e():n("MApolloMutation",{staticClass:"mt-3",attrs:{guarded:"",mutation:r(4924).yY},scopedSlots:t._u([{key:"props",fn:function(e){var r=e.mutate,i=(e.error,e.loading);return[n("MBtnConfirm",{attrs:{block:"",loading:i,"confirm-title":"Delete this document","confirm-hint-text":"Do you really want to delete that?","class-names":"mb-2",color:"error",depressed:""},on:{click:function(e){return t.remove(r)}}},[t._v("Delete\n                ")])]}}],null,!1,3304718973)})],1)],1)],1)}),[],!1,null,null,null).exports,MImage:Rt,DocumentCardSkeleton:Ot},props:{isAdmin:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},hasRetrieve:{type:Boolean,default:!1},document:{type:Object}},data:function(){return{dialog:!1,active:!1}},computed:{face:function(){return this.document.images.data.find((function(t){return"FRONT_FACE"===t.type}))}},methods:{select:function(t){this.active=t,this.$emit("change",t)}}};const Ut=(0,_.Z)(Bt,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-lazy",{attrs:{options:{threshold:.5},transition:"fade-transition slide-y-reverse-transition"}},[r("v-hover",{scopedSlots:t._u([{key:"default",fn:function(e){var n=e.hover;return[r("div",[t.loading?r("DocumentCardSkeleton"):r("v-tooltip",{attrs:{color:t.document.valid?"success":"error",top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.attrs,o=e.on;return[r("v-card",t._g(t._b({staticClass:"pa-2",attrs:{disabled:t.disabled,color:t.active?"#1c31444d":null,outlined:"",raised:"",hover:"",elevation:n?12:1,height:"210"},on:{click:function(e){t.dialog=!t.dialog}}},"v-card",i,!1),o),[r("v-layout",{attrs:{"fill-height":""}},[r("v-flex",{attrs:{md4:""}},[r("v-layout",{attrs:{column:"","fill-height":"","justify-space-between":"","align-start":""}},[r("div",{staticClass:"headline font-weight-bold"},[t._v(t._s(t.document.issued_by.toUpperCase())+"\n                                    ")]),t._v(" "),r("div",[r("MImage",{attrs:{src:t.face.path}})],1)])],1),t._v(" "),r("v-flex",{attrs:{md8:""}},[r("v-layout",{attrs:{column:"","fill-height":"","justify-space-between":"","align-end":""}},[r("v-flex",{staticStyle:{width:"100%"},attrs:{"align-self-start":""}},[r("v-layout",{attrs:{column:""}},[r("v-layout",[r("div",{staticClass:"font-weight-bold"},[t._v("\n                                                    "+t._s("ID"===t.document.type?"Identity Card":"Residence Permit")+"\n                                                ")]),t._v(" "),r("v-spacer"),t._v(" "),r("div",{staticClass:"font-weight-bold"},[t._v("\n                                                    "+t._s(t.document.payload.document_number)+"\n                                                ")])],1),t._v(" "),r("div",{staticClass:"text-caption font-weight-medium"},[t._v("\n                                                Surname\n                                            ")]),t._v(" "),r("div",{staticClass:"font-weight-bold text--h6"},[t._v("\n                                                "+t._s(t.document.payload.surname)+"\n                                            ")]),t._v(" "),r("div",{staticClass:"text-caption font-weight-medium"},[t._v("\n                                                Forename\n                                            ")]),t._v(" "),r("div",{staticClass:"font-weight-bold text--h6"},[t._v("\n                                                "+t._s(t.document.payload.forename)+"\n                                            ")]),t._v(" "),r("div",{staticClass:"text-caption font-weight-medium"},[t._v("\n                                                Birth date\n                                            ")]),t._v(" "),r("div",{staticClass:"font-weight-bold text--h6"},[t._v("\n                                                "+t._s(t.document.payload.birth_date)+"\n                                            ")])],1)],1),t._v(" "),r("v-btn",{attrs:{color:"primary",depressed:""}},[t._v("See more\n                                        "),r("v-icon",[t._v("navigate_next")])],1)],1)],1)],1),t._v(" "),r("DocumentDetailsDialog",{attrs:{isAdmin:t.isAdmin,document:t.document,value:t.dialog},on:{deleted:function(e){return t.$emit("deleted")},close:function(e){return t.dialog=e}}}),t._v(" "),t.hasRetrieve?r("v-checkbox",{staticStyle:{position:"absolute",top:"-10px",right:"0"},attrs:{disabled:!t.document.valid,"background-color":"white"},on:{click:function(t){t.stopPropagation()},change:t.select}}):t._e()],1)]}}],null,!0)},[t._v(" "),t.document.valid?r("span",[t._v("This document has been validated")]):r("span",[t._v("This document has not been validated")])])],1)]}}])})],1)}),[],!1,null,null,null).exports;const Lt={props:{title:{type:String,required:!0},subtitle:{type:String},flat:{type:Boolean,default:!1},refetch:{type:Function,required:!0}}};const $t=(0,_.Z)(Lt,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-card",{staticClass:"text-center pa-5 ma-12",attrs:{flat:t.flat,height:"260"}},[r("v-layout",{attrs:{column:"","align-center":"","justify-space-between":""}},[r("v-icon",{attrs:{size:"100"}},[t._v("sentiment_very_dissatisfied")]),t._v(" "),r("v-card-title",{staticClass:"headline text-center"},[t._v("\n            "+t._s(t.title)+"\n        ")]),t._v(" "),t.subtitle?r("v-card-subtitle",[t._v("\n            "+t._s(t.subtitle)+"\n        ")]):t._e(),t._v(" "),t.refetch?r("v-btn",{attrs:{block:"",depressed:"",color:"accent"},on:{click:t.refetch}},[t._v("Try again")]):t._e()],1)],1)}),[],!1,null,null,null).exports,zt={components:{NoDataMBody:$t,DocumentCard:Ut},data:function(){return{selectedDocuments:{}}},computed:{documentTypes:function(){return["ID","AR"]},hasRetrieve:function(){return null!=this.$route.query.retrieve&&this.$route.query.retrieve.length>0},queries:function(){var t=this;return this.$route.query.retrieve.split("]").filter((function(t){return t.length>0})).map((function(t){return t.replace(",[","").replace("[","").split(",")})).map((function(e){return e.map((function(e){var r=e.split(":");return{selected:null!=t.selectedDocuments[e],key:e,country:{CM:"Cameroon",DE:"Germany",RW:"Rwanda"}[r[0]],type:{AR:"Residence permit",ID:"Identity card"}[r[1]]}}))}))},origin:function(){return this.$route.query.redirect}},methods:{save:function(t){var e=this;t({update:function(t,r){var n=r.data;console.log(n),n.logout&&e.$repositories.auth.logout()}})},select:function(t,e){var r=this,n=e.issued_by+":"+e.type;t?(this.queries.find((function(t){return t.map((function(t){return t.key})).includes(n)})).forEach((function(t){return r.$delete(r.selectedDocuments,t.key)})),this.$set(this.selectedDocuments,n,e.id)):this.$delete(this.selectedDocuments,n)},close:function(){window.opener.returnValue=null,window.close()},getToken:function(t){var e=this;if(!this.queries.every((function(t){return!t.every((function(t){return null==e.selectedDocuments[t.key]}))})))return this.$snackbar.show({text:"Select all the required documents",color:"error"});var r={host:this.origin,documents:Object.keys(this.selectedDocuments).map((function(t){return{id:e.selectedDocuments[t]}}))};console.log(r),t({variables:{data:r},update:function(t,r){var n=r.data;opt(n).generateTokenToDocuments&&(e.$snackbar.show({text:"Token sent",color:"success"}),window.opener.postMessage(n.generateTokenToDocuments,e.origin),window.close())}})}}};const qt=(0,_.Z)(zt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",{attrs:{column:""}},[n("v-app-bar",{attrs:{fixed:"",color:"white","elevate-on-scroll":""}},[n("v-toolbar-title",{staticClass:"headline font-weight-bold"},[n("v-btn",{attrs:{icon:""},on:{click:function(e){return t.$router.back()}}},[n("v-icon",[t._v("arrow_back")])],1),t._v(""+t._s(t.$config.appName)+"\n        ")],1),t._v(" "),n("v-spacer"),t._v(" "),t.$repositories.auth.user.is_admin?n("v-btn",{staticClass:"mr-3",attrs:{large:"",to:{name:"dashboard"},color:"accent",depressed:""}},[n("v-icon",[t._v("dashboard")]),t._v("\n            Dashboard\n        ")],1):t._e(),t._v(" "),n("v-btn",{staticClass:"mr-3",attrs:{large:"",color:"accent",depressed:""},on:{click:function(e){return t.pushQuery({edit_profile:"1"})}}},[n("v-icon",[t._v("edit")]),t._v("\n            Profile\n        ")],1),t._v(" "),n("MApolloMutation",{attrs:{guarded:"",mutation:r(7290).Nv},scopedSlots:t._u([{key:"props",fn:function(e){var r=e.mutate,i=e.loading;return[n("v-btn",{attrs:{large:"",loading:i,color:"primary",depressed:""},on:{click:function(e){return t.save(r)}}},[t._v("\n                Logout\n            ")])]}}])})],1),t._v(" "),n("v-sheet",{attrs:{height:"100"}}),t._v(" "),n("v-layout",{staticClass:"px-6 px-sm-0"},[n("v-flex",{attrs:{md1:"",lg2:"",sm1:""}}),t._v(" "),n("v-flex",{attrs:{md10:"",lg8:"",sm10:""}},[t.hasRetrieve?n("v-alert",{staticClass:"mt-3",attrs:{type:"info",outlined:""}},[n("v-layout",{attrs:{column:""}},[n("div",[n("v-btn",{attrs:{link:"",text:"",small:"",target:"_blank",href:t.origin}},[t._v(t._s(t.origin))]),t._v("\n                        needs\n                        "),t._l(t.queries,(function(e,r){return n("div",{key:"p-"+r},[t._v("\n                            "+t._s(0!==r?"and":"")+" one document between {\n                            "),t._l(e,(function(r,i){return[n("v-chip",{key:i,staticClass:"ma-2",attrs:{color:"primary",outlined:!r.selected}},[r.selected?n("v-avatar",{attrs:{left:""}},[n("v-icon",[t._v("check")])],1):t._e(),t._v("\n                                    "+t._s(r.type+" of "+r.country)+"\n                                ")],1),t._v("\n                                "+t._s(i!=e.length-1?",":"")+"\n                            ")]})),t._v("\n                            }\n\n                        ")],2)}))],2),t._v(" "),n("v-layout",[n("v-spacer"),t._v(" "),n("v-btn",{staticStyle:{"border-bottom-right-radius":"0","border-top-right-radius":"0"},attrs:{color:"error",depressed:""},on:{click:t.close}},[t._v("Cancel\n                        ")]),t._v(" "),n("MApolloMutation",{attrs:{"error-messages":{"constraint:4":null,"constraint:5":null},mutation:r(4924).Y3},scopedSlots:t._u([{key:"props",fn:function(e){var r=e.mutate;e.loading;return[n("v-btn",{staticStyle:{"border-bottom-left-radius":"0","border-top-left-radius":"0"},attrs:{color:"accent",depressed:""},on:{click:function(e){return t.getToken(r)}}},[t._v("Confirm\n                            ")])]}}],null,!1,3659701152)})],1)],1)],1):t._e(),t._v(" "),n("v-card-title",{staticClass:"headline pl-0"},[t._v("Identities Documents")]),t._v(" "),n("m-apollo-query",{attrs:{"no-data":"me.documents.data",first:10,fetchMore:"",query:r(4924).gJ},scopedSlots:t._u([{key:"props",fn:function(e){var r=e.data,i=e.loading,o=e.refetch;return[n("v-row",{attrs:{wrap:""}},i?t._l(6,(function(t){return n("v-col",{key:t,attrs:{cols:"12",sm:"6",md:"4",lg:"4"}},[n("DocumentCard",{attrs:{loading:""}})],1)})):t._l(r.me.documents.data,(function(e){return n("v-col",{key:e.id,attrs:{cols:"12",sm:"6",md:"4",lg:"4"}},[n("DocumentCard",{attrs:{disabled:t.hasRetrieve&&!t.queries.flatMap((function(t){return t.map((function(t){return t.key}))})).includes(e.issued_by+":"+e.type),hasRetrieve:t.hasRetrieve,document:e},on:{change:function(r){return t.select(r,e)},deleted:function(t){return o()}}})],1)})),1)]}},{key:"no-data",fn:function(e){var r=e.refetch;return[t._t("header",null,{refetch:r}),t._v(" "),n("NoDataMBody",{attrs:{title:"No documents found",subtitle:"When you scan a document, you can see it here",refetch:r}})]}}],null,!0)}),t._v(" "),n("v-divider",{staticClass:"mt-6"}),t._v(" "),n("v-card-title",{staticClass:"headline pl-0"},[t._v("Scan Identities Documents")]),t._v(" "),n("v-row",{attrs:{wrap:""}},t._l(t.documentTypes,(function(e){return n("v-col",{key:e,attrs:{cols:"12",sm:"6",md:"4",lg:"4"}},[n("v-card",{staticClass:"pa-2",attrs:{hover:"",to:{name:"boarding",query:{type:e}},height:"210"}},[n("v-layout",{attrs:{"fill-height":""}},[n("v-flex",{attrs:{md8:""}},[n("v-layout",{attrs:{column:"","fill-height":"","justify-space-between":"","align-start":""}},[n("div",{staticClass:"headline"},[t._v(t._s("ID"===e?"Identity Card":"Residence Permit")+"\n                                    ")]),t._v(" "),n("div",[n("v-img",{attrs:{width:"100",height:"100",src:"/images/defaults/face_icon.png"}})],1)])],1),t._v(" "),n("v-flex",{attrs:{md4:""}},[n("v-layout",{attrs:{column:"","fill-height":"","justify-end":"","align-end":""}},[n("v-btn",{attrs:{color:"primary",depressed:""}},[t._v("Let's start\n                                        "),n("v-icon",[t._v("navigate_next")])],1)],1)],1)],1)],1)],1)})),1)],1),t._v(" "),n("v-flex",{attrs:{md1:"",lg2:"",sm1:""}})],1)],1)}),[],!1,null,null,null).exports;var Vt=r(792);const Yt=function(t,e,r,n,i,o,s){o=e.createElement(r),s=e.getElementsByTagName(r)[0],o.appendChild(e.createTextNode(n.text)),o.onload=i(n),s?s.parentNode.insertBefore(o,s):e.head.appendChild(o)},Zt=function(t,e){if(!arguments.length)return Promise.reject(new ReferenceError("Failed to execute 'fetchInject': 1 argument required but only 0 present."));if(arguments[0]&&arguments[0].constructor!==Array)return Promise.reject(new TypeError("Failed to execute 'fetchInject': argument 1 must be of type 'Array'."));if(arguments[1]&&arguments[1].constructor!==Promise)return Promise.reject(new TypeError("Failed to execute 'fetchInject': argument 2 must be of type 'Promise'."));const r=[],n=e?[].concat(e):[],i=[];return t.forEach((t=>n.push(window.fetch(t).then((t=>[t.clone().text(),t.blob()])).then((t=>Promise.all(t).then((t=>{r.push({text:t[0],blob:t[1]})}))))))),Promise.all(n).then((()=>(r.forEach((t=>{i.push({then:e=>{t.blob.type.includes("text/css")?Yt(window,document,"style",t,e):Yt(window,document,"script",t,e)}})})),Promise.all(i))))};function Gt(t,e,r,n,i,o,s){try{var a=t[o](s),l=a.value}catch(t){return void r(t)}a.done?e(l):Promise.resolve(l).then(n,i)}function Xt(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function s(t){Gt(o,n,i,s,a,"next",t)}function a(t){Gt(o,n,i,s,a,"throw",t)}s(void 0)}))}}var Ht=r(5612).Ee,Qt=r(4191).parse;const Wt={props:{value:{type:Boolean,default:!1},document:{type:Object,required:!0}},data:function(){return{dialog:!1}},computed:{back:function(){return this.document.images.find((function(t){return"BACK"===t.type}))}},methods:{}};function Kt(t,e,r,n,i,o,s){try{var a=t[o](s),l=a.value}catch(t){return void r(t)}a.done?e(l):Promise.resolve(l).then(n,i)}function Jt(t){return function(t){if(Array.isArray(t))return t}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return te(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return te(t,e)}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}const ee={name:"App",mixins:[{data:function(){return{form:{images:[]},workerLoading:!1,firstDialog:!1,secondDialog:!1,thirdDialog:!1,step:1,scan:null,progress:0,scanning:!1,loading:!0,video:null,canvas:null,worker:null,displaySize:null,counter:0,samples:[]}},computed:{front:function(){return this.form.images.find((function(t){return"FRONT"===t.type}))},face:function(){return this.form.images.find((function(t){return"FACE"===t.type}))},frontFace:function(){return this.form.images.find((function(t){return"FRONT_FACE"===t.type}))}},methods:{rescan:function(){this.canvas.style.display="none",1===this.step&&(this.progress=0,this.firstDialog=!1),2===this.step&&(this.progress=0,this.counter=0,this.samples=[],this.secondDialog=!1),3===this.step&&(this.progress=0,this.thirdDialog=!1),this.startScan()},next:function(){if(this.canvas.style.display="none",this.progress=0,1===this.step&&(this.$snackbar.show({text:"Flip the document",color:"success",timeout:6e3}),this.firstDialog=!1),2===this.step&&(this.$snackbar.show({text:"Take a selfie",color:"success",timeout:6e3}),this.secondDialog=!1),3===this.step)return this.$snackbar.show({text:"Scanning finished",color:"success",timeout:6e3}),this.thirdDialog=!1,void this.$emit("scan",this.form);this.step++,this.startScan()},endScan:function(){this.canvas.style.display="none",window.clearInterval(this.scan),this.scanning=!1},startScan:function(){var t=this;this.scanning=!0,this.scan=setInterval(Xt(bt().mark((function e(){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.scanning){e.next=2;break}return e.abrupt("return");case 2:if(1!==t.step){e.next=7;break}return e.next=5,t.firstScan();case 5:e.next=15;break;case 7:if(2!==t.step){e.next=12;break}return e.next=10,t.secondScan();case 10:e.next=15;break;case 12:if(3!==t.step){e.next=15;break}return e.next=15,t.thirdScan();case 15:case"end":return e.stop()}}),e)}))),300)},firstScan:function(){var t=this;return Xt(bt().mark((function e(){var r,n,i,o,s,a,l,u;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.video,n=t.canvas,i=t.displaySize,o=t.$refs.webcam.capture(),e.next=6,faceapi.detectSingleFace(r,new faceapi.TinyFaceDetectorOptions).withFaceLandmarks();case 6:if(!(s=e.sent)){e.next=46;break}if(t.canvas.style.display="block",!(s.detection.score<.5)){e.next=14;break}t.progress=.5,t.$snackbar.show({text:"Zoom on the document",timeout:3e3}),e.next=40;break;case 14:return t.progress=.5,t.endScan(),(a={x:s.detection.box.x,y:s.detection.box.y,width:s.detection.box.width,height:s.detection.box.height}).x-=15,a.y-=70,a.width+=30,a.height+=80,e.prev=21,e.next=24,Ht.load(o);case 24:t.img=e.sent.crop(a).toDataURL(),e.next=32;break;case 27:return e.prev=27,e.t0=e.catch(21),t.$snackbar.show({text:"Center the document in the camera's field of view",timeout:6e3}),t.rescan(),e.abrupt("return");case 32:(l=t.form.images.findIndex((function(t){return"FRONT"===t.type})))>-1&&t.form.images.splice(l,1),t.form.images.push({file:o,type:"FRONT"}),(l=t.form.images.findIndex((function(t){return"FRONT_FACE"===t.type})))>-1&&t.form.images.splice(l,1),t.form.images.push({file:t.img,type:"FRONT_FACE"}),t.progress=1,t.firstDialog=!0;case 40:u=faceapi.resizeResults(s,i),n.getContext("2d").clearRect(0,0,n.width,n.height),faceapi.draw.drawDetections(n,u),faceapi.draw.drawFaceLandmarks(n,u),e.next=47;break;case 46:t.canvas.style.display="none";case 47:case"end":return e.stop()}}),e,null,[[21,27]])})))()},secondScan:function(){var t=this;return Xt(bt().mark((function e(){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.workerLoading){e.next=2;break}return e.abrupt("return");case 2:t.workerLoading=!0,t.worker.postMessage({cmd:"process",image:t.$refs.webcam.capture()});case 4:case"end":return e.stop()}}),e)})))()},thirdScan:function(){var t=this;return Xt(bt().mark((function e(){var r,n,i,o,s,a;return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.video,n=t.canvas,i=t.displaySize,e.next=5,faceapi.detectSingleFace(r,new faceapi.TinyFaceDetectorOptions).withFaceLandmarks();case 5:(o=e.sent)?(t.canvas.style.display="block",o.detection.score<.5?(t.progress=.5,t.$snackbar.show({text:"Center your face in the camera's field of view",timeout:6e3})):(t.progress=.5,t.endScan(),t.progress=.5,(s=t.form.images.findIndex((function(t){return"FACE"===t.type})))>-1&&t.form.images.splice(s,1),t.form.images.push({file:t.$refs.webcam.capture(),type:"FACE"}),t.progress=1,t.thirdDialog=!0),a=faceapi.resizeResults(o,i),n.getContext("2d").clearRect(0,0,n.width,n.height),faceapi.draw.drawDetections(n,a),faceapi.draw.drawFaceLandmarks(n,a)):t.canvas.style.display="none";case 7:case"end":return e.stop()}}),e)})))()},initWorker:function(){var t=this,e=new Blob([mrz_worker.toString().replace(/^function .+\{?|\}$/g,"")],{type:"text/javascript"}),r=URL.createObjectURL(e),n=new Worker(r);n.addEventListener("error",(function(t){console.log(t)}),!1),n.addEventListener("message",(function(e){var r=e.data;switch(r.type){case"progress":console.log(r);break;case"error":console.error(r),t.workerLoading=!1;break;case"result":if(console.log(r),!r.result.error&&(r.result.ocrized.forEach((function(e,r){e=e.toLowerCase().trim(),t.samples[r]||(t.samples[r]={}),t.samples[r][e]=(t.samples[r][e]||0)+1})),t.counter++,t.progress=t.counter/5,1===t.progress)){var n=t.form.images.findIndex((function(t){return"BACK"===t.type}));n>-1&&t.form.images.splice(n,1),t.form.images.push({file:t.$refs.webcam.capture(),type:"BACK"});var i=t.samples.map((function(t){var e;for(var r in t)(null==t[e]||t[r]>=t[e])&&(e=r);return e.toUpperCase()})),o=Qt(i),s=!1;o.fields.issuingState&&(s=t.form.type===o.fields.documentCode&&t.form.issued_by==={D:"DE",CMR:"CM",RWA:"RW"}[o.fields.issuingState]);var a=t.$options.filters.fromIntToDate(o.fields.expirationDate);s&&null!=o.fields.documentNumber&&null!=o.fields.lastName&&null!=o.fields.firstName&&("AR"!==t.form.type||null!=o.fields.nationality)&&null!=o.fields.sex&&null!=o.fields.birthDate&&null!=a||(t.progress=0,t.counter=0,t.samples=[],t.$snackbar.show({text:s?"Invalid document! Please retry again":"Scanning failed! Please retry again",color:"error",timeout:6e3})),Date.parse(a)<=Date.now()?(t.progress=0,t.counter=0,t.samples=[],t.$snackbar.show({text:"Document has expired!",color:"error",timeout:6e3})):(t.endScan(),t.form.number=o.fields.documentNumber,t.form.payload={document_number:o.fields.documentNumber,surname:o.fields.lastName,forename:o.fields.firstName,country_code:o.fields.issuingState,document_type:o.fields.documentCode,sex:"female"===o.fields.sex?"F":"M",birth_date:t.$options.filters.fromIntToDate(o.fields.birthDate),expiry_date:a},o.fields.nationality&&(t.form.payload.nationality_country_code=o.fields.nationality),o.fields.optional1&&(t.form.payload.personal_number=o.fields.optional1),o.fields.optional2&&(t.form.payload.personal_number2=o.fields.optional2),t.secondDialog=!0),console.log(i,o)}console.log(t.samples),t.workerLoading=!1;break;default:t.workerLoading=!1,console.log(r)}}),!1);var i=document.location.pathname.split("/");return i.pop(),i=i.join("/"),n.postMessage({cmd:"config",config:{fsRootUrl:document.location.origin+i}}),n}}}],components:{SecondScanDialog:(0,_.Z)(Wt,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-dialog",{attrs:{persistent:"","overlay-opacity":".5",value:t.value,"max-width":"500"},on:{input:function(e){return t.$emit("input",e)}}},[r("v-card",{staticClass:"align-self-center",attrs:{light:""}},[r("v-card-title",[t._v("\n            "+t._s("ID"===t.document.type?"Identity Card":"Residence Permit")+"\n            "),r("v-spacer")],1),t._v(" "),r("v-container",{staticClass:"pa-6"},[r("div",{staticClass:"text-caption font-weight-medium"},[t._v("\n                Document type\n            ")]),t._v(" "),r("div",{staticClass:"font-weight-bold text--h6"},[t._v("\n                "+t._s(t.document.payload.document_type)+"\n            ")]),t._v(" "),r("v-divider",{staticClass:"my-3"}),t._v(" "),r("div",{staticClass:"text-caption font-weight-medium"},[t._v("\n                Surname\n            ")]),t._v(" "),r("div",{staticClass:"font-weight-bold text--h6"},[t._v("\n                "+t._s(t.document.payload.surname)+"\n            ")]),t._v(" "),r("v-divider",{staticClass:"my-3"}),t._v(" "),r("div",{staticClass:"text-caption font-weight-medium"},[t._v("\n                Forename\n            ")]),t._v(" "),r("div",{staticClass:"font-weight-bold text--h6"},[t._v("\n                "+t._s(t.document.payload.forename)+"\n            ")]),t._v(" "),r("v-divider",{staticClass:"my-3"}),t._v(" "),r("div",{staticClass:"text-caption font-weight-medium"},[t._v("\n                Birth date\n            ")]),t._v(" "),r("div",{staticClass:"font-weight-bold text--h6"},[t._v("\n                "+t._s(t.document.payload.birth_date)+"\n            ")]),t._v(" "),r("v-divider",{staticClass:"my-3"}),t._v(" "),r("div",{staticClass:"text-caption font-weight-medium"},[t._v("\n                Expiry date\n            ")]),t._v(" "),r("div",{staticClass:"font-weight-bold text--h6"},[t._v("\n                "+t._s(t.document.payload.expiry_date)+"\n            ")]),t._v(" "),r("v-divider",{staticClass:"my-3"}),t._v(" "),r("div",{staticClass:"text-caption font-weight-medium"},[t._v("\n                Document number\n            ")]),t._v(" "),r("div",{staticClass:"font-weight-bold text--h6"},[t._v("\n                "+t._s(t.document.payload.document_number)+"\n            ")]),t._v(" "),r("v-divider",{staticClass:"my-3"}),t._v(" "),r("div",{staticClass:"text-caption font-weight-medium"},[t._v("\n                Sex\n            ")]),t._v(" "),r("div",{staticClass:"font-weight-bold text--h6"},[t._v("\n                "+t._s(t.document.payload.sex)+"\n            ")]),t._v(" "),r("v-divider",{staticClass:"my-3"}),t._v(" "),r("div",{staticClass:"text-caption font-weight-medium"},[t._v("\n                Nationality country code\n            ")]),t._v(" "),r("div",{staticClass:"font-weight-bold text--h6"},[t._v("\n                "+t._s(t.document.payload.nationality_country_code)+"\n            ")]),t._v(" "),r("v-divider",{staticClass:"my-3"}),t._v(" "),r("div",{staticClass:"text-caption font-weight-medium"},[t._v("\n                Personal number\n            ")]),t._v(" "),r("div",{staticClass:"font-weight-bold text--h6"},[t._v("\n                "+t._s(t.document.payload.personal_number)+"\n            ")]),t._v(" "),r("v-divider",{staticClass:"my-3"}),t._v(" "),r("div",{staticClass:"text-caption font-weight-medium"},[t._v("\n                Personal number 2\n            ")]),t._v(" "),r("div",{staticClass:"font-weight-bold text--h6"},[t._v("\n                "+t._s(t.document.payload.personal_number2)+"\n            ")]),t._v(" "),r("v-img",{staticClass:"my-3",attrs:{src:t.back.file,contains:"",width:"100%",height:"200"}})],1),t._v(" "),r("v-card-actions",{staticClass:"layout"},[r("v-spacer"),t._v(" "),r("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){return t.$emit("rescan")}}},[t._v("Rescan")]),t._v(" "),r("v-btn",{attrs:{text:"",color:"accent"},on:{click:function(e){return t.$emit("confirm")}}},[t._v("Confirm")])],1)],1)],1)}),[],!1,null,null,null).exports,"vue-web-cam":Vt.WebCam},data:function(){return{flash:!1,camera:null,deviceId:null,initialized:!1,devices:[]}},computed:{width:function(){return this.innerWidth<600?.9*this.innerWidth:500},height:function(){return this.$vuetify.breakpoint.xsOnly?210:310},device:function(){var t=this;return this.devices.find((function(e){return e.deviceId===t.deviceId}))}},watch:{camera:function(t){this.deviceId=t},devices:function(){var t=Jt(this.devices),e=t[0];t.slice(1);e&&(this.camera=e.deviceId,this.deviceId=e.deviceId)}},methods:{onCapture:function(){this.img=this.$refs.webcam.capture()},onStarted:function(t){var e=this;if(console.log("On Started Event",t),this.stream=t,!this.initialized){var r=this.$el.querySelector("video");console.log(r),r.addEventListener("play",(function(){e.video=e.$el.querySelector("video"),e.canvas=faceapi.createCanvasFromMedia(r),document.querySelector("#video-container").append(e.canvas),e.displaySize={width:r.width,height:r.height},faceapi.matchDimensions(e.canvas,e.displaySize)})),this.initialized=!0}},onStopped:function(t){console.log("On Stopped Event",t)},onStop:function(){this.$refs.webcam.stop()},triggerFlash:function(){this.flash=!this.flash,this.stream.getVideoTracks()[0].applyConstraints({advanced:[{torch:this.flash}]})},onStart:function(){this.$refs.webcam.start()},onError:function(t){console.log("On Error Event",t)},onCameras:function(t){this.devices=t,console.log("On Cameras Event",t)},flip:function(){this.onCameraChange(0===this.devices.map((function(t){return t.deviceId})).indexOf(this.camera)&&this.devices.length>1?this.devices[1].deviceId:this.devices[0].deviceId)},onCameraChange:function(t){this.deviceId=t,this.camera=t,console.log("On Camera Change Event",t)}},mounted:function(){var t=this;Zt(["/js/mrz-worker.bundle-min-wrapped.js","/js/face-api.min.js"]).then(function(){var e,r=(e=bt().mark((function e(r){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Promise,e.next=3,faceapi.nets.tinyFaceDetector.loadFromUri("/js/models");case 3:return e.t1=e.sent,e.next=6,faceapi.nets.faceLandmark68Net.loadFromUri("/js/models");case 6:return e.t2=e.sent,e.next=9,faceapi.nets.faceRecognitionNet.loadFromUri("/js/models");case 9:return e.t3=e.sent,e.next=12,faceapi.nets.faceExpressionNet.loadFromUri("/js/models");case 12:return e.t4=e.sent,e.t5=[e.t1,e.t2,e.t3,e.t4],e.next=16,e.t0.all.call(e.t0,e.t5);case 16:try{t.worker=t.initWorker()}catch(t){console.log(t)}t.loading=!1;case 18:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(t){Kt(o,n,i,s,a,"next",t)}function a(t){Kt(o,n,i,s,a,"throw",t)}s(void 0)}))});return function(t){return r.apply(this,arguments)}}()),this.form.type=this.$route.query.type,this.form.issued_by=this.$route.query.issued_by}};var re=r(736),ne={insert:"head",singleton:!1};D()(re.Z,ne);re.Z.locals;function ie(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function oe(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ie(Object(r),!0).forEach((function(e){se(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ie(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function se(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const ae={components:{MCamera:(0,_.Z)(ee,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticStyle:{"background-color":"black",width:"100%",height:"100%","z-index":"9",position:"fixed",top:"0",bottom:"0",left:"0",right:"0"}},[t.loading?r("v-layout",{attrs:{"fill-height":"","justify-space-around":"","align-center":""}},[r("v-progress-circular",{attrs:{size:"200",indeterminate:""}})],1):r("v-layout",{attrs:{"align-center":"",column:"","justify-end":""}},[r("v-layout",{staticStyle:{position:"fixed",top:"50px"},attrs:{id:"video-container","align-center":"","justify-center":""}},[r("vue-web-cam",{ref:"webcam",class:t.$vuetify.breakpoint.xsOnly?"mt-6":"",staticStyle:{"z-index":"7","object-fit":"cover","border-radius":"2px"},attrs:{"device-id":t.deviceId,width:t.width*(3===t.step?.75:1),height:3===t.step?310:t.height,resolution:{width:{ideal:1800},height:{ideal:1200}}},on:{started:t.onStarted,stopped:t.onStopped,error:t.onError,cameras:t.onCameras,"camera-change":t.onCameraChange}}),t._v(" "),t.scanning?r("v-sheet",{class:t.$vuetify.breakpoint.xsOnly?"mt-6":"",staticStyle:{position:"absolute","z-index":"8"},attrs:{width:t.width*(3===t.step?.75:1),height:3===t.step?310:t.height,color:"transparent"}},[r("v-sheet",{staticClass:"diode"},[r("v-sheet",{staticClass:"laser",style:t.$vuetify.breakpoint.xsOnly&&3!==t.step?"animation: scanningXSOnly 2s infinite;":"",attrs:{color:"red",height:"5",width:"100%"}})],1)],1):t._e()],1),t._v(" "),r("v-btn",{staticStyle:{top:"15px"},attrs:{absolute:"",top:"",left:"",fab:""},on:{click:function(e){return t.$router.back()}}},[r("v-icon",[t._v("navigate_before")])],1),t._v(" "),r("v-card",{staticClass:"py-3",staticStyle:{position:"absolute",bottom:"50px"},attrs:{flat:"",height:t.height,width:t.width}},[r("v-layout",{attrs:{"fill-height":"",column:"","justify-space-around":""}},[r("v-layout",{attrs:{"justify-space-around":""}},t._l(3,(function(e){return r("v-chip",{key:e,attrs:{color:e<t.step?"success":null,large:!t.$vuetify.breakpoint.xsOnly}},[r("v-avatar",{class:e===t.step?"white--text":"black--text",style:t.$vuetify.breakpoint.xsOnly?"width: 25px !important;height: 25px !important;":"width: 50px !important;height: 50px !important;",attrs:{color:e===t.step?"primary":"white",left:""}},[t.scanning&&t.step===e?[r("v-progress-circular",{attrs:{rotate:360,size:t.$vuetify.breakpoint.xsOnly?25:50,width:t.$vuetify.breakpoint.xsOnly?10:15,value:100*t.progress,color:"accent"}})]:[e<t.step?r("v-icon",[t._v("check")]):r("span",[t._v(t._s(e))])]],2),t._v("\n                        "+t._s(t.scanning&&t.step===e?t.$options.filters.truncNum(100*t.progress)+"% scanning":1===e?"Front side":2===e?"Back side":"Face")+"\n                    ")],1)})),1),t._v(" "),t.initialized?r("v-layout",{attrs:{"align-center":"","justify-space-around":""}},[r("v-btn",{attrs:{color:"primary",large:"",fab:""},on:{click:t.flip}},[r("v-icon",[t._v("flip_camera_android")])],1),t._v(" "),t.scanning?r("v-btn",{attrs:{color:"error","x-large":"",fab:""},on:{click:t.endScan}},[r("v-icon",[t._v("stop")])],1):r("v-btn",{attrs:{color:"primary","x-large":"",fab:""},on:{click:t.startScan}},[r("v-icon",[t._v("camera")])],1),t._v(" "),r("v-btn",{attrs:{color:"primary",large:"",fab:""},on:{click:t.triggerFlash}},[r("v-icon",[t._v(t._s(t.flash?"flash_off":"flash_on"))])],1)],1):t._e()],1)],1),t._v(" "),t.firstDialog?r("v-dialog",{attrs:{value:!0,persistent:"","overlay-opacity":".5","max-width":"400"}},[r("v-card",[r("v-card-title",[t._v("\n                    Are the images correct ?\n                    "),r("v-spacer"),t._v(" "),r("v-card-text",[r("v-layout",{attrs:{column:"","align-center":"","justify-space-between":""}},[r("v-card-subtitle",[t._v("Is the avatar correctly cropped ?")]),t._v(" "),r("v-avatar",{staticClass:"mt-1",attrs:{tile:"",size:"150"}},[r("v-img",{attrs:{src:t.frontFace.file,contain:"",height:"150",width:"150"}})],1),t._v(" "),r("v-card-subtitle",{staticClass:"mt-3"},[t._v("Is the document correctly captured ?")]),t._v(" "),r("v-img",{staticClass:"mt-1",attrs:{width:"100%",height:210,src:t.front.file}})],1)],1),t._v(" "),r("v-card-actions",{staticClass:"layout"},[r("v-spacer"),t._v(" "),r("v-btn",{attrs:{text:"",color:"primary"},on:{click:t.rescan}},[t._v("Rescan")]),t._v(" "),r("v-btn",{attrs:{text:"",color:"accent"},on:{click:t.next}},[t._v("Confirm")])],1)],1)],1)],1):t._e(),t._v(" "),t.thirdDialog?r("v-dialog",{attrs:{value:!0,persistent:"","overlay-opacity":".5","max-width":"400"}},[r("v-card",[r("v-card-title",[t._v("\n                    Is the selfie correct ?\n                    "),r("v-spacer"),t._v(" "),r("v-card-text",[r("v-img",{staticClass:"mt-1",attrs:{width:"100%",height:310,src:t.face.file}})],1),t._v(" "),r("v-card-actions",{staticClass:"layout"},[r("v-spacer"),t._v(" "),r("v-btn",{attrs:{text:"",color:"primary"},on:{click:t.rescan}},[t._v("Rescan")]),t._v(" "),r("v-btn",{attrs:{text:"",color:"accent"},on:{click:t.next}},[t._v("Confirm")])],1)],1)],1)],1):t._e(),t._v(" "),t.secondDialog?r("SecondScanDialog",{attrs:{value:t.secondDialog,document:t.form},on:{rescan:t.rescan,confirm:t.next}}):t._e()],1)],1)}),[],!1,null,null,null).exports},data:function(){return{form:null,mutate:null,dialog:!1}},methods:{setMutate:function(t){this.mutate=t},scan:function(t){console.log(t),this.form=t,this.send(this.mutate)},send:function(t){var e=this,r=oe(oe({},this.form),{},{images:this.form.images.map((function(t){return oe(oe({},t),{},{file:e.blobToFile(t.file,t.type.toLowerCase()+("FRONT_FACE"===t.type?".png":".jpeg"))})}))});this.dialog=!1,console.log(r),t({variables:{data:r},update:function(t,r){var n=r.data;console.log(n),opt(n).createDocument?(e.$snackbar.show({text:"Document sent",color:"success"}),e.$router.push({name:"submitted"})):e.dialog=!0}})},blobToFile:function(t,e){var r=this.dataURItoBlob(t);return r.lastModifiedDate=new Date,r.name=e,r},dataURItoBlob:function(t){for(var e=atob(t.split(",")[1]),r=t.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(e.length),i=new Uint8Array(n),o=0;o<e.length;o++)i[o]=e.charCodeAt(o);return new Blob([n],{type:r})}},mounted:function(){console.log(this)}};const le=(0,_.Z)(ae,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",{attrs:{column:""}},[n("MCamera",{on:{scan:t.scan}}),t._v(" "),n("MApolloMutation",{staticStyle:{width:"100%"},attrs:{"loader-type":"dialog",guarded:"","only-validation-errors":"",mutation:r(4924).JV},scopedSlots:t._u([{key:"mutate",fn:function(e){var r=e.mutate;e.error;return[n("v-dialog",{attrs:{setMutate:t.setMutate(r),"overlay-opacity":".5",persistent:"",width:"300"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[n("v-card",[n("v-card-title",[t._v("Sending failed")]),t._v(" "),n("v-card-actions",{staticClass:"layout column"},[n("v-btn",{attrs:{color:"accent",block:"",depressed:"",loading:t.loading},on:{click:function(e){return t.send(r)}}},[t._v("Retry\n                    ")]),t._v(" "),n("v-btn",{staticClass:"mt-3",attrs:{depressed:"",block:"",color:"primary"},on:{click:function(e){return t.$router.back()}}},[t._v("Cancel")])],1)],1)],1)]}}])})],1)}),[],!1,null,null,null).exports;const ue={data:function(){return{country:null}},computed:{countries:function(){return{AR:[{value:"DE",text:"Germany"}],ID:[{value:"CM",text:"Cameroon"},{value:"DE",text:"Germany"},{value:"RW",text:"Rwanda"}]}}},methods:{start:function(){console.log(this.country),this.$router.push({name:"scanner",query:{issued_by:this.country.value,type:this.$route.query.type}})}}};const he=(0,_.Z)(ue,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-layout",{attrs:{column:""}},[r("v-app-bar",{attrs:{fixed:"",color:"white","elevate-on-scroll":""}},[r("v-toolbar-title",{staticClass:"headline font-weight-bold"},[r("v-btn",{attrs:{icon:""},on:{click:function(e){return t.$router.back()}}},[r("v-icon",[t._v("arrow_back")])],1),t._v(""+t._s(t.$config.appName)+"\n        ")],1),t._v(" "),r("v-spacer"),t._v(" "),r("v-toolbar-title",{staticClass:"headline font-weight-bold"},[t._v("\n            Scanning steps\n        ")])],1),t._v(" "),r("v-sheet",{attrs:{height:"100"}}),t._v(" "),r("v-layout",{staticClass:"px-sm-0"},[r("v-flex",{attrs:{lg4:"",sm3:""}}),t._v(" "),r("v-flex",{attrs:{lg4:"",sm6:""}},[r("v-card",{staticClass:"text-center",attrs:{flat:""}},[r("v-layout",{attrs:{"align-center":"",column:"","justify-center":""}},[r("v-card-title",{staticClass:"headline font-weight-bold"},[t._v("If you are on a desktop or laptop, make sure you have a good camera, otherwise use a smartphone.")]),t._v(" "),r("v-card-title",[t._v("Photograph your ID")]),t._v(" "),r("v-img",{attrs:{contain:"",height:"200",width:"200",src:"/images/defaults/boarding2.png"}}),t._v(" "),r("v-card-title",[t._v("Take a selfie")]),t._v(" "),r("v-img",{attrs:{contain:"",height:"200",width:"200",src:"/images/defaults/boarding3.png"}}),t._v(" "),r("v-card-title",[t._v("An agent will verify your ID and notify you")]),t._v(" "),r("v-img",{attrs:{contain:"",height:"200",width:"200",src:"/images/defaults/boarding1.png"}}),t._v(" "),r("div",{staticClass:"px-6 ",staticStyle:{width:"100%"}},[r("v-overflow-btn",{staticClass:"my-2",staticStyle:{width:"100%"},attrs:{items:t.countries[t.$route.query.type],label:"Select the country","return-object":"","item-value":"text"},model:{value:t.country,callback:function(e){t.country=e},expression:"country"}}),t._v(" "),r("v-btn",{attrs:{block:"",disabled:null==t.country,depressed:"",color:"accent"},on:{click:t.start}},[t._v("Ok, I am ready\n                        ")])],1),t._v(" "),r("v-sheet",{attrs:{height:"20"}})],1)],1)],1),t._v(" "),r("v-flex",{attrs:{lg4:"",sm3:""}})],1)],1)}),[],!1,null,null,null).exports;const ce=(0,_.Z)({},(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-layout",{attrs:{column:""}},[r("v-app-bar",{attrs:{fixed:"",color:"white","elevate-on-scroll":""}},[r("v-toolbar-title",{staticClass:"headline font-weight-bold"},[r("v-btn",{attrs:{icon:""},on:{click:function(e){return t.$router.back()}}},[r("v-icon",[t._v("arrow_back")])],1),t._v(""+t._s(t.$config.appName)+"\n        ")],1),t._v(" "),r("v-spacer"),t._v(" "),r("v-toolbar-title",{staticClass:"headline font-weight-bold"},[t._v("\n            Scanning finished\n        ")])],1),t._v(" "),r("v-sheet",{attrs:{height:"100"}}),t._v(" "),r("v-layout",[r("v-flex",{staticClass:"hidden-xs-only",attrs:{lg4:"",sm3:""}}),t._v(" "),r("v-flex",{attrs:{lg4:"",sm6:"",xs12:""}},[r("v-card",{attrs:{flat:""}},[r("v-layout",{attrs:{"align-center":"",column:"","justify-center":""}},[r("v-img",{attrs:{contain:"",height:"200",width:"200",src:"/images/defaults/boarding2.png"}}),t._v(" "),r("v-card-title",{staticClass:"headline text-center"},[t._v("Identification submitted successfully")]),t._v(" "),r("v-card-subtitle",{staticClass:"text-center"},[t._v("Thank you for using our online identification service! You can now close the\n                        app and will be informed about the next steps.\n                    ")]),t._v(" "),r("v-img",{attrs:{contain:"",height:"200",width:"200",src:"/images/defaults/boarding1.png"}}),t._v(" "),r("div",{staticClass:"px-3",staticStyle:{width:"100%"}},[r("v-btn",{attrs:{block:"",to:{name:"home",replace:!0},depressed:"",color:"success"}},[t._v("Finish")])],1),t._v(" "),r("v-sheet",{attrs:{height:"20"}})],1)],1)],1),t._v(" "),r("v-flex",{staticClass:"hidden-xs-only",attrs:{lg4:"",sm3:""}})],1)],1)}),[],!1,null,null,null).exports;const fe={components:{DocumentCard:Ut,NoDataMBody:$t},data:function(){return{refetch:null,loading:!0}},methods:{setRefetch:function(t,e){this.refetch=t,this.loading=e}}};const de=(0,_.Z)(fe,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",{attrs:{column:""}},[n("v-app-bar",{attrs:{fixed:"",color:"white","elevate-on-scroll":""}},[n("v-toolbar-title",{staticClass:"headline font-weight-bold"},[n("v-btn",{attrs:{icon:""},on:{click:function(e){return t.$router.back()}}},[n("v-icon",[t._v("arrow_back")])],1),t._v(""+t._s(t.$config.appName)+"\n        ")],1),t._v(" "),n("v-spacer"),t._v(" "),n("v-btn",{staticClass:"mr-3",attrs:{loading:t.loading,large:"",color:"accent",outlined:"",depressed:""},on:{click:function(){null!=t.refetch&&t.refetch()}}},[n("v-icon",[t._v("autorenew")]),t._v("\n            Refresh\n        ")],1)],1),t._v(" "),n("v-sheet",{attrs:{height:"100"}}),t._v(" "),n("v-layout",{staticClass:"px-6 px-sm-0"},[n("v-flex",{attrs:{md1:"",lg2:"",sm1:""}}),t._v(" "),n("v-flex",{attrs:{md10:"",lg8:"",sm10:""}},[n("v-card-title",{staticClass:"headline pl-0"},[t._v("Identities Documents")]),t._v(" "),n("m-apollo-query",{attrs:{"no-data":"documents.data",first:20,fetchMore:"",query:r(4924).Kg},scopedSlots:t._u([{key:"props",fn:function(e){var r=e.data,i=e.loading,o=e.refetch;return[n("v-row",{attrs:{setRefetch:t.setRefetch(o,i),wrap:""}},i?t._l(6,(function(t){return n("v-col",{key:t,attrs:{cols:"12",sm:"6",md:"4",lg:"4"}},[n("DocumentCard",{attrs:{loading:""}})],1)})):t._l(r.documents.data,(function(t){return n("v-col",{key:t.id,attrs:{cols:"12",sm:"6",md:"4",lg:"4"}},[n("DocumentCard",{attrs:{"is-admin":"",document:t}})],1)})),1)]}},{key:"no-data",fn:function(e){var r=e.refetch;return[t._t("header",null,{refetch:r}),t._v(" "),n("NoDataMBody",{attrs:{setRefetch:t.setRefetch(r,!1),title:"No documents found",subtitle:"When someone scan a document, you can see it here",refetch:r}})]}}],null,!0)})],1),t._v(" "),n("v-flex",{attrs:{md1:"",lg2:"",sm1:""}})],1),t._v("\n    /\n")],1)}),[],!1,null,null,null).exports;const pe={created:function(){this.$router.push({name:"starting",query:{retrieve:this.$route.query.retrieve,redirect:this.$route.query.redirect}})}};const me=(0,_.Z)(pe,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-layout",{attrs:{column:"","fill-height":"","align-center":"","justify-center":""}},[r("v-progress-circular",{attrs:{size:150,color:"primary",indeterminate:""}},[r("v-avatar",[r("v-img",{attrs:{src:t.$config.images.logo,height:"50",width:"50"}})],1)],1)],1)}),[],!1,null,null,null).exports;const ge={};const ve=(0,_.Z)(ge,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("h1",[t._v("Profile")])}),[],!1,null,null,null).exports;var we=r(9872);r(4154),r(9467);const ye={components:{SignInDialog:x,CodeHighlight:we.Z},data:function(){return{itemsPerPage:4,items:[{name:"Cameroon",id_card:!0,residence_permit:!1},{name:"Germany",id_card:!0,residence_permit:!0},{name:"Rwanda",id_card:!0,residence_permit:!1}]}},methods:{navigate:function(){this.$repositories.auth.logged?this.$router.push({name:"home"}):this.pushQuery({sign_in:"1"})}}};var be=r(1106),_e={insert:"head",singleton:!1};D()(be.Z,_e);be.Z.locals;const xe=(0,_.Z)(ye,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-layout",{attrs:{column:""}},[r("v-app-bar",{attrs:{fixed:"",color:"white","elevate-on-scroll":""}},[r("v-toolbar-title",{staticClass:"headline font-weight-bold"},[t._v(t._s(t.$config.appName))]),t._v(" "),r("v-spacer"),t._v(" "),r("v-btn",{attrs:{color:"primary",large:"",depressed:""},on:{click:t.navigate}},[t._v("\n            Sign in\n        ")])],1),t._v(" "),r("v-sheet",{attrs:{height:"100"}}),t._v(" "),r("v-layout",{staticClass:"px-6 px-sm-0 py-12"},[r("v-flex",{attrs:{md1:"",lg2:"",sm1:""}}),t._v(" "),r("v-flex",{style:"background-image:url("+t.$config.images.startingBg+");background-size: contain;",attrs:{md10:"",lg8:"",sm10:""}},[r("v-layout",{attrs:{wrap:""}},[r("v-flex",{attrs:{md6:"",sm12:""}},[r("div",{staticClass:"text-sm-h3 text-md-h3 headline active"},[t._v("Knowing your customers has never been so easy\n                        and fast.\n                    ")]),t._v(" "),r("div",{staticClass:"text-sm-h6 text-md-h6 mt-12"},[t._v("\n                        The identity verification platform. "),r("br"),t._v("Built for security. Loved by users.\n                    ")]),t._v(" "),r("div",{staticClass:"mt-6"},[r("v-layout",{attrs:{column:""}},[r("v-flex",{staticClass:"mb-3"},[r("v-btn",{attrs:{large:"",color:"accent",to:{name:"home"},depressed:""}},[t._v("Identification in browser")])],1),t._v(" "),r("v-flex",[r("v-btn",{attrs:{large:"",color:"primary",depressed:""},on:{click:function(e){return t.pushQuery({download:"1"})}}},[t._v("Download\n                                    apk\n                                ")])],1)],1)],1)]),t._v(" "),r("v-flex",{staticClass:"mt-sm-6 mt-md-0",attrs:{md6:"",sm12:""}},[r("v-layout",{attrs:{column:"","align-end":t.$vuetify.breakpoint.mdAndUp,"align-center":t.$vuetify.breakpoint.smAndDown}},[r("v-img",{attrs:{"max-height":"600","max-width":"400",contain:"",src:"/images/defaults/scanning_animation.gif"}})],1)],1)],1)],1),t._v(" "),r("v-flex",{attrs:{md1:"",lg2:"",sm1:""}})],1),t._v(" "),r("v-sheet",{attrs:{color:"#fafafa"}},[r("v-layout",{staticClass:"my-12 px-6 px-sm-0 py-12"},[r("v-flex",{attrs:{md1:"",lg2:"",sm1:""}}),t._v(" "),r("v-flex",{attrs:{md10:"",lg8:"",sm10:""}},[r("v-layout",{attrs:{"align-center":"",wrap:""}},[r("v-flex",{staticClass:"pr-sm-6",attrs:{md6:"",sm12:""}},[r("div",{staticClass:"text-sm-h4 headline font-weight-bold"},[t._v("Better for your business.")]),t._v(" "),r("div",{staticClass:"text--secondary text-h6 mt-6"},[t._v("\n                            Provide your customers a fast, friendly and secure onboarding process. Suitable\n                            for desktop, tablet, mobile and point-of-sale, with "+t._s(t.$config.appName)+" your customers\n                            can\n                            enjoy a flawless and secure identity verification experience.\n                        ")]),t._v(" "),r("div",{staticClass:"text-sm-h4 headline font-weight-bold mt-12"},[t._v("Better for your customers.\n                        ")]),t._v(" "),r("div",{staticClass:" text--secondary text-h6 mt-6"},[t._v("\n                            Built for the needs of an enterprise, but offers easy and seamless integration\n                            for businesses of any size. With "+t._s(t.$config.appName)+", you can improve conversion while\n                            ensuring a high level of data protection.\n                        ")])]),t._v(" "),r("v-flex",{staticClass:" hidden-xs-only mt-md-0 mt-6",attrs:{md6:"",sm12:""}},[r("v-layout",[r("v-flex",[r("v-img",{attrs:{src:"/images/defaults/smiling_man.jpg",height:"400",width:"300"}})],1),t._v(" "),r("v-layout",{attrs:{column:""}},[r("v-img",{attrs:{src:"/images/defaults/smiling_woman.jpg",height:"180",width:"300"}}),t._v(" "),r("v-img",{staticClass:"mt-2",attrs:{src:"/images/defaults/smiling_woman2.jpg",height:"180",width:"300"}})],1)],1)],1)],1)],1),t._v(" "),r("v-flex",{attrs:{md1:"",lg2:"",sm1:""}})],1)],1),t._v(" "),r("v-layout",{staticClass:"mt-12 px-6 px-sm-0 py-12"},[r("v-flex",{attrs:{md1:"",lg2:"",sm1:""}}),t._v(" "),r("v-flex",{attrs:{md10:"",lg8:"",sm10:""}},[r("v-data-iterator",{attrs:{items:t.items,"items-per-page":t.itemsPerPage,"hide-default-footer":""},on:{"update:itemsPerPage":function(e){t.itemsPerPage=e},"update:items-per-page":function(e){t.itemsPerPage=e}},scopedSlots:t._u([{key:"header",fn:function(){return[r("v-toolbar",{staticClass:"mb-2",attrs:{flat:"",color:"#fafafa"}},[r("v-toolbar-title",{staticClass:"font-weight-bold headline text-sm-h4"},[t._v("Supported documents\n                        ")])],1)]},proxy:!0},{key:"default",fn:function(e){return[r("v-row",{staticClass:"justify-space-between"},t._l(e.items,(function(e){return r("v-col",{key:e.name,attrs:{cols:"12",sm:"6",md:"4",lg:"3"}},[r("v-card",{attrs:{color:"#fafafa",flat:""}},[r("v-card-title",{staticClass:"subheading font-weight-bold text-h5"},[t._v("\n                                    "+t._s(e.name)+"\n                                ")]),t._v(" "),r("v-divider"),t._v(" "),r("v-list",{attrs:{color:"#fafafa",dense:""}},[r("v-list-item",[r("v-list-item-content",{staticClass:"subtitle-1"},[t._v("Identity Card:")]),t._v(" "),e.id_card?r("v-icon",{attrs:{color:"primary"}},[t._v("check")]):r("v-icon",[t._v("close")])],1),t._v(" "),r("v-list-item",[r("v-list-item-content",{staticClass:"subtitle-1"},[t._v("Residence Permit:\n                                        ")]),t._v(" "),e.residence_permit?r("v-icon",{attrs:{color:"primary"}},[t._v("check")]):r("v-icon",[t._v("close")])],1)],1)],1)],1)})),1)]}}])}),t._v(" "),r("v-layout",{attrs:{column:""}},[r("v-toolbar",{staticClass:"my-2",attrs:{color:"#fafafa",flat:""}},[r("v-toolbar-title",{staticClass:"font-weight-bold headline text-sm-h4"},[t._v("\n                        How is it work?\n                    ")])],1),t._v(" "),r("v-row",{staticClass:"justify-space-between mb-2"},[r("v-col",{attrs:{cols:"12",sm:"6",md:"4",lg:"3"}},[r("v-card",{attrs:{color:"#fafafa",flat:""}},[r("v-card-title",{staticClass:"subheading font-weight-bold text-h5"},[t._v("\n                                First Step\n                            ")]),t._v(" "),r("v-divider"),t._v(" "),r("v-card-text",{staticClass:"subtitle-1"},[t._v("\n                                Customers use the browser or our app (\n                                "),r("v-btn",{attrs:{small:"",link:"",text:"",color:"primary",depressed:""},on:{click:function(e){return t.pushQuery({download:"1"})}}},[t._v("\n                                    Download apk\n                                ")]),t._v("\n                                ) to scan their identity document and wait until the scanned\n                                document is confirmed by one of our agents.\n                            ")],1)],1)],1),t._v(" "),r("v-col",{attrs:{cols:"12",sm:"6",md:"4",lg:"3"}},[r("v-card",{attrs:{color:"#fafafa",flat:""}},[r("v-card-title",{staticClass:"subheading font-weight-bold text-h5"},[t._v("\n                                Second Step\n                            ")]),t._v(" "),r("v-divider"),t._v(" "),r("v-card-text",{staticClass:"subtitle-1"},[t._v("\n                                Your company can access the scanned document data by calling url: "),r("strong",[t._v("http://localhost:\n                                8000/api/provider/?retrieve=[<country>:<document type>[,<country>:<document\n                                type>]*]*&redirect=<origin>")]),t._v(" "),r("br"),t._v(" "),r("strong",[t._v("<country>")]),t._v(' = "CM" | "DE" | "RW"\n                                '),r("br"),t._v(" "),r("strong",[t._v("<document type>")]),t._v(' = "AR" | "ID"\n                                '),r("br"),t._v("\n                                e.g.: "),r("strong",[t._v("retrieve=[CM:ID,DE:ID],[RW:ID]")]),t._v(" means, I need an identity card\n                                of Cameroon or Germany and an identity card of rwanda\n                            ")])],1)],1),t._v(" "),r("v-col",{attrs:{cols:"12",sm:"6",md:"4",lg:"3"}},[r("v-card",{attrs:{color:"#fafafa",flat:""}},[r("v-card-title",{staticClass:"subheading font-weight-bold text-h5"},[t._v("\n                                Third Step\n                            ")]),t._v(" "),r("v-divider"),t._v(" "),r("v-card-text",{staticClass:"subtitle-1"},[t._v("\n                                The called window reviews a token which will can be only used by the current host to\n                                retrieve the data by GraphQL.\n                                Use the token to retrieve data from our GraphQL API by calling the query "),r("strong",[t._v("documents(token:\n                                Token)")]),t._v(" at the url "),r("strong",[t._v("http://localhost:8000/graphql")]),t._v(".\n                            ")])],1)],1)],1),t._v(" "),r("v-card-title",{staticClass:"headline pl-0 font-weight-bold"},[t._v("Ask the user for identity(ies) document(s) and get the token back")]),t._v(" "),r("code-highlight",{staticClass:"m-code",attrs:{language:"javascript"}},[t._v('\n                    <script>\n                    // set event listener for getting token back\n                    window.addEventListener("message",onMessage);\n                    // open a new window and retrieve an identity card of Cameroon or a residence permit of Germany\n                    window.open(\n                    "'+t._s(t.$config.appUrl)+'/api/provider/?retrieve=[CM:ID,DE:AR]&redirect=https://domain.com",\n                    "_blank", "height=900,width=900");\n                    <\/script>\n                ')]),t._v(" "),r("v-card-title",{staticClass:"headline pl-0 font-weight-bold"},[t._v("Use the token to fetch the documents with attached images from GraphQL API")]),t._v(" "),r("code-highlight",{staticClass:"m-code",attrs:{language:"javascript"}},[t._v("\n                    <script>\n                    const DOCUMENTS_QUERY =  `\n                        query($data: TokenInput){\n                            documents(first:10, page: 1, data: $data){\n                                paginatorInfo{hasMorePages}\n                                data{\n                                    id\n                                    type\n                                    number\n                                    issued_by\n                                    valid\n                                    verified_at\n                                    created_at\n                                    updated_at\n                                    payload{\n                                    surname\n                                    forename\n                                    country_code\n                                    document_type\n                                    document_number\n                                    nationality_country_code\n                                    sex\n                                    birth_date\n                                    expiry_date\n                                    personal_number\n                                    personal_number2\n                                    }\n                                    images(first:10,page:1){\n                                        data{\n                                            type\n                                            full_path\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    `\n                    async function onMessage(event){\n                        console.log(event.data)\n                        // fetch the identity(ies) document(s)\n                        let res = await fetch('https://gauthsy.restopres.com/graphql', {\n                            method: 'POST',\n                            headers: {\n                            'Accept': 'application/json',\n                            'Content-Type': 'application/json'\n                            },\n                            body: JSON.stringify({\n                                query: DOCUMENTS_QUERY,\n                                variables: {data: {token: event.data}}\n                            })\n                        });\n                        let resParsed = await res.json()\n                        console.log(resParsed)\n                        // fetch the images of each document\n                        resParsed.data.documents.data.forEach(document => {\n                            document.images.data.forEach(async image => {\n                            // fetch the image by passing the token as query in the URL\n                            let res = await fetch(image.full_path + \"?token=\" + event.data)\n                            let resParsed = await res.blob()\n                            })\n                        })\n                    }\n\n                    <\/script>\n                ")]),t._v(" "),r("v-btn",{attrs:{outlined:"",block:"",target:"_blank",link:"",href:"/graphql-playground",color:"primary",large:"",depressed:""}},[t._v("Go to Api\n                    "),r("v-icon",[t._v("navigate_next")])],1)],1)],1),t._v(" "),r("v-flex",{attrs:{md1:"",lg2:"",sm1:""}})],1)],1)}),[],!1,null,null,null).exports;const ke={props:{refetch:{type:Function}}};var Me=r(2232),Se={insert:"head",singleton:!1};D()(Me.Z,Se);Me.Z.locals;const Ee=(0,_.Z)(ke,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"main"},[r("v-layout",{staticStyle:{position:"absolute",width:"100%"},attrs:{"align-center":"","justify-center":"","fill-height":""}},[r("v-flex",{staticStyle:{"padding-top":"400px"},attrs:{md6:"",sm6:"",lg4:""}},[t.refetch?r("v-btn",{attrs:{block:"",depressed:"",color:"accent"},on:{click:t.refetch}},[t._v("Try again")]):t._e()],1)],1),t._v(" "),r("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"470",height:"290",viewBox:"0 0 470 290"}},[r("defs",[r("path",{staticClass:"fundo",attrs:{id:"prefix__a",d:"M5.063 128.67c-2.513 15.192 5.633 31.093 17.898 38.941 5.99 3.832 13.34 6.528 16.471 13.254 4.868 10.452-3.879 22.437-13.113 28.515-9.236 6.078-20.5 10.9-24.704 21.683-2.771 7.108-1.685 15.387 1.058 22.507 10.06 26.112 39.393 37.547 65.479 36.15 26.086-1.396 50.827-12.407 76.416-18.075 87.873-19.465 180.005 24.717 267.728 4.47 13.65-3.151 27.4-8.081 37.943-17.99 11.883-11.167 18.632-28.016 19.65-45.023.97-16.225-4.34-34.495-17.744-41.806-7.834-4.273-17.196-4.1-25.7-1.774-5.43 1.483-10.767 3.808-16.369 3.848-5.601.038-11.763-3-13.386-8.808-1.707-6.107 2.182-12.41 6.642-16.577 9.072-8.474 21.203-12.707 29.441-22.126 7.927-9.063 11.264-22.574 8.574-34.716-2.692-12.141-11.326-22.538-22.188-26.715-27.683-10.645-57.844 18.377-86.152 9.873-2.101-.63-4.312-1.605-5.418-3.641-1.08-1.988-.834-4.51-.214-6.716 3.468-12.348 16.939-20.21 17.528-33.102.32-7.008-3.504-13.564-8.325-18.251-33.126-32.2-81.125 6.102-114.9 18.194-55.542 19.884-112.157 36.49-167.849 55.963-20.81 7.275-44.91 18.606-48.766 41.922z"}})]),t._v(" "),r("g",{attrs:{fill:"none","fill-rule":"evenodd"}},[r("path",{attrs:{fill:"#FFF",d:"M0 0H1366V800H0z",transform:"translate(-448 -157)"}}),t._v(" "),r("g",{attrs:{transform:"translate(-448 -157) translate(448 157)"}},[r("mask",{attrs:{id:"prefix__b",fill:"#fff"}},[r("use",{attrs:{"xlink:href":"#prefix__a"}})]),t._v(" "),r("use",{attrs:{fill:"#F6F6F7","xlink:href":"#prefix__a"}}),t._v(" "),r("path",{attrs:{fill:"#EDEDF0","fill-rule":"nonzero",d:"M-14.199 211.2H481.36V301.2H-14.199z",mask:"url(#prefix__b)"}}),t._v(" "),r("g",{staticClass:"paes"},[r("g",{staticClass:"pao-baixo"},[r("path",{attrs:{fill:"#FBB965",d:"M2.79 131.737s-2.073 3.155-2.479 6.868c-.406 3.713-.747 9.666 1.24 13.372 1.985 3.707 12.69 20.8 65.175 21.02 53.15.225 69.188-15.685 70.59-18.977 2.605-6.118 1.838-21.327.06-22.283-1.777-.956-44.044-3.204-72.446-4.057-28.402-.854-49.872-1.968-62.14 4.057",transform:"translate(161 68)"}}),t._v(" "),r("path",{attrs:{fill:"#E6A95F",d:"M34.648 167.758c-8.863-1.526-23.515-6.939-30.292-14.218-6.775-7.28-2.096-8.803 3.508-5.387 5.605 3.415 24.569 11.557 54.124 12.263 29.555.706 61.424-6.946 72.2-17.053 0 0 2.705-1.47 2.768 1.509.062 2.98.428 7.948-2.769 10.507-3.196 2.558-34.805 23.526-99.54 12.379",transform:"translate(161 68)"}}),t._v(" "),r("path",{attrs:{fill:"#FFDA7F",d:"M5.679 131.837c-6.522 1.646-.275 6.91 9.492 12.14 9.767 5.229 28.24 10.257 44.267 10.015 16.028-.243 37.48-.481 52.543-5.333 15.06-4.852 16.223-9.55 17.998-13.298 1.774-3.748-107.32-7.809-124.3-3.524",transform:"translate(161 68)"}})]),t._v(" "),r("g",{staticClass:"pao-cima"},[r("path",{attrs:{fill:"#FBB868",d:"M71.37 0C49.008.035-2.43.631 1.18 51.16c0 0-.018 10.84 62.825 10.84 62.844 0 72.591-9.633 73.721-11.173C142.284 44.623 147.583-.117 71.37 0",transform:"translate(161 68)"}}),t._v(" "),r("path",{attrs:{fill:"#E6A95F",d:"M34.552 61c-7.628-1.006-23.98-2.904-27.586-5.506-3.606-2.604-7.448-2.895-5.39-10.826.842-3.242 7.976-.619 11.264.839 3.289 1.458 21.239 6.047 42.989 6.673 21.75.625 57.126-1.679 67.42-5.458 9.806-3.598 13.662-7.027 15.493-5.228 2.396 2.351 1.687 8.008-4.913 12.215-6.252 3.985-27.53 7.2-49.434 7.76-21.904.56-38.604 1.012-49.843-.469",transform:"translate(161 68)"}}),t._v(" "),r("path",{attrs:{fill:"#FFEAD4",d:"M45.508 13.114c-.368.549-.54 1.598-.503 2.445.017.392.297.604.45.287.143-.297.222-.617.303-.978.087-.387.197-.735.238-1.15.042-.44-.257-.95-.488-.604M42.092 9.016c-.694.13-1.446.61-1.774 1.098-.168.248-.3.512-.317.792-.017.313.154.503.29.776.249.494 1.245.392 1.22-.162-.014-.274.33-.612.54-.817.367-.361.75-.62.923-1.075.154-.404-.413-.7-.882-.612M51.621 9.247c-.182-.409-.68-.325-.615.364.063.687.007 1.485.25 2.067.19.458.694.473.737-.25.043-.759-.109-1.592-.372-2.181M32.55 15.101c-1.206.547-1.849 1.662-1.414 2.552.188.384 1.21.504 1.46.077.188-.32.407-.629.616-.942.243-.363.63-.675.767-1.064.173-.486-.753-.93-1.43-.623M29.793 9.012c-.26-.108-.498.532-.62.942-.166.565-.205 1.033-.149 1.674.053.59.424.405.493-.048-.002.014.102-.302.138-.4.093-.247.18-.497.262-.76.113-.359.144-1.297-.124-1.408M38.384 6.056c-.737-.211-1.406.211-1.881.674-.53.514-.607 1.19-.39 1.829.167.5 1.09.632 1.326.096.127-.285.31-.53.533-.764.304-.32.72-.44.944-.848.237-.429-.053-.85-.532-.987M21.722 10.101c-.484-.28-1.16.08-1.542.378-.57.444-.957.924-1.152 1.628-.21.764.802 1.182 1.296.663.4-.42.901-.746 1.308-1.172.319-.334.594-1.205.09-1.497M23.513 15.078c-.385.414-.505 1.566-.513 2.381-.005.47.333.749.47.35.206-.592.422-1.34.517-2.047.082-.598-.253-.921-.474-.684M38.964 14.6c-.26-.324-1.293-.581-2.192-.6-.626-.012-.971.28-.65.452.459.244 1.155.57 2.063.547.56-.014.936-.205.78-.4M51.58 3.028c-.54-.1-.912.074-1.399.401-.45.304-.83.813-1.092 1.395-.344.76.386 1.437.866 1.076.662-.5 1.41-.857 1.914-1.641.255-.397.126-1.152-.29-1.23M66.234 9c-.923 0-2.062.305-2.227.708-.074.182.437.384.836.247.537-.185 1.29-.187 1.832-.364.59-.193.337-.591-.441-.591M60.589 9.375c-.101-.522-.482-.493-.556.048-.12.852.102 1.815.423 2.412.213.396.543.02.544-.494.002-.736-.283-1.302-.411-1.966M69.955 3.569c-.44-.473-1.713-.712-2.727-.479-.37.085-.24.315.044.396.601.173 1.168.408 1.848.503.49.069 1.042-.199.835-.42M73.956 10.626c-.231-.836-.735-1.255-1.316-1.507-.24-.104-.5-.147-.75-.1-.148.028-.273.063-.407.161-.032.022-.373.238-.223.161-.282.148-.382.791-.057.979.117.067.22.24.333.325.168.128.336.247.508.364.327.219.564.609.873.868.537.45 1.27-.42 1.04-1.251M66.549 15.017c-.83-.233-.486 2.056-.435 2.528.055.51.678.664.741.08.068-.628.42-2.405-.306-2.608M54.803 16.301c-.065-.347-.1-.709-.19-1.038-.107-.393-.44-.32-.532.052-.186.746-.052 2.313.405 2.636.225.16.545-.077.512-.623-.024-.375-.13-.676-.195-1.027M39.534 21.024c-.423.212-.58 1.352-.523 2.174.066.946.664 1.13.785.144.065-.538.22-1.041.203-1.612-.016-.528-.238-.82-.465-.706M15.946 21.201c-.04-.142-.134-.197-.214-.2-.311-.02-.464.621-.576 1.05-.124.468-.188.945-.14 1.461.053.562.486.699.57.088.053-.375.146-.754.233-1.107.108-.439.265-.815.127-1.292M14.918 16.274c-.067-.169-.25-.279-.46-.274-.571.015-1.05.232-1.55.61-.562.422-.976 1.023-.899 1.675.081.697.993.942 1.574.476.407-.326.746-.755 1.058-1.149.364-.462.441-.923.277-1.338M62.906 5.209c-.447-.277-1.34-.251-1.957-.083-.279.077-.57.172-.738.298-.069.051-.108.105-.15.16-.025.038-.037.076-.038.115.043.077.042.09-.003.037-.154.243.622.357.925.173.227-.051.444-.104.705-.13.521-.054 1.021-.089 1.286-.315.092-.078.088-.182-.03-.255M52.906 8.291c-.191-.24-.402-.204-.634-.28-.218-.073-.326.255-.245.491.117.34.438.509.697.497.26-.01.37-.472.182-.708M80.437 1.283c-.385-.22-.844-.327-1.272-.266-.497.071-.7.363-1.033.724-.356.388.07 1.143.54.93l-.065-.083c.095.05.192.08.295.09.177.032.31.074.477.16.373.189.702.503 1.023.78.348.301 1.738.788 1.586-.245-.141-.963-.789-1.652-1.551-2.09M78.955 8.082c-.134-.55-.259-1.126-.366-1.703-.102-.548-.457-.476-.541.05-.073.453-.057.877.01 1.331.083.548.286.874.512 1.17.11.144.276.048.357-.132.097-.215.088-.476.028-.716M87.395 8c-.77.016-1.317.338-2.032.43-.505.065-.477.525.046.56.713.047 1.359-.082 2.053-.14.468-.04 1.35.253 1.516-.164.191-.483-.906-.7-1.583-.685M81.958 14.767c-.103-.44-.306-.8-.377-1.279-.095-.644-.518-.678-.57.063-.07.998.19 1.845.53 2.34.293.426.566-.494.417-1.124M99.918 9.365c-.177-.18-.36-.23-.56-.337-.295-.16-.508.405-.225.646.181.155.805.626.863.04.012-.119-.003-.273-.078-.349M93.308 4.792c-.387-.436-.932-.682-1.466-.78-.809-.145-1.17 1.02-.47 1.477.65.427 1.772 2.34 2.503 1.097.376-.641-.178-1.356-.567-1.794M91.498 10.138c-.32.55-.428 1.334-.494 2.18-.043.546.266.928.442.494.21-.512.38-1.126.522-1.741.139-.605-.204-1.393-.47-.933M103.977 8.863c-.265-1.177-1.477-2.153-2.51-1.784-.548.195-.653 1.156-.104 1.442.294.153.53.397.762.655.326.36.549.611.988.784.564.223.992-.535.864-1.097M100.988 4.781c.03-.437-.169-.702-.568-.724-.906-.33-1.89.849-2.3 1.608-.47.873.538 1.63 1.223 1.22.683-.406 1.786-1.108 1.645-2.104M110.532 7.06c-.238-.218-.568.203-.463.619l.012.045c-.01.096-.001.204 0 .297 0 .14-.016.294-.025.434-.012.181-.043.357-.053.539-.013.245.016.45.06.612.091.33.32.515.53.304.108-.11.286-.37.335-.709.04-.276.058-.554.07-.836.024-.568-.189-1.052-.466-1.306M108.458 14.127c-.434-.548-.995-.921-1.662-1.103-.746-.203-1.116.933-.445 1.28.216.11.4.251.557.443.204.248.42.648.672.84.348.262.868.645 1.249.23.437-.478-.064-1.305-.37-1.69M117.71 13.184c-.282.276-.558.555-.852.815-.143.126-.333.256-.446.42-.108.156-.174.34-.284.489-.392.535.193 1.412.694.973.104-.091.318-.086.446-.134.16-.062.324-.11.486-.169.51-.186.872-.578 1.145-1.11.418-.816-.553-1.907-1.188-1.284M97.93 18.019c-.834-.165-1.209.791-.697 1.348.495.538 1.83 2.49 2.627 1.2.636-1.034-1.044-2.373-1.93-2.548M124.69 17.006c-.372.072-.428.396-.629.626-.202.23.139.496.376.3.22-.181.506-.403.559-.676.032-.168-.129-.285-.307-.25M115.979 19.839c-.079-.499-.153-.976-.264-1.445-.205-.86-.853-.174-.689.73.089.49.148.982.25 1.46.196.907.849.182.703-.745M78.957 24.496c.068-.31.05-.616-.02-.91-.077-.321-.14-.65-.183-1.002-.099-.82-.671-.76-.736.076-.056.71.019 1.361.23 1.918.132.348.265.461.467.377-.18.076.075.038.116.016.071-.038.117-.183.135-.33.01-.08.063-.472-.009-.145M61.924 22.403c-.057-.057-.16-.13-.189-.2-.132-.33-.73-.229-.735.1-.004.27.047.533.379.665.186.073.458.02.543-.14l.027-.053c.06-.114.083-.266-.025-.372M106.798 22.22c-.107-.292-.757-.304-.794.028-.032.293.107.618.488.731.229.068.532-.032.507-.257-.021-.186-.137-.329-.201-.502M70.884 28.197c-.13-.291-.716-.24-.83.025-.131.304-.034.606.41.754.101.033.24.034.334-.012.326-.16.181-.553.086-.767",transform:"translate(161 68)"}}),t._v(" "),r("g",{staticClass:"olhos"},[r("path",{attrs:{fill:"#633",d:"M51.976 32.505c.27 2.748-1.735 5.197-4.476 5.47-2.748.274-5.199-1.732-5.476-4.48-.27-2.748 1.735-5.197 4.483-5.47 2.748-.274 5.192 1.733 5.469 4.48M93.976 28.505c.27 2.748-1.735 5.197-4.483 5.47-2.748.273-5.192-1.733-5.469-4.48-.27-2.748 1.735-5.197 4.483-5.47 2.748-.274 5.192 1.733 5.469  4.48M65.03 45.127c2.1-5.726 9.106-6.606 13.113-2.171.408.462-.277 1.204-.725.77-3.981-3.892-9.17-2.951-11.83 1.745-.187.333-.68-.002-.558-.344 ",transform:"translate(161 68)"}})])])]),t._v(" "),r("g",{staticClass:"left-sparks",attrs:{"fill-rule":"nonzero",stroke:"#979797","stroke-linecap":"round","stroke-width":"1.8"}},[r("path",{attrs:{d:"M23.684 5.789L30 1.158",transform:"rotate(-90 157 13)"}}),t._v(" "),r("path",{attrs:{d:"M0 5.789L6.316 1.158",transform:"rotate(-90 157 13) matrix(-1 0 0 1 6.316 0)"}}),t._v(" "),r("path",{attrs:{d:"M15.789 4.632L15.789 0",transform:"rotate(-90 157 13)"}})]),t._v(" "),r("g",{staticClass:"right-sparks",attrs:{"fill-rule":"nonzero",stroke:"#979797","stroke-linecap":"round","stroke-width":"1.8"}},[r("path",{attrs:{d:"M23.684 5.789L30 1.158",transform:"matrix(0 -1 -1 0 318 170)"}}),t._v(" "),r("path",{attrs:{d:"M0 5.789L6.316 1.158",transform:"matrix(0 -1 -1 0 318 170) matrix(-1 0 0 1 6.316 0)"}}),t._v(" "),r("path",{attrs:{d:"M15.789 4.632L15.789 0",transform:"matrix(0 -1 -1 0 318 170)"}})]),t._v(" "),r("path",{staticClass:"path",attrs:{fill:"#4B4B62","fill-rule":"nonzero",stroke:"#4B4B62","stroke-width":"2",d:"M198.754 186c1.56 0 2.246-.703 2.246-2.3v-41.4c0-1.597-.686-2.3-2.246-2.3h-9.608c-1.56 0-2.247.703-2.247 2.3v19.678h-5.802c-1.185 0-1.934-.83-1.934-2.172V142.3c0-1.597-.686-2.3-2.246-2.3h-9.67c-1.56 0-2.247.703-2.247 2.3v22.425c0 7.283 3.244 10.606 11.355 10.606H186.9v8.369c0 1.597.687 2.3 2.247 2.3h9.608zm32.277 1c15.3 0 18.969-5.248 18.969-13.056V152.12c0-7.808-3.67-13.12-18.969-13.12-15.3 0-19.031 5.312-19.031 13.12v21.824c0 7.808 3.732 13.056 19.031 13.056zm.969-12c-4.25 0-5-1.27-5-2.986v-17.091c0-1.652.75-2.923 5-2.923 4.313 0 5 1.27 5 2.923v17.09c0 1.716-.688 2.987-5 2.987zm62.754 11c1.56 0 2.246-.703 2.246-2.3v-41.4c0-1.597-.686-2.3-2.246-2.3h-9.608c-1.56 0-2.247.703-2.247 2.3v19.678h-5.802c-1.185 0-1.934-.83-1.934-2.172V142.3c0-1.597-.686-2.3-2.246-2.3h-9.67c-1.56 0-2.247.703-2.247 2.3v22.425c0 7.283 3.244 10.606 11.355 10.606H282.9v8.369c0 1.597.687 2.3 2.247 2.3h9.608z"}})])])])],1)}),[],!1,null,"30ce47f3",null).exports;function Ae(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return Ce(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ce(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==r.return||r.return()}finally{if(a)throw o}}}}function Ce(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function De(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Oe(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?De(Object(r),!0).forEach((function(e){Pe(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):De(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Pe(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const Re={components:{NotFound:Ee},props:{query:{type:Object,require:!0},variables:{type:Object},first:{type:Number,default:10},page:{type:Number,default:1},fetchMore:{type:Boolean,default:!1},reverse:{type:Boolean,default:!1},fetchPolicy:{type:String,default:"cache-and-network"},skip:{type:Boolean,default:!1},pollInterval:{type:Array,default:null},update:{type:Function},noData:{type:String},notFound:{type:String},height:{type:Number|String},containerClassName:{type:String},loaderType:{type:String}},data:function(){return{lock:!1,starting:!0,counter:0,currentPage:null,hasMorePages:null,lastScrollHeight:null}},computed:{hasMore:function(){return null!=this.hasMorePages&&function t(e){for(var r=Object.keys(e),n=0;n<r.length;n++){var i=r[n];if(e[i]instanceof Object)return t(e[i]);if(!0===e[i])return!0}return!1}(this.hasMorePages)},loading:function(){return this.$apollo.queries.data.loading},error:function(){return this.$apollo.queries.data.errorHandler()}},created:function(){this.currentPage=this.page,this.setPollInterval(),this.$apollo.queries.data.setOptions({fetchPolicy:this.fetchPolicy})},apollo:{data:{skip:function(){return this.skip},query:function(){return this.query},fetchPolicy:function(){return this.fetchPolicy},variables:function(){return Oe({first:this.first,page:this.page},this.variables)},update:function(t){var e=this;return this.hasMorePages=this.extractHasMorePages(t,!0),this.counter++,setTimeout((function(){e.$nextTick((function(){e.counter--,0===e.counter&&(e.starting=!1)}))}),500),null!=this.update&&this.update(t),t}}},methods:{hasData:function(t,e){if(null==t)return!1;t=JSON.parse(JSON.stringify(t));var r,n=Ae(e.split("."));try{for(n.s();!(r=n.n()).done;){var i=r.value;if(null==t[i])return!1;t=t[i]}}catch(t){n.e(t)}finally{n.f()}return t instanceof Array?t.length>0:null!=t},setPollInterval:function(){Array.isArray(this.pollInterval)?(1===this.pollInterval.length&&this.$apollo.queries.data.startPolling(1e3*this.pollInterval[0]),2===this.pollInterval.length&&this.$apollo.queries.data.startPolling(1e3*(Math.random()*(this.pollInterval[1]-this.pollInterval[0])+this.pollInterval[0]))):this.$apollo.queries.data.stopPolling()},refetch:function(t){t instanceof Event&&(t=null),this.$apollo.queries.data.setOptions({fetchPolicy:"network-only"}),console.log(t,this.variables),this.$apollo.queries.data.refetch(Oe({first:this.first,page:this.currentPage},t||this.variables))},updateCache:function(t,e){var r=this;if(null==e)return t;this.hasMorePages=this.extractHasMorePages(e.fetchMoreResult);var n=this.mergeJson(t,e.fetchMoreResult,this.hasMorePages);return console.log(t,e.fetchMoreResult,JSON.parse(JSON.stringify(n))),this.currentPage++,setTimeout((function(){r.lock=!1,r.$nextTick((function(){r.lastScrollHeight&&r.$el.scrollTop<r.$el.scrollHeight-r.$el.offsetHeight&&(console.log(r.$el.scrollHeight,r.lastScrollHeight),r.$el.scrollTop=r.$el.scrollHeight-r.lastScrollHeight)}))}),100),n},onIntersect:function(t,e,r){t[0].isIntersecting&&!this.lock&&this.hasMore&&(this.lock=!0,this.lastScrollHeight=this.$el.scrollHeight,r.fetchMore({variables:Oe({first:this.first,page:this.currentPage+1},this.variables),updateQuery:this.updateCache}))},mergeJson:function(t,e,r){var n=this;if(!(r instanceof Object))return Oe(Oe(Oe({},t),e),{},{data:t.data.concat(e.data)});var i=t;return Object.keys(r).forEach((function(o){i[o]=n.mergeJson(t[o],e[o],r[o])})),i},extractHasMorePages:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={};return Object.keys(t).forEach((function(i){"hasMorePages"===i?n[i]=t.hasMorePages:"currentPage"===i&&r?e.currentPage=t.currentPage:!Array.isArray(t[i])&&t[i]instanceof Object&&(n[i]=e.extractHasMorePages(t[i],r))})),Object.keys(n).forEach((function(t){n[t]instanceof Object&&null!=n[t].paginatorInfo&&(n[t]=n[t].paginatorInfo.hasMorePages)})),n},equalsJson:function(t,e){var r=this;return null==Object.keys(t).find((function(n){return t[n]instanceof Object&&e[n]instanceof Object?r.equalsJson(t[n],e[n]):t[n]!==e[n]}))}},watch:{variables:function(t,e){null!=t&&null!=e&&this.equalsJson(t,e)||(this.starting=!0,this.$el.scrollTop=this.$el.scrollHeight)},pollInterval:function(){this.setPollInterval()}}};const Ie=(0,_.Z)(Re,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{class:t.containerClassName,style:t.height?"height:"+t.height:""},[t.reverse&&!t.$apollo.queries.data.loading&&!t.starting&&t.fetchMore&&t.hasMore?r("div",{directives:[{name:"intersect",rawName:"v-intersect",value:function(e,r){return t.onIntersect(e,r,t.$apollo.queries.data)},expression:"(e,o)=>onIntersect(e,o,$apollo.queries.data)"}],staticStyle:{height:"100px"}}):t.reverse&&t.hasMore&&t.loading?r("v-layout",{attrs:{"align-center":"","justify-center":""}},[r("v-progress-circular",{staticClass:"mt-5 mb-5",attrs:{size:"50",color:"primary",indeterminate:""}})],1):t._e(),t._v(" "),!t.$scopedSlots.props&&t.loading?t._t("loading",[r("v-layout",{attrs:{column:"","align-center":"","justify-center":""}},[r("v-progress-circular",{attrs:{size:50,color:"primary",indeterminate:""}})],1)],{loading:t.loading}):t._e(),t._v(" "),!t.$scopedSlots.props&&t.error?t._t("error",[r("v-layout",{attrs:{column:"","align-center":"","justify-center":""}},[r("v-card",{staticClass:"pa-3",attrs:{height:"230",width:"400"}},[r("v-layout",{attrs:{"justify-center":"",column:"","align-center":""}},[r("v-icon",{attrs:{size:"100"}},[t._v("sentiment_very_dissatisfied")]),t._v(" "),r("v-card-title",[t._v("Whoops something went wrong!")]),t._v(" "),r("v-btn",{attrs:{block:"",color:"accent",depressed:""},on:{click:t.refetch}},[t._v("Try again")])],1)],1)],1)],{error:t.error}):t._e(),t._v(" "),t.$scopedSlots.props?!t.notFound||t.loading||t.hasData(t.data,t.notFound)?!t.noData||t.loading||t.hasData(t.data,t.noData)?t._t("props",null,{refetch:t.refetch,loading:t.loading&&!t.hasMore,query:t.$apollo.queries.data,error:t.error,data:t.data}):t._t("no-data",null,{refetch:t.refetch}):r("NotFound",{attrs:{refetch:t.refetch}}):t._t("data",null,{data:t.data,refetch:t.refetch}),t._v(" "),!t.reverse&&!t.$apollo.queries.data.loading&&t.fetchMore&&t.hasMore?r("div",{directives:[{name:"intersect",rawName:"v-intersect",value:function(e,r){return t.onIntersect(e,r,t.$apollo.queries.data)},expression:"(e,o)=>onIntersect(e,o,$apollo.queries.data)"}],staticStyle:{height:"100px"}}):!t.reverse&&t.hasMore&&t.loading?r("v-layout",{attrs:{"align-center":"","justify-center":""}},[r("v-progress-circular",{staticClass:"mt-5 mb-5",attrs:{size:"50",color:"primary",indeterminate:""}})],1):t._e(),t._v(" "),r("div",{attrs:{id:"scroll-bottom"}})],2)}),[],!1,null,null,null).exports;const Te={props:{optimisticResponse:{type:Object},mutation:{type:Object,required:!0},loaderType:{type:String},onlyValidationErrors:{type:Boolean,default:!1},errorMessages:{type:Object},variables:{type:Object},guarded:{type:Boolean,default:!1},update:{type:Function}},data:function(){return{callbackId:null,dialog:!1}},methods:{hasKey:function(t,e){return null!=t&&Object.keys(t).includes(e)},mMutate:function(t){var e=this;return function(r){e.guarded&&!e.$repositories.auth.logged?(e.pushQuery({sign_in:"1"}),e.callbackId=e.$managers.em.attach("logged_in",(function(e){return t(r)}))):t(r)}}},watch:{"$route.query.sign_in":function(t){"1"!==t&&null!=this.callbackId&&this.$managers.em.detach("logged_in",this.callbackId)}}};const Fe=(0,_.Z)(Te,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ApolloMutation",{attrs:{"optimistic-response":t.optimisticResponse,mutation:t.mutation,update:t.update,variables:t.variables},on:{done:function(e){return t.$emit("done")}},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.mutate,i=e.loading,o=e.error;e.errors;return[t.$scopedSlots.props?t._e():t._t("loading",["normal"===t.loaderType?r("v-progress-circular",{attrs:{size:50,color:"primary",indeterminate:""}}):t._e(),t._v(" "),"dialog"===t.loaderType?r("v-dialog",{attrs:{"overlay-opacity":".5",persistent:"",width:"300"},model:{value:i,callback:function(t){i=t},expression:"loading"}},[r("v-card",{attrs:{color:"primary",dark:""}},[r("v-card-text",[t._v("\n                    Please stand by\n                    "),r("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1):t._e()],{loading:i}),t._v(" "),t.$scopedSlots.props||null==o||null==o.graphQLErrors.find((function(e){return t.hasKey(t.errorMessages,e.extensions.category)}))?t._e():t._t("error",null,{error:o.graphQLErrors.filter((function(e){return t.hasKey(t.errorMessages,e.extensions.category)}))}),t._v(" "),null!=o&&(t.onlyValidationErrors||t.errorMessages||o.graphQLErrors.filter((function(e){return t.hasKey(t.errorMessages,e.extensions.category)})).length<o.graphQLErrors.length)?r("v-dialog",{attrs:{"hide-overlay":"",value:"true","max-width":"400"}},[r("v-card",{attrs:{"min-height":"200",width:"400"}},[r("v-layout",{staticClass:"pt-6",attrs:{"justify-center":"",column:"","align-center":""}},[r("v-icon",{attrs:{size:"100"}},[t._v("sentiment_very_dissatisfied")]),t._v(" "),t.onlyValidationErrors?r("v-card-title",{staticClass:"text-break"},[t._v(t._s(o.graphQLErrors.filter((function(t){return["validation","auth:5"].includes(t.extensions.category)})).flatMap((function(t){return Object.values(t.extensions.errors).flatMap((function(t){return t}))})).reduce((function(t,e){return t+"\n"+e})))+"\n                ")]):t.errorMessages?r("v-card-title",{staticClass:"text-break"},[t._v(t._s(o.graphQLErrors.filter((function(e){return t.hasKey(t.errorMessages,e.extensions.category)})).map((function(e){return t.errorMessages[e.extensions.category]||e.extensions.errors.join("\n")})).join("\n"))+"\n                ")]):r("v-card-title",[t._v("Oops something went wrong!")])],1)],1)],1):t._e(),t._v(" "),t.$scopedSlots.props?t._e():t._t("mutate",null,{mutate:t.mMutate(n),error:o}),t._v(" "),t._t("props",null,{mutate:t.mMutate(n),error:o,loading:i})]}}],null,!0)})}),[],!1,null,null,null).exports;function je(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ne(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?je(Object(r),!0).forEach((function(e){Be(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):je(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Be(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}n.default.use(o()),n.default.mixin(Dt),n.default.use(s.Z),n.default.use(l.ZP),n.default.use(a.ZP,{name:"timeAgo",locale:"en",locales:{en:r(7479)}}),n.default.component("MApolloMutation",Fe),n.default.component("MApolloQuery",Ie),n.default.use(m.Z);var Ue=new(o())({icons:{iconfont:"md"},theme:{themes:{light:{primary:"#1c3144",secondary:{base:"#808080",lighten5:"#fff"},accent:"#0096c7",anchor:"#f4f6f9"}}}}),Le=new s.Z({mode:"history",routes:[{path:"/",component:xe,name:"starting"},{path:"/home",component:qt,name:"home",meta:{guarded:!0}},{path:"/splash",component:me,name:"splash"},{path:"/dashboard",component:de,name:"dashboard",meta:{guarded:!0}},{path:"/profile",component:ve,name:"profile",meta:{guarded:!0}},{path:"/scanner",component:le,name:"scanner"},{path:"/boarding",component:he,name:"boarding"},{path:"/submitted",component:ce,name:"submitted"},{path:"*",component:Ee,name:"not_found"}],scrollBehavior:function(t,e,r){if(t.hash)return{selector:t.hash,offset:{y:120}}}});Le.beforeEach((function(t,e,r){return t.meta.guarded?g.Z.guard(t,e,r):r(!0)})),g.Z.run(Le);var $e=c()({uri:wt.Z.apiUrl}),ze=(0,f.v)((function(t,e){var r=e.headers,n=g.Z.auth;return{headers:Ne(Ne({},r),{},{Accept:"application/json",Authorization:n?"".concat(n.token_type," ").concat(n.access_token):""})}})),qe=new p.h4({dataIdFromObject:function(t){return t instanceof Object&&null!=t.id?t.id:(0,p.uG)(t)}}),Ve=new u.fe({link:(0,d.q)((function(t){var e=t.networkError,r=t.graphQLErrors;console.log({graphQLErrors:r,networkError:e}),r&&null!=r.find((function(t){return["authentication"].includes(t.extensions.category)}))&&g.Z.logout()})).concat(ze.concat($e)),cache:qe}),Ye=new l.ZP({defaultClient:Ve});new n.default({router:Le,vuetify:Ue,apolloProvider:Ye,render:function(t){return t(vt)}}).$mount("#vue-app")},8634:(t,e,r)=>{"use strict";r.d(e,{Z:()=>n});const n={get _env(){return"prod"},get isDev(){return"dev"===this._env},get isTest(){return"test"===this._env},get isProd(){return"prod"===this._env},get appName(){return"GAuthSy"},domainName:"https://gauthsy.restopres.com",get appUrl(){return this.isProd?this.domainName:"http://localhost:8000"},get apiUrl(){return this.isProd?this.appUrl+"/graphql":"/graphql"},ipApi:"https://ipapi.co/json",get images(){return{get logo(){return"/images/defaults/logo.png"},get startingBg(){return"/images/defaults/bg.svg"}}}}},7290:(t,e,r)=>{"use strict";r.d(e,{ym:()=>o,_5:()=>s,yz:()=>a,$3:()=>l,lP:()=>u,bk:()=>h,ME:()=>c,Nv:()=>f,Rd:()=>d,jc:()=>p,D3:()=>m,w4:()=>g});var n=r(4119),i=r.n(n),o=i()("\n    mutation ($data: LoginInput!){\n        login(data: $data){\n            access_token\n            refresh_token\n            expires_in\n            token_type\n            me {\n                id\n                email\n                surname\n                forename\n                is_admin\n                fcm_token\n                created_at\n                email_verified_at\n            }\n        }\n    }\n"),s=i()("\n    mutation($data: SignUpInput!){\n        signUp(data: $data){\n                id\n                surname\n                forename\n                email_verified_at\n        }\n    }\n"),a=i()("\n    mutation ($data: VerifyEmailInput!) {\n        verifyEmail(data: $data)\n    }\n"),l=i()("\n    mutation ($data: ResentEmailVerifiedInput!) {\n        resentEmailVerified(data: $data)\n    }\n"),u=i()("\n    mutation ($data: ForgotPasswordInput!) {\n        forgotPassword(data: $data)\n    }\n"),h=i()("\n    mutation ($data: ResetPasswordInput!) {\n        resetPassword(data: $data)\n    }\n"),c=i()("\n    query{\n        me {\n            id\n            email\n            surname\n            forename\n            is_admin\n            fcm_token\n            created_at\n        }\n    }\n"),f=i()("\n    mutation{\n        logout\n    }\n"),d=(i()("\n    mutation($data: UpdateUserInput!){\n        updateUser(data: $data){\n            id\n            fcm_token\n        }\n    }\n"),i()("\n    mutation($data: UpdateUserInput!){\n        updateUser(data: $data){\n            id\n            surname\n            forename\n        }\n    }\n")),p=i()("\n    mutation($data: UpdateUserInput!){\n        updateUser(data: $data){\n            id\n            email\n        }\n    }\n"),m=i()("\n    mutation($data: UpdateUserInput!){\n        updateUser(data: $data){\n            id\n        }\n    }\n"),g=i()("\n    mutation{\n        revokeAllTokens\n    }\n")},8763:(t,e,r)=>{"use strict";r.d(e,{J:()=>i});var n=r(4119),i=r.n(n)()("\n        mutation($data: CreateContactInput!){\n            createContact(data: $data)\n        }\n")},4924:(t,e,r)=>{"use strict";r.d(e,{gJ:()=>o,JV:()=>s,Kg:()=>a,yY:()=>l,M4:()=>u,sO:()=>h,Y3:()=>c});var n=r(4119),i=r.n(n),o=i()("\n        query($page: Int){\n          me{\n            id\n            documents(first:10, page: $page){\n              paginatorInfo{hasMorePages}\n              data{\n                id\n                type\n                number\n                issued_by\n                valid\n                message\n                verified_at\n                created_at\n                updated_at\n                payload{\n                     surname\n                     forename\n                     country_code\n                     document_type\n                     document_number\n                     nationality_country_code\n                     sex\n                     birth_date\n                     expiry_date\n                     personal_number\n                     personal_number2\n                }\n                images(first:10,page:1){\n                     data{\n                        type\n                        path\n                     }\n                }\n              }\n            }\n          }\n        }\n"),s=i()("\n        mutation($data: CreateDocumentInput!){\n            createDocument(data: $data){\n                id\n                type\n                number\n                issued_by\n                valid\n                verified_at\n                created_at\n                updated_at\n                payload{\n                     surname\n                     forename\n                     country_code\n                     document_type\n                     document_number\n                     nationality_country_code\n                     sex\n                     birth_date\n                     expiry_date\n                     personal_number\n                     personal_number2\n                }\n                images(first:10,page:1){\n                     data{\n                        type\n                        path\n                     }\n                }\n            }\n        }\n"),a=i()("\n        query($page: Int){\n            documents(first:10, page: $page,where:{column:VERIFIED_AT, operator:IS_NULL}, orderBy:{column: CREATED_AT, order: ASC}){\n              paginatorInfo{hasMorePages}\n              data{\n                id\n                type\n                number\n                issued_by\n                valid\n                verified_at\n                created_at\n                updated_at\n                payload{\n                     surname\n                     forename\n                     country_code\n                     document_type\n                     document_number\n                     nationality_country_code\n                     sex\n                     birth_date\n                     expiry_date\n                     personal_number\n                     personal_number2\n                }\n                images(first:10,page:1){\n                     data{\n                        type\n                        path\n                     }\n                }\n              }\n            }\n        }\n"),l=i()("\n        mutation($data: DeleteDocumentInput!){\n            deleteDocument(data: $data)\n        }\n"),u=i()("\n        mutation($data: RejectDocumentInput!){\n            rejectDocument(data: $data)\n        }\n"),h=i()("\n        mutation($data: ValidateDocumentInput!){\n            validateDocument(data: $data)\n        }\n"),c=i()("\n        mutation($data: GenerateTokenToDocumentsInput!){\n            generateTokenToDocuments(data: $data)\n        }\n")},2737:(t,e,r)=>{"use strict";function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}r.d(e,{Z:()=>i});const i=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.listeners={}}var e,r,i;return e=t,(r=[{key:"has",value:function(t){return this.listeners[t]instanceof Array}},{key:"attach",value:function(t,e){return this.has(t)||(this.listeners[t]=[]),this.listeners[t].push(e)-1}},{key:"detach",value:function(t,e){this.has(t)&&(this.listeners[t].splice(e,1),0===this.listeners[t].length&&delete this.listeners[t])}},{key:"trigger",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.has(t)&&this.listeners[t].forEach((function(t){return t(e)}))}}])&&n(e.prototype,r),i&&n(e,i),t}())},3857:(t,e,r)=>{"use strict";r.d(e,{Z:()=>d});var n=r(7757),i=r.n(n),o=r(2737);r(8634);function s(t,e,r,n,i,o,s){try{var a=t[o](s),l=a.value}catch(t){return void r(t)}a.done?e(l):Promise.resolve(l).then(n,i)}function a(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){s(o,n,i,a,l,"next",t)}function l(t){s(o,n,i,a,l,"throw",t)}a(void 0)}))}}function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function u(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach((function(e){h(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function h(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var f=r(4564);const d=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,s,l,h;return e=t,(n=[{key:"auth",get:function(){return localStorage.auth?JSON.parse(localStorage.auth):null}},{key:"user",get:function(){return opt(this.auth).me},set:function(t){assert(t instanceof Object);var e=this.auth;e.me=u(u({},opt(opt(this.auth).me)),t),localStorage.setItem("auth",JSON.stringify(e))}},{key:"login",value:function(t){assert(null!=t&&null!=t.access_token&&null!=t.me.id),localStorage.setItem("auth",JSON.stringify(u(u({},t),{},{created_at:Date.now()}))),o.Z.trigger("logged_in",this.auth)}},{key:"logout",value:function(){localStorage.removeItem("auth"),"starting"!==this.vm.$route.name&&this.vm.$router.push({name:"starting"}),o.Z.trigger("logged_out")}},{key:"logged",get:function(){return null!=this.auth&&this.auth.created_at+1e3*this.auth.expires_in-Date.now()>30}},{key:"guard",value:function(t,e,n){var i=r(3857).Z;if(i.logged)return n("dashboard"!==e.name||!0===opt(this.user).is_admin);i.vm.pushQuery({sign_in:"1"}),window.watcher&&window.watcher();var s=o.Z.attach("logged_in",(function(e){return i.vm.$router.push(t)})),a=i.vm.$watch("$route.query.sign_in",(function(t){"1"!==t&&("splash"===e.name&&n({name:"starting",replace:!0}),o.Z.detach("logged_in",s))}));return window.watcher=function(){o.Z.detach("logged_in",s),a()},n(!1)}},{key:"init",value:(h=a(i().mark((function t(e){var n,o,s,l,u,h=this;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.vm=e,t.prev=1,t.next=4,this.vm.tapAsync(function(){var t=a(i().mark((function t(e){var n;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.vm.$apollo.query({query:r(7290).ME,fetchPolicy:"network-only"});case 3:null==(n=t.sent).data.me?localStorage.removeItem("auth"):h.user=n.data.me,t.next=11;break;case 7:if(t.prev=7,t.t0=t.catch(0),null!=t.t0.graphQLErrors&&0!==t.t0.graphQLErrors.length&&"authentication"===t.t0.graphQLErrors[0].extensions.category){t.next=11;break}throw t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),3);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),console.error(t.t0);case 9:n=this.path,o=this.router,n.includes("/splash")&&(n="/"),(s=n.includes("/api/")?n.split("/api/")[1]:"").includes("verified")?(s=s.split("verified/")[1],o.push({name:"starting",query:{email_verification:s.replace("/",":")}})):s.includes("documents")?o.push({name:"home"}):s.includes("reset")?(s=s.split("reset/")[1],o.push({name:"starting",query:{reset_password:s}})):s.includes("provider/")?(l=f(n,!0),u=(l.query.retrieve||"").split("]").filter((function(t){return t.length>0})).flatMap((function(t){return t.replace(",[","").replace("[","").split(",")})),null!=window.opener&&u.length===new Set(u).size&&u.every((function(t){var e=t.split(":");return 2===e.length&&["CM","DE","RW"].includes(e[0])&&["AR","ID"].includes(e[1])}))?o.push({name:"home",query:{retrieve:l.query.retrieve,redirect:l.query.redirect}}):(null==window.opener?this.vm.$snackbar.show({text:"You should open this page with window object of javascript",color:"error"}):this.vm.$snackbar.show({text:"The url to access the API is invalid",color:"error"}),o.push({name:"starting"}),window.setTimeout((function(t){return window.close()}),3e3))):o.push(n);case 14:case"end":return t.stop()}}),t,this,[[1,6]])}))),function(t){return h.apply(this,arguments)})},{key:"run",value:(l=a(i().mark((function t(e){var r,n,o;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=f(window.location.pathname+window.location.search+window.location.hash,!0),n={},"/api/provider/"===r.pathname&&null!=r.query.retrieve&&null!=r.query.redirect?(o=r.query.retrieve.split("]").filter((function(t){return t.length>0})).flatMap((function(t){return t.replace(",[","").replace("[","").split(",")})),console.log(o),o.length===new Set(o).size&&o.every((function(t){var e=t.split(":");return 2===e.length&&["CM","DE","RW"].includes(e[0])&&["AR","ID"].includes(e[1])}))&&(n.retrieve=r.query.retrieve,n.redirect=r.query.redirect)):(delete r.query.retrieve,delete r.query.redirect),this.path=r.toString().substr(window.location.origin.length),e.push({name:"splash",query:n}),this.router=e;case 6:case"end":return t.stop()}}),t,this)}))),function(t){return l.apply(this,arguments)})}])&&c(e.prototype,n),s&&c(e,s),t}())},9742:(t,e)=>{"use strict";e.byteLength=function(t){var e=l(t),r=e[0],n=e[1];return 3*(r+n)/4-n},e.toByteArray=function(t){var e,r,o=l(t),s=o[0],a=o[1],u=new i(function(t,e,r){return 3*(e+r)/4-r}(0,s,a)),h=0,c=a>0?s-4:s;for(r=0;r<c;r+=4)e=n[t.charCodeAt(r)]<<18|n[t.charCodeAt(r+1)]<<12|n[t.charCodeAt(r+2)]<<6|n[t.charCodeAt(r+3)],u[h++]=e>>16&255,u[h++]=e>>8&255,u[h++]=255&e;2===a&&(e=n[t.charCodeAt(r)]<<2|n[t.charCodeAt(r+1)]>>4,u[h++]=255&e);1===a&&(e=n[t.charCodeAt(r)]<<10|n[t.charCodeAt(r+1)]<<4|n[t.charCodeAt(r+2)]>>2,u[h++]=e>>8&255,u[h++]=255&e);return u},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],s=16383,a=0,l=n-i;a<l;a+=s)o.push(u(t,a,a+s>l?l:a+s));1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return o.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,a=o.length;s<a;++s)r[s]=o[s],n[o.charCodeAt(s)]=s;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function u(t,e,n){for(var i,o,s=[],a=e;a<n;a+=3)i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},8764:(t,e,r)=>{"use strict";var n=r(9742),i=r(645),o=r(5826);function s(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=l.prototype:(null===t&&(t=new l(e)),t.length=e),t}function l(t,e,r){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return u(this,t,e,r)}function u(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n);l.TYPED_ARRAY_SUPPORT?(t=e).__proto__=l.prototype:t=f(t,e);return t}(t,e,r,n):"string"==typeof e?function(t,e,r){"string"==typeof r&&""!==r||(r="utf8");if(!l.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|p(e,r),i=(t=a(t,n)).write(e,r);i!==n&&(t=t.slice(0,i));return t}(t,e,r):function(t,e){if(l.isBuffer(e)){var r=0|d(e.length);return 0===(t=a(t,r)).length||e.copy(t,0,0,r),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(n=e.length)!=n?a(t,0):f(t,e);if("Buffer"===e.type&&o(e.data))return f(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function c(t,e){if(h(e),t=a(t,e<0?0:0|d(e)),!l.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function f(t,e){var r=e.length<0?0:0|d(e.length);t=a(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function d(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function p(t,e){if(l.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return $(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return z(t).length;default:if(n)return $(t).length;e=(""+e).toLowerCase(),n=!0}}function m(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return O(this,e,r);case"utf8":case"utf-8":return E(this,e,r);case"ascii":return C(this,e,r);case"latin1":case"binary":return D(this,e,r);case"base64":return S(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function g(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function v(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=l.from(e,n)),l.isBuffer(e))return 0===e.length?-1:w(t,e,r,n,i);if("number"==typeof e)return e&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):w(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function w(t,e,r,n,i){var o,s=1,a=t.length,l=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,a/=2,l/=2,r/=2}function u(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var h=-1;for(o=r;o<a;o++)if(u(t,o)===u(e,-1===h?0:o-h)){if(-1===h&&(h=o),o-h+1===l)return h*s}else-1!==h&&(o-=o-h),h=-1}else for(r+l>a&&(r=a-l),o=r;o>=0;o--){for(var c=!0,f=0;f<l;f++)if(u(t,o+f)!==u(e,f)){c=!1;break}if(c)return o}return-1}function y(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[r+s]=a}return s}function b(t,e,r,n){return q($(e,t.length-r),t,r,n)}function _(t,e,r,n){return q(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function x(t,e,r,n){return _(t,e,r,n)}function k(t,e,r,n){return q(z(e),t,r,n)}function M(t,e,r,n){return q(function(t,e){for(var r,n,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)n=(r=t.charCodeAt(s))>>8,i=r%256,o.push(i),o.push(n);return o}(e,t.length-r),t,r,n)}function S(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function E(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o,s,a,l,u=t[i],h=null,c=u>239?4:u>223?3:u>191?2:1;if(i+c<=r)switch(c){case 1:u<128&&(h=u);break;case 2:128==(192&(o=t[i+1]))&&(l=(31&u)<<6|63&o)>127&&(h=l);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&(l=(15&u)<<12|(63&o)<<6|63&s)>2047&&(l<55296||l>57343)&&(h=l);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(l=(15&u)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&l<1114112&&(h=l)}null===h?(h=65533,c=1):h>65535&&(h-=65536,n.push(h>>>10&1023|55296),h=56320|1023&h),n.push(h),i+=c}return function(t){var e=t.length;if(e<=A)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=A));return r}(n)}e.Buffer=l,e.SlowBuffer=function(t){+t!=t&&(t=0);return l.alloc(+t)},e.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==r.g.TYPED_ARRAY_SUPPORT?r.g.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=s(),l.poolSize=8192,l._augment=function(t){return t.__proto__=l.prototype,t},l.from=function(t,e,r){return u(null,t,e,r)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(t,e,r){return function(t,e,r,n){return h(e),e<=0?a(t,e):void 0!==r?"string"==typeof n?a(t,e).fill(r,n):a(t,e).fill(r):a(t,e)}(null,t,e,r)},l.allocUnsafe=function(t){return c(null,t)},l.allocUnsafeSlow=function(t){return c(null,t)},l.isBuffer=function(t){return!(null==t||!t._isBuffer)},l.compare=function(t,e){if(!l.isBuffer(t)||!l.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=l.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var s=t[r];if(!l.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,i),i+=s.length}return n},l.byteLength=p,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)g(this,e,e+1);return this},l.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},l.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},l.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?E(this,0,t):m.apply(this,arguments)},l.prototype.equals=function(t){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===l.compare(this,t)},l.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},l.prototype.compare=function(t,e,r,n,i){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(e>>>=0),a=Math.min(o,s),u=this.slice(n,i),h=t.slice(e,r),c=0;c<a;++c)if(u[c]!==h[c]){o=u[c],s=h[c];break}return o<s?-1:s<o?1:0},l.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},l.prototype.indexOf=function(t,e,r){return v(this,t,e,r,!0)},l.prototype.lastIndexOf=function(t,e,r){return v(this,t,e,r,!1)},l.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return y(this,t,e,r);case"utf8":case"utf-8":return b(this,t,e,r);case"ascii":return _(this,t,e,r);case"latin1":case"binary":return x(this,t,e,r);case"base64":return k(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var A=4096;function C(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function D(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function O(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=L(t[o]);return i}function P(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function R(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function I(t,e,r,n,i,o){if(!l.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function T(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);i<o;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function F(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);i<o;++i)t[r+i]=e>>>8*(n?i:3-i)&255}function j(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function N(t,e,r,n,o){return o||j(t,0,r,4),i.write(t,e,r,n,23,4),r+4}function B(t,e,r,n,o){return o||j(t,0,r,8),i.write(t,e,r,n,52,8),r+8}l.prototype.slice=function(t,e){var r,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),l.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=l.prototype;else{var i=e-t;r=new l(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+t]}return r},l.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||R(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},l.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||R(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},l.prototype.readUInt8=function(t,e){return e||R(t,1,this.length),this[t]},l.prototype.readUInt16LE=function(t,e){return e||R(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUInt16BE=function(t,e){return e||R(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUInt32LE=function(t,e){return e||R(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUInt32BE=function(t,e){return e||R(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||R(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},l.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||R(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},l.prototype.readInt8=function(t,e){return e||R(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},l.prototype.readInt16LE=function(t,e){e||R(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt16BE=function(t,e){e||R(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt32LE=function(t,e){return e||R(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,e){return e||R(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readFloatLE=function(t,e){return e||R(t,4,this.length),i.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,e){return e||R(t,4,this.length),i.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,e){return e||R(t,8,this.length),i.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,e){return e||R(t,8,this.length),i.read(this,t,!1,52,8)},l.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||I(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},l.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||I(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},l.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||I(this,t,e,1,255,0),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},l.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||I(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):T(this,t,e,!0),e+2},l.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||I(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):T(this,t,e,!1),e+2},l.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||I(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):F(this,t,e,!0),e+4},l.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||I(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):F(this,t,e,!1),e+4},l.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);I(this,t,e,r,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<r&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+r},l.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);I(this,t,e,r,i-1,-i)}var o=r-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+r},l.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||I(this,t,e,1,127,-128),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},l.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||I(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):T(this,t,e,!0),e+2},l.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||I(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):T(this,t,e,!1),e+2},l.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||I(this,t,e,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):F(this,t,e,!0),e+4},l.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||I(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):F(this,t,e,!1),e+4},l.prototype.writeFloatLE=function(t,e,r){return N(this,t,e,!0,r)},l.prototype.writeFloatBE=function(t,e,r){return N(this,t,e,!1,r)},l.prototype.writeDoubleLE=function(t,e,r){return B(this,t,e,!0,r)},l.prototype.writeDoubleBE=function(t,e,r){return B(this,t,e,!1,r)},l.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i,o=n-r;if(this===t&&r<e&&e<n)for(i=o-1;i>=0;--i)t[i+e]=this[i+r];else if(o<1e3||!l.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+o),e);return o},l.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!l.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var o;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(o=e;o<r;++o)this[o]=t;else{var s=l.isBuffer(t)?t:$(new l(t,n).toString()),a=s.length;for(o=0;o<r-e;++o)this[o+e]=s[o%a]}return this};var U=/[^+\/0-9A-Za-z-_]/g;function L(t){return t<16?"0"+t.toString(16):t.toString(16)}function $(t,e){var r;e=e||1/0;for(var n=t.length,i=null,o=[],s=0;s<n;++s){if((r=t.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function z(t){return n.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(U,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function q(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}},7278:(t,e,r)=>{"use strict";r.d(e,{Z:()=>o});var n=r(3645),i=r.n(n)()((function(t){return t[1]}));i.push([t.id,"*{word-wrap:break-word}#app{font-family:Avenir,Helvetica,Arial,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}#app,.theme--light.v-card{color:#2c3e50}html{overflow-x:hidden!important}.notification-title{font-size:18px}.notification-content{font-size:16px}::-webkit-scrollbar{width:10px}::-webkit-scrollbar-track{background:#f1f1f1}::-webkit-scrollbar-thumb{background:#888}::-webkit-scrollbar-thumb:hover{background:#555}.max-lines{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;text-overflow:ellipsis}",""]);const o=i},9247:(t,e,r)=>{"use strict";r.d(e,{Z:()=>o});var n=r(3645),i=r.n(n)()((function(t){return t[1]}));i.push([t.id,".ls-5[data-v-01f304ba]{letter-spacing:.5px}",""]);const o=i},6212:(t,e,r)=>{"use strict";r.d(e,{Z:()=>o});var n=r(3645),i=r.n(n)()((function(t){return t[1]}));i.push([t.id,".image[data-v-50c73a56]{background:#fff;padding:5px;width:160px;border-radius:50%}.m-headline[data-v-50c73a56]{font-size:20px!important;line-height:28px!important}",""]);const o=i},2232:(t,e,r)=>{"use strict";r.d(e,{Z:()=>o});var n=r(3645),i=r.n(n)()((function(t){return t[1]}));i.push([t.id,".fundo[data-v-30ce47f3]{-webkit-animation:scales-data-v-30ce47f3 3s infinite alternate;animation:scales-data-v-30ce47f3 3s infinite alternate}.fundo[data-v-30ce47f3],.pao-baixo[data-v-30ce47f3]{transform-origin:center}.pao-baixo[data-v-30ce47f3]{-webkit-animation:rotatepao-data-v-30ce47f3 14s cubic-bezier(.1,.49,.41,.97) infinite;animation:rotatepao-data-v-30ce47f3 14s cubic-bezier(.1,.49,.41,.97) infinite}.pao-cima[data-v-30ce47f3]{-webkit-animation:rotatepao-data-v-30ce47f3 7s cubic-bezier(.1,.49,.41,.97) 1s infinite;animation:rotatepao-data-v-30ce47f3 7s cubic-bezier(.1,.49,.41,.97) 1s infinite;transform-origin:center}.left-sparks[data-v-30ce47f3]{transform-origin:150px 156px}.left-sparks[data-v-30ce47f3],.right-sparks[data-v-30ce47f3]{-webkit-animation:left-sparks-data-v-30ce47f3 4s infinite alternate;animation:left-sparks-data-v-30ce47f3 4s infinite alternate}.right-sparks[data-v-30ce47f3]{transform-origin:310px 150px}.olhos[data-v-30ce47f3]{-webkit-animation:olhos-data-v-30ce47f3 2s infinite alternate;animation:olhos-data-v-30ce47f3 2s infinite alternate;transform-origin:center}@-webkit-keyframes scales-data-v-30ce47f3{0%{transform:scale(.98)}to{transform:scale(1)}}@keyframes scales-data-v-30ce47f3{0%{transform:scale(.98)}to{transform:scale(1)}}@-webkit-keyframes rotatepao-data-v-30ce47f3{0%{transform:rotate(0deg)}50%,60%{transform:rotate(-20deg)}to{transform:rotate(0deg)}}@keyframes rotatepao-data-v-30ce47f3{0%{transform:rotate(0deg)}50%,60%{transform:rotate(-20deg)}to{transform:rotate(0deg)}}@-webkit-keyframes olhos-data-v-30ce47f3{0%{transform:rotateX(0deg)}to{transform:rotateX(30deg)}}@keyframes olhos-data-v-30ce47f3{0%{transform:rotateX(0deg)}to{transform:rotateX(30deg)}}@-webkit-keyframes left-sparks-data-v-30ce47f3{0%{opacity:0}}@keyframes left-sparks-data-v-30ce47f3{0%{opacity:0}}.main[data-v-30ce47f3]{min-height:600px;margin:0 auto;width:auto;max-width:460px;display:flex;align-items:center;justify-content:center}.path[data-v-30ce47f3]{stroke-dasharray:300;stroke-dashoffset:300;-webkit-animation:dash-data-v-30ce47f3 4s infinite alternate;animation:dash-data-v-30ce47f3 4s infinite alternate}@-webkit-keyframes dash-data-v-30ce47f3{0%,30%{fill:4B4B62;stroke-dashoffset:0}80%,to{fill:transparent;stroke-dashoffset:-200}}@keyframes dash-data-v-30ce47f3{0%,30%{fill:4B4B62;stroke-dashoffset:0}80%,to{fill:transparent;stroke-dashoffset:-200}}",""]);const o=i},736:(t,e,r)=>{"use strict";r.d(e,{Z:()=>o});var n=r(3645),i=r.n(n)()((function(t){return t[1]}));i.push([t.id,"canvas{z-index:8}.laser,canvas{position:absolute}.laser{background-color:tomato;height:1px;z-index:2;box-shadow:0 0 4px red;-webkit-animation:scanning 2s infinite;animation:scanning 2s infinite}.diode{-webkit-animation:beam .01s infinite;animation:beam .01s infinite}@-webkit-keyframes beam{50%{opacity:0}}@keyframes beam{50%{opacity:0}}@-webkit-keyframes scanningXSOnly{50%{transform:translateY(205px)}}@keyframes scanningXSOnly{50%{transform:translateY(205px)}}@-webkit-keyframes scanning{50%{transform:translateY(305px)}}@keyframes scanning{50%{transform:translateY(305px)}}",""]);const o=i},1106:(t,e,r)=>{"use strict";r.d(e,{Z:()=>o});var n=r(3645),i=r.n(n)()((function(t){return t[1]}));i.push([t.id,".m-code>pre{width:100%!important}",""]);const o=i},3645:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var r=t(e);return e[2]?"@media ".concat(e[2]," {").concat(r,"}"):r})).join("")},e.i=function(t,r,n){"string"==typeof t&&(t=[[null,t,""]]);var i={};if(n)for(var o=0;o<this.length;o++){var s=this[o][0];null!=s&&(i[s]=!0)}for(var a=0;a<t.length;a++){var l=[].concat(t[a]);n&&i[l[0]]||(r&&(l[2]?l[2]="".concat(r," and ").concat(l[2]):l[2]=r),e.push(l))}},e}},3561:t=>{t.exports=function(t){var e=new Date(t.getTime()),r=e.getTimezoneOffset();return e.setSeconds(0,0),6e4*r+e.getTime()%6e4}},3374:(t,e,r)=>{var n=r(1884);t.exports=function(t,e){var r=n(t).getTime(),i=n(e).getTime();return r<i?-1:r>i?1:0}},3558:(t,e,r)=>{var n=r(1884);t.exports=function(t,e){var r=n(t).getTime(),i=n(e).getTime();return r>i?-1:r<i?1:0}},1924:(t,e,r)=>{var n=r(1884);t.exports=function(t,e){var r=n(t),i=n(e);return 12*(r.getFullYear()-i.getFullYear())+(r.getMonth()-i.getMonth())}},8081:(t,e,r)=>{var n=r(1884);t.exports=function(t,e){var r=n(t),i=n(e);return r.getTime()-i.getTime()}},1387:(t,e,r)=>{var n=r(1884),i=r(1924),o=r(3374);t.exports=function(t,e){var r=n(t),s=n(e),a=o(r,s),l=Math.abs(i(r,s));return r.setMonth(r.getMonth()-a*l),a*(l-(o(r,s)===-a))}},7977:(t,e,r)=>{var n=r(8081);t.exports=function(t,e){var r=n(t,e)/1e3;return r>0?Math.floor(r):Math.ceil(r)}},3332:(t,e,r)=>{var n=r(3558),i=r(1884),o=r(7977),s=r(1387),a=r(7479),l=43200;t.exports=function(t,e,r){var u=r||{},h=n(t,e),c=u.locale,f=a.distanceInWords.localize;c&&c.distanceInWords&&c.distanceInWords.localize&&(f=c.distanceInWords.localize);var d,p,m={addSuffix:Boolean(u.addSuffix),comparison:h};h>0?(d=i(t),p=i(e)):(d=i(e),p=i(t));var g,v=o(p,d),w=p.getTimezoneOffset()-d.getTimezoneOffset(),y=Math.round(v/60)-w;if(y<2)return u.includeSeconds?v<5?f("lessThanXSeconds",5,m):v<10?f("lessThanXSeconds",10,m):v<20?f("lessThanXSeconds",20,m):v<40?f("halfAMinute",null,m):f(v<60?"lessThanXMinutes":"xMinutes",1,m):0===y?f("lessThanXMinutes",1,m):f("xMinutes",y,m);if(y<45)return f("xMinutes",y,m);if(y<90)return f("aboutXHours",1,m);if(y<1440)return f("aboutXHours",Math.round(y/60),m);if(y<2520)return f("xDays",1,m);if(y<l)return f("xDays",Math.round(y/1440),m);if(y<86400)return f("aboutXMonths",g=Math.round(y/l),m);if((g=s(p,d))<12)return f("xMonths",Math.round(y/l),m);var b=g%12,_=Math.floor(g/12);return b<3?f("aboutXYears",_,m):b<9?f("overXYears",_,m):f("almostXYears",_+1,m)}},6272:(t,e,r)=>{var n=r(3332);t.exports=function(t,e){return n(Date.now(),t,e)}},4286:t=>{t.exports=function(t){return t instanceof Date}},8854:t=>{var e=["M","MM","Q","D","DD","DDD","DDDD","d","E","W","WW","YY","YYYY","GG","GGGG","H","HH","h","hh","m","mm","s","ss","S","SS","SSS","Z","ZZ","X","x"];t.exports=function(t){var r=[];for(var n in t)t.hasOwnProperty(n)&&r.push(n);var i=e.concat(r).sort().reverse();return new RegExp("(\\[[^\\[]*\\])|(\\\\)?("+i.join("|")+"|.)","g")}},2894:t=>{t.exports=function(){var t={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};return{localize:function(e,r,n){var i;return n=n||{},i="string"==typeof t[e]?t[e]:1===r?t[e].one:t[e].other.replace("{{count}}",r),n.addSuffix?n.comparison>0?"in "+i:i+" ago":i}}}},664:(t,e,r)=>{var n=r(8854);t.exports=function(){var t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],e=["January","February","March","April","May","June","July","August","September","October","November","December"],r=["Su","Mo","Tu","We","Th","Fr","Sa"],i=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],o=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],s=["AM","PM"],a=["am","pm"],l=["a.m.","p.m."],u={MMM:function(e){return t[e.getMonth()]},MMMM:function(t){return e[t.getMonth()]},dd:function(t){return r[t.getDay()]},ddd:function(t){return i[t.getDay()]},dddd:function(t){return o[t.getDay()]},A:function(t){return t.getHours()/12>=1?s[1]:s[0]},a:function(t){return t.getHours()/12>=1?a[1]:a[0]},aa:function(t){return t.getHours()/12>=1?l[1]:l[0]}};return["M","D","DDD","d","Q","W"].forEach((function(t){u[t+"o"]=function(e,r){return function(t){var e=t%100;if(e>20||e<10)switch(e%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"}(r[t](e))}})),{formatters:u,formattingTokensRegExp:n(u)}}},7479:(t,e,r)=>{var n=r(2894),i=r(664);t.exports={distanceInWords:n(),format:i()}},1884:(t,e,r)=>{var n=r(3561),i=r(4286),o=36e5,s=6e4,a=/[T ]/,l=/:/,u=/^(\d{2})$/,h=[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],c=/^(\d{4})/,f=[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],d=/^-(\d{2})$/,p=/^-?(\d{3})$/,m=/^-?(\d{2})-?(\d{2})$/,g=/^-?W(\d{2})$/,v=/^-?W(\d{2})-?(\d{1})$/,w=/^(\d{2}([.,]\d*)?)$/,y=/^(\d{2}):?(\d{2}([.,]\d*)?)$/,b=/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,_=/([Z+-].*)$/,x=/^(Z)$/,k=/^([+-])(\d{2})$/,M=/^([+-])(\d{2}):?(\d{2})$/;function S(t,e,r){e=e||0,r=r||0;var n=new Date(0);n.setUTCFullYear(t,0,4);var i=7*e+r+1-(n.getUTCDay()||7);return n.setUTCDate(n.getUTCDate()+i),n}t.exports=function(t,e){if(i(t))return new Date(t.getTime());if("string"!=typeof t)return new Date(t);var r=(e||{}).additionalDigits;r=null==r?2:Number(r);var E=function(t){var e,r={},n=t.split(a);l.test(n[0])?(r.date=null,e=n[0]):(r.date=n[0],e=n[1]);if(e){var i=_.exec(e);i?(r.time=e.replace(i[1],""),r.timezone=i[1]):r.time=e}return r}(t),A=function(t,e){var r,n=h[e],i=f[e];if(r=c.exec(t)||i.exec(t)){var o=r[1];return{year:parseInt(o,10),restDateString:t.slice(o.length)}}if(r=u.exec(t)||n.exec(t)){var s=r[1];return{year:100*parseInt(s,10),restDateString:t.slice(s.length)}}return{year:null}}(E.date,r),C=A.year,D=function(t,e){if(null===e)return null;var r,n,i;if(0===t.length)return(n=new Date(0)).setUTCFullYear(e),n;if(r=d.exec(t))return n=new Date(0),i=parseInt(r[1],10)-1,n.setUTCFullYear(e,i),n;if(r=p.exec(t)){n=new Date(0);var o=parseInt(r[1],10);return n.setUTCFullYear(e,0,o),n}if(r=m.exec(t)){n=new Date(0),i=parseInt(r[1],10)-1;var s=parseInt(r[2],10);return n.setUTCFullYear(e,i,s),n}if(r=g.exec(t))return S(e,parseInt(r[1],10)-1);if(r=v.exec(t)){return S(e,parseInt(r[1],10)-1,parseInt(r[2],10)-1)}return null}(A.restDateString,C);if(D){var O,P=D.getTime(),R=0;if(E.time&&(R=function(t){var e,r,n;if(e=w.exec(t))return(r=parseFloat(e[1].replace(",",".")))%24*o;if(e=y.exec(t))return r=parseInt(e[1],10),n=parseFloat(e[2].replace(",",".")),r%24*o+n*s;if(e=b.exec(t)){r=parseInt(e[1],10),n=parseInt(e[2],10);var i=parseFloat(e[3].replace(",","."));return r%24*o+n*s+1e3*i}return null}(E.time)),E.timezone)O=function(t){var e,r;if(e=x.exec(t))return 0;if(e=k.exec(t))return r=60*parseInt(e[2],10),"+"===e[1]?-r:r;if(e=M.exec(t))return r=60*parseInt(e[2],10)+parseInt(e[3],10),"+"===e[1]?-r:r;return 0}(E.timezone)*s;else{var I=P+R,T=new Date(I);O=n(T);var F=new Date(I);F.setDate(T.getDate()+1);var j=n(F)-n(T);j>0&&(O+=j)}return new Date(P+R+O)}return new Date(t)}},2445:t=>{"use strict";t.exports=function(t){var e=t.uri,r=t.name,n=t.type;this.uri=e,this.name=r,this.type=n}},804:(t,e,r)=>{"use strict";var n=r(1268);t.exports=function t(e,r,i){var o;void 0===r&&(r=""),void 0===i&&(i=n);var s=new Map;function a(t,e){var r=s.get(e);r?r.push.apply(r,t):s.set(e,t)}if(i(e))o=null,a([r],e);else{var l=r?r+".":"";if("undefined"!=typeof FileList&&e instanceof FileList)o=Array.prototype.map.call(e,(function(t,e){return a([""+l+e],t),null}));else if(Array.isArray(e))o=e.map((function(e,r){var n=t(e,""+l+r,i);return n.files.forEach(a),n.clone}));else if(e&&e.constructor===Object)for(var u in o={},e){var h=t(e[u],""+l+u,i);h.files.forEach(a),o[u]=h.clone}else o=e}return{clone:o,files:s}}},1268:(t,e,r)=>{"use strict";var n=r(2445);t.exports=function(t){return"undefined"!=typeof File&&t instanceof File||"undefined"!=typeof Blob&&t instanceof Blob||t instanceof n}},5578:t=>{"use strict";t.exports={BITMAPV5HEADER:{LogicalColorSpace:{LCS_CALIBRATED_RGB:0,LCS_sRGB:1934772034,LCS_WINDOWS_COLOR_SPACE:1466527264},Compression:{BI_RGB:0,BI_RLE8:1,BI_RLE4:2,BI_BITFIELDS:3,BI_JPEG:4,BI_PNG:5,BI_CMYK:11,BI_CMYKRLE8:12,BI_CMYKRLE4:13},GamutMappingIntent:{LCS_GM_ABS_COLORIMETRIC:8,LCS_GM_BUSINESS:1,LCS_GM_GRAPHICS:2,LCS_GM_IMAGES:4}}}},4893:(t,e,r)=>{"use strict";const n=r(5838),i=r(5578),o=[];for(var s=0;s<=8;s++)o.push(255<<s);t.exports=function(t){if(1!==t.bitDepth)throw new Error("Only bitDepth of 1 is supported");if(!t.height||!t.width)throw new Error("ImageData width and height are required");if(1!==t.components)throw new Error("Only 1 component is supported");if(1!==t.channels)throw new Error("Only 1 channel is supported");var e=new n;e.skip(14),function(t,e){t.writeUint32(124).writeInt32(e.width).writeInt32(e.height).writeUint16(1).writeUint16(e.bitDepth).writeUint32(i.BITMAPV5HEADER.Compression.BI_RGB).writeUint32(e.width*e.height*e.bitDepth).writeInt32(0).writeInt32(0).writeUint32(Math.pow(2,e.bitDepth)).writeUint32(Math.pow(2,e.bitDepth)).writeUint32(4278190080).writeUint32(16711680).writeUint32(65280).writeUint32(255).writeUint32(i.BITMAPV5HEADER.LogicalColorSpace.LCS_sRGB).skip(36).skip(12).writeUint32(i.BITMAPV5HEADER.GamutMappingIntent.LCS_GM_IMAGES).skip(12)}(e,t),function(t,e){if(e.bitDepth>8)return;t.writeUint32(0).writeUint32(16777215)}(e,t);const r=e.offset;return function(t,e){const r=4*Math.floor((e.bitDepth*e.width+31)/32),i=Math.ceil(e.bitDepth*e.width/8),s=r-i,a=e.bitDepth*e.width%8,l=0===a?0:8-a,u=r*e.height;var h,c;const f=new n(e.data);let d=0,p=0,m=8;t.mark(),c=f.readUint8();for(var g=e.height-1;g>=0;g--){const e=0===g;t.reset(),t.skip(g*r);for(var v=0;v<i;v++){const r=v===i-1;p<=l&&r?(t.writeByte(c<<p),0!==l&&l!==p||e||(h=c,c=f.readByte())):0===p?(h=c,c=f.readUint8(),t.writeByte(h)):(h=c,c=f.readUint8(),t.writeByte(h<<p&o[p]|c>>m)),r?(d+=a||8,t.skip(s),p=d%8,m=8-p):d+=8}}r>i&&(t.reset(),t.skip(u-1),t.writeUint8(0))}(e,t),e.rewind(),function(t,e){t.writeChars("BM"),t.writeInt32(t._lastWrittenByte),t.writeUint16(0),t.writeUint16(0),t.writeUint32(e)}(e,r),e.getBuffer()}},4665:(t,e,r)=>{"use strict";e.encode=r(4893)},7909:t=>{"use strict";const e=[];t.exports=class{constructor(t,e){e=e||{},void 0===t&&(t=8192),"number"==typeof t&&(t=new ArrayBuffer(t));let r=t.byteLength;const n=e.offset?e.offset>>>0:0;t.buffer&&(r=t.byteLength-n,t=t.byteLength!==t.buffer.byteLength?t.buffer.slice(t.byteOffset+n,t.byteOffset+t.byteLength):n?t.buffer.slice(n):t.buffer),this.buffer=t,this.length=r,this.byteLength=r,this.byteOffset=0,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer),this._increment=r||8192,this._mark=0}available(t){return void 0===t&&(t=1),this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){this.littleEndian=!0}isBigEndian(){return!this.littleEndian}setBigEndian(){this.littleEndian=!1}skip(t){void 0===t&&(t=1),this.offset+=t}seek(t){this.offset=t}mark(){this._mark=this.offset}reset(){this.offset=this._mark}rewind(){this.offset=0}ensureAvailable(t){if(void 0===t&&(t=1),!this.available(t)){const t=this._increment+this._increment;this._increment=t;const e=this.length+t,r=new Uint8Array(e);r.set(new Uint8Array(this.buffer)),this.buffer=r.buffer,this.length=e,this._data=new DataView(this.buffer)}}readBoolean(){return 0!==this.readUint8()}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t){void 0===t&&(t=1);for(var e=new Uint8Array(t),r=0;r<t;r++)e[r]=this.readByte();return e}readInt16(){var t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){var t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){var t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){var t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){var t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){var t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t){void 0===t&&(t=1),e.length=t;for(var r=0;r<t;r++)e[r]=this.readChar();return e.join("")}writeBoolean(t){this.writeUint8(t?255:0)}writeInt8(t){this.ensureAvailable(1),this._data.setInt8(this.offset++,t)}writeUint8(t){this.ensureAvailable(1),this._data.setUint8(this.offset++,t)}writeByte(t){this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(var e=0;e<t.length;e++)this._data.setUint8(this.offset++,t[e])}writeInt16(t){this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2}writeUint16(t){this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2}writeInt32(t){this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4}writeUint32(t){this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4}writeFloat32(t){this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4}writeFloat64(t){this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8}writeChar(t){this.writeUint8(t.charCodeAt(0))}writeChars(t){for(var e=0;e<t.length;e++)this.writeUint8(t.charCodeAt(e))}toArray(){return new Uint8Array(this.buffer,0,this.offset)}}},3311:(t,e,r)=>{"use strict";const n=r(6752);t.exports=function(t,e){return new n(t,e).decode(e)}},8029:(t,e,r)=>{"use strict";const n={standard:r(4263),exif:r(9640),gps:r(5367)};t.exports=class{constructor(t){if(!t)throw new Error("missing kind");this.data=null,this.fields=new Map,this.kind=t,this._map=null}get(t){if("number"==typeof t)return this.fields.get(t);if("string"==typeof t)return this.fields.get(n[this.kind].tagsByName[t]);throw new Error("expected a number or string")}get map(){if(!this._map){this._map={};const e=n[this.kind].tagsById;for(var t of this.fields.keys())e[t]&&(this._map[e[t]]=this.fields.get(t))}return this._map}}},6486:(t,e)=>{"use strict";var r=new Map([[1,[1,n]],[2,[1,function(t,e){for(var r=[],n="",i=0;i<e;i++){var o=String.fromCharCode(t.readUint8());"\0"===o?(r.push(n),n=""):n+=o}return 1===r.length?r[0]:r}]],[3,[2,function(t,e){if(1===e)return t.readUint16();for(var r=new Uint16Array(e),n=0;n<e;n++)r[n]=t.readUint16();return r}]],[4,[4,function(t,e){if(1===e)return t.readUint32();for(var r=new Uint32Array(e),n=0;n<e;n++)r[n]=t.readUint32();return r}]],[5,[8,function(t,e){if(1===e)return t.readUint32()/t.readUint32();for(var r=new Array(e),n=0;n<e;n++)r[n]=t.readUint32()/t.readUint32();return r}]],[6,[1,function(t,e){if(1===e)return t.readInt8();for(var r=new Int8Array(e),n=0;n<e;n++)r[n]=t.readInt8();return r}]],[7,[1,n]],[8,[2,function(t,e){if(1===e)return t.readInt16();for(var r=new Int16Array(e),n=0;n<e;n++)r[n]=t.readInt16();return r}]],[9,[4,function(t,e){if(1===e)return t.readInt32();for(var r=new Int32Array(e),n=0;n<e;n++)r[n]=t.readInt32();return r}]],[10,[8,function(t,e){if(1===e)return t.readInt32()/t.readInt32();for(var r=new Array(e),n=0;n<e;n++)r[n]=t.readInt32()/t.readInt32();return r}]],[11,[4,function(t,e){if(1===e)return t.readFloat32();for(var r=new Float32Array(e),n=0;n<e;n++)r[n]=t.readFloat32();return r}]],[12,[8,function(t,e){if(1===e)return t.readFloat64();for(var r=new Float64Array(e),n=0;n<e;n++)r[n]=t.readFloat64();return r}]]]);function n(t,e){if(1===e)return t.readUint8();for(var r=new Uint8Array(e),n=0;n<e;n++)r[n]=t.readUint8();return r}e.getByteLength=function(t,e){return r.get(t)[0]*e},e.readData=function(t,e,n){return r.get(e)[1](t,n)}},9469:(t,e,r)=>{"use strict";e.decode=r(3311)},9640:t=>{"use strict";const e={33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",36864:"ExifVersion",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBiasValue",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",37396:"SubjectArea",37500:"MakerNote",37510:"UserComment",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",40964:"RelatedSoundFile",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42240:"Gamma"},r={};for(var n in e)r[e[n]]=n;t.exports={tagsById:e,tagsByName:r}},5367:t=>{"use strict";const e={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},r={};for(var n in e)r[e[n]]=n;t.exports={tagsById:e,tagsByName:r}},4263:t=>{"use strict";const e={254:"NewSubfileType",255:"SubfileType",256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:"Threshholding",264:"CellWidth",265:"CellLength",266:"FillOrder",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",288:"FreeOffsets",289:"FreeByteCounts",290:"GrayResponseUnit",291:"GrayResponseCurve",296:"ResolutionUnit",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",320:"ColorMap",338:"ExtraSamples",33432:"Copyright",269:"DocumentName",285:"PageName",286:"XPosition",287:"YPosition",292:"T4Options",293:"T6Options",297:"PageNumber",301:"TransferFunction",317:"Predictor",318:"WhitePoint",319:"PrimaryChromaticities",321:"HalftoneHints",322:"TileWidth",323:"TileLength",324:"TileOffsets",325:"TileByteCounts",326:"BadFaxLines",327:"CleanFaxData",328:"ConsecutiveBadFaxLines",330:"SubIFDs",332:"InkSet",333:"InkNames",334:"NumberOfInks",336:"DotRange",337:"TargetPrinter",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",342:"TransferRange",343:"ClipPath",344:"XClipPathUnits",345:"YClipPathUnits",346:"Indexed",347:"JPEGTables",351:"OPIProxy",400:"GlobalParametersIFD",401:"ProfileType",402:"FaxProfile",403:"CodingMethods",404:"VersionYear",405:"ModeNumber",433:"Decode",434:"DefaultImageColor",512:"JPEGProc",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",515:"JPEGRestartInterval",517:"JPEGLosslessPredictors",518:"JPEGPointTransforms",519:"JPEGQTables",520:"JPEGDCTables",521:"JPEGACTables",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite",559:"StripRowCounts",700:"XMP",32781:"ImageID",34732:"ImageLayer",32932:"WangAnnotatio",33445:"MDFileTag",33446:"MDScalePixel",33447:"MDColorTable",33448:"MDLabName",33449:"MDSampleInfo",33450:"MDPrepDate",33451:"MDPrepTime",33452:"MDFileUnits",33550:"ModelPixelScaleTag",33723:"IPTC",33918:"INGRPacketDataTag",33919:"INGRFlagRegisters",33920:"IrasBTransformationMatrix",33922:"ModelTiepointTag",34264:"ModelTransformationTag",34377:"Photoshop",34665:"ExifIFD",34675:"ICCProfile",34735:"GeoKeyDirectoryTag",34736:"GeoDoubleParamsTag",34737:"GeoAsciiParamsTag",34853:"GPSIFD",34908:"HylaFAXFaxRecvParams",34909:"HylaFAXFaxSubAddress",34910:"HylaFAXFaxRecvTime",37724:"ImageSourceData",40965:"InteroperabilityIFD",42112:"GDAL_METADATA",42113:"GDAL_NODATA",50215:"OceScanjobDescription",50216:"OceApplicationSelector",50217:"OceIdentificationNumber",50218:"OceImageLogicCharacteristics",50706:"DNGVersion",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50710:"CFAPlaneColor",50711:"CFALayout",50712:"LinearizationTable",50713:"BlackLevelRepeatDim",50714:"BlackLevel",50715:"BlackLevelDeltaH",50716:"BlackLevelDeltaV",50717:"WhiteLevel",50718:"DefaultScale",50719:"DefaultCropOrigin",50720:"DefaultCropSize",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50733:"BayerGreenSplit",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"LensInfo",50737:"ChromaBlurRadius",50738:"AntiAliasStrength",50740:"DNGPrivateData",50741:"MakerNoteSafety",50778:"CalibrationIlluminant1",50779:"CalibrationIlluminant2",50780:"BestQualityScale",50784:"AliasLayerMetadata"},r={};for(var n in e)r[e[n]]=n;t.exports={tagsById:e,tagsByName:r}},6752:(t,e,r)=>{"use strict";const n=r(7909),i=r(8029),o=r(8353),s=r(6486),a={ignoreImageData:!1,onlyFirst:!1};function l(t,e,r,n){for(var i=0;i<n;i++)t[r++]=e.getUint8(i);return r}function u(t,e,r,n,i){for(var o=0;o<2*n;o+=2)t[r++]=e.getUint16(o,i);return r}function h(t,e,r,n,i){for(var o=0;o<4*n;o+=4)t[r++]=e.getFloat32(o,i);return r}function c(t,e){throw new Error("Unsupported "+t+": "+e)}t.exports=class extends n{constructor(t,e){super(t,e),this._nextIFD=0}decode(t){t=Object.assign({},a,t);const e=[];for(this.decodeHeader();this._nextIFD;)if(e.push(this.decodeIFD(t)),t.onlyFirst)return e[0];return e}decodeHeader(){let t=this.readUint16();if(18761===t)this.setLittleEndian();else{if(19789!==t)throw new Error("invalid byte order: 0x"+t.toString(16));this.setBigEndian()}if(t=this.readUint16(),42!==t)throw new Error("not a TIFF file");this._nextIFD=this.readUint32()}decodeIFD(t){var e;this.seek(this._nextIFD),e=t.kind?new i(t.kind):new o;const r=this.readUint16();for(var n=0;n<r;n++)this.decodeIFDEntry(e);return t.ignoreImageData||this.decodeImageData(e),this._nextIFD=this.readUint32(),e}decodeIFDEntry(t){const e=this.offset,r=this.readUint16(),n=this.readUint16(),i=this.readUint32();if(n<1||n>12)return void this.skip(4);s.getByteLength(n,i)>4&&this.seek(this.readUint32());const o=s.readData(this,n,i);if(t.fields.set(r,o),34665===r||34853===r){let e,n=this.offset;34665===r?e="exif":34853===r&&(e="gps"),this._nextIFD=o,t[e]=this.decodeIFD({kind:e,ignoreImageData:!0}),this.offset=n}this.seek(e),this.skip(12)}decodeImageData(t){const e=t.orientation;switch(e&&1!==e&&c("orientation",e),t.type){case 1:case 2:this.readStripData(t);break;default:c("image type",t.type)}}readStripData(t){const e=t.width,r=t.height,n=function(t){if(t.length){const r=t;t=r[0];for(var e=0;e<r.length;e++)r[e]!==t&&c("bit depth",r)}return t}(t.bitsPerSample),i=t.sampleFormat;let o=e*r;const s=function(t,e,r,n){return 8===r?new Uint8Array(t*e):16===r?new Uint16Array(t*e):32===r&&3===n?new Float32Array(t*e):c("bit depth / sample format",r+" / "+n)}(o,1,n,i),a=t.compression,f=t.rowsPerStrip*e,d=t.stripOffsets,p=t.stripByteCounts;for(var m=0,g=0;g<d.length;g++){var v=this.getStripData(a,d[g],p[g]),w=o>f?f:o;o-=w,8===n?m=l(s,v,m,w):16===n?m=u(s,v,m,w,this.isLittleEndian()):32===n&&3===i?m=h(s,v,m,w,this.isLittleEndian()):c("bitDepth",n)}t.data=s}getStripData(t,e,r){switch(t){case 1:return new DataView(this.buffer,e,r);case 2:case 32773:return c("Compression",t);default:throw new Error("invalid compression: "+t)}}}},8353:(t,e,r)=>{"use strict";const n=r(8029),i=/^(\d{4}):(\d{2}):(\d{2}) (\d{2}):(\d{2}):(\d{2})$/;function o(t){return"number"==typeof t?[t]:t}t.exports=class extends n{constructor(){super("standard")}get size(){return this.width*this.height}get width(){return this.imageWidth}get height(){return this.imageLength}get components(){return this.samplesPerPixel}get date(){var t=new Date,e=i.exec(this.dateTime);return t.setFullYear(e[1],e[2]-1,e[3]),t.setHours(e[4],e[5],e[6]),t}get newSubfileType(){return this.get(254)}get imageWidth(){return this.get(256)}get imageLength(){return this.get(257)}get bitsPerSample(){return this.get(258)}get compression(){return this.get(259)||1}get type(){return this.get(262)}get fillOrder(){return this.get(266)||1}get documentName(){return this.get(269)}get imageDescription(){return this.get(270)}get stripOffsets(){return o(this.get(273))}get orientation(){return this.get(274)}get samplesPerPixel(){return this.get(277)}get rowsPerStrip(){return this.get(278)}get stripByteCounts(){return o(this.get(279))}get minSampleValue(){return this.get(280)||0}get maxSampleValue(){return this.get(281)||Math.pow(2,this.bitsPerSample)-1}get xResolution(){return this.get(282)}get yResolution(){return this.get(283)}get planarConfiguration(){return this.get(284)||1}get resolutionUnit(){return this.get(296)||2}get dateTime(){return this.get(306)}get predictor(){return this.get(317)||1}get sampleFormat(){return this.get(339)||1}get sMinSampleValue(){return this.get(340)||this.minSampleValue}get sMaxSampleValue(){return this.get(341)||this.maxSampleValue}}},9698:(t,e,r)=>{"use strict";const n=r(7909),i=r(9469);t.exports=function(t){const e=new n(t),r={};if(e.setBigEndian(),65496!==e.readUint16())throw new Error("SOI marker not found. Not a valid JPEG file");if(65505===e.readUint16()){e.readUint16();const t=e.readBytes(6);if(69===t[0]&&120===t[1]&&105===t[2]&&102===t[3]&&0===t[4]&&0===t[5]){const t=i.decode(e,{onlyFirst:!0,ignoreImageData:!0,offset:e.offset});r.exif=t}}return r}},9464:(t,e,r)=>{"use strict";e.decode=r(9698)},5035:t=>{"use strict";t.exports=function(t,e){e||(e={}),"function"==typeof e&&(e={cmp:e});var r,n="boolean"==typeof e.cycles&&e.cycles,i=e.cmp&&(r=e.cmp,function(t){return function(e,n){var i={key:e,value:t[e]},o={key:n,value:t[n]};return r(i,o)}}),o=[];return function t(e){if(e&&e.toJSON&&"function"==typeof e.toJSON&&(e=e.toJSON()),void 0!==e){if("number"==typeof e)return isFinite(e)?""+e:"null";if("object"!=typeof e)return JSON.stringify(e);var r,s;if(Array.isArray(e)){for(s="[",r=0;r<e.length;r++)r&&(s+=","),s+=t(e[r])||"null";return s+"]"}if(null===e)return"null";if(-1!==o.indexOf(e)){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var a=o.push(e)-1,l=Object.keys(e).sort(i&&i(e));for(s="",r=0;r<l.length;r++){var u=l[r],h=t(e[u]);h&&(s&&(s+=","),s+=JSON.stringify(u)+":"+h)}return o.splice(a,1),"{"+s+"}"}}(t)}},8737:t=>{!function(){function e(t,e,r){this.next=r,r&&(r.prev=this),this.prev=e,e&&(e.next=this),this.data=t}function r(){if(!(this instanceof r))return new r;this._head=null,this._tail=null,this.length=0}r.prototype={push:function(t){this._tail=new e(t,this._tail,null),this._head||(this._head=this._tail),this.length++},pop:function(){if(0!==this.length){var t=this._tail;return this._tail=t.prev,t.prev&&(t.prev=this._tail.next=null),this.length--,1===this.length?this._head=this._tail:0===this.length&&(this._head=this._tail=null),t.data}},unshift:function(t){this._head=new e(t,null,this._head),this._tail||(this._tail=this._head),this.length++},shift:function(){if(0!==this.length){var t=this._head;return this._head=t.next,t.next&&(t.next=this._head.prev=null),this.length--,1===this.length?this._tail=this._head:0===this.length&&(this._head=this._tail=null),t.data}},item:function(t){t<0&&(t=this.length+t);for(var e=this._head;t-- >0&&e;)e=e.next;return e?e.data:void 0},slice:function(t,e){if(t||(t=0),e||(e=this.length),e<0&&(e=this.length+e),t<0&&(t=this.length+t),e===t)return[];if(e<t)throw new Error("invalid offset: "+t+","+e+" (length="+this.length+")");for(var r=e-t,n=new Array(r),i=0,o=this._head;t-- >0&&o;)o=o.next;for(;i<r&&o;)n[i++]=o.data,o=o.next;return n},drop:function(){r.call(this)},forEach:function(t,e){for(var r=this._head,n=0,i=this.length;n<i&&r;)t.call(e||this,r.data,n,this),r=r.next,n++},map:function(t,e){var n=new r;return this.forEach((function(r,i,o){n.push(t.call(e||o,r,i,o))})),n},filter:function(t,e){var n=new r;return this.forEach((function(r,i,o){t.call(e||o,r,i,o)&&n.push(r)})),n},reduce:function(t,e,r){var n=0,i=this._head,o=this.length;for(e||(n=1,e=i&&i.data,i=i&&i.next);n<o&&i;)e=t.call(r||this,e,i.data,this),n++,i=i.next;return e}},t.exports=r}()},7638:function(){"use strict";!function(t){if(t.TextEncoder&&t.TextDecoder)return!1;function e(t="utf-8"){if("utf-8"!==t)throw new RangeError(`Failed to construct 'TextEncoder': The encoding label provided ('${t}') is invalid.`)}function r(t="utf-8",e={fatal:!1}){if("utf-8"!==t)throw new RangeError(`Failed to construct 'TextDecoder': The encoding label provided ('${t}') is invalid.`);if(e.fatal)throw new Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}Object.defineProperty(e.prototype,"encoding",{value:"utf-8"}),e.prototype.encode=function(t,e={stream:!1}){if(e.stream)throw new Error("Failed to encode: the 'stream' option is unsupported.");let r=0;const n=t.length;let i=0,o=Math.max(32,n+(n>>1)+7),s=new Uint8Array(o>>3<<3);for(;r<n;){let e=t.charCodeAt(r++);if(e>=55296&&e<=56319){if(r<n){const n=t.charCodeAt(r);56320==(64512&n)&&(++r,e=((1023&e)<<10)+(1023&n)+65536)}if(e>=55296&&e<=56319)continue}if(i+4>s.length){o+=8,o*=1+r/t.length*2,o=o>>3<<3;const e=new Uint8Array(o);e.set(s),s=e}if(0!=(4294967168&e)){if(0==(4294965248&e))s[i++]=e>>6&31|192;else if(0==(4294901760&e))s[i++]=e>>12&15|224,s[i++]=e>>6&63|128;else{if(0!=(4292870144&e))continue;s[i++]=e>>18&7|240,s[i++]=e>>12&63|128,s[i++]=e>>6&63|128}s[i++]=63&e|128}else s[i++]=e}return s.slice(0,i)},Object.defineProperty(r.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(r.prototype,"fatal",{value:!1}),Object.defineProperty(r.prototype,"ignoreBOM",{value:!1}),r.prototype.decode=function(t,e={stream:!1}){if(e.stream)throw new Error("Failed to decode: the 'stream' option is unsupported.");const r=new Uint8Array(t);let n=0;const i=r.length,o=[];for(;n<i;){const t=r[n++];if(0===t)break;if(0==(128&t))o.push(t);else if(192==(224&t)){const e=63&r[n++];o.push((31&t)<<6|e)}else if(224==(240&t)){const e=63&r[n++],i=63&r[n++];o.push((31&t)<<12|e<<6|i)}else if(240==(248&t)){let e=(7&t)<<18|(63&r[n++])<<12|(63&r[n++])<<6|63&r[n++];e>65535&&(e-=65536,o.push(e>>>10&1023|55296),e=56320|1023&e),o.push(e)}}return String.fromCharCode.apply(null,o)},t.TextEncoder=e,t.TextDecoder=r}("undefined"!=typeof window?window:"undefined"!=typeof self?self:this)},9645:t=>{"use strict";function e(t){if(this.size=0|t,this.size<=1||0!=(this.size&this.size-1))throw new Error("FFT size must be a power of two and bigger than 1");this._csize=t<<1;for(var e=new Array(2*this.size),r=0;r<e.length;r+=2){const t=Math.PI*r/this.size;e[r]=Math.cos(t),e[r+1]=-Math.sin(t)}this.table=e;for(var n=0,i=1;this.size>i;i<<=1)n++;this._width=n%2==0?n-1:n,this._bitrev=new Array(1<<this._width);for(var o=0;o<this._bitrev.length;o++){this._bitrev[o]=0;for(var s=0;s<this._width;s+=2){var a=this._width-s-2;this._bitrev[o]|=(o>>>s&3)<<a}}this._out=null,this._data=null,this._inv=0}t.exports=e,e.prototype.fromComplexArray=function(t,e){for(var r=e||new Array(t.length>>>1),n=0;n<t.length;n+=2)r[n>>>1]=t[n];return r},e.prototype.createComplexArray=function(){const t=new Array(this._csize);for(var e=0;e<t.length;e++)t[e]=0;return t},e.prototype.toComplexArray=function(t,e){for(var r=e||this.createComplexArray(),n=0;n<r.length;n+=2)r[n]=t[n>>>1],r[n+1]=0;return r},e.prototype.completeSpectrum=function(t){for(var e=this._csize,r=e>>>1,n=2;n<r;n+=2)t[e-n]=t[n],t[e-n+1]=-t[n+1]},e.prototype.transform=function(t,e){if(t===e)throw new Error("Input and output buffers must be different");this._out=t,this._data=e,this._inv=0,this._transform4(),this._out=null,this._data=null},e.prototype.realTransform=function(t,e){if(t===e)throw new Error("Input and output buffers must be different");this._out=t,this._data=e,this._inv=0,this._realTransform4(),this._out=null,this._data=null},e.prototype.inverseTransform=function(t,e){if(t===e)throw new Error("Input and output buffers must be different");this._out=t,this._data=e,this._inv=1,this._transform4();for(var r=0;r<t.length;r++)t[r]/=this.size;this._out=null,this._data=null},e.prototype._transform4=function(){var t,e,r=this._out,n=this._csize,i=1<<this._width,o=n/i<<1,s=this._bitrev;if(4===o)for(t=0,e=0;t<n;t+=o,e++){const r=s[e];this._singleTransform2(t,r,i)}else for(t=0,e=0;t<n;t+=o,e++){const r=s[e];this._singleTransform4(t,r,i)}var a=this._inv?-1:1,l=this.table;for(i>>=2;i>=2;i>>=2){var u=(o=n/i<<1)>>>2;for(t=0;t<n;t+=o)for(var h=t+u,c=t,f=0;c<h;c+=2,f+=i){const t=c,e=t+u,n=e+u,i=n+u,o=r[t],s=r[t+1],h=r[e],d=r[e+1],p=r[n],m=r[n+1],g=r[i],v=r[i+1],w=o,y=s,b=l[f],_=a*l[f+1],x=h*b-d*_,k=h*_+d*b,M=l[2*f],S=a*l[2*f+1],E=p*M-m*S,A=p*S+m*M,C=l[3*f],D=a*l[3*f+1],O=g*C-v*D,P=g*D+v*C,R=w+E,I=y+A,T=w-E,F=y-A,j=x+O,N=k+P,B=a*(x-O),U=a*(k-P),L=R+j,$=I+N,z=R-j,q=I-N,V=T+U,Y=F-B,Z=T-U,G=F+B;r[t]=L,r[t+1]=$,r[e]=V,r[e+1]=Y,r[n]=z,r[n+1]=q,r[i]=Z,r[i+1]=G}}},e.prototype._singleTransform2=function(t,e,r){const n=this._out,i=this._data,o=i[e],s=i[e+1],a=i[e+r],l=i[e+r+1],u=o+a,h=s+l,c=o-a,f=s-l;n[t]=u,n[t+1]=h,n[t+2]=c,n[t+3]=f},e.prototype._singleTransform4=function(t,e,r){const n=this._out,i=this._data,o=this._inv?-1:1,s=2*r,a=3*r,l=i[e],u=i[e+1],h=i[e+r],c=i[e+r+1],f=i[e+s],d=i[e+s+1],p=i[e+a],m=i[e+a+1],g=l+f,v=u+d,w=l-f,y=u-d,b=h+p,_=c+m,x=o*(h-p),k=o*(c-m),M=g+b,S=v+_,E=w+k,A=y-x,C=g-b,D=v-_,O=w-k,P=y+x;n[t]=M,n[t+1]=S,n[t+2]=E,n[t+3]=A,n[t+4]=C,n[t+5]=D,n[t+6]=O,n[t+7]=P},e.prototype._realTransform4=function(){var t,e,r=this._out,n=this._csize,i=1<<this._width,o=n/i<<1,s=this._bitrev;if(4===o)for(t=0,e=0;t<n;t+=o,e++){const r=s[e];this._singleRealTransform2(t,r>>>1,i>>>1)}else for(t=0,e=0;t<n;t+=o,e++){const r=s[e];this._singleRealTransform4(t,r>>>1,i>>>1)}var a=this._inv?-1:1,l=this.table;for(i>>=2;i>=2;i>>=2){var u=(o=n/i<<1)>>>1,h=u>>>1,c=h>>>1;for(t=0;t<n;t+=o)for(var f=0,d=0;f<=c;f+=2,d+=i){var p=t+f,m=p+h,g=m+h,v=g+h,w=r[p],y=r[p+1],b=r[m],_=r[m+1],x=r[g],k=r[g+1],M=r[v],S=r[v+1],E=w,A=y,C=l[d],D=a*l[d+1],O=b*C-_*D,P=b*D+_*C,R=l[2*d],I=a*l[2*d+1],T=x*R-k*I,F=x*I+k*R,j=l[3*d],N=a*l[3*d+1],B=M*j-S*N,U=M*N+S*j,L=E+T,$=A+F,z=E-T,q=A-F,V=O+B,Y=P+U,Z=a*(O-B),G=a*(P-U),X=L+V,H=$+Y,Q=z+G,W=q-Z;if(r[p]=X,r[p+1]=H,r[m]=Q,r[m+1]=W,0!==f){if(f!==c){var K=z+-a*G,J=-q+-a*Z,tt=L+-a*V,et=-$- -a*Y,rt=t+h-f,nt=t+u-f;r[rt]=K,r[rt+1]=J,r[nt]=tt,r[nt+1]=et}}else{var it=L-V,ot=$-Y;r[g]=it,r[g+1]=ot}}}},e.prototype._singleRealTransform2=function(t,e,r){const n=this._out,i=this._data,o=i[e],s=i[e+r],a=o+s,l=o-s;n[t]=a,n[t+1]=0,n[t+2]=l,n[t+3]=0},e.prototype._singleRealTransform4=function(t,e,r){const n=this._out,i=this._data,o=this._inv?-1:1,s=2*r,a=3*r,l=i[e],u=i[e+r],h=i[e+s],c=i[e+a],f=l+h,d=l-h,p=u+c,m=o*(u-c),g=f+p,v=d,w=-m,y=f-p,b=d,_=m;n[t]=g,n[t+1]=0,n[t+2]=v,n[t+3]=w,n[t+4]=y,n[t+5]=0,n[t+6]=b,n[t+7]=_}},2251:(t,e,r)=>{var n=Object.prototype.hasOwnProperty;t.exports=e=function(t,e){return n.call(e,t)},e.version=r(5342).version},5342:t=>{"use strict";t.exports={version:"1.0.1"}},645:(t,e)=>{e.read=function(t,e,r,n,i){var o,s,a=8*i-n-1,l=(1<<a)-1,u=l>>1,h=-7,c=r?i-1:0,f=r?-1:1,d=t[e+c];for(c+=f,o=d&(1<<-h)-1,d>>=-h,h+=a;h>0;o=256*o+t[e+c],c+=f,h-=8);for(s=o&(1<<-h)-1,o>>=-h,h+=n;h>0;s=256*s+t[e+c],c+=f,h-=8);if(0===o)o=1-u;else{if(o===l)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,n),o-=u}return(d?-1:1)*s*Math.pow(2,o-n)},e.write=function(t,e,r,n,i,o){var s,a,l,u=8*o-i-1,h=(1<<u)-1,c=h>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,p=n?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=h):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),(e+=s+c>=1?f/l:f*Math.pow(2,1-c))*l>=2&&(s++,l/=2),s+c>=h?(a=0,s=h):s+c>=1?(a=(e*l-1)*Math.pow(2,i),s+=c):(a=e*Math.pow(2,c-1)*Math.pow(2,i),s=0));i>=8;t[r+d]=255&a,d+=p,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;t[r+d]=255&s,d+=p,s/=256,u-=8);t[r+d-p]|=128*m}},5612:(t,e,r)=>{"use strict";r.d(e,{Ee:()=>Qc});var n={};r.r(n),r.d(n,{CMYK:()=>hn,GREY:()=>sn,HSL:()=>ln,HSV:()=>un,RGB:()=>an});var i={};r.r(i),r.d(i,{tagsById:()=>_n,tagsByName:()=>xn});var o={};r.r(o),r.d(o,{tagsById:()=>kn,tagsByName:()=>Mn});var s={};r.r(s),r.d(s,{tagsById:()=>Sn,tagsByName:()=>En});const a={getBit(t){return this.data[l(t)]&1<<u(t)?1:0},setBit(t){this.data[l(t)]|=1<<u(t)},clearBit(t){this.data[l(t)]&=~(1<<u(t))},toggleBit(t){this.data[l(t)]^=1<<u(t)},getBitXY(t,e){return t>=this.width||e>=this.height?0:this.getBit(e*this.width+t)},setBitXY(t,e){this.setBit(e*this.width+t)},clearBitXY(t,e){this.clearBit(e*this.width+t)},toggleBitXY(t,e){this.toggleBit(e*this.width+t)}};function l(t){return t>>3}function u(t){return 7-(7&t)}function h(t,e){t=t||[],"string"==typeof(e=e||{})&&(e={type:e});try{return new Blob(t,e)}catch(i){if("TypeError"!==i.name)throw i;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),n=0;n<t.length;n+=1)r.append(t[n]);return r.getBlob(e.type)}}function c(t,e,r){return"function"==typeof t.toBlob?new Promise((function(n){t.toBlob(n,e,r)})):Promise.resolve(function(t){var e=t.match(/data:([^;]+)/)[1],r=t.replace(/^[^,]+,/,"");return h([f(atob(r))],{type:e})}(t.toDataURL(e,r)))}function f(t){for(var e=t.length,r=new ArrayBuffer(e),n=new Uint8Array(r),i=-1;++i<e;)n[i]=t.charCodeAt(i);return r}var d=r(4665);r(7638);const p=new TextDecoder("utf-8");const m=new TextEncoder;class g{constructor(t=8192,e={}){let r=!1;"number"==typeof t?t=new ArrayBuffer(t):(r=!0,this.lastWrittenByte=t.byteLength);const n=e.offset?e.offset>>>0:0,i=t.byteLength-n;let o=n;(ArrayBuffer.isView(t)||t instanceof g)&&(t.byteLength!==t.buffer.byteLength&&(o=t.byteOffset+n),t=t.buffer),this.lastWrittenByte=r?i:0,this.buffer=t,this.length=i,this.byteLength=i,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,i),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(void 0===t)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const e=2*(this.offset+t),r=new Uint8Array(e);r.set(new Uint8Array(this.buffer)),this.buffer=r.buffer,this.length=this.byteLength=e,this._data=new DataView(this.buffer)}return this}readBoolean(){return 0!==this.readUint8()}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){const e=new Uint8Array(t);for(let r=0;r<t;r++)e[r]=this.readByte();return e}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let e="";for(let r=0;r<t;r++)e+=this.readChar();return e}readUtf8(t=1){return e=this.readBytes(t),p.decode(e);var e}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let e=0;e<t.length;e++)this._data.setUint8(this.offset++,t[e]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let e=0;e<t.length;e++)this.writeUint8(t.charCodeAt(e));return this}writeUtf8(t){return this.writeBytes(function(t){return m.encode(t)}(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function v(t){let e=t.length;for(;--e>=0;)t[e]=0}const w=256,y=286,b=30,_=15,x=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),k=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),M=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),S=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),E=new Array(576);v(E);const A=new Array(60);v(A);const C=new Array(512);v(C);const D=new Array(256);v(D);const O=new Array(29);v(O);const P=new Array(b);function R(t,e,r,n,i){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=t&&t.length}let I,T,F;function j(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}v(P);const N=t=>t<256?C[t]:C[256+(t>>>7)],B=(t,e)=>{t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},U=(t,e,r)=>{t.bi_valid>16-r?(t.bi_buf|=e<<t.bi_valid&65535,B(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=r-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)},L=(t,e,r)=>{U(t,r[2*e],r[2*e+1])},$=(t,e)=>{let r=0;do{r|=1&t,t>>>=1,r<<=1}while(--e>0);return r>>>1},z=(t,e,r)=>{const n=new Array(16);let i,o,s=0;for(i=1;i<=_;i++)n[i]=s=s+r[i-1]<<1;for(o=0;o<=e;o++){let e=t[2*o+1];0!==e&&(t[2*o]=$(n[e]++,e))}},q=t=>{let e;for(e=0;e<y;e++)t.dyn_ltree[2*e]=0;for(e=0;e<b;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0},V=t=>{t.bi_valid>8?B(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},Y=(t,e,r,n)=>{const i=2*e,o=2*r;return t[i]<t[o]||t[i]===t[o]&&n[e]<=n[r]},Z=(t,e,r)=>{const n=t.heap[r];let i=r<<1;for(;i<=t.heap_len&&(i<t.heap_len&&Y(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!Y(e,n,t.heap[i],t.depth));)t.heap[r]=t.heap[i],r=i,i<<=1;t.heap[r]=n},G=(t,e,r)=>{let n,i,o,s,a=0;if(0!==t.last_lit)do{n=t.pending_buf[t.d_buf+2*a]<<8|t.pending_buf[t.d_buf+2*a+1],i=t.pending_buf[t.l_buf+a],a++,0===n?L(t,i,e):(o=D[i],L(t,o+w+1,e),s=x[o],0!==s&&(i-=O[o],U(t,i,s)),n--,o=N(n),L(t,o,r),s=k[o],0!==s&&(n-=P[o],U(t,n,s)))}while(a<t.last_lit);L(t,256,e)},X=(t,e)=>{const r=e.dyn_tree,n=e.stat_desc.static_tree,i=e.stat_desc.has_stree,o=e.stat_desc.elems;let s,a,l,u=-1;for(t.heap_len=0,t.heap_max=573,s=0;s<o;s++)0!==r[2*s]?(t.heap[++t.heap_len]=u=s,t.depth[s]=0):r[2*s+1]=0;for(;t.heap_len<2;)l=t.heap[++t.heap_len]=u<2?++u:0,r[2*l]=1,t.depth[l]=0,t.opt_len--,i&&(t.static_len-=n[2*l+1]);for(e.max_code=u,s=t.heap_len>>1;s>=1;s--)Z(t,r,s);l=o;do{s=t.heap[1],t.heap[1]=t.heap[t.heap_len--],Z(t,r,1),a=t.heap[1],t.heap[--t.heap_max]=s,t.heap[--t.heap_max]=a,r[2*l]=r[2*s]+r[2*a],t.depth[l]=(t.depth[s]>=t.depth[a]?t.depth[s]:t.depth[a])+1,r[2*s+1]=r[2*a+1]=l,t.heap[1]=l++,Z(t,r,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],((t,e)=>{const r=e.dyn_tree,n=e.max_code,i=e.stat_desc.static_tree,o=e.stat_desc.has_stree,s=e.stat_desc.extra_bits,a=e.stat_desc.extra_base,l=e.stat_desc.max_length;let u,h,c,f,d,p,m=0;for(f=0;f<=_;f++)t.bl_count[f]=0;for(r[2*t.heap[t.heap_max]+1]=0,u=t.heap_max+1;u<573;u++)h=t.heap[u],f=r[2*r[2*h+1]+1]+1,f>l&&(f=l,m++),r[2*h+1]=f,h>n||(t.bl_count[f]++,d=0,h>=a&&(d=s[h-a]),p=r[2*h],t.opt_len+=p*(f+d),o&&(t.static_len+=p*(i[2*h+1]+d)));if(0!==m){do{for(f=l-1;0===t.bl_count[f];)f--;t.bl_count[f]--,t.bl_count[f+1]+=2,t.bl_count[l]--,m-=2}while(m>0);for(f=l;0!==f;f--)for(h=t.bl_count[f];0!==h;)c=t.heap[--u],c>n||(r[2*c+1]!==f&&(t.opt_len+=(f-r[2*c+1])*r[2*c],r[2*c+1]=f),h--)}})(t,e),z(r,u,t.bl_count)},H=(t,e,r)=>{let n,i,o=-1,s=e[1],a=0,l=7,u=4;for(0===s&&(l=138,u=3),e[2*(r+1)+1]=65535,n=0;n<=r;n++)i=s,s=e[2*(n+1)+1],++a<l&&i===s||(a<u?t.bl_tree[2*i]+=a:0!==i?(i!==o&&t.bl_tree[2*i]++,t.bl_tree[32]++):a<=10?t.bl_tree[34]++:t.bl_tree[36]++,a=0,o=i,0===s?(l=138,u=3):i===s?(l=6,u=3):(l=7,u=4))},Q=(t,e,r)=>{let n,i,o=-1,s=e[1],a=0,l=7,u=4;for(0===s&&(l=138,u=3),n=0;n<=r;n++)if(i=s,s=e[2*(n+1)+1],!(++a<l&&i===s)){if(a<u)do{L(t,i,t.bl_tree)}while(0!=--a);else 0!==i?(i!==o&&(L(t,i,t.bl_tree),a--),L(t,16,t.bl_tree),U(t,a-3,2)):a<=10?(L(t,17,t.bl_tree),U(t,a-3,3)):(L(t,18,t.bl_tree),U(t,a-11,7));a=0,o=i,0===s?(l=138,u=3):i===s?(l=6,u=3):(l=7,u=4)}};let W=!1;const K=(t,e,r,n)=>{U(t,0+(n?1:0),3),((t,e,r,n)=>{V(t),n&&(B(t,r),B(t,~r)),t.pending_buf.set(t.window.subarray(e,e+r),t.pending),t.pending+=r})(t,e,r,!0)};var J={_tr_init:t=>{W||((()=>{let t,e,r,n,i;const o=new Array(16);for(r=0,n=0;n<28;n++)for(O[n]=r,t=0;t<1<<x[n];t++)D[r++]=n;for(D[r-1]=n,i=0,n=0;n<16;n++)for(P[n]=i,t=0;t<1<<k[n];t++)C[i++]=n;for(i>>=7;n<b;n++)for(P[n]=i<<7,t=0;t<1<<k[n]-7;t++)C[256+i++]=n;for(e=0;e<=_;e++)o[e]=0;for(t=0;t<=143;)E[2*t+1]=8,t++,o[8]++;for(;t<=255;)E[2*t+1]=9,t++,o[9]++;for(;t<=279;)E[2*t+1]=7,t++,o[7]++;for(;t<=287;)E[2*t+1]=8,t++,o[8]++;for(z(E,287,o),t=0;t<b;t++)A[2*t+1]=5,A[2*t]=$(t,5);I=new R(E,x,257,y,_),T=new R(A,k,0,b,_),F=new R(new Array(0),M,0,19,7)})(),W=!0),t.l_desc=new j(t.dyn_ltree,I),t.d_desc=new j(t.dyn_dtree,T),t.bl_desc=new j(t.bl_tree,F),t.bi_buf=0,t.bi_valid=0,q(t)},_tr_stored_block:K,_tr_flush_block:(t,e,r,n)=>{let i,o,s=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=(t=>{let e,r=4093624447;for(e=0;e<=31;e++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<w;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0})(t)),X(t,t.l_desc),X(t,t.d_desc),s=(t=>{let e;for(H(t,t.dyn_ltree,t.l_desc.max_code),H(t,t.dyn_dtree,t.d_desc.max_code),X(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*S[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e})(t),i=t.opt_len+3+7>>>3,o=t.static_len+3+7>>>3,o<=i&&(i=o)):i=o=r+5,r+4<=i&&-1!==e?K(t,e,r,n):4===t.strategy||o===i?(U(t,2+(n?1:0),3),G(t,E,A)):(U(t,4+(n?1:0),3),((t,e,r,n)=>{let i;for(U(t,e-257,5),U(t,r-1,5),U(t,n-4,4),i=0;i<n;i++)U(t,t.bl_tree[2*S[i]+1],3);Q(t,t.dyn_ltree,e-1),Q(t,t.dyn_dtree,r-1)})(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),G(t,t.dyn_ltree,t.dyn_dtree)),q(t),n&&V(t)},_tr_tally:(t,e,r)=>(t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(D[r]+w+1)]++,t.dyn_dtree[2*N(e)]++),t.last_lit===t.lit_bufsize-1),_tr_align:t=>{U(t,2,3),L(t,256,E),(t=>{16===t.bi_valid?(B(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)})(t)}};var tt=(t,e,r,n)=>{let i=65535&t|0,o=t>>>16&65535|0,s=0;for(;0!==r;){s=r>2e3?2e3:r,r-=s;do{i=i+e[n++]|0,o=o+i|0}while(--s);i%=65521,o%=65521}return i|o<<16|0};const et=new Uint32Array((()=>{let t,e=[];for(var r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e})());var rt=(t,e,r,n)=>{const i=et,o=n+r;t^=-1;for(let r=n;r<o;r++)t=t>>>8^i[255&(t^e[r])];return-1^t},nt={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},it={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:ot,_tr_stored_block:st,_tr_flush_block:at,_tr_tally:lt,_tr_align:ut}=J,{Z_NO_FLUSH:ht,Z_PARTIAL_FLUSH:ct,Z_FULL_FLUSH:ft,Z_FINISH:dt,Z_BLOCK:pt,Z_OK:mt,Z_STREAM_END:gt,Z_STREAM_ERROR:vt,Z_DATA_ERROR:wt,Z_BUF_ERROR:yt,Z_DEFAULT_COMPRESSION:bt,Z_FILTERED:_t,Z_HUFFMAN_ONLY:xt,Z_RLE:kt,Z_FIXED:Mt,Z_DEFAULT_STRATEGY:St,Z_UNKNOWN:Et,Z_DEFLATED:At}=it,Ct=258,Dt=262,Ot=103,Pt=113,Rt=666,It=(t,e)=>(t.msg=nt[e],e),Tt=t=>(t<<1)-(t>4?9:0),Ft=t=>{let e=t.length;for(;--e>=0;)t[e]=0};let jt=(t,e,r)=>(e<<t.hash_shift^r)&t.hash_mask;const Nt=t=>{const e=t.state;let r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+r),t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0))},Bt=(t,e)=>{at(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,Nt(t.strm)},Ut=(t,e)=>{t.pending_buf[t.pending++]=e},Lt=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},$t=(t,e,r,n)=>{let i=t.avail_in;return i>n&&(i=n),0===i?0:(t.avail_in-=i,e.set(t.input.subarray(t.next_in,t.next_in+i),r),1===t.state.wrap?t.adler=tt(t.adler,e,i,r):2===t.state.wrap&&(t.adler=rt(t.adler,e,i,r)),t.next_in+=i,t.total_in+=i,i)},zt=(t,e)=>{let r,n,i=t.max_chain_length,o=t.strstart,s=t.prev_length,a=t.nice_match;const l=t.strstart>t.w_size-Dt?t.strstart-(t.w_size-Dt):0,u=t.window,h=t.w_mask,c=t.prev,f=t.strstart+Ct;let d=u[o+s-1],p=u[o+s];t.prev_length>=t.good_match&&(i>>=2),a>t.lookahead&&(a=t.lookahead);do{if(r=e,u[r+s]===p&&u[r+s-1]===d&&u[r]===u[o]&&u[++r]===u[o+1]){o+=2,r++;do{}while(u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&o<f);if(n=Ct-(f-o),o=f-Ct,n>s){if(t.match_start=e,s=n,n>=a)break;d=u[o+s-1],p=u[o+s]}}}while((e=c[e&h])>l&&0!=--i);return s<=t.lookahead?s:t.lookahead},qt=t=>{const e=t.w_size;let r,n,i,o,s;do{if(o=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-Dt)){t.window.set(t.window.subarray(e,e+e),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,n=t.hash_size,r=n;do{i=t.head[--r],t.head[r]=i>=e?i-e:0}while(--n);n=e,r=n;do{i=t.prev[--r],t.prev[r]=i>=e?i-e:0}while(--n);o+=e}if(0===t.strm.avail_in)break;if(n=$t(t.strm,t.window,t.strstart+t.lookahead,o),t.lookahead+=n,t.lookahead+t.insert>=3)for(s=t.strstart-t.insert,t.ins_h=t.window[s],t.ins_h=jt(t,t.ins_h,t.window[s+1]);t.insert&&(t.ins_h=jt(t,t.ins_h,t.window[s+3-1]),t.prev[s&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=s,s++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<Dt&&0!==t.strm.avail_in)},Vt=(t,e)=>{let r,n;for(;;){if(t.lookahead<Dt){if(qt(t),t.lookahead<Dt&&e===ht)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=jt(t,t.ins_h,t.window[t.strstart+3-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-Dt&&(t.match_length=zt(t,r)),t.match_length>=3)if(n=lt(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=jt(t,t.ins_h,t.window[t.strstart+3-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=jt(t,t.ins_h,t.window[t.strstart+1]);else n=lt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(Bt(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===dt?(Bt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Bt(t,!1),0===t.strm.avail_out)?1:2},Yt=(t,e)=>{let r,n,i;for(;;){if(t.lookahead<Dt){if(qt(t),t.lookahead<Dt&&e===ht)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=jt(t,t.ins_h,t.window[t.strstart+3-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-Dt&&(t.match_length=zt(t,r),t.match_length<=5&&(t.strategy===_t||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-3,n=lt(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=i&&(t.ins_h=jt(t,t.ins_h,t.window[t.strstart+3-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(Bt(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if(n=lt(t,0,t.window[t.strstart-1]),n&&Bt(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=lt(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===dt?(Bt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Bt(t,!1),0===t.strm.avail_out)?1:2};function Zt(t,e,r,n,i){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=i}const Gt=[new Zt(0,0,0,0,((t,e)=>{let r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(qt(t),0===t.lookahead&&e===ht)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;const n=t.block_start+r;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,Bt(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-Dt&&(Bt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===dt?(Bt(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(Bt(t,!1),t.strm.avail_out),1)})),new Zt(4,4,8,4,Vt),new Zt(4,5,16,8,Vt),new Zt(4,6,32,32,Vt),new Zt(4,4,16,16,Yt),new Zt(8,16,32,32,Yt),new Zt(8,16,128,128,Yt),new Zt(8,32,128,256,Yt),new Zt(32,128,258,1024,Yt),new Zt(32,258,258,4096,Yt)];function Xt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=At,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Ft(this.dyn_ltree),Ft(this.dyn_dtree),Ft(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Ft(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Ft(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Ht=t=>{if(!t||!t.state)return It(t,vt);t.total_in=t.total_out=0,t.data_type=Et;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:Pt,t.adler=2===e.wrap?0:1,e.last_flush=ht,ot(e),mt},Qt=t=>{const e=Ht(t);var r;return e===mt&&((r=t.state).window_size=2*r.w_size,Ft(r.head),r.max_lazy_match=Gt[r.level].max_lazy,r.good_match=Gt[r.level].good_length,r.nice_match=Gt[r.level].nice_length,r.max_chain_length=Gt[r.level].max_chain,r.strstart=0,r.block_start=0,r.lookahead=0,r.insert=0,r.match_length=r.prev_length=2,r.match_available=0,r.ins_h=0),e},Wt=(t,e,r,n,i,o)=>{if(!t)return vt;let s=1;if(e===bt&&(e=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),i<1||i>9||r!==At||n<8||n>15||e<0||e>9||o<0||o>Mt)return It(t,vt);8===n&&(n=9);const a=new Xt;return t.state=a,a.strm=t,a.wrap=s,a.gzhead=null,a.w_bits=n,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=e,a.strategy=o,a.method=r,Qt(t)};var Kt={deflateInit:(t,e)=>Wt(t,e,At,15,8,St),deflateInit2:Wt,deflateReset:Qt,deflateResetKeep:Ht,deflateSetHeader:(t,e)=>t&&t.state?2!==t.state.wrap?vt:(t.state.gzhead=e,mt):vt,deflate:(t,e)=>{let r,n;if(!t||!t.state||e>pt||e<0)return t?It(t,vt):vt;const i=t.state;if(!t.output||!t.input&&0!==t.avail_in||i.status===Rt&&e!==dt)return It(t,0===t.avail_out?yt:vt);i.strm=t;const o=i.last_flush;if(i.last_flush=e,42===i.status)if(2===i.wrap)t.adler=0,Ut(i,31),Ut(i,139),Ut(i,8),i.gzhead?(Ut(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),Ut(i,255&i.gzhead.time),Ut(i,i.gzhead.time>>8&255),Ut(i,i.gzhead.time>>16&255),Ut(i,i.gzhead.time>>24&255),Ut(i,9===i.level?2:i.strategy>=xt||i.level<2?4:0),Ut(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(Ut(i,255&i.gzhead.extra.length),Ut(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=rt(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(Ut(i,0),Ut(i,0),Ut(i,0),Ut(i,0),Ut(i,0),Ut(i,9===i.level?2:i.strategy>=xt||i.level<2?4:0),Ut(i,3),i.status=Pt);else{let e=At+(i.w_bits-8<<4)<<8,r=-1;r=i.strategy>=xt||i.level<2?0:i.level<6?1:6===i.level?2:3,e|=r<<6,0!==i.strstart&&(e|=32),e+=31-e%31,i.status=Pt,Lt(i,e),0!==i.strstart&&(Lt(i,t.adler>>>16),Lt(i,65535&t.adler)),t.adler=1}if(69===i.status)if(i.gzhead.extra){for(r=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>r&&(t.adler=rt(t.adler,i.pending_buf,i.pending-r,r)),Nt(t),r=i.pending,i.pending!==i.pending_buf_size));)Ut(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>r&&(t.adler=rt(t.adler,i.pending_buf,i.pending-r,r)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){r=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(t.adler=rt(t.adler,i.pending_buf,i.pending-r,r)),Nt(t),r=i.pending,i.pending===i.pending_buf_size)){n=1;break}n=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,Ut(i,n)}while(0!==n);i.gzhead.hcrc&&i.pending>r&&(t.adler=rt(t.adler,i.pending_buf,i.pending-r,r)),0===n&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){r=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(t.adler=rt(t.adler,i.pending_buf,i.pending-r,r)),Nt(t),r=i.pending,i.pending===i.pending_buf_size)){n=1;break}n=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,Ut(i,n)}while(0!==n);i.gzhead.hcrc&&i.pending>r&&(t.adler=rt(t.adler,i.pending_buf,i.pending-r,r)),0===n&&(i.status=Ot)}else i.status=Ot;if(i.status===Ot&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&Nt(t),i.pending+2<=i.pending_buf_size&&(Ut(i,255&t.adler),Ut(i,t.adler>>8&255),t.adler=0,i.status=Pt)):i.status=Pt),0!==i.pending){if(Nt(t),0===t.avail_out)return i.last_flush=-1,mt}else if(0===t.avail_in&&Tt(e)<=Tt(o)&&e!==dt)return It(t,yt);if(i.status===Rt&&0!==t.avail_in)return It(t,yt);if(0!==t.avail_in||0!==i.lookahead||e!==ht&&i.status!==Rt){let r=i.strategy===xt?((t,e)=>{let r;for(;;){if(0===t.lookahead&&(qt(t),0===t.lookahead)){if(e===ht)return 1;break}if(t.match_length=0,r=lt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(Bt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===dt?(Bt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Bt(t,!1),0===t.strm.avail_out)?1:2})(i,e):i.strategy===kt?((t,e)=>{let r,n,i,o;const s=t.window;for(;;){if(t.lookahead<=Ct){if(qt(t),t.lookahead<=Ct&&e===ht)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(i=t.strstart-1,n=s[i],n===s[++i]&&n===s[++i]&&n===s[++i])){o=t.strstart+Ct;do{}while(n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&i<o);t.match_length=Ct-(o-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(r=lt(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=lt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(Bt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===dt?(Bt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Bt(t,!1),0===t.strm.avail_out)?1:2})(i,e):Gt[i.level].func(i,e);if(3!==r&&4!==r||(i.status=Rt),1===r||3===r)return 0===t.avail_out&&(i.last_flush=-1),mt;if(2===r&&(e===ct?ut(i):e!==pt&&(st(i,0,0,!1),e===ft&&(Ft(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),Nt(t),0===t.avail_out))return i.last_flush=-1,mt}return e!==dt?mt:i.wrap<=0?gt:(2===i.wrap?(Ut(i,255&t.adler),Ut(i,t.adler>>8&255),Ut(i,t.adler>>16&255),Ut(i,t.adler>>24&255),Ut(i,255&t.total_in),Ut(i,t.total_in>>8&255),Ut(i,t.total_in>>16&255),Ut(i,t.total_in>>24&255)):(Lt(i,t.adler>>>16),Lt(i,65535&t.adler)),Nt(t),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?mt:gt)},deflateEnd:t=>{if(!t||!t.state)return vt;const e=t.state.status;return 42!==e&&69!==e&&73!==e&&91!==e&&e!==Ot&&e!==Pt&&e!==Rt?It(t,vt):(t.state=null,e===Pt?It(t,wt):mt)},deflateSetDictionary:(t,e)=>{let r=e.length;if(!t||!t.state)return vt;const n=t.state,i=n.wrap;if(2===i||1===i&&42!==n.status||n.lookahead)return vt;if(1===i&&(t.adler=tt(t.adler,e,r,0)),n.wrap=0,r>=n.w_size){0===i&&(Ft(n.head),n.strstart=0,n.block_start=0,n.insert=0);let t=new Uint8Array(n.w_size);t.set(e.subarray(r-n.w_size,r),0),e=t,r=n.w_size}const o=t.avail_in,s=t.next_in,a=t.input;for(t.avail_in=r,t.next_in=0,t.input=e,qt(n);n.lookahead>=3;){let t=n.strstart,e=n.lookahead-2;do{n.ins_h=jt(n,n.ins_h,n.window[t+3-1]),n.prev[t&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=t,t++}while(--e);n.strstart=t,n.lookahead=2,qt(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=s,t.input=a,t.avail_in=o,n.wrap=i,mt},deflateInfo:"pako deflate (from Nodeca project)"};const Jt=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var te=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const r=e.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(const e in r)Jt(r,e)&&(t[e]=r[e])}}return t},ee=t=>{let e=0;for(let r=0,n=t.length;r<n;r++)e+=t[r].length;const r=new Uint8Array(e);for(let e=0,n=0,i=t.length;e<i;e++){let i=t[e];r.set(i,n),n+=i.length}return r};let re=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){re=!1}const ne=new Uint8Array(256);for(let t=0;t<256;t++)ne[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;ne[254]=ne[254]=1;var ie=t=>{let e,r,n,i,o,s=t.length,a=0;for(i=0;i<s;i++)r=t.charCodeAt(i),55296==(64512&r)&&i+1<s&&(n=t.charCodeAt(i+1),56320==(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),i++)),a+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(a),o=0,i=0;o<a;i++)r=t.charCodeAt(i),55296==(64512&r)&&i+1<s&&(n=t.charCodeAt(i+1),56320==(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?e[o++]=r:r<2048?(e[o++]=192|r>>>6,e[o++]=128|63&r):r<65536?(e[o++]=224|r>>>12,e[o++]=128|r>>>6&63,e[o++]=128|63&r):(e[o++]=240|r>>>18,e[o++]=128|r>>>12&63,e[o++]=128|r>>>6&63,e[o++]=128|63&r);return e},oe=(t,e)=>{let r,n;const i=e||t.length,o=new Array(2*i);for(n=0,r=0;r<i;){let e=t[r++];if(e<128){o[n++]=e;continue}let s=ne[e];if(s>4)o[n++]=65533,r+=s-1;else{for(e&=2===s?31:3===s?15:7;s>1&&r<i;)e=e<<6|63&t[r++],s--;s>1?o[n++]=65533:e<65536?o[n++]=e:(e-=65536,o[n++]=55296|e>>10&1023,o[n++]=56320|1023&e)}}return((t,e)=>{if(e<65534&&t.subarray&&re)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let r="";for(let n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r})(o,n)},se=(t,e)=>{(e=e||t.length)>t.length&&(e=t.length);let r=e-1;for(;r>=0&&128==(192&t[r]);)r--;return r<0||0===r?e:r+ne[t[r]]>e?r:e};var ae=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const le=Object.prototype.toString,{Z_NO_FLUSH:ue,Z_SYNC_FLUSH:he,Z_FULL_FLUSH:ce,Z_FINISH:fe,Z_OK:de,Z_STREAM_END:pe,Z_DEFAULT_COMPRESSION:me,Z_DEFAULT_STRATEGY:ge,Z_DEFLATED:ve}=it;function we(t){this.options=te({level:me,method:ve,chunkSize:16384,windowBits:15,memLevel:8,strategy:ge},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ae,this.strm.avail_out=0;let r=Kt.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(r!==de)throw new Error(nt[r]);if(e.header&&Kt.deflateSetHeader(this.strm,e.header),e.dictionary){let t;if(t="string"==typeof e.dictionary?ie(e.dictionary):"[object ArrayBuffer]"===le.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,r=Kt.deflateSetDictionary(this.strm,t),r!==de)throw new Error(nt[r]);this._dict_set=!0}}function ye(t,e){const r=new we(e);if(r.push(t,!0),r.err)throw r.msg||nt[r.err];return r.result}we.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize;let i,o;if(this.ended)return!1;for(o=e===~~e?e:!0===e?fe:ue,"string"==typeof t?r.input=ie(t):"[object ArrayBuffer]"===le.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;)if(0===r.avail_out&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),(o===he||o===ce)&&r.avail_out<=6)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else{if(i=Kt.deflate(r,o),i===pe)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),i=Kt.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===de;if(0!==r.avail_out){if(o>0&&r.next_out>0)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else if(0===r.avail_in)break}else this.onData(r.output)}return!0},we.prototype.onData=function(t){this.chunks.push(t)},we.prototype.onEnd=function(t){t===de&&(this.result=ee(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var be={Deflate:we,deflate:ye,deflateRaw:function(t,e){return(e=e||{}).raw=!0,ye(t,e)},gzip:function(t,e){return(e=e||{}).gzip=!0,ye(t,e)},constants:it};var _e=function(t,e){let r,n,i,o,s,a,l,u,h,c,f,d,p,m,g,v,w,y,b,_,x,k,M,S;const E=t.state;r=t.next_in,M=t.input,n=r+(t.avail_in-5),i=t.next_out,S=t.output,o=i-(e-t.avail_out),s=i+(t.avail_out-257),a=E.dmax,l=E.wsize,u=E.whave,h=E.wnext,c=E.window,f=E.hold,d=E.bits,p=E.lencode,m=E.distcode,g=(1<<E.lenbits)-1,v=(1<<E.distbits)-1;t:do{d<15&&(f+=M[r++]<<d,d+=8,f+=M[r++]<<d,d+=8),w=p[f&g];e:for(;;){if(y=w>>>24,f>>>=y,d-=y,y=w>>>16&255,0===y)S[i++]=65535&w;else{if(!(16&y)){if(0==(64&y)){w=p[(65535&w)+(f&(1<<y)-1)];continue e}if(32&y){E.mode=12;break t}t.msg="invalid literal/length code",E.mode=30;break t}b=65535&w,y&=15,y&&(d<y&&(f+=M[r++]<<d,d+=8),b+=f&(1<<y)-1,f>>>=y,d-=y),d<15&&(f+=M[r++]<<d,d+=8,f+=M[r++]<<d,d+=8),w=m[f&v];r:for(;;){if(y=w>>>24,f>>>=y,d-=y,y=w>>>16&255,!(16&y)){if(0==(64&y)){w=m[(65535&w)+(f&(1<<y)-1)];continue r}t.msg="invalid distance code",E.mode=30;break t}if(_=65535&w,y&=15,d<y&&(f+=M[r++]<<d,d+=8,d<y&&(f+=M[r++]<<d,d+=8)),_+=f&(1<<y)-1,_>a){t.msg="invalid distance too far back",E.mode=30;break t}if(f>>>=y,d-=y,y=i-o,_>y){if(y=_-y,y>u&&E.sane){t.msg="invalid distance too far back",E.mode=30;break t}if(x=0,k=c,0===h){if(x+=l-y,y<b){b-=y;do{S[i++]=c[x++]}while(--y);x=i-_,k=S}}else if(h<y){if(x+=l+h-y,y-=h,y<b){b-=y;do{S[i++]=c[x++]}while(--y);if(x=0,h<b){y=h,b-=y;do{S[i++]=c[x++]}while(--y);x=i-_,k=S}}}else if(x+=h-y,y<b){b-=y;do{S[i++]=c[x++]}while(--y);x=i-_,k=S}for(;b>2;)S[i++]=k[x++],S[i++]=k[x++],S[i++]=k[x++],b-=3;b&&(S[i++]=k[x++],b>1&&(S[i++]=k[x++]))}else{x=i-_;do{S[i++]=S[x++],S[i++]=S[x++],S[i++]=S[x++],b-=3}while(b>2);b&&(S[i++]=S[x++],b>1&&(S[i++]=S[x++]))}break}}break}}while(r<n&&i<s);b=d>>3,r-=b,d-=b<<3,f&=(1<<d)-1,t.next_in=r,t.next_out=i,t.avail_in=r<n?n-r+5:5-(r-n),t.avail_out=i<s?s-i+257:257-(i-s),E.hold=f,E.bits=d};const xe=15,ke=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Me=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Se=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Ee=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var Ae=(t,e,r,n,i,o,s,a)=>{const l=a.bits;let u,h,c,f,d,p,m=0,g=0,v=0,w=0,y=0,b=0,_=0,x=0,k=0,M=0,S=null,E=0;const A=new Uint16Array(16),C=new Uint16Array(16);let D,O,P,R=null,I=0;for(m=0;m<=xe;m++)A[m]=0;for(g=0;g<n;g++)A[e[r+g]]++;for(y=l,w=xe;w>=1&&0===A[w];w--);if(y>w&&(y=w),0===w)return i[o++]=20971520,i[o++]=20971520,a.bits=1,0;for(v=1;v<w&&0===A[v];v++);for(y<v&&(y=v),x=1,m=1;m<=xe;m++)if(x<<=1,x-=A[m],x<0)return-1;if(x>0&&(0===t||1!==w))return-1;for(C[1]=0,m=1;m<xe;m++)C[m+1]=C[m]+A[m];for(g=0;g<n;g++)0!==e[r+g]&&(s[C[e[r+g]]++]=g);if(0===t?(S=R=s,p=19):1===t?(S=ke,E-=257,R=Me,I-=257,p=256):(S=Se,R=Ee,p=-1),M=0,g=0,m=v,d=o,b=y,_=0,c=-1,k=1<<y,f=k-1,1===t&&k>852||2===t&&k>592)return 1;for(;;){D=m-_,s[g]<p?(O=0,P=s[g]):s[g]>p?(O=R[I+s[g]],P=S[E+s[g]]):(O=96,P=0),u=1<<m-_,h=1<<b,v=h;do{h-=u,i[d+(M>>_)+h]=D<<24|O<<16|P|0}while(0!==h);for(u=1<<m-1;M&u;)u>>=1;if(0!==u?(M&=u-1,M+=u):M=0,g++,0==--A[m]){if(m===w)break;m=e[r+s[g]]}if(m>y&&(M&f)!==c){for(0===_&&(_=y),d+=v,b=m-_,x=1<<b;b+_<w&&(x-=A[b+_],!(x<=0));)b++,x<<=1;if(k+=1<<b,1===t&&k>852||2===t&&k>592)return 1;c=M&f,i[c]=y<<24|b<<16|d-o|0}}return 0!==M&&(i[d+M]=m-_<<24|64<<16|0),a.bits=y,0};const{Z_FINISH:Ce,Z_BLOCK:De,Z_TREES:Oe,Z_OK:Pe,Z_STREAM_END:Re,Z_NEED_DICT:Ie,Z_STREAM_ERROR:Te,Z_DATA_ERROR:Fe,Z_MEM_ERROR:je,Z_BUF_ERROR:Ne,Z_DEFLATED:Be}=it,Ue=12,Le=30,$e=t=>(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);function ze(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const qe=t=>{if(!t||!t.state)return Te;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,Pe},Ve=t=>{if(!t||!t.state)return Te;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,qe(t)},Ye=(t,e)=>{let r;if(!t||!t.state)return Te;const n=t.state;return e<0?(r=0,e=-e):(r=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?Te:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,Ve(t))},Ze=(t,e)=>{if(!t)return Te;const r=new ze;t.state=r,r.window=null;const n=Ye(t,e);return n!==Pe&&(t.state=null),n};let Ge,Xe,He=!0;const Qe=t=>{if(He){Ge=new Int32Array(512),Xe=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(Ae(1,t.lens,0,288,Ge,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;Ae(2,t.lens,0,32,Xe,0,t.work,{bits:5}),He=!1}t.lencode=Ge,t.lenbits=9,t.distcode=Xe,t.distbits=5},We=(t,e,r,n)=>{let i;const o=t.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),n>=o.wsize?(o.window.set(e.subarray(r-o.wsize,r),0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>n&&(i=n),o.window.set(e.subarray(r-n,r-n+i),o.wnext),(n-=i)?(o.window.set(e.subarray(r-n,r),0),o.wnext=n,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0};var Ke={inflateReset:Ve,inflateReset2:Ye,inflateResetKeep:qe,inflateInit:t=>Ze(t,15),inflateInit2:Ze,inflate:(t,e)=>{let r,n,i,o,s,a,l,u,h,c,f,d,p,m,g,v,w,y,b,_,x,k,M=0;const S=new Uint8Array(4);let E,A;const C=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return Te;r=t.state,r.mode===Ue&&(r.mode=13),s=t.next_out,i=t.output,l=t.avail_out,o=t.next_in,n=t.input,a=t.avail_in,u=r.hold,h=r.bits,c=a,f=l,k=Pe;t:for(;;)switch(r.mode){case 1:if(0===r.wrap){r.mode=13;break}for(;h<16;){if(0===a)break t;a--,u+=n[o++]<<h,h+=8}if(2&r.wrap&&35615===u){r.check=0,S[0]=255&u,S[1]=u>>>8&255,r.check=rt(r.check,S,2,0),u=0,h=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&u)<<8)+(u>>8))%31){t.msg="incorrect header check",r.mode=Le;break}if((15&u)!==Be){t.msg="unknown compression method",r.mode=Le;break}if(u>>>=4,h-=4,x=8+(15&u),0===r.wbits)r.wbits=x;else if(x>r.wbits){t.msg="invalid window size",r.mode=Le;break}r.dmax=1<<r.wbits,t.adler=r.check=1,r.mode=512&u?10:Ue,u=0,h=0;break;case 2:for(;h<16;){if(0===a)break t;a--,u+=n[o++]<<h,h+=8}if(r.flags=u,(255&r.flags)!==Be){t.msg="unknown compression method",r.mode=Le;break}if(57344&r.flags){t.msg="unknown header flags set",r.mode=Le;break}r.head&&(r.head.text=u>>8&1),512&r.flags&&(S[0]=255&u,S[1]=u>>>8&255,r.check=rt(r.check,S,2,0)),u=0,h=0,r.mode=3;case 3:for(;h<32;){if(0===a)break t;a--,u+=n[o++]<<h,h+=8}r.head&&(r.head.time=u),512&r.flags&&(S[0]=255&u,S[1]=u>>>8&255,S[2]=u>>>16&255,S[3]=u>>>24&255,r.check=rt(r.check,S,4,0)),u=0,h=0,r.mode=4;case 4:for(;h<16;){if(0===a)break t;a--,u+=n[o++]<<h,h+=8}r.head&&(r.head.xflags=255&u,r.head.os=u>>8),512&r.flags&&(S[0]=255&u,S[1]=u>>>8&255,r.check=rt(r.check,S,2,0)),u=0,h=0,r.mode=5;case 5:if(1024&r.flags){for(;h<16;){if(0===a)break t;a--,u+=n[o++]<<h,h+=8}r.length=u,r.head&&(r.head.extra_len=u),512&r.flags&&(S[0]=255&u,S[1]=u>>>8&255,r.check=rt(r.check,S,2,0)),u=0,h=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(d=r.length,d>a&&(d=a),d&&(r.head&&(x=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(o,o+d),x)),512&r.flags&&(r.check=rt(r.check,n,d,o)),a-=d,o+=d,r.length-=d),r.length))break t;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===a)break t;d=0;do{x=n[o+d++],r.head&&x&&r.length<65536&&(r.head.name+=String.fromCharCode(x))}while(x&&d<a);if(512&r.flags&&(r.check=rt(r.check,n,d,o)),a-=d,o+=d,x)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===a)break t;d=0;do{x=n[o+d++],r.head&&x&&r.length<65536&&(r.head.comment+=String.fromCharCode(x))}while(x&&d<a);if(512&r.flags&&(r.check=rt(r.check,n,d,o)),a-=d,o+=d,x)break t}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;h<16;){if(0===a)break t;a--,u+=n[o++]<<h,h+=8}if(u!==(65535&r.check)){t.msg="header crc mismatch",r.mode=Le;break}u=0,h=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=Ue;break;case 10:for(;h<32;){if(0===a)break t;a--,u+=n[o++]<<h,h+=8}t.adler=r.check=$e(u),u=0,h=0,r.mode=11;case 11:if(0===r.havedict)return t.next_out=s,t.avail_out=l,t.next_in=o,t.avail_in=a,r.hold=u,r.bits=h,Ie;t.adler=r.check=1,r.mode=Ue;case Ue:if(e===De||e===Oe)break t;case 13:if(r.last){u>>>=7&h,h-=7&h,r.mode=27;break}for(;h<3;){if(0===a)break t;a--,u+=n[o++]<<h,h+=8}switch(r.last=1&u,u>>>=1,h-=1,3&u){case 0:r.mode=14;break;case 1:if(Qe(r),r.mode=20,e===Oe){u>>>=2,h-=2;break t}break;case 2:r.mode=17;break;case 3:t.msg="invalid block type",r.mode=Le}u>>>=2,h-=2;break;case 14:for(u>>>=7&h,h-=7&h;h<32;){if(0===a)break t;a--,u+=n[o++]<<h,h+=8}if((65535&u)!=(u>>>16^65535)){t.msg="invalid stored block lengths",r.mode=Le;break}if(r.length=65535&u,u=0,h=0,r.mode=15,e===Oe)break t;case 15:r.mode=16;case 16:if(d=r.length,d){if(d>a&&(d=a),d>l&&(d=l),0===d)break t;i.set(n.subarray(o,o+d),s),a-=d,o+=d,l-=d,s+=d,r.length-=d;break}r.mode=Ue;break;case 17:for(;h<14;){if(0===a)break t;a--,u+=n[o++]<<h,h+=8}if(r.nlen=257+(31&u),u>>>=5,h-=5,r.ndist=1+(31&u),u>>>=5,h-=5,r.ncode=4+(15&u),u>>>=4,h-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=Le;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;h<3;){if(0===a)break t;a--,u+=n[o++]<<h,h+=8}r.lens[C[r.have++]]=7&u,u>>>=3,h-=3}for(;r.have<19;)r.lens[C[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,E={bits:r.lenbits},k=Ae(0,r.lens,0,19,r.lencode,0,r.work,E),r.lenbits=E.bits,k){t.msg="invalid code lengths set",r.mode=Le;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;M=r.lencode[u&(1<<r.lenbits)-1],g=M>>>24,v=M>>>16&255,w=65535&M,!(g<=h);){if(0===a)break t;a--,u+=n[o++]<<h,h+=8}if(w<16)u>>>=g,h-=g,r.lens[r.have++]=w;else{if(16===w){for(A=g+2;h<A;){if(0===a)break t;a--,u+=n[o++]<<h,h+=8}if(u>>>=g,h-=g,0===r.have){t.msg="invalid bit length repeat",r.mode=Le;break}x=r.lens[r.have-1],d=3+(3&u),u>>>=2,h-=2}else if(17===w){for(A=g+3;h<A;){if(0===a)break t;a--,u+=n[o++]<<h,h+=8}u>>>=g,h-=g,x=0,d=3+(7&u),u>>>=3,h-=3}else{for(A=g+7;h<A;){if(0===a)break t;a--,u+=n[o++]<<h,h+=8}u>>>=g,h-=g,x=0,d=11+(127&u),u>>>=7,h-=7}if(r.have+d>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=Le;break}for(;d--;)r.lens[r.have++]=x}}if(r.mode===Le)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=Le;break}if(r.lenbits=9,E={bits:r.lenbits},k=Ae(1,r.lens,0,r.nlen,r.lencode,0,r.work,E),r.lenbits=E.bits,k){t.msg="invalid literal/lengths set",r.mode=Le;break}if(r.distbits=6,r.distcode=r.distdyn,E={bits:r.distbits},k=Ae(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,E),r.distbits=E.bits,k){t.msg="invalid distances set",r.mode=Le;break}if(r.mode=20,e===Oe)break t;case 20:r.mode=21;case 21:if(a>=6&&l>=258){t.next_out=s,t.avail_out=l,t.next_in=o,t.avail_in=a,r.hold=u,r.bits=h,_e(t,f),s=t.next_out,i=t.output,l=t.avail_out,o=t.next_in,n=t.input,a=t.avail_in,u=r.hold,h=r.bits,r.mode===Ue&&(r.back=-1);break}for(r.back=0;M=r.lencode[u&(1<<r.lenbits)-1],g=M>>>24,v=M>>>16&255,w=65535&M,!(g<=h);){if(0===a)break t;a--,u+=n[o++]<<h,h+=8}if(v&&0==(240&v)){for(y=g,b=v,_=w;M=r.lencode[_+((u&(1<<y+b)-1)>>y)],g=M>>>24,v=M>>>16&255,w=65535&M,!(y+g<=h);){if(0===a)break t;a--,u+=n[o++]<<h,h+=8}u>>>=y,h-=y,r.back+=y}if(u>>>=g,h-=g,r.back+=g,r.length=w,0===v){r.mode=26;break}if(32&v){r.back=-1,r.mode=Ue;break}if(64&v){t.msg="invalid literal/length code",r.mode=Le;break}r.extra=15&v,r.mode=22;case 22:if(r.extra){for(A=r.extra;h<A;){if(0===a)break t;a--,u+=n[o++]<<h,h+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,h-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;M=r.distcode[u&(1<<r.distbits)-1],g=M>>>24,v=M>>>16&255,w=65535&M,!(g<=h);){if(0===a)break t;a--,u+=n[o++]<<h,h+=8}if(0==(240&v)){for(y=g,b=v,_=w;M=r.distcode[_+((u&(1<<y+b)-1)>>y)],g=M>>>24,v=M>>>16&255,w=65535&M,!(y+g<=h);){if(0===a)break t;a--,u+=n[o++]<<h,h+=8}u>>>=y,h-=y,r.back+=y}if(u>>>=g,h-=g,r.back+=g,64&v){t.msg="invalid distance code",r.mode=Le;break}r.offset=w,r.extra=15&v,r.mode=24;case 24:if(r.extra){for(A=r.extra;h<A;){if(0===a)break t;a--,u+=n[o++]<<h,h+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,h-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=Le;break}r.mode=25;case 25:if(0===l)break t;if(d=f-l,r.offset>d){if(d=r.offset-d,d>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=Le;break}d>r.wnext?(d-=r.wnext,p=r.wsize-d):p=r.wnext-d,d>r.length&&(d=r.length),m=r.window}else m=i,p=s-r.offset,d=r.length;d>l&&(d=l),l-=d,r.length-=d;do{i[s++]=m[p++]}while(--d);0===r.length&&(r.mode=21);break;case 26:if(0===l)break t;i[s++]=r.length,l--,r.mode=21;break;case 27:if(r.wrap){for(;h<32;){if(0===a)break t;a--,u|=n[o++]<<h,h+=8}if(f-=l,t.total_out+=f,r.total+=f,f&&(t.adler=r.check=r.flags?rt(r.check,i,f,s-f):tt(r.check,i,f,s-f)),f=l,(r.flags?u:$e(u))!==r.check){t.msg="incorrect data check",r.mode=Le;break}u=0,h=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;h<32;){if(0===a)break t;a--,u+=n[o++]<<h,h+=8}if(u!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=Le;break}u=0,h=0}r.mode=29;case 29:k=Re;break t;case Le:k=Fe;break t;case 31:return je;case 32:default:return Te}return t.next_out=s,t.avail_out=l,t.next_in=o,t.avail_in=a,r.hold=u,r.bits=h,(r.wsize||f!==t.avail_out&&r.mode<Le&&(r.mode<27||e!==Ce))&&We(t,t.output,t.next_out,f-t.avail_out),c-=t.avail_in,f-=t.avail_out,t.total_in+=c,t.total_out+=f,r.total+=f,r.wrap&&f&&(t.adler=r.check=r.flags?rt(r.check,i,f,t.next_out-f):tt(r.check,i,f,t.next_out-f)),t.data_type=r.bits+(r.last?64:0)+(r.mode===Ue?128:0)+(20===r.mode||15===r.mode?256:0),(0===c&&0===f||e===Ce)&&k===Pe&&(k=Ne),k},inflateEnd:t=>{if(!t||!t.state)return Te;let e=t.state;return e.window&&(e.window=null),t.state=null,Pe},inflateGetHeader:(t,e)=>{if(!t||!t.state)return Te;const r=t.state;return 0==(2&r.wrap)?Te:(r.head=e,e.done=!1,Pe)},inflateSetDictionary:(t,e)=>{const r=e.length;let n,i,o;return t&&t.state?(n=t.state,0!==n.wrap&&11!==n.mode?Te:11===n.mode&&(i=1,i=tt(i,e,r,0),i!==n.check)?Fe:(o=We(t,e,r,r),o?(n.mode=31,je):(n.havedict=1,Pe))):Te},inflateInfo:"pako inflate (from Nodeca project)"};var Je=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const tr=Object.prototype.toString,{Z_NO_FLUSH:er,Z_FINISH:rr,Z_OK:nr,Z_STREAM_END:ir,Z_NEED_DICT:or,Z_STREAM_ERROR:sr,Z_DATA_ERROR:ar,Z_MEM_ERROR:lr}=it;function ur(t){this.options=te({chunkSize:65536,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ae,this.strm.avail_out=0;let r=Ke.inflateInit2(this.strm,e.windowBits);if(r!==nr)throw new Error(nt[r]);if(this.header=new Je,Ke.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=ie(e.dictionary):"[object ArrayBuffer]"===tr.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=Ke.inflateSetDictionary(this.strm,e.dictionary),r!==nr)))throw new Error(nt[r])}function hr(t,e){const r=new ur(e);if(r.push(t),r.err)throw r.msg||nt[r.err];return r.result}ur.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let o,s,a;if(this.ended)return!1;for(s=e===~~e?e:!0===e?rr:er,"[object ArrayBuffer]"===tr.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(0===r.avail_out&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),o=Ke.inflate(r,s),o===or&&i&&(o=Ke.inflateSetDictionary(r,i),o===nr?o=Ke.inflate(r,s):o===ar&&(o=or));r.avail_in>0&&o===ir&&r.state.wrap>0&&0!==t[r.next_in];)Ke.inflateReset(r),o=Ke.inflate(r,s);switch(o){case sr:case ar:case or:case lr:return this.onEnd(o),this.ended=!0,!1}if(a=r.avail_out,r.next_out&&(0===r.avail_out||o===ir))if("string"===this.options.to){let t=se(r.output,r.next_out),e=r.next_out-t,i=oe(r.output,t);r.next_out=e,r.avail_out=n-e,e&&r.output.set(r.output.subarray(t,t+e),0),this.onData(i)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(o!==nr||0!==a){if(o===ir)return o=Ke.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(0===r.avail_in)break}}return!0},ur.prototype.onData=function(t){this.chunks.push(t)},ur.prototype.onEnd=function(t){t===nr&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=ee(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var cr={Inflate:ur,inflate:hr,inflateRaw:function(t,e){return(e=e||{}).raw=!0,hr(t,e)},ungzip:hr,constants:it};const{Deflate:fr,deflate:dr,deflateRaw:pr,gzip:mr}=be,{Inflate:gr,inflate:vr,inflateRaw:wr,ungzip:yr}=cr;var br=dr,_r=gr;const xr=[137,80,78,71,13,10,26,10],kr=[];for(let t=0;t<256;t++){let e=t;for(let t=0;t<8;t++)1&e?e=3988292384^e>>>1:e>>>=1;kr[t]=e}const Mr=4294967295;function Sr(t,e){return(function(t,e,r){let n=t;for(let t=0;t<r;t++)n=kr[255&(n^e[t])]^n>>>8;return n}(Mr,t,e)^Mr)>>>0}var Er,Ar,Cr,Dr;!function(t){t[t.UNKNOWN=-1]="UNKNOWN",t[t.GREYSCALE=0]="GREYSCALE",t[t.TRUECOLOUR=2]="TRUECOLOUR",t[t.INDEXED_COLOUR=3]="INDEXED_COLOUR",t[t.GREYSCALE_ALPHA=4]="GREYSCALE_ALPHA",t[t.TRUECOLOUR_ALPHA=6]="TRUECOLOUR_ALPHA"}(Er||(Er={})),function(t){t[t.UNKNOWN=-1]="UNKNOWN",t[t.DEFLATE=0]="DEFLATE"}(Ar||(Ar={})),function(t){t[t.UNKNOWN=-1]="UNKNOWN",t[t.ADAPTIVE=0]="ADAPTIVE"}(Cr||(Cr={})),function(t){t[t.UNKNOWN=-1]="UNKNOWN",t[t.NO_INTERLACE=0]="NO_INTERLACE",t[t.ADAM7=1]="ADAM7"}(Dr||(Dr={}));const Or=new Uint8Array(0),Pr=new Uint16Array([255]),Rr=255===new Uint8Array(Pr.buffer)[0];class Ir extends g{constructor(t,e={}){super(t);const{checkCrc:r=!1}=e;this._checkCrc=r,this._inflator=new _r,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._end=!1,this._hasPalette=!1,this._palette=[],this._compressionMethod=Ar.UNKNOWN,this._filterMethod=Cr.UNKNOWN,this._interlaceMethod=Dr.UNKNOWN,this._colorType=-1,this.setBigEndian()}decode(){for(this.decodeSignature();!this._end;)this.decodeChunk();return this.decodeImage(),this._png}decodeSignature(){for(let t=0;t<xr.length;t++)if(this.readUint8()!==xr[t])throw new Error(`wrong PNG signature. Byte at ${t} should be ${xr[t]}.`)}decodeChunk(){const t=this.readUint32(),e=this.readChars(4),r=this.offset;switch(e){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(t);break;case"IDAT":this.decodeIDAT(t);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(t);break;case"tEXt":this.decodetEXt(t);break;case"pHYs":this.decodepHYs();break;default:this.skip(t)}if(this.offset-r!==t)throw new Error(`Length mismatch while decoding chunk ${e}`);if(this._checkCrc){const r=this.readUint32(),n=t+4,i=Sr(new Uint8Array(this.buffer,this.byteOffset+this.offset-n-4,n),n);if(i!==r)throw new Error(`CRC mismatch for chunk ${e}. Expected ${r}, found ${i}`)}else this.skip(4)}decodeIHDR(){const t=this._png;t.width=this.readUint32(),t.height=this.readUint32(),t.depth=function(t){if(1!==t&&2!==t&&4!==t&&8!==t&&16!==t)throw new Error(`invalid bit depth: ${t}`);return t}(this.readUint8());const e=this.readUint8();let r;switch(this._colorType=e,e){case Er.GREYSCALE:r=1;break;case Er.TRUECOLOUR:r=3;break;case Er.INDEXED_COLOUR:r=1;break;case Er.GREYSCALE_ALPHA:r=2;break;case Er.TRUECOLOUR_ALPHA:r=4;break;default:throw new Error(`Unknown color type: ${e}`)}if(this._png.channels=r,this._compressionMethod=this.readUint8(),this._compressionMethod!==Ar.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodePLTE(t){if(t%3!=0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${t}`);const e=t/3;this._hasPalette=!0;const r=[];this._palette=r;for(let t=0;t<e;t++)r.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(t){this._inflator.push(new Uint8Array(this.buffer,this.offset+this.byteOffset,t)),this.skip(t)}decodetRNS(t){if(3===this._colorType){if(t>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${t} vs ${this._palette.length})`);let e=0;for(;e<t;e++){const t=this.readByte();this._palette[e].push(t)}for(;e<this._palette.length;e++)this._palette[e].push(255)}}decodetEXt(t){let e,r="";for(;"\0"!==(e=this.readChar());)r+=e;this._png.text[r]=this.readChars(t-r.length-1)}decodepHYs(){const t=this.readUint32(),e=this.readUint32(),r=this.readByte();this._png.resolution={x:t,y:e,unit:r}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const t=this._inflator.result;if(this._filterMethod!==Cr.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod!==Dr.NO_INTERLACE)throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this.decodeInterlaceNull(t)}decodeInterlaceNull(t){const e=this._png.height,r=this._png.channels*this._png.depth/8,n=this._png.width*r,i=new Uint8Array(this._png.height*n);let o,s,a=Or,l=0;for(let u=0;u<e;u++){switch(o=t.subarray(l+1,l+1+n),s=i.subarray(u*n,(u+1)*n),t[l]){case 0:Tr(o,s,n);break;case 1:Fr(o,s,n,r);break;case 2:jr(o,s,a,n);break;case 3:Nr(o,s,a,n,r);break;case 4:Br(o,s,a,n,r);break;default:throw new Error(`Unsupported filter: ${t[l]}`)}a=s,l+=n+1}if(this._hasPalette&&(this._png.palette=this._palette),16===this._png.depth){const t=new Uint16Array(i.buffer);if(Rr)for(let e=0;e<t.length;e++)t[e]=(255&(u=t[e]))<<8|u>>8&255;this._png.data=t}else this._png.data=i;var u}}function Tr(t,e,r){for(let n=0;n<r;n++)e[n]=t[n]}function Fr(t,e,r,n){let i=0;for(;i<n;i++)e[i]=t[i];for(;i<r;i++)e[i]=t[i]+e[i-n]&255}function jr(t,e,r,n){let i=0;if(0===r.length)for(;i<n;i++)e[i]=t[i];else for(;i<n;i++)e[i]=t[i]+r[i]&255}function Nr(t,e,r,n,i){let o=0;if(0===r.length){for(;o<i;o++)e[o]=t[o];for(;o<n;o++)e[o]=t[o]+(e[o-i]>>1)&255}else{for(;o<i;o++)e[o]=t[o]+(r[o]>>1)&255;for(;o<n;o++)e[o]=t[o]+(e[o-i]+r[o]>>1)&255}}function Br(t,e,r,n,i){let o=0;if(0===r.length){for(;o<i;o++)e[o]=t[o];for(;o<n;o++)e[o]=t[o]+e[o-i]&255}else{for(;o<i;o++)e[o]=t[o]+r[o]&255;for(;o<n;o++)e[o]=t[o]+Ur(e[o-i],r[o],r[o-i])&255}}function Ur(t,e,r){const n=t+e-r,i=Math.abs(n-t),o=Math.abs(n-e),s=Math.abs(n-r);return i<=o&&i<=s?t:o<=s?e:r}const Lr={level:3};class $r extends g{constructor(t,e={}){super(),this._colorType=Er.UNKNOWN,this._zlibOptions=Object.assign({},Lr,e.zlib),this._png=this._checkData(t),this.setBigEndian()}encode(){return this.encodeSignature(),this.encodeIHDR(),this.encodeData(),this.encodeIEND(),this.toArray()}encodeSignature(){this.writeBytes(xr)}encodeIHDR(){this.writeUint32(13),this.writeChars("IHDR"),this.writeUint32(this._png.width),this.writeUint32(this._png.height),this.writeByte(this._png.depth),this.writeByte(this._colorType),this.writeByte(Ar.DEFLATE),this.writeByte(Cr.ADAPTIVE),this.writeByte(Dr.NO_INTERLACE),this.writeCrc(17)}encodeIEND(){this.writeUint32(0),this.writeChars("IEND"),this.writeCrc(4)}encodeIDAT(t){this.writeUint32(t.length),this.writeChars("IDAT"),this.writeBytes(t),this.writeCrc(t.length+4)}encodeData(){const{width:t,height:e,channels:r,depth:n,data:i}=this._png,o=r*t,s=(new g).setBigEndian();let a=0;for(let t=0;t<e;t++)if(s.writeByte(0),8===n)a=qr(i,s,o,a);else{if(16!==n)throw new Error("unreachable");a=Vr(i,s,o,a)}const l=s.toArray(),u=br(l,this._zlibOptions);this.encodeIDAT(u)}_checkData(t){const{colorType:e,channels:r,depth:n}=function(t){const{channels:e=4,depth:r=8}=t;if(4!==e&&3!==e&&2!==e&&1!==e)throw new RangeError(`unsupported number of channels: ${e}`);if(8!==r&&16!==r)throw new RangeError(`unsupported bit depth: ${r}`);const n={channels:e,depth:r,colorType:Er.UNKNOWN};switch(e){case 4:n.colorType=Er.TRUECOLOUR_ALPHA;break;case 3:n.colorType=Er.TRUECOLOUR;break;case 1:n.colorType=Er.GREYSCALE;break;case 2:n.colorType=Er.GREYSCALE_ALPHA;break;default:throw new Error("unsupported number of channels")}return n}(t),i={width:zr(t.width,"width"),height:zr(t.height,"height"),channels:r,data:t.data,depth:n,text:{}};this._colorType=e;const o=i.width*i.height*r;if(i.data.length!==o)throw new RangeError(`wrong data size. Found ${i.data.length}, expected ${o}`);return i}writeCrc(t){this.writeUint32(Sr(new Uint8Array(this.buffer,this.byteOffset+this.offset-t,t),t))}}function zr(t,e){if(Number.isInteger(t)&&t>0)return t;throw new TypeError(`${e} must be a positive integer`)}function qr(t,e,r,n){for(let i=0;i<r;i++)e.writeByte(t[n++]);return n}function Vr(t,e,r,n){for(let i=0;i<r;i++)e.writeUint16(t[n++]);return n}var Yr;!function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"}(Yr||(Yr={}));var Zr=r(7870);let Gr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Xr=new Uint8Array(256);for(let t=0;t<Gr.length;t++)Xr[Gr.charCodeAt(t)]=t;function Hr(t,e){return`data:${e};base64,${function(t){let e,r=t.length,n="";for(e=0;e<r;e+=3)n+=Gr[t[e]>>2],n+=Gr[(3&t[e])<<4|t[e+1]>>4],n+=Gr[(15&t[e+1])<<2|t[e+2]>>6],n+=Gr[63&t[e+2]];return r%3==2?n=`${n.substring(0,n.length-1)}=`:r%3==1&&(n=`${n.substring(0,n.length-2)}==`),n}(t)}`}const Qr=self.ImageData,Wr=self.Image;function Kr(t,e){let r=self.document.createElement("canvas");return r.width=t,r.height=e,r}function Jr(t,e={}){const r={width:t.width,height:t.height,data:t.getRGBAData()};return(0,Zr.encode)(r,e.quality).data}function tn(t,e){const r={width:t.width,height:t.height,channels:t.channels,depth:t.bitDepth,data:t.data};return 1!==r.depth&&32!==r.depth||(r.depth=8,r.channels=4,r.data=t.getRGBAData()),function(t,e){return new $r(t,e).encode()}(r,e)}const en={save(t,e={}){const{useCanvas:r=!1,encoder:n}=e;let{format:i}=e;if(!i){const e=/\.(?<format>[a-zA-Z]+)$/.exec(t);e&&(i=e.groups.format.toLowerCase())}if(!i)throw new Error("file format not provided");return new Promise(((t,e)=>{let o,s;switch(i.toLowerCase()){case"png":r?o=this.getCanvas().pngStream():s=tn(this,n);break;case"jpg":case"jpeg":r?o=this.getCanvas().jpegStream():s=Jr(this,n);break;case"bmp":s=(0,d.encode)(this,n);break;default:throw new RangeError(`invalid output format: ${i}`)}if(o){let r=function(){throw new Error("createWriteStream does not exist in the browser")}();r.on("finish",t),r.on("error",e),o.pipe(r)}else s&&function(){throw new Error("writeFile does not exist in the browser")}()}))},toDataURL(t="image/png",e={}){"object"==typeof t&&(e=t,t="image/png");const{useCanvas:r=!1,encoder:n}=e;function i(e,r){return Hr(e(r,n),t)}return"image/bmp"===(t=function(t){return t.includes("/")||(t=`image/${t}`),t}(t))?i(d.encode,this):"image/png"!==t||r?"image/jpeg"!==t||r?this.getCanvas().toDataURL(t):i(Jr,this):i(tn,this)},toBuffer(t={}){const{format:e="png",encoder:r}=t;switch(e.toLowerCase()){case"png":return tn(this,r);case"jpeg":case"jpg":return Jr(this,r);case"bmp":return(0,d.encode)(this,r);default:throw new RangeError(`invalid output format: ${e}`)}},toBase64(t="image/png",e={}){if(e.async)return this.toDataURL(t,e).then((function(t){return t.substring(t.indexOf(",")+1)}));{const r=this.toDataURL(t,e);return r.substring(r.indexOf(",")+1)}},toBlob(t="image/png",e=.8){return c(this.getCanvas(),t,e)},getCanvas(){const t=new Qr(this.getRGBAData({clamped:!0}),this.width,this.height);let e=Kr(this.width,this.height);return e.getContext("2d").putImageData(t,0,0),e}};var rn=r(2251),nn=r.n(rn);let on={configurable:!0,enumerable:!1,get:void 0};const sn="GREY",an="RGB",ln="HSL",un="HSV",hn="CMYK";const cn="BINARY",fn="RGBA",dn={};dn.BINARY={components:1,alpha:0,bitDepth:1,colorModel:sn},dn.GREYA={components:1,alpha:1,bitDepth:8,colorModel:sn},dn.GREY={components:1,alpha:0,bitDepth:8,colorModel:sn},dn[fn]={components:3,alpha:1,bitDepth:8,colorModel:an},dn.RGB={components:3,alpha:0,bitDepth:8,colorModel:an},dn.CMYK={components:4,alpha:0,bitDepth:8,colorModel:hn},dn.CMYKA={components:4,alpha:1,bitDepth:8,colorModel:hn};const pn=[1,8,16,32];var mn=r(9464),gn=r(9184),vn=r.n(gn);r(9798);const wn=new TextDecoder("utf-8");const yn=new TextEncoder;class bn{constructor(t=8192,e={}){let r=!1;"number"==typeof t?t=new ArrayBuffer(t):(r=!0,this.lastWrittenByte=t.byteLength);const n=e.offset?e.offset>>>0:0,i=t.byteLength-n;let o=n;(ArrayBuffer.isView(t)||t instanceof bn)&&(t.byteLength!==t.buffer.byteLength&&(o=t.byteOffset+n),t=t.buffer),this.lastWrittenByte=r?i:0,this.buffer=t,this.length=i,this.byteLength=i,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,i),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(void 0===t)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const e=2*(this.offset+t),r=new Uint8Array(e);r.set(new Uint8Array(this.buffer)),this.buffer=r.buffer,this.length=this.byteLength=e,this._data=new DataView(this.buffer)}return this}readBoolean(){return 0!==this.readUint8()}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){const e=new Uint8Array(t);for(let r=0;r<t;r++)e[r]=this.readByte();return e}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let e="";for(let r=0;r<t;r++)e+=this.readChar();return e}readUtf8(t=1){return e=this.readBytes(t),wn.decode(e);var e}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let e=0;e<t.length;e++)this._data.setUint8(this.offset++,t[e]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let e=0;e<t.length;e++)this.writeUint8(t.charCodeAt(e));return this}writeUtf8(t){return this.writeBytes(function(t){return yn.encode(t)}(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}const _n={33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",36864:"ExifVersion",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBiasValue",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",37396:"SubjectArea",37500:"MakerNote",37510:"UserComment",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",40964:"RelatedSoundFile",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42240:"Gamma"},xn={};for(let t in _n)xn[_n[t]]=Number(t);const kn={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},Mn={};for(let t in kn)Mn[kn[t]]=Number(t);const Sn={254:"NewSubfileType",255:"SubfileType",256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:"Threshholding",264:"CellWidth",265:"CellLength",266:"FillOrder",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",288:"FreeOffsets",289:"FreeByteCounts",290:"GrayResponseUnit",291:"GrayResponseCurve",296:"ResolutionUnit",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",320:"ColorMap",338:"ExtraSamples",33432:"Copyright",269:"DocumentName",285:"PageName",286:"XPosition",287:"YPosition",292:"T4Options",293:"T6Options",297:"PageNumber",301:"TransferFunction",317:"Predictor",318:"WhitePoint",319:"PrimaryChromaticities",321:"HalftoneHints",322:"TileWidth",323:"TileLength",324:"TileOffsets",325:"TileByteCounts",326:"BadFaxLines",327:"CleanFaxData",328:"ConsecutiveBadFaxLines",330:"SubIFDs",332:"InkSet",333:"InkNames",334:"NumberOfInks",336:"DotRange",337:"TargetPrinter",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",342:"TransferRange",343:"ClipPath",344:"XClipPathUnits",345:"YClipPathUnits",346:"Indexed",347:"JPEGTables",351:"OPIProxy",400:"GlobalParametersIFD",401:"ProfileType",402:"FaxProfile",403:"CodingMethods",404:"VersionYear",405:"ModeNumber",433:"Decode",434:"DefaultImageColor",512:"JPEGProc",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",515:"JPEGRestartInterval",517:"JPEGLosslessPredictors",518:"JPEGPointTransforms",519:"JPEGQTables",520:"JPEGDCTables",521:"JPEGACTables",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite",559:"StripRowCounts",700:"XMP",32781:"ImageID",34732:"ImageLayer",32932:"WangAnnotatio",33445:"MDFileTag",33446:"MDScalePixel",33447:"MDColorTable",33448:"MDLabName",33449:"MDSampleInfo",33450:"MDPrepDate",33451:"MDPrepTime",33452:"MDFileUnits",33550:"ModelPixelScaleTag",33723:"IPTC",33918:"INGRPacketDataTag",33919:"INGRFlagRegisters",33920:"IrasBTransformationMatrix",33922:"ModelTiepointTag",34264:"ModelTransformationTag",34377:"Photoshop",34665:"ExifIFD",34675:"ICCProfile",34735:"GeoKeyDirectoryTag",34736:"GeoDoubleParamsTag",34737:"GeoAsciiParamsTag",34853:"GPSIFD",34908:"HylaFAXFaxRecvParams",34909:"HylaFAXFaxSubAddress",34910:"HylaFAXFaxRecvTime",37724:"ImageSourceData",40965:"InteroperabilityIFD",42112:"GDAL_METADATA",42113:"GDAL_NODATA",50215:"OceScanjobDescription",50216:"OceApplicationSelector",50217:"OceIdentificationNumber",50218:"OceImageLogicCharacteristics",50706:"DNGVersion",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50710:"CFAPlaneColor",50711:"CFALayout",50712:"LinearizationTable",50713:"BlackLevelRepeatDim",50714:"BlackLevel",50715:"BlackLevelDeltaH",50716:"BlackLevelDeltaV",50717:"WhiteLevel",50718:"DefaultScale",50719:"DefaultCropOrigin",50720:"DefaultCropSize",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50733:"BayerGreenSplit",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"LensInfo",50737:"ChromaBlurRadius",50738:"AntiAliasStrength",50740:"DNGPrivateData",50741:"MakerNoteSafety",50778:"CalibrationIlluminant1",50779:"CalibrationIlluminant2",50780:"BestQualityScale",50784:"AliasLayerMetadata"},En={};for(let t in Sn)En[Sn[t]]=Number(t);const An={standard:s,exif:i,gps:o};class Cn{constructor(t){if(!t)throw new Error("missing kind");this.data=new Uint8Array,this.fields=new Map,this.kind=t,this._hasMap=!1,this._map={}}get(t){if("number"==typeof t)return this.fields.get(t);if("string"==typeof t)return this.fields.get(An[this.kind].tagsByName[t]);throw new Error("expected a number or string")}get map(){if(!this._hasMap){const t=An[this.kind].tagsById;for(let e of this.fields.keys())t[e]&&(this._map[t[e]]=this.fields.get(e));this._hasMap=!0}return this._map}}let Dn=new Map([[1,[1,On]],[2,[1,function(t,e){let r=[],n="";for(let i=0;i<e;i++){let e=String.fromCharCode(t.readUint8());"\0"===e?(r.push(n),n=""):n+=e}return 1===r.length?r[0]:r}]],[3,[2,function(t,e){if(1===e)return t.readUint16();let r=new Uint16Array(e);for(let n=0;n<e;n++)r[n]=t.readUint16();return r}]],[4,[4,function(t,e){if(1===e)return t.readUint32();let r=new Uint32Array(e);for(let n=0;n<e;n++)r[n]=t.readUint32();return r}]],[5,[8,function(t,e){if(1===e)return t.readUint32()/t.readUint32();let r=new Array(e);for(let n=0;n<e;n++)r[n]=t.readUint32()/t.readUint32();return r}]],[6,[1,function(t,e){if(1===e)return t.readInt8();let r=new Int8Array(e);for(let n=0;n<e;n++)r[n]=t.readInt8();return r}]],[7,[1,On]],[8,[2,function(t,e){if(1===e)return t.readInt16();let r=new Int16Array(e);for(let n=0;n<e;n++)r[n]=t.readInt16();return r}]],[9,[4,function(t,e){if(1===e)return t.readInt32();let r=new Int32Array(e);for(let n=0;n<e;n++)r[n]=t.readInt32();return r}]],[10,[8,function(t,e){if(1===e)return t.readInt32()/t.readInt32();let r=new Array(e);for(let n=0;n<e;n++)r[n]=t.readInt32()/t.readInt32();return r}]],[11,[4,function(t,e){if(1===e)return t.readFloat32();let r=new Float32Array(e);for(let n=0;n<e;n++)r[n]=t.readFloat32();return r}]],[12,[8,function(t,e){if(1===e)return t.readFloat64();let r=new Float64Array(e);for(let n=0;n<e;n++)r[n]=t.readFloat64();return r}]]]);function On(t,e){if(1===e)return t.readUint8();let r=new Uint8Array(e);for(let n=0;n<e;n++)r[n]=t.readUint8();return r}const Pn=[];for(let t=0;t<256;t++)Pn.push([t]);const Rn=[0];for(let t=256;t<4096;t++)Pn.push(Rn);class In{constructor(t){this.stripArray=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);const e=new Map;for(let t=0;t<256;t++)e.set(t,[t]);this.currentBit=0,this.tableLength=258,this.currentBitLength=9,this.outData=new bn(t.byteLength)}decode(){let t=0,e=0;for(;257!==(t=this.getNextCode());)if(256===t){if(this.initializeTable(),t=this.getNextCode(),257===t)break;this.writeString(this.stringFromCode(t)),e=t}else if(this.isInTable(t))this.writeString(this.stringFromCode(t)),this.addStringToTable(this.stringFromCode(e).concat(this.stringFromCode(t)[0])),e=t;else{const r=this.stringFromCode(e).concat(this.stringFromCode(e)[0]);this.writeString(r),this.addStringToTable(r),e=t}const r=this.outData.toArray();return new DataView(r.buffer,r.byteOffset,r.byteLength)}initializeTable(){this.tableLength=258,this.currentBitLength=9}writeString(t){this.outData.writeBytes(t)}stringFromCode(t){return Pn[t]}isInTable(t){return t<this.tableLength}addStringToTable(t){Pn[this.tableLength++]=t,this.tableLength+1===2**this.currentBitLength&&this.currentBitLength++}getNextCode(){const t=this.currentBit%8,e=this.currentBit>>>3,r=8-t,n=this.currentBit+this.currentBitLength-8*(e+1);let i=8*(e+2)-(this.currentBit+this.currentBitLength);const o=8*(e+2)-this.currentBit;i=Math.max(0,i);let s=this.stripArray[e]&2**(8-t)-1;s<<=this.currentBitLength-r;let a=s;if(e+1<this.stripArray.length){let t=this.stripArray[e+1]>>>i;t<<=Math.max(0,this.currentBitLength-o),a+=t}if(n>8&&e+2<this.stripArray.length){const t=8*(e+3)-(this.currentBit+this.currentBitLength);a+=this.stripArray[e+2]>>>t}return this.currentBit+=this.currentBitLength,a}}function Tn(t){return new In(t).decode()}const Fn=/^(\d{4}):(\d{2}):(\d{2}) (\d{2}):(\d{2}):(\d{2})$/;class jn extends Cn{constructor(){super("standard")}get size(){return this.width*this.height}get width(){return this.imageWidth}get height(){return this.imageLength}get components(){return this.samplesPerPixel}get date(){let t=new Date,e=Fn.exec(this.dateTime);if(null===e)throw new Error(`invalid dateTime: ${this.dateTime}`);return t.setFullYear(Number(e[1]),Number(e[2])-1,Number(e[3])),t.setHours(Number(e[4]),Number(e[5]),Number(e[6])),t}get newSubfileType(){return this.get("NewSubfileType")}get imageWidth(){return this.get("ImageWidth")}get imageLength(){return this.get("ImageLength")}get bitsPerSample(){const t=this.get("BitsPerSample");return t&&"number"!=typeof t?t[0]:t}get alpha(){const t=this.extraSamples;return!!t&&0!==t[0]}get associatedAlpha(){const t=this.extraSamples;return!!t&&1===t[0]}get extraSamples(){return Nn(this.get("ExtraSamples"))}get compression(){return this.get("Compression")||1}get type(){return this.get("PhotometricInterpretation")}get fillOrder(){return this.get("FillOrder")||1}get documentName(){return this.get("DocumentName")}get imageDescription(){return this.get("ImageDescription")}get stripOffsets(){return Nn(this.get("StripOffsets"))}get orientation(){return this.get("Orientation")}get samplesPerPixel(){return this.get("SamplesPerPixel")||1}get rowsPerStrip(){return this.get("RowsPerStrip")}get stripByteCounts(){return Nn(this.get("StripByteCounts"))}get minSampleValue(){return this.get("MinSampleValue")||0}get maxSampleValue(){return this.get("MaxSampleValue")||Math.pow(2,this.bitsPerSample)-1}get xResolution(){return this.get("XResolution")}get yResolution(){return this.get("YResolution")}get planarConfiguration(){return this.get("PlanarConfiguration")||1}get resolutionUnit(){return this.get("ResolutionUnit")||2}get dateTime(){return this.get("DateTime")}get predictor(){return this.get("Predictor")||1}get sampleFormat(){return this.get("SampleFormat")||1}get sMinSampleValue(){return this.get("SMinSampleValue")||this.minSampleValue}get sMaxSampleValue(){return this.get("SMaxSampleValue")||this.maxSampleValue}get palette(){const t=2**this.bitsPerSample,e=this.get("ColorMap");if(!e)return;if(e.length!==3*t)throw new Error(`ColorMap size must be ${t}`);const r=[];for(let n=0;n<t;n++)r.push([e[n],e[n+t],e[n+2*t]]);return r}}function Nn(t){return"number"==typeof t?[t]:t}function Bn(t){let e=t.length;for(;--e>=0;)t[e]=0}const Un=256,Ln=286,$n=30,zn=15,qn=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Vn=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Yn=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Zn=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Gn=new Array(576);Bn(Gn);const Xn=new Array(60);Bn(Xn);const Hn=new Array(512);Bn(Hn);const Qn=new Array(256);Bn(Qn);const Wn=new Array(29);Bn(Wn);const Kn=new Array($n);function Jn(t,e,r,n,i){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=t&&t.length}let ti,ei,ri;function ni(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}Bn(Kn);const ii=t=>t<256?Hn[t]:Hn[256+(t>>>7)],oi=(t,e)=>{t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},si=(t,e,r)=>{t.bi_valid>16-r?(t.bi_buf|=e<<t.bi_valid&65535,oi(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=r-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)},ai=(t,e,r)=>{si(t,r[2*e],r[2*e+1])},li=(t,e)=>{let r=0;do{r|=1&t,t>>>=1,r<<=1}while(--e>0);return r>>>1},ui=(t,e,r)=>{const n=new Array(16);let i,o,s=0;for(i=1;i<=zn;i++)n[i]=s=s+r[i-1]<<1;for(o=0;o<=e;o++){let e=t[2*o+1];0!==e&&(t[2*o]=li(n[e]++,e))}},hi=t=>{let e;for(e=0;e<Ln;e++)t.dyn_ltree[2*e]=0;for(e=0;e<$n;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0},ci=t=>{t.bi_valid>8?oi(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},fi=(t,e,r,n)=>{const i=2*e,o=2*r;return t[i]<t[o]||t[i]===t[o]&&n[e]<=n[r]},di=(t,e,r)=>{const n=t.heap[r];let i=r<<1;for(;i<=t.heap_len&&(i<t.heap_len&&fi(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!fi(e,n,t.heap[i],t.depth));)t.heap[r]=t.heap[i],r=i,i<<=1;t.heap[r]=n},pi=(t,e,r)=>{let n,i,o,s,a=0;if(0!==t.last_lit)do{n=t.pending_buf[t.d_buf+2*a]<<8|t.pending_buf[t.d_buf+2*a+1],i=t.pending_buf[t.l_buf+a],a++,0===n?ai(t,i,e):(o=Qn[i],ai(t,o+Un+1,e),s=qn[o],0!==s&&(i-=Wn[o],si(t,i,s)),n--,o=ii(n),ai(t,o,r),s=Vn[o],0!==s&&(n-=Kn[o],si(t,n,s)))}while(a<t.last_lit);ai(t,256,e)},mi=(t,e)=>{const r=e.dyn_tree,n=e.stat_desc.static_tree,i=e.stat_desc.has_stree,o=e.stat_desc.elems;let s,a,l,u=-1;for(t.heap_len=0,t.heap_max=573,s=0;s<o;s++)0!==r[2*s]?(t.heap[++t.heap_len]=u=s,t.depth[s]=0):r[2*s+1]=0;for(;t.heap_len<2;)l=t.heap[++t.heap_len]=u<2?++u:0,r[2*l]=1,t.depth[l]=0,t.opt_len--,i&&(t.static_len-=n[2*l+1]);for(e.max_code=u,s=t.heap_len>>1;s>=1;s--)di(t,r,s);l=o;do{s=t.heap[1],t.heap[1]=t.heap[t.heap_len--],di(t,r,1),a=t.heap[1],t.heap[--t.heap_max]=s,t.heap[--t.heap_max]=a,r[2*l]=r[2*s]+r[2*a],t.depth[l]=(t.depth[s]>=t.depth[a]?t.depth[s]:t.depth[a])+1,r[2*s+1]=r[2*a+1]=l,t.heap[1]=l++,di(t,r,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],((t,e)=>{const r=e.dyn_tree,n=e.max_code,i=e.stat_desc.static_tree,o=e.stat_desc.has_stree,s=e.stat_desc.extra_bits,a=e.stat_desc.extra_base,l=e.stat_desc.max_length;let u,h,c,f,d,p,m=0;for(f=0;f<=zn;f++)t.bl_count[f]=0;for(r[2*t.heap[t.heap_max]+1]=0,u=t.heap_max+1;u<573;u++)h=t.heap[u],f=r[2*r[2*h+1]+1]+1,f>l&&(f=l,m++),r[2*h+1]=f,h>n||(t.bl_count[f]++,d=0,h>=a&&(d=s[h-a]),p=r[2*h],t.opt_len+=p*(f+d),o&&(t.static_len+=p*(i[2*h+1]+d)));if(0!==m){do{for(f=l-1;0===t.bl_count[f];)f--;t.bl_count[f]--,t.bl_count[f+1]+=2,t.bl_count[l]--,m-=2}while(m>0);for(f=l;0!==f;f--)for(h=t.bl_count[f];0!==h;)c=t.heap[--u],c>n||(r[2*c+1]!==f&&(t.opt_len+=(f-r[2*c+1])*r[2*c],r[2*c+1]=f),h--)}})(t,e),ui(r,u,t.bl_count)},gi=(t,e,r)=>{let n,i,o=-1,s=e[1],a=0,l=7,u=4;for(0===s&&(l=138,u=3),e[2*(r+1)+1]=65535,n=0;n<=r;n++)i=s,s=e[2*(n+1)+1],++a<l&&i===s||(a<u?t.bl_tree[2*i]+=a:0!==i?(i!==o&&t.bl_tree[2*i]++,t.bl_tree[32]++):a<=10?t.bl_tree[34]++:t.bl_tree[36]++,a=0,o=i,0===s?(l=138,u=3):i===s?(l=6,u=3):(l=7,u=4))},vi=(t,e,r)=>{let n,i,o=-1,s=e[1],a=0,l=7,u=4;for(0===s&&(l=138,u=3),n=0;n<=r;n++)if(i=s,s=e[2*(n+1)+1],!(++a<l&&i===s)){if(a<u)do{ai(t,i,t.bl_tree)}while(0!=--a);else 0!==i?(i!==o&&(ai(t,i,t.bl_tree),a--),ai(t,16,t.bl_tree),si(t,a-3,2)):a<=10?(ai(t,17,t.bl_tree),si(t,a-3,3)):(ai(t,18,t.bl_tree),si(t,a-11,7));a=0,o=i,0===s?(l=138,u=3):i===s?(l=6,u=3):(l=7,u=4)}};let wi=!1;const yi=(t,e,r,n)=>{si(t,0+(n?1:0),3),((t,e,r,n)=>{ci(t),n&&(oi(t,r),oi(t,~r)),t.pending_buf.set(t.window.subarray(e,e+r),t.pending),t.pending+=r})(t,e,r,!0)};var bi={_tr_init:t=>{wi||((()=>{let t,e,r,n,i;const o=new Array(16);for(r=0,n=0;n<28;n++)for(Wn[n]=r,t=0;t<1<<qn[n];t++)Qn[r++]=n;for(Qn[r-1]=n,i=0,n=0;n<16;n++)for(Kn[n]=i,t=0;t<1<<Vn[n];t++)Hn[i++]=n;for(i>>=7;n<$n;n++)for(Kn[n]=i<<7,t=0;t<1<<Vn[n]-7;t++)Hn[256+i++]=n;for(e=0;e<=zn;e++)o[e]=0;for(t=0;t<=143;)Gn[2*t+1]=8,t++,o[8]++;for(;t<=255;)Gn[2*t+1]=9,t++,o[9]++;for(;t<=279;)Gn[2*t+1]=7,t++,o[7]++;for(;t<=287;)Gn[2*t+1]=8,t++,o[8]++;for(ui(Gn,287,o),t=0;t<$n;t++)Xn[2*t+1]=5,Xn[2*t]=li(t,5);ti=new Jn(Gn,qn,257,Ln,zn),ei=new Jn(Xn,Vn,0,$n,zn),ri=new Jn(new Array(0),Yn,0,19,7)})(),wi=!0),t.l_desc=new ni(t.dyn_ltree,ti),t.d_desc=new ni(t.dyn_dtree,ei),t.bl_desc=new ni(t.bl_tree,ri),t.bi_buf=0,t.bi_valid=0,hi(t)},_tr_stored_block:yi,_tr_flush_block:(t,e,r,n)=>{let i,o,s=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=(t=>{let e,r=4093624447;for(e=0;e<=31;e++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<Un;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0})(t)),mi(t,t.l_desc),mi(t,t.d_desc),s=(t=>{let e;for(gi(t,t.dyn_ltree,t.l_desc.max_code),gi(t,t.dyn_dtree,t.d_desc.max_code),mi(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*Zn[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e})(t),i=t.opt_len+3+7>>>3,o=t.static_len+3+7>>>3,o<=i&&(i=o)):i=o=r+5,r+4<=i&&-1!==e?yi(t,e,r,n):4===t.strategy||o===i?(si(t,2+(n?1:0),3),pi(t,Gn,Xn)):(si(t,4+(n?1:0),3),((t,e,r,n)=>{let i;for(si(t,e-257,5),si(t,r-1,5),si(t,n-4,4),i=0;i<n;i++)si(t,t.bl_tree[2*Zn[i]+1],3);vi(t,t.dyn_ltree,e-1),vi(t,t.dyn_dtree,r-1)})(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),pi(t,t.dyn_ltree,t.dyn_dtree)),hi(t),n&&ci(t)},_tr_tally:(t,e,r)=>(t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(Qn[r]+Un+1)]++,t.dyn_dtree[2*ii(e)]++),t.last_lit===t.lit_bufsize-1),_tr_align:t=>{si(t,2,3),ai(t,256,Gn),(t=>{16===t.bi_valid?(oi(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)})(t)}};var _i=(t,e,r,n)=>{let i=65535&t|0,o=t>>>16&65535|0,s=0;for(;0!==r;){s=r>2e3?2e3:r,r-=s;do{i=i+e[n++]|0,o=o+i|0}while(--s);i%=65521,o%=65521}return i|o<<16|0};const xi=new Uint32Array((()=>{let t,e=[];for(var r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e})());var ki=(t,e,r,n)=>{const i=xi,o=n+r;t^=-1;for(let r=n;r<o;r++)t=t>>>8^i[255&(t^e[r])];return-1^t},Mi={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Si={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:Ei,_tr_stored_block:Ai,_tr_flush_block:Ci,_tr_tally:Di,_tr_align:Oi}=bi,{Z_NO_FLUSH:Pi,Z_PARTIAL_FLUSH:Ri,Z_FULL_FLUSH:Ii,Z_FINISH:Ti,Z_BLOCK:Fi,Z_OK:ji,Z_STREAM_END:Ni,Z_STREAM_ERROR:Bi,Z_DATA_ERROR:Ui,Z_BUF_ERROR:Li,Z_DEFAULT_COMPRESSION:$i,Z_FILTERED:zi,Z_HUFFMAN_ONLY:qi,Z_RLE:Vi,Z_FIXED:Yi,Z_DEFAULT_STRATEGY:Zi,Z_UNKNOWN:Gi,Z_DEFLATED:Xi}=Si,Hi=258,Qi=262,Wi=103,Ki=113,Ji=666,to=(t,e)=>(t.msg=Mi[e],e),eo=t=>(t<<1)-(t>4?9:0),ro=t=>{let e=t.length;for(;--e>=0;)t[e]=0};let no=(t,e,r)=>(e<<t.hash_shift^r)&t.hash_mask;const io=t=>{const e=t.state;let r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+r),t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0))},oo=(t,e)=>{Ci(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,io(t.strm)},so=(t,e)=>{t.pending_buf[t.pending++]=e},ao=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},lo=(t,e,r,n)=>{let i=t.avail_in;return i>n&&(i=n),0===i?0:(t.avail_in-=i,e.set(t.input.subarray(t.next_in,t.next_in+i),r),1===t.state.wrap?t.adler=_i(t.adler,e,i,r):2===t.state.wrap&&(t.adler=ki(t.adler,e,i,r)),t.next_in+=i,t.total_in+=i,i)},uo=(t,e)=>{let r,n,i=t.max_chain_length,o=t.strstart,s=t.prev_length,a=t.nice_match;const l=t.strstart>t.w_size-Qi?t.strstart-(t.w_size-Qi):0,u=t.window,h=t.w_mask,c=t.prev,f=t.strstart+Hi;let d=u[o+s-1],p=u[o+s];t.prev_length>=t.good_match&&(i>>=2),a>t.lookahead&&(a=t.lookahead);do{if(r=e,u[r+s]===p&&u[r+s-1]===d&&u[r]===u[o]&&u[++r]===u[o+1]){o+=2,r++;do{}while(u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&o<f);if(n=Hi-(f-o),o=f-Hi,n>s){if(t.match_start=e,s=n,n>=a)break;d=u[o+s-1],p=u[o+s]}}}while((e=c[e&h])>l&&0!=--i);return s<=t.lookahead?s:t.lookahead},ho=t=>{const e=t.w_size;let r,n,i,o,s;do{if(o=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-Qi)){t.window.set(t.window.subarray(e,e+e),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,n=t.hash_size,r=n;do{i=t.head[--r],t.head[r]=i>=e?i-e:0}while(--n);n=e,r=n;do{i=t.prev[--r],t.prev[r]=i>=e?i-e:0}while(--n);o+=e}if(0===t.strm.avail_in)break;if(n=lo(t.strm,t.window,t.strstart+t.lookahead,o),t.lookahead+=n,t.lookahead+t.insert>=3)for(s=t.strstart-t.insert,t.ins_h=t.window[s],t.ins_h=no(t,t.ins_h,t.window[s+1]);t.insert&&(t.ins_h=no(t,t.ins_h,t.window[s+3-1]),t.prev[s&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=s,s++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<Qi&&0!==t.strm.avail_in)},co=(t,e)=>{let r,n;for(;;){if(t.lookahead<Qi){if(ho(t),t.lookahead<Qi&&e===Pi)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=no(t,t.ins_h,t.window[t.strstart+3-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-Qi&&(t.match_length=uo(t,r)),t.match_length>=3)if(n=Di(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=no(t,t.ins_h,t.window[t.strstart+3-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=no(t,t.ins_h,t.window[t.strstart+1]);else n=Di(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(oo(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===Ti?(oo(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(oo(t,!1),0===t.strm.avail_out)?1:2},fo=(t,e)=>{let r,n,i;for(;;){if(t.lookahead<Qi){if(ho(t),t.lookahead<Qi&&e===Pi)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=no(t,t.ins_h,t.window[t.strstart+3-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-Qi&&(t.match_length=uo(t,r),t.match_length<=5&&(t.strategy===zi||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-3,n=Di(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=i&&(t.ins_h=no(t,t.ins_h,t.window[t.strstart+3-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(oo(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if(n=Di(t,0,t.window[t.strstart-1]),n&&oo(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=Di(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===Ti?(oo(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(oo(t,!1),0===t.strm.avail_out)?1:2};function po(t,e,r,n,i){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=i}const mo=[new po(0,0,0,0,((t,e)=>{let r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(ho(t),0===t.lookahead&&e===Pi)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;const n=t.block_start+r;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,oo(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-Qi&&(oo(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===Ti?(oo(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(oo(t,!1),t.strm.avail_out),1)})),new po(4,4,8,4,co),new po(4,5,16,8,co),new po(4,6,32,32,co),new po(4,4,16,16,fo),new po(8,16,32,32,fo),new po(8,16,128,128,fo),new po(8,32,128,256,fo),new po(32,128,258,1024,fo),new po(32,258,258,4096,fo)];function go(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Xi,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),ro(this.dyn_ltree),ro(this.dyn_dtree),ro(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),ro(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),ro(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const vo=t=>{if(!t||!t.state)return to(t,Bi);t.total_in=t.total_out=0,t.data_type=Gi;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:Ki,t.adler=2===e.wrap?0:1,e.last_flush=Pi,Ei(e),ji},wo=t=>{const e=vo(t);var r;return e===ji&&((r=t.state).window_size=2*r.w_size,ro(r.head),r.max_lazy_match=mo[r.level].max_lazy,r.good_match=mo[r.level].good_length,r.nice_match=mo[r.level].nice_length,r.max_chain_length=mo[r.level].max_chain,r.strstart=0,r.block_start=0,r.lookahead=0,r.insert=0,r.match_length=r.prev_length=2,r.match_available=0,r.ins_h=0),e},yo=(t,e,r,n,i,o)=>{if(!t)return Bi;let s=1;if(e===$i&&(e=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),i<1||i>9||r!==Xi||n<8||n>15||e<0||e>9||o<0||o>Yi)return to(t,Bi);8===n&&(n=9);const a=new go;return t.state=a,a.strm=t,a.wrap=s,a.gzhead=null,a.w_bits=n,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=e,a.strategy=o,a.method=r,wo(t)};var bo={deflateInit:(t,e)=>yo(t,e,Xi,15,8,Zi),deflateInit2:yo,deflateReset:wo,deflateResetKeep:vo,deflateSetHeader:(t,e)=>t&&t.state?2!==t.state.wrap?Bi:(t.state.gzhead=e,ji):Bi,deflate:(t,e)=>{let r,n;if(!t||!t.state||e>Fi||e<0)return t?to(t,Bi):Bi;const i=t.state;if(!t.output||!t.input&&0!==t.avail_in||i.status===Ji&&e!==Ti)return to(t,0===t.avail_out?Li:Bi);i.strm=t;const o=i.last_flush;if(i.last_flush=e,42===i.status)if(2===i.wrap)t.adler=0,so(i,31),so(i,139),so(i,8),i.gzhead?(so(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),so(i,255&i.gzhead.time),so(i,i.gzhead.time>>8&255),so(i,i.gzhead.time>>16&255),so(i,i.gzhead.time>>24&255),so(i,9===i.level?2:i.strategy>=qi||i.level<2?4:0),so(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(so(i,255&i.gzhead.extra.length),so(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=ki(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(so(i,0),so(i,0),so(i,0),so(i,0),so(i,0),so(i,9===i.level?2:i.strategy>=qi||i.level<2?4:0),so(i,3),i.status=Ki);else{let e=Xi+(i.w_bits-8<<4)<<8,r=-1;r=i.strategy>=qi||i.level<2?0:i.level<6?1:6===i.level?2:3,e|=r<<6,0!==i.strstart&&(e|=32),e+=31-e%31,i.status=Ki,ao(i,e),0!==i.strstart&&(ao(i,t.adler>>>16),ao(i,65535&t.adler)),t.adler=1}if(69===i.status)if(i.gzhead.extra){for(r=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>r&&(t.adler=ki(t.adler,i.pending_buf,i.pending-r,r)),io(t),r=i.pending,i.pending!==i.pending_buf_size));)so(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>r&&(t.adler=ki(t.adler,i.pending_buf,i.pending-r,r)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){r=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(t.adler=ki(t.adler,i.pending_buf,i.pending-r,r)),io(t),r=i.pending,i.pending===i.pending_buf_size)){n=1;break}n=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,so(i,n)}while(0!==n);i.gzhead.hcrc&&i.pending>r&&(t.adler=ki(t.adler,i.pending_buf,i.pending-r,r)),0===n&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){r=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(t.adler=ki(t.adler,i.pending_buf,i.pending-r,r)),io(t),r=i.pending,i.pending===i.pending_buf_size)){n=1;break}n=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,so(i,n)}while(0!==n);i.gzhead.hcrc&&i.pending>r&&(t.adler=ki(t.adler,i.pending_buf,i.pending-r,r)),0===n&&(i.status=Wi)}else i.status=Wi;if(i.status===Wi&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&io(t),i.pending+2<=i.pending_buf_size&&(so(i,255&t.adler),so(i,t.adler>>8&255),t.adler=0,i.status=Ki)):i.status=Ki),0!==i.pending){if(io(t),0===t.avail_out)return i.last_flush=-1,ji}else if(0===t.avail_in&&eo(e)<=eo(o)&&e!==Ti)return to(t,Li);if(i.status===Ji&&0!==t.avail_in)return to(t,Li);if(0!==t.avail_in||0!==i.lookahead||e!==Pi&&i.status!==Ji){let r=i.strategy===qi?((t,e)=>{let r;for(;;){if(0===t.lookahead&&(ho(t),0===t.lookahead)){if(e===Pi)return 1;break}if(t.match_length=0,r=Di(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(oo(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===Ti?(oo(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(oo(t,!1),0===t.strm.avail_out)?1:2})(i,e):i.strategy===Vi?((t,e)=>{let r,n,i,o;const s=t.window;for(;;){if(t.lookahead<=Hi){if(ho(t),t.lookahead<=Hi&&e===Pi)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(i=t.strstart-1,n=s[i],n===s[++i]&&n===s[++i]&&n===s[++i])){o=t.strstart+Hi;do{}while(n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&i<o);t.match_length=Hi-(o-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(r=Di(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=Di(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(oo(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===Ti?(oo(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(oo(t,!1),0===t.strm.avail_out)?1:2})(i,e):mo[i.level].func(i,e);if(3!==r&&4!==r||(i.status=Ji),1===r||3===r)return 0===t.avail_out&&(i.last_flush=-1),ji;if(2===r&&(e===Ri?Oi(i):e!==Fi&&(Ai(i,0,0,!1),e===Ii&&(ro(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),io(t),0===t.avail_out))return i.last_flush=-1,ji}return e!==Ti?ji:i.wrap<=0?Ni:(2===i.wrap?(so(i,255&t.adler),so(i,t.adler>>8&255),so(i,t.adler>>16&255),so(i,t.adler>>24&255),so(i,255&t.total_in),so(i,t.total_in>>8&255),so(i,t.total_in>>16&255),so(i,t.total_in>>24&255)):(ao(i,t.adler>>>16),ao(i,65535&t.adler)),io(t),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?ji:Ni)},deflateEnd:t=>{if(!t||!t.state)return Bi;const e=t.state.status;return 42!==e&&69!==e&&73!==e&&91!==e&&e!==Wi&&e!==Ki&&e!==Ji?to(t,Bi):(t.state=null,e===Ki?to(t,Ui):ji)},deflateSetDictionary:(t,e)=>{let r=e.length;if(!t||!t.state)return Bi;const n=t.state,i=n.wrap;if(2===i||1===i&&42!==n.status||n.lookahead)return Bi;if(1===i&&(t.adler=_i(t.adler,e,r,0)),n.wrap=0,r>=n.w_size){0===i&&(ro(n.head),n.strstart=0,n.block_start=0,n.insert=0);let t=new Uint8Array(n.w_size);t.set(e.subarray(r-n.w_size,r),0),e=t,r=n.w_size}const o=t.avail_in,s=t.next_in,a=t.input;for(t.avail_in=r,t.next_in=0,t.input=e,ho(n);n.lookahead>=3;){let t=n.strstart,e=n.lookahead-2;do{n.ins_h=no(n,n.ins_h,n.window[t+3-1]),n.prev[t&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=t,t++}while(--e);n.strstart=t,n.lookahead=2,ho(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=s,t.input=a,t.avail_in=o,n.wrap=i,ji},deflateInfo:"pako deflate (from Nodeca project)"};const _o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var xo=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const r=e.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(const e in r)_o(r,e)&&(t[e]=r[e])}}return t},ko=t=>{let e=0;for(let r=0,n=t.length;r<n;r++)e+=t[r].length;const r=new Uint8Array(e);for(let e=0,n=0,i=t.length;e<i;e++){let i=t[e];r.set(i,n),n+=i.length}return r};let Mo=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){Mo=!1}const So=new Uint8Array(256);for(let t=0;t<256;t++)So[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;So[254]=So[254]=1;var Eo=t=>{let e,r,n,i,o,s=t.length,a=0;for(i=0;i<s;i++)r=t.charCodeAt(i),55296==(64512&r)&&i+1<s&&(n=t.charCodeAt(i+1),56320==(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),i++)),a+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(a),o=0,i=0;o<a;i++)r=t.charCodeAt(i),55296==(64512&r)&&i+1<s&&(n=t.charCodeAt(i+1),56320==(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?e[o++]=r:r<2048?(e[o++]=192|r>>>6,e[o++]=128|63&r):r<65536?(e[o++]=224|r>>>12,e[o++]=128|r>>>6&63,e[o++]=128|63&r):(e[o++]=240|r>>>18,e[o++]=128|r>>>12&63,e[o++]=128|r>>>6&63,e[o++]=128|63&r);return e},Ao=(t,e)=>{let r,n;const i=e||t.length,o=new Array(2*i);for(n=0,r=0;r<i;){let e=t[r++];if(e<128){o[n++]=e;continue}let s=So[e];if(s>4)o[n++]=65533,r+=s-1;else{for(e&=2===s?31:3===s?15:7;s>1&&r<i;)e=e<<6|63&t[r++],s--;s>1?o[n++]=65533:e<65536?o[n++]=e:(e-=65536,o[n++]=55296|e>>10&1023,o[n++]=56320|1023&e)}}return((t,e)=>{if(e<65534&&t.subarray&&Mo)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let r="";for(let n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r})(o,n)},Co=(t,e)=>{(e=e||t.length)>t.length&&(e=t.length);let r=e-1;for(;r>=0&&128==(192&t[r]);)r--;return r<0||0===r?e:r+So[t[r]]>e?r:e};var Do=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Oo=Object.prototype.toString,{Z_NO_FLUSH:Po,Z_SYNC_FLUSH:Ro,Z_FULL_FLUSH:Io,Z_FINISH:To,Z_OK:Fo,Z_STREAM_END:jo,Z_DEFAULT_COMPRESSION:No,Z_DEFAULT_STRATEGY:Bo,Z_DEFLATED:Uo}=Si;function Lo(t){this.options=xo({level:No,method:Uo,chunkSize:16384,windowBits:15,memLevel:8,strategy:Bo},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Do,this.strm.avail_out=0;let r=bo.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(r!==Fo)throw new Error(Mi[r]);if(e.header&&bo.deflateSetHeader(this.strm,e.header),e.dictionary){let t;if(t="string"==typeof e.dictionary?Eo(e.dictionary):"[object ArrayBuffer]"===Oo.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,r=bo.deflateSetDictionary(this.strm,t),r!==Fo)throw new Error(Mi[r]);this._dict_set=!0}}function $o(t,e){const r=new Lo(e);if(r.push(t,!0),r.err)throw r.msg||Mi[r.err];return r.result}Lo.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize;let i,o;if(this.ended)return!1;for(o=e===~~e?e:!0===e?To:Po,"string"==typeof t?r.input=Eo(t):"[object ArrayBuffer]"===Oo.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;)if(0===r.avail_out&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),(o===Ro||o===Io)&&r.avail_out<=6)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else{if(i=bo.deflate(r,o),i===jo)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),i=bo.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===Fo;if(0!==r.avail_out){if(o>0&&r.next_out>0)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else if(0===r.avail_in)break}else this.onData(r.output)}return!0},Lo.prototype.onData=function(t){this.chunks.push(t)},Lo.prototype.onEnd=function(t){t===Fo&&(this.result=ko(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var zo={Deflate:Lo,deflate:$o,deflateRaw:function(t,e){return(e=e||{}).raw=!0,$o(t,e)},gzip:function(t,e){return(e=e||{}).gzip=!0,$o(t,e)},constants:Si};var qo=function(t,e){let r,n,i,o,s,a,l,u,h,c,f,d,p,m,g,v,w,y,b,_,x,k,M,S;const E=t.state;r=t.next_in,M=t.input,n=r+(t.avail_in-5),i=t.next_out,S=t.output,o=i-(e-t.avail_out),s=i+(t.avail_out-257),a=E.dmax,l=E.wsize,u=E.whave,h=E.wnext,c=E.window,f=E.hold,d=E.bits,p=E.lencode,m=E.distcode,g=(1<<E.lenbits)-1,v=(1<<E.distbits)-1;t:do{d<15&&(f+=M[r++]<<d,d+=8,f+=M[r++]<<d,d+=8),w=p[f&g];e:for(;;){if(y=w>>>24,f>>>=y,d-=y,y=w>>>16&255,0===y)S[i++]=65535&w;else{if(!(16&y)){if(0==(64&y)){w=p[(65535&w)+(f&(1<<y)-1)];continue e}if(32&y){E.mode=12;break t}t.msg="invalid literal/length code",E.mode=30;break t}b=65535&w,y&=15,y&&(d<y&&(f+=M[r++]<<d,d+=8),b+=f&(1<<y)-1,f>>>=y,d-=y),d<15&&(f+=M[r++]<<d,d+=8,f+=M[r++]<<d,d+=8),w=m[f&v];r:for(;;){if(y=w>>>24,f>>>=y,d-=y,y=w>>>16&255,!(16&y)){if(0==(64&y)){w=m[(65535&w)+(f&(1<<y)-1)];continue r}t.msg="invalid distance code",E.mode=30;break t}if(_=65535&w,y&=15,d<y&&(f+=M[r++]<<d,d+=8,d<y&&(f+=M[r++]<<d,d+=8)),_+=f&(1<<y)-1,_>a){t.msg="invalid distance too far back",E.mode=30;break t}if(f>>>=y,d-=y,y=i-o,_>y){if(y=_-y,y>u&&E.sane){t.msg="invalid distance too far back",E.mode=30;break t}if(x=0,k=c,0===h){if(x+=l-y,y<b){b-=y;do{S[i++]=c[x++]}while(--y);x=i-_,k=S}}else if(h<y){if(x+=l+h-y,y-=h,y<b){b-=y;do{S[i++]=c[x++]}while(--y);if(x=0,h<b){y=h,b-=y;do{S[i++]=c[x++]}while(--y);x=i-_,k=S}}}else if(x+=h-y,y<b){b-=y;do{S[i++]=c[x++]}while(--y);x=i-_,k=S}for(;b>2;)S[i++]=k[x++],S[i++]=k[x++],S[i++]=k[x++],b-=3;b&&(S[i++]=k[x++],b>1&&(S[i++]=k[x++]))}else{x=i-_;do{S[i++]=S[x++],S[i++]=S[x++],S[i++]=S[x++],b-=3}while(b>2);b&&(S[i++]=S[x++],b>1&&(S[i++]=S[x++]))}break}}break}}while(r<n&&i<s);b=d>>3,r-=b,d-=b<<3,f&=(1<<d)-1,t.next_in=r,t.next_out=i,t.avail_in=r<n?n-r+5:5-(r-n),t.avail_out=i<s?s-i+257:257-(i-s),E.hold=f,E.bits=d};const Vo=15,Yo=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Zo=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Go=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Xo=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var Ho=(t,e,r,n,i,o,s,a)=>{const l=a.bits;let u,h,c,f,d,p,m=0,g=0,v=0,w=0,y=0,b=0,_=0,x=0,k=0,M=0,S=null,E=0;const A=new Uint16Array(16),C=new Uint16Array(16);let D,O,P,R=null,I=0;for(m=0;m<=Vo;m++)A[m]=0;for(g=0;g<n;g++)A[e[r+g]]++;for(y=l,w=Vo;w>=1&&0===A[w];w--);if(y>w&&(y=w),0===w)return i[o++]=20971520,i[o++]=20971520,a.bits=1,0;for(v=1;v<w&&0===A[v];v++);for(y<v&&(y=v),x=1,m=1;m<=Vo;m++)if(x<<=1,x-=A[m],x<0)return-1;if(x>0&&(0===t||1!==w))return-1;for(C[1]=0,m=1;m<Vo;m++)C[m+1]=C[m]+A[m];for(g=0;g<n;g++)0!==e[r+g]&&(s[C[e[r+g]]++]=g);if(0===t?(S=R=s,p=19):1===t?(S=Yo,E-=257,R=Zo,I-=257,p=256):(S=Go,R=Xo,p=-1),M=0,g=0,m=v,d=o,b=y,_=0,c=-1,k=1<<y,f=k-1,1===t&&k>852||2===t&&k>592)return 1;for(;;){D=m-_,s[g]<p?(O=0,P=s[g]):s[g]>p?(O=R[I+s[g]],P=S[E+s[g]]):(O=96,P=0),u=1<<m-_,h=1<<b,v=h;do{h-=u,i[d+(M>>_)+h]=D<<24|O<<16|P|0}while(0!==h);for(u=1<<m-1;M&u;)u>>=1;if(0!==u?(M&=u-1,M+=u):M=0,g++,0==--A[m]){if(m===w)break;m=e[r+s[g]]}if(m>y&&(M&f)!==c){for(0===_&&(_=y),d+=v,b=m-_,x=1<<b;b+_<w&&(x-=A[b+_],!(x<=0));)b++,x<<=1;if(k+=1<<b,1===t&&k>852||2===t&&k>592)return 1;c=M&f,i[c]=y<<24|b<<16|d-o|0}}return 0!==M&&(i[d+M]=m-_<<24|64<<16|0),a.bits=y,0};const{Z_FINISH:Qo,Z_BLOCK:Wo,Z_TREES:Ko,Z_OK:Jo,Z_STREAM_END:ts,Z_NEED_DICT:es,Z_STREAM_ERROR:rs,Z_DATA_ERROR:ns,Z_MEM_ERROR:is,Z_BUF_ERROR:os,Z_DEFLATED:ss}=Si,as=12,ls=30,us=t=>(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);function hs(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const cs=t=>{if(!t||!t.state)return rs;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,Jo},fs=t=>{if(!t||!t.state)return rs;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,cs(t)},ds=(t,e)=>{let r;if(!t||!t.state)return rs;const n=t.state;return e<0?(r=0,e=-e):(r=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?rs:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,fs(t))},ps=(t,e)=>{if(!t)return rs;const r=new hs;t.state=r,r.window=null;const n=ds(t,e);return n!==Jo&&(t.state=null),n};let ms,gs,vs=!0;const ws=t=>{if(vs){ms=new Int32Array(512),gs=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(Ho(1,t.lens,0,288,ms,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;Ho(2,t.lens,0,32,gs,0,t.work,{bits:5}),vs=!1}t.lencode=ms,t.lenbits=9,t.distcode=gs,t.distbits=5},ys=(t,e,r,n)=>{let i;const o=t.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),n>=o.wsize?(o.window.set(e.subarray(r-o.wsize,r),0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>n&&(i=n),o.window.set(e.subarray(r-n,r-n+i),o.wnext),(n-=i)?(o.window.set(e.subarray(r-n,r),0),o.wnext=n,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0};var bs={inflateReset:fs,inflateReset2:ds,inflateResetKeep:cs,inflateInit:t=>ps(t,15),inflateInit2:ps,inflate:(t,e)=>{let r,n,i,o,s,a,l,u,h,c,f,d,p,m,g,v,w,y,b,_,x,k,M=0;const S=new Uint8Array(4);let E,A;const C=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return rs;r=t.state,r.mode===as&&(r.mode=13),s=t.next_out,i=t.output,l=t.avail_out,o=t.next_in,n=t.input,a=t.avail_in,u=r.hold,h=r.bits,c=a,f=l,k=Jo;t:for(;;)switch(r.mode){case 1:if(0===r.wrap){r.mode=13;break}for(;h<16;){if(0===a)break t;a--,u+=n[o++]<<h,h+=8}if(2&r.wrap&&35615===u){r.check=0,S[0]=255&u,S[1]=u>>>8&255,r.check=ki(r.check,S,2,0),u=0,h=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&u)<<8)+(u>>8))%31){t.msg="incorrect header check",r.mode=ls;break}if((15&u)!==ss){t.msg="unknown compression method",r.mode=ls;break}if(u>>>=4,h-=4,x=8+(15&u),0===r.wbits)r.wbits=x;else if(x>r.wbits){t.msg="invalid window size",r.mode=ls;break}r.dmax=1<<r.wbits,t.adler=r.check=1,r.mode=512&u?10:as,u=0,h=0;break;case 2:for(;h<16;){if(0===a)break t;a--,u+=n[o++]<<h,h+=8}if(r.flags=u,(255&r.flags)!==ss){t.msg="unknown compression method",r.mode=ls;break}if(57344&r.flags){t.msg="unknown header flags set",r.mode=ls;break}r.head&&(r.head.text=u>>8&1),512&r.flags&&(S[0]=255&u,S[1]=u>>>8&255,r.check=ki(r.check,S,2,0)),u=0,h=0,r.mode=3;case 3:for(;h<32;){if(0===a)break t;a--,u+=n[o++]<<h,h+=8}r.head&&(r.head.time=u),512&r.flags&&(S[0]=255&u,S[1]=u>>>8&255,S[2]=u>>>16&255,S[3]=u>>>24&255,r.check=ki(r.check,S,4,0)),u=0,h=0,r.mode=4;case 4:for(;h<16;){if(0===a)break t;a--,u+=n[o++]<<h,h+=8}r.head&&(r.head.xflags=255&u,r.head.os=u>>8),512&r.flags&&(S[0]=255&u,S[1]=u>>>8&255,r.check=ki(r.check,S,2,0)),u=0,h=0,r.mode=5;case 5:if(1024&r.flags){for(;h<16;){if(0===a)break t;a--,u+=n[o++]<<h,h+=8}r.length=u,r.head&&(r.head.extra_len=u),512&r.flags&&(S[0]=255&u,S[1]=u>>>8&255,r.check=ki(r.check,S,2,0)),u=0,h=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(d=r.length,d>a&&(d=a),d&&(r.head&&(x=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(o,o+d),x)),512&r.flags&&(r.check=ki(r.check,n,d,o)),a-=d,o+=d,r.length-=d),r.length))break t;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===a)break t;d=0;do{x=n[o+d++],r.head&&x&&r.length<65536&&(r.head.name+=String.fromCharCode(x))}while(x&&d<a);if(512&r.flags&&(r.check=ki(r.check,n,d,o)),a-=d,o+=d,x)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===a)break t;d=0;do{x=n[o+d++],r.head&&x&&r.length<65536&&(r.head.comment+=String.fromCharCode(x))}while(x&&d<a);if(512&r.flags&&(r.check=ki(r.check,n,d,o)),a-=d,o+=d,x)break t}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;h<16;){if(0===a)break t;a--,u+=n[o++]<<h,h+=8}if(u!==(65535&r.check)){t.msg="header crc mismatch",r.mode=ls;break}u=0,h=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=as;break;case 10:for(;h<32;){if(0===a)break t;a--,u+=n[o++]<<h,h+=8}t.adler=r.check=us(u),u=0,h=0,r.mode=11;case 11:if(0===r.havedict)return t.next_out=s,t.avail_out=l,t.next_in=o,t.avail_in=a,r.hold=u,r.bits=h,es;t.adler=r.check=1,r.mode=as;case as:if(e===Wo||e===Ko)break t;case 13:if(r.last){u>>>=7&h,h-=7&h,r.mode=27;break}for(;h<3;){if(0===a)break t;a--,u+=n[o++]<<h,h+=8}switch(r.last=1&u,u>>>=1,h-=1,3&u){case 0:r.mode=14;break;case 1:if(ws(r),r.mode=20,e===Ko){u>>>=2,h-=2;break t}break;case 2:r.mode=17;break;case 3:t.msg="invalid block type",r.mode=ls}u>>>=2,h-=2;break;case 14:for(u>>>=7&h,h-=7&h;h<32;){if(0===a)break t;a--,u+=n[o++]<<h,h+=8}if((65535&u)!=(u>>>16^65535)){t.msg="invalid stored block lengths",r.mode=ls;break}if(r.length=65535&u,u=0,h=0,r.mode=15,e===Ko)break t;case 15:r.mode=16;case 16:if(d=r.length,d){if(d>a&&(d=a),d>l&&(d=l),0===d)break t;i.set(n.subarray(o,o+d),s),a-=d,o+=d,l-=d,s+=d,r.length-=d;break}r.mode=as;break;case 17:for(;h<14;){if(0===a)break t;a--,u+=n[o++]<<h,h+=8}if(r.nlen=257+(31&u),u>>>=5,h-=5,r.ndist=1+(31&u),u>>>=5,h-=5,r.ncode=4+(15&u),u>>>=4,h-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=ls;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;h<3;){if(0===a)break t;a--,u+=n[o++]<<h,h+=8}r.lens[C[r.have++]]=7&u,u>>>=3,h-=3}for(;r.have<19;)r.lens[C[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,E={bits:r.lenbits},k=Ho(0,r.lens,0,19,r.lencode,0,r.work,E),r.lenbits=E.bits,k){t.msg="invalid code lengths set",r.mode=ls;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;M=r.lencode[u&(1<<r.lenbits)-1],g=M>>>24,v=M>>>16&255,w=65535&M,!(g<=h);){if(0===a)break t;a--,u+=n[o++]<<h,h+=8}if(w<16)u>>>=g,h-=g,r.lens[r.have++]=w;else{if(16===w){for(A=g+2;h<A;){if(0===a)break t;a--,u+=n[o++]<<h,h+=8}if(u>>>=g,h-=g,0===r.have){t.msg="invalid bit length repeat",r.mode=ls;break}x=r.lens[r.have-1],d=3+(3&u),u>>>=2,h-=2}else if(17===w){for(A=g+3;h<A;){if(0===a)break t;a--,u+=n[o++]<<h,h+=8}u>>>=g,h-=g,x=0,d=3+(7&u),u>>>=3,h-=3}else{for(A=g+7;h<A;){if(0===a)break t;a--,u+=n[o++]<<h,h+=8}u>>>=g,h-=g,x=0,d=11+(127&u),u>>>=7,h-=7}if(r.have+d>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=ls;break}for(;d--;)r.lens[r.have++]=x}}if(r.mode===ls)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=ls;break}if(r.lenbits=9,E={bits:r.lenbits},k=Ho(1,r.lens,0,r.nlen,r.lencode,0,r.work,E),r.lenbits=E.bits,k){t.msg="invalid literal/lengths set",r.mode=ls;break}if(r.distbits=6,r.distcode=r.distdyn,E={bits:r.distbits},k=Ho(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,E),r.distbits=E.bits,k){t.msg="invalid distances set",r.mode=ls;break}if(r.mode=20,e===Ko)break t;case 20:r.mode=21;case 21:if(a>=6&&l>=258){t.next_out=s,t.avail_out=l,t.next_in=o,t.avail_in=a,r.hold=u,r.bits=h,qo(t,f),s=t.next_out,i=t.output,l=t.avail_out,o=t.next_in,n=t.input,a=t.avail_in,u=r.hold,h=r.bits,r.mode===as&&(r.back=-1);break}for(r.back=0;M=r.lencode[u&(1<<r.lenbits)-1],g=M>>>24,v=M>>>16&255,w=65535&M,!(g<=h);){if(0===a)break t;a--,u+=n[o++]<<h,h+=8}if(v&&0==(240&v)){for(y=g,b=v,_=w;M=r.lencode[_+((u&(1<<y+b)-1)>>y)],g=M>>>24,v=M>>>16&255,w=65535&M,!(y+g<=h);){if(0===a)break t;a--,u+=n[o++]<<h,h+=8}u>>>=y,h-=y,r.back+=y}if(u>>>=g,h-=g,r.back+=g,r.length=w,0===v){r.mode=26;break}if(32&v){r.back=-1,r.mode=as;break}if(64&v){t.msg="invalid literal/length code",r.mode=ls;break}r.extra=15&v,r.mode=22;case 22:if(r.extra){for(A=r.extra;h<A;){if(0===a)break t;a--,u+=n[o++]<<h,h+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,h-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;M=r.distcode[u&(1<<r.distbits)-1],g=M>>>24,v=M>>>16&255,w=65535&M,!(g<=h);){if(0===a)break t;a--,u+=n[o++]<<h,h+=8}if(0==(240&v)){for(y=g,b=v,_=w;M=r.distcode[_+((u&(1<<y+b)-1)>>y)],g=M>>>24,v=M>>>16&255,w=65535&M,!(y+g<=h);){if(0===a)break t;a--,u+=n[o++]<<h,h+=8}u>>>=y,h-=y,r.back+=y}if(u>>>=g,h-=g,r.back+=g,64&v){t.msg="invalid distance code",r.mode=ls;break}r.offset=w,r.extra=15&v,r.mode=24;case 24:if(r.extra){for(A=r.extra;h<A;){if(0===a)break t;a--,u+=n[o++]<<h,h+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,h-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=ls;break}r.mode=25;case 25:if(0===l)break t;if(d=f-l,r.offset>d){if(d=r.offset-d,d>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=ls;break}d>r.wnext?(d-=r.wnext,p=r.wsize-d):p=r.wnext-d,d>r.length&&(d=r.length),m=r.window}else m=i,p=s-r.offset,d=r.length;d>l&&(d=l),l-=d,r.length-=d;do{i[s++]=m[p++]}while(--d);0===r.length&&(r.mode=21);break;case 26:if(0===l)break t;i[s++]=r.length,l--,r.mode=21;break;case 27:if(r.wrap){for(;h<32;){if(0===a)break t;a--,u|=n[o++]<<h,h+=8}if(f-=l,t.total_out+=f,r.total+=f,f&&(t.adler=r.check=r.flags?ki(r.check,i,f,s-f):_i(r.check,i,f,s-f)),f=l,(r.flags?u:us(u))!==r.check){t.msg="incorrect data check",r.mode=ls;break}u=0,h=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;h<32;){if(0===a)break t;a--,u+=n[o++]<<h,h+=8}if(u!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=ls;break}u=0,h=0}r.mode=29;case 29:k=ts;break t;case ls:k=ns;break t;case 31:return is;case 32:default:return rs}return t.next_out=s,t.avail_out=l,t.next_in=o,t.avail_in=a,r.hold=u,r.bits=h,(r.wsize||f!==t.avail_out&&r.mode<ls&&(r.mode<27||e!==Qo))&&ys(t,t.output,t.next_out,f-t.avail_out),c-=t.avail_in,f-=t.avail_out,t.total_in+=c,t.total_out+=f,r.total+=f,r.wrap&&f&&(t.adler=r.check=r.flags?ki(r.check,i,f,t.next_out-f):_i(r.check,i,f,t.next_out-f)),t.data_type=r.bits+(r.last?64:0)+(r.mode===as?128:0)+(20===r.mode||15===r.mode?256:0),(0===c&&0===f||e===Qo)&&k===Jo&&(k=os),k},inflateEnd:t=>{if(!t||!t.state)return rs;let e=t.state;return e.window&&(e.window=null),t.state=null,Jo},inflateGetHeader:(t,e)=>{if(!t||!t.state)return rs;const r=t.state;return 0==(2&r.wrap)?rs:(r.head=e,e.done=!1,Jo)},inflateSetDictionary:(t,e)=>{const r=e.length;let n,i,o;return t&&t.state?(n=t.state,0!==n.wrap&&11!==n.mode?rs:11===n.mode&&(i=1,i=_i(i,e,r,0),i!==n.check)?ns:(o=ys(t,e,r,r),o?(n.mode=31,is):(n.havedict=1,Jo))):rs},inflateInfo:"pako inflate (from Nodeca project)"};var _s=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const xs=Object.prototype.toString,{Z_NO_FLUSH:ks,Z_FINISH:Ms,Z_OK:Ss,Z_STREAM_END:Es,Z_NEED_DICT:As,Z_STREAM_ERROR:Cs,Z_DATA_ERROR:Ds,Z_MEM_ERROR:Os}=Si;function Ps(t){this.options=xo({chunkSize:65536,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Do,this.strm.avail_out=0;let r=bs.inflateInit2(this.strm,e.windowBits);if(r!==Ss)throw new Error(Mi[r]);if(this.header=new _s,bs.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=Eo(e.dictionary):"[object ArrayBuffer]"===xs.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=bs.inflateSetDictionary(this.strm,e.dictionary),r!==Ss)))throw new Error(Mi[r])}function Rs(t,e){const r=new Ps(e);if(r.push(t),r.err)throw r.msg||Mi[r.err];return r.result}Ps.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let o,s,a;if(this.ended)return!1;for(s=e===~~e?e:!0===e?Ms:ks,"[object ArrayBuffer]"===xs.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(0===r.avail_out&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),o=bs.inflate(r,s),o===As&&i&&(o=bs.inflateSetDictionary(r,i),o===Ss?o=bs.inflate(r,s):o===Ds&&(o=As));r.avail_in>0&&o===Es&&r.state.wrap>0&&0!==t[r.next_in];)bs.inflateReset(r),o=bs.inflate(r,s);switch(o){case Cs:case Ds:case As:case Os:return this.onEnd(o),this.ended=!0,!1}if(a=r.avail_out,r.next_out&&(0===r.avail_out||o===Es))if("string"===this.options.to){let t=Co(r.output,r.next_out),e=r.next_out-t,i=Ao(r.output,t);r.next_out=e,r.avail_out=n-e,e&&r.output.set(r.output.subarray(t,t+e),0),this.onData(i)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(o!==Ss||0!==a){if(o===Es)return o=bs.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(0===r.avail_in)break}}return!0},Ps.prototype.onData=function(t){this.chunks.push(t)},Ps.prototype.onEnd=function(t){t===Ss&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=ko(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var Is={Inflate:Ps,inflate:Rs,inflateRaw:function(t,e){return(e=e||{}).raw=!0,Rs(t,e)},ungzip:Rs,constants:Si};const{Deflate:Ts,deflate:Fs,deflateRaw:js,gzip:Ns}=zo,{Inflate:Bs,inflate:Us,inflateRaw:Ls,ungzip:$s}=Is;var zs=Us;function qs(t){const e=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),r=zs(e);return new DataView(r.buffer,r.byteOffset,r.byteLength)}const Vs={ignoreImageData:!1,onlyFirst:!1};class Ys extends bn{constructor(t){super(t),this._nextIFD=0}get isMultiPage(){let t=0;for(this.decodeHeader();this._nextIFD;)if(t++,this.decodeIFD({ignoreImageData:!0},!0),2===t)return!0;if(1===t)return!1;throw Zs("ifdCount",t)}get pageCount(){let t=0;for(this.decodeHeader();this._nextIFD;)t++,this.decodeIFD({ignoreImageData:!0},!0);if(t>0)return t;throw Zs("ifdCount",t)}decode(t={}){t=Object.assign({},Vs,t);const e=[];for(this.decodeHeader();this._nextIFD;)if(e.push(this.decodeIFD(t,!0)),t.onlyFirst)return[e[0]];return e}decodeHeader(){const t=this.readUint16();if(18761===t)this.setLittleEndian();else{if(19789!==t)throw new Error(`invalid byte order: 0x${t.toString(16)}`);this.setBigEndian()}if(42!==this.readUint16())throw new Error("not a TIFF file");this._nextIFD=this.readUint32()}decodeIFD(t,e){let r;if(this.seek(this._nextIFD),e)r=new jn;else{if(!t.kind)throw new Error("kind is missing");r=new Cn(t.kind)}const n=this.readUint16();for(let t=0;t<n;t++)this.decodeIFDEntry(r);if(!t.ignoreImageData){if(!(r instanceof jn))throw new Error("must be a tiff ifd");this.decodeImageData(r)}return this._nextIFD=this.readUint32(),r}decodeIFDEntry(t){const e=this.offset,r=this.readUint16(),n=this.readUint16(),i=this.readUint32();if(n<1||n>12)return void this.skip(4);(function(t,e){const r=Dn.get(t);if(!r)throw new Error(`type not found: ${t}`);return r[0]*e})(n,i)>4&&this.seek(this.readUint32());const o=function(t,e,r){const n=Dn.get(e);if(!n)throw new Error(`type not found: ${e}`);return n[1](t,r)}(this,n,i);if(t.fields.set(r,o),34665===r||34853===r){let e=this.offset,n="exif";34665===r?n="exif":34853===r&&(n="gps"),this._nextIFD=o,t[n]=this.decodeIFD({kind:n,ignoreImageData:!0},!1),this.offset=e}this.seek(e),this.skip(12)}decodeImageData(t){const e=t.orientation;if(e&&1!==e)throw Zs("orientation",e);switch(t.type){case 0:case 1:case 2:case 3:this.readStripData(t);break;default:throw Zs("image type",t.type)}if(this.applyPredictor(t),this.convertAlpha(t),0===t.type){const e=t.bitsPerSample,r=Math.pow(2,e)-1;for(let e=0;e<t.data.length;e++)t.data[e]=r-t.data[e]}}readStripData(t){const e=t.width,r=t.height,n=t.bitsPerSample,i=t.sampleFormat,o=e*r*t.samplesPerPixel,s=function(t,e,r){if(8===e)return new Uint8Array(t);if(16===e)return new Uint16Array(t);if(32===e&&3===r)return new Float32Array(t);throw Zs("bit depth / sample format",`${e} / ${r}`)}(o,n,i),a=t.rowsPerStrip*e*t.samplesPerPixel,l=t.stripOffsets,u=t.stripByteCounts;let h=o,c=0;for(let e=0;e<l.length;e++){let r=new DataView(this.buffer,l[e],u[e]),o=h>a?a:h;h-=o;let f=r;switch(t.compression){case 1:break;case 5:f=Tn(r);break;case 8:f=qs(r);break;case 2:throw Zs("Compression","CCITT Group 3");case 32773:throw Zs("Compression","PackBits");default:throw Zs("Compression",t.compression)}c=this.fillUncompressed(n,i,s,f,c,o)}t.data=s}fillUncompressed(t,e,r,n,i,o){if(8===t)return function(t,e,r,n){for(let i=0;i<n;i++)t[r++]=e.getUint8(i);return r}(r,n,i,o);if(16===t)return function(t,e,r,n,i){for(let o=0;o<2*n;o+=2)t[r++]=e.getUint16(o,i);return r}(r,n,i,o,this.isLittleEndian());if(32===t&&3===e)return function(t,e,r,n,i){for(let o=0;o<4*n;o+=4)t[r++]=e.getFloat32(o,i);return r}(r,n,i,o,this.isLittleEndian());throw Zs("bitDepth",t)}applyPredictor(t){const e=t.bitsPerSample;switch(t.predictor){case 1:break;case 2:if(8===e)!function(t,e,r){let n=0;for(;n<t.length;){for(let i=r;i<e*r;i+=r)for(let e=0;e<r;e++)t[n+i+e]=t[n+i+e]+t[n+i-(r-e)]&255;n+=e*r}}(t.data,t.width,t.components);else{if(16!==e)throw new Error(`Horizontal differencing is only supported for images with a bit depth of ${e}`);!function(t,e,r){let n=0;for(;n<t.length;){for(let i=r;i<e*r;i+=r)for(let e=0;e<r;e++)t[n+i+e]=t[n+i+e]+t[n+i-(r-e)]&65535;n+=e*r}}(t.data,t.width,t.components)}break;default:throw new Error(`invalid predictor: ${t.predictor}`)}}convertAlpha(t){if(t.alpha&&t.associatedAlpha){const{data:e,components:r,maxSampleValue:n}=t;for(let t=0;t<e.length;t+=r){const i=e[t+r-1];for(let o=0;o<r-1;o++)e[t+o]=Math.round(e[t+o]*n/i)}}}}function Zs(t,e){return new Error(`Unsupported ${t}: ${e}`)}function Gs(t={}){let{algorithm:e="matchToPrevious",ignoreBorder:r=[0,0]}=t;this.checkProcessable("matchAndCrop",{bitDepth:[8,16]});let n="matchToPrevious"===e,i=this[0],o=[];o[0]={position:[0,0],image:this[0]};let s=[0,0];for(let t=1;t<this.length;t++){let e=i.getBestMatch(this[t],{border:r});o[t]={position:[e[0]+s[0],e[1]+s[1]],image:this[t]},n&&(s[0]+=e[0],s[1]+=e[1],i=this[t])}let a=0,l=0,u=0,h=0;for(let t=0;t<o.length;t++){let e=o[t];e.position[0]>a&&(a=e.position[0]),e.position[0]<l&&(l=e.position[0]),e.position[1]>u&&(u=e.position[1]),e.position[1]<h&&(h=e.position[1])}l=0-l,h=0-h;for(let t=0;t<o.length;t++){let e=o[t];e.crop=e.image.crop({x:a-e.position[0],y:u-e.position[1],width:i.width-l-a,height:i.height-h-u})}let c=[];for(let t=0;t<o.length;t++)c[t]=o[t].crop;return new oa(c)}function Xs(){this.checkProcessable("min",{bitDepth:[8,16]});let t=this[0].min;for(let e=1;e<this.length;e++)for(let r=0;r<t.length;r++)t[r]=Math.min(t[r],this[e].min[r]);return t}function Hs(){this.checkProcessable("min",{bitDepth:[8,16]});let t=this[0].max;for(let e=1;e<this.length;e++)for(let r=0;r<t.length;r++)t[r]=Math.max(t[r],this[e].max[r]);return t}function Qs(t){let e=t.reduce(((t,e)=>t+e));if(0===e)throw new Error("unreachable");let r,n=0,i=0,o=e/2;for(;;){if(t[n]>0){if(void 0!==r)return(r+n)/2;if(i+=t[n],i>o)return n;i===o&&(r=n)}n++}}function Ws(t){let e=0,r=0;for(let n=0;n<t.length;n++)e+=t[n],r+=t[n]*n;return 0===e?0:r/e}function Ks(){this.checkProcessable("median",{bitDepth:[8,16]});let t=this.getHistograms({maxSlots:this[0].maxValue+1}),e=new Array(t.length);for(let r=0;r<t.length;r++){let n=t[r];e[r]=Qs(n)}return e}function Js(t){this.checkProcessable("min",{bitDepth:[8,16]});let e=this[0].getHistogram(t);for(let r=1;r<this.length;r++){let n=this[r].getHistogram(t);for(let t=0;t<e.length;t++)e[t]+=n[t]}return e}function ta(t){this.checkProcessable("min",{bitDepth:[8,16]});let e=this[0].getHistograms(t),r=e[0].length;for(let n=1;n<this.length;n++){let i=this[n].getHistograms(t);for(let t=0;t<e.length;t++)for(let n=0;n<r;n++)e[t][n]+=i[t][n]}return e}function ea(){this.checkProcessable("averageImage",{bitDepth:[8,16]});let t=new Uint32Array(this[0].data.length);for(let e=0;e<this.length;e++){let r=this[e];for(let e=0;e<this[0].data.length;e++)t[e]+=r.data[e]}let e=Qc.createFrom(this[0]),r=e.data;for(let e=0;e<this[0].data.length;e++)r[e]=t[e]/this.length;return e}function ra(){this.checkProcessable("max",{bitDepth:[8,16]});let t=Qc.createFrom(this[0]);t.data.fill(0);for(const e of this)for(let r=0;r<t.data.length;r++)t.data[r]=Math.max(e.data[r],t.data[r]);return t}function na(){this.checkProcessable("max",{bitDepth:[8,16]});let t=Qc.createFrom(this[0]);t.data.fill(t.maxValue);for(const e of this)for(let r=0;r<t.data.length;r++)t.data[r]=Math.min(e.data[r],t.data[r]);return t}let ia={configurable:!0,enumerable:!1,get:void 0};class oa extends Array{constructor(t){if(Array.isArray(t)){super(t.length);for(let e=0;e<t.length;e++)this[e]=t[e]}else"number"==typeof t?super(t):super();this.computed=null}static load(t){return Promise.all(t.map(Qc.load)).then((t=>new oa(t)))}static extendMethod(t,e,r={}){let{inPlace:n=!1,returnThis:i=!0,partialArgs:o=[]}=r;return oa.prototype[t]=n?function(...t){this.computed=null;let r=e.apply(this,[...o,...t]);return i?this:r}:function(...t){return e.apply(this,[...o,...t])},oa}static extendProperty(t,e,r={}){let{partialArgs:n=[]}=r;return ia.get=function(){if(null===this.computed)this.computed={};else if(nn()(t,this.computed))return this.computed[t];let r=e.apply(this,n);return this.computed[t]=r,r},Object.defineProperty(oa.prototype,t,ia),oa}checkProcessable(t,e={}){if("string"!=typeof t)throw new TypeError("checkProcessable requires as first parameter the processName (a string)");if(0===this.size)throw new TypeError(`The process: ${t} can not be applied on an empty stack`);this[0].checkProcessable(t,e);for(let r=1;r<this.length;r++){if((void 0===e.sameSize||e.sameSize)&&this[0].width!==this[r].width)throw new TypeError(`The process: ${t} can not be applied if width is not identical in all images`);if((void 0===e.sameSize||e.sameSize)&&this[0].height!==this[r].height)throw new TypeError(`The process: ${t} can not be applied if height is not identical in all images`);if((void 0===e.sameAlpha||e.sameAlpha)&&this[0].alpha!==this[r].alpha)throw new TypeError(`The process: ${t} can not be applied if alpha is not identical in all images`);if((void 0===e.sameBitDepth||e.sameBitDepth)&&this[0].bitDepth!==this[r].bitDepth)throw new TypeError(`The process: ${t} can not be applied if bitDepth is not identical in all images`);if((void 0===e.sameColorModel||e.sameColorModel)&&this[0].colorModel!==this[r].colorModel)throw new TypeError(`The process: ${t} can not be applied if colorModel is not identical in all images`);if((void 0===e.sameNumberChannels||e.sameNumberChannels)&&this[0].channels!==this[r].channels)throw new TypeError(`The process: ${t} can not be applied if channels is not identical in all images`)}}}Array[Symbol.species]||(oa.prototype.map=function(t,e){if("function"!=typeof t)throw new TypeError(`${t} is not a function`);let r=new oa(this.length);for(let n=0;n<this.length;n++)r[n]=t.call(e,this[n],n,this);return r}),function(t){t.extendMethod("matchAndCrop",Gs),t.extendMethod("getMin",Xs),t.extendMethod("getMax",Hs),t.extendMethod("getMedian",Ks),t.extendMethod("getHistogram",Js),t.extendMethod("getHistograms",ta),t.extendMethod("getAverage",ea),t.extendMethod("getAverageImage",ea),t.extendMethod("getMaxImage",ra),t.extendMethod("getMinImage",na)}(oa);const sa=/^data:[a-z]+\/(?:[a-z]+);base64,/;function aa(t,e){const r=vn()(t);if(r)switch(r.mime){case"image/png":return function(t){const e=function(t,e){return new Ir(t,e).decode()}(t);let r,n=e.channels,i=0;2===n||4===n?(r=n-1,i=1):r=n;if(e.palette)return function(t){const e=t.width*t.height,r=t.palette[0].length,n=new Uint8Array(e*r),i=8/t.depth,o=t.depth<8?i:1,s=parseInt("1".repeat(t.depth),2),a=4===r;let l=0;for(let r=0;r<e;r++){const e=Math.floor(r/o);let u=t.data[e];t.depth<8&&(u=u>>>t.depth*(i-1-r%i)&s);const h=t.palette[u];n[l++]=h[0],n[l++]=h[1],n[l++]=h[2],a&&(n[l++]=h[3])}return new Qc(t.width,t.height,n,{components:3,alpha:a,bitDepth:8})}(e);return new Qc(e.width,e.height,e.data,{components:r,alpha:i,bitDepth:e.depth})}(t);case"image/jpeg":return function(t){const e=(0,mn.decode)(t);let r;e.exif&&(r=la(e.exif));const n=(0,Zr.decode)(t,{useTArray:!0,maxMemoryUsageInMB:1024});return new Qc(n.width,n.height,n.data,{meta:r})}(t);case"image/tiff":return function(t){let e=function(t,e){return new Ys(t).decode(e)}(t);return 1===e.length?ua(e[0]):new oa(e.map(ua))}(t);default:return ha(n(r.mime))}return ha(n("application/octet-stream"));function n(r){return e||Hr(t,r)}}function la(t){const e={tiff:{fields:t.fields,tags:t.map}};return t.exif&&(e.exif=t.exif),t.gps&&(e.gps=t.gps),e}function ua(t){if(3===t.type){const e=new Uint16Array(3*t.width*t.height),r=t.palette;let n=0;for(let i=0;i<t.data.length;i++){const o=r[t.data[i]];e[n++]=o[0],e[n++]=o[1],e[n++]=o[2]}return new Qc(t.width,t.height,e,{components:3,alpha:t.alpha,colorModel:an,bitDepth:16,meta:la(t)})}return new Qc(t.width,t.height,t.data,{components:2===t.type?3:1,alpha:t.alpha,colorModel:2===t.type?an:sn,bitDepth:t.bitsPerSample.length?t.bitsPerSample[0]:t.bitsPerSample,meta:la(t)})}function ha(t,e){return e=e||{},new Promise((function(r,n){let i=new Wr;i.onload=function(){let t=i.width,n=i.height,o=Kr(t,n).getContext("2d");o.drawImage(i,0,0,t,n);let s=o.getImageData(0,0,t,n).data;r(new Qc(t,n,s,e))},i.onerror=function(){n(new Error(`Could not load ${t}`))},i.src=t}))}const ca={getValueXY(t,e,r){return this.data[(e*this.width+t)*this.channels+r]},setValueXY(t,e,r,n){return this.data[(e*this.width+t)*this.channels+r]=n,this.computed=null,this},getValue(t,e){return this.data[t*this.channels+e]},setValue(t,e,r){return this.data[t*this.channels+e]=r,this.computed=null,this},getPixelXY(t,e){return this.getPixel(e*this.width+t)},setPixelXY(t,e,r){return this.setPixel(e*this.width+t,r)},getPixel(t){const e=new Array(this.channels),r=t*this.channels;for(let t=0;t<this.channels;t++)e[t]=this.data[r+t];return e},setPixel(t,e){const r=t*this.channels;for(let t=0;t<e.length;t++)this.data[r+t]=e[t];return this.computed=null,this}};function fa(t){return{width:t.width,height:t.height,components:t.components,alpha:t.alpha,colorModel:t.colorModel,bitDepth:t.bitDepth}}function da(t,e,r,n={}){const{out:i}=e;if(void 0===i)return n.copy?t.clone():Qc.createFrom(t,r);{if(!Qc.isImage(i))throw new TypeError("out must be an Image object");const e=Object.assign(fa(t),r);for(const t in e)if(i[t]!==e[t])throw new RangeError(`cannot use out. Its ${t} must be "${e[t]}" (found "${i[t]}")`);return i}}function pa(t,e,r){if(void 0!==e.inPlace&&"boolean"!=typeof e.inPlace)throw new TypeError("inPlace option must be a boolean");if(e.inPlace){if(void 0!==e.out)throw new TypeError("out option must not be set if inPlace option is true");return t}return da(t,e,null,r)}function ma(t={}){this.checkProcessable("abs",{bitDepth:[32]});const e=pa(this,t);return function(t,e){for(let r=0;r<t.data.length;r++)e.data[r]=Math.abs(t.data[r])}(this,e),e}function ga(t={}){this.checkProcessable("invert",{bitDepth:[1,8,16]});const e=pa(this,t);return 1===this.bitDepth?function(t,e){for(let r=0;r<t.data.length;r++)e.data[r]=~t.data[r]}(this,e):(function(t,e){for(let r=0;r<t.data.length;r+=t.channels)for(let n=0;n<t.components;n++)e.data[r+n]=t.maxValue-t.data[r+n]}(this,e),this!==e&&function(t,e){if(1===t.alpha&&1===e.alpha)for(let r=0;r<t.size;r++)e.data[r*e.channels+e.components]=t.data[r*t.channels+t.components]}(this,e)),e}function va(){this.checkProcessable("flipX",{bitDepth:[8,16]});for(let t=0;t<this.height;t++){let e=t*this.width*this.channels;for(let t=0;t<Math.floor(this.width/2);t++){let r=t*this.channels+e,n=(this.width-t-1)*this.channels+e;for(let t=0;t<this.channels;t++){let e=this.data[r+t];this.data[r+t]=this.data[n+t],this.data[n+t]=e}}}return this}function wa(){this.checkProcessable("flipY",{bitDepth:[8,16]});for(let t=0;t<Math.floor(this.height/2);t++)for(let e=0;e<this.width;e++){let r=e*this.channels+t*this.width*this.channels,n=e*this.channels+(this.height-1-t)*this.channels*this.width;for(let t=0;t<this.channels;t++){let e=this.data[r+t];this.data[r+t]=this.data[n+t],this.data[n+t]=e}}return this}function ya(t={}){const{radius:e=1}=t;if(e<1)throw new Error("radius must be greater than 1");const r=2*e+1,n=new Array(r);for(let t=0;t<r;t++){n[t]=new Array(r);for(let e=0;e<r;e++)n[t][e]=1/(r*r)}return this.convolution(n)}var ba=r(5520),_a=r.n(ba);function xa(t,e={}){let{channels:r,allowAlpha:n,defaultAlpha:i}=e;return"boolean"!=typeof n&&(n=!0),void 0===r?function(t,e){let r=e?t.channels:t.components,n=new Array(r);for(let t=0;t<r;t++)n[t]=t;return n}(t,i):function(t,e,r){Array.isArray(e)||(e=[e]);for(let n=0;n<e.length;n++)e[n]=ka(t,e[n],r);return e}(t,r,n)}function ka(t,e,r=!0){if(void 0===e)throw new RangeError(`validateChannel : the channel has to be >=0 and <${t.channels}`);if("string"==typeof e){switch(t.colorModel){case sn:break;case an:if("rgb".includes(e))switch(e){case"r":e=0;break;case"g":e=1;break;case"b":e=2}break;case ln:if("hsl".includes(e))switch(e){case"h":e=0;break;case"s":e=1;break;case"l":e=2}break;case un:if("hsv".includes(e))switch(e){case"h":e=0;break;case"s":e=1;break;case"v":e=2}break;case hn:if("cmyk".includes(e))switch(e){case"c":e=0;break;case"m":e=1;break;case"y":e=2;break;case"k":e=3}break;default:throw new Error(`Unexpected color model: ${t.colorModel}`)}if("a"===e){if(!t.alpha)throw new Error("validateChannel : the image does not contain alpha channel");e=t.components}if("string"==typeof e)throw new Error(`validateChannel : undefined channel: ${e}`)}if(e>=t.channels)throw new RangeError(`validateChannel : the channel has to be >=0 and <${t.channels}`);if(!r&&e>=t.components)throw new RangeError("validateChannel : alpha channel may not be selected");return e}function Ma(t={}){let{radius:e=1,border:r="copy",channels:n}=t;if(this.checkProcessable("medianFilter",{bitDepth:[8,16]}),e<1)throw new Error("radius must be greater than 0");n=xa(this,n);let i=e,o=e,s=Qc.createFrom(this),a=new Array((2*i+1)*(2*o+1));for(let t=0;t<n.length;t++){let e=n[t];for(let t=o;t<this.height-o;t++)for(let r=i;r<this.width-i;r++){let n=0;for(let s=-o;s<=o;s++)for(let o=-i;o<=i;o++){let i=((t+s)*this.width+r+o)*this.channels+e;a[n++]=this.data[i]}let l=(t*this.width+r)*this.channels+e;s.data[l]=_a()(a)}}if(this.alpha&&!n.includes(this.channels))for(let t=this.components;t<this.data.length;t+=this.channels)s.data[t]=this.data[t];return s.setBorder({size:[i,o],algorithm:r}),s}function Sa(t={}){let{radius:e=1,sigma:r,channels:n,border:i="copy"}=t;this.checkProcessable("gaussian",{bitDepth:[8,16]});const o=function(t,e){const r=2*t+1,n=new Array(r),i=e||.3*(.5*(r-1)-1)+.8,o=-.5/(i*i);let s=0;for(let e=0;e<r;e++){const r=e-t,i=Math.exp(o*r*r);n[e]=i,s+=i}for(let t=0;t<r;t++)n[t]/=s;return n}(e,r);return this.convolution([o,o],{border:i,channels:n,algorithm:"separable"})}const Ea=[[-1,0,1],[-2,0,2],[-1,0,1]],Aa=[[-1,-2,-1],[0,0,0],[1,2,1]],Ca=[[3,0,-3],[10,0,-10],[3,0,-3]],Da=[[3,10,3],[0,0,0],[-3,-10,-3]];var Oa=r(414),Pa=r(8336),Ra=r.n(Pa);function Ia(t,e){return Math.round(Math.min(Math.max(t,0),e.maxValue))}function Ta(t,e,r){if(void 0===r){const n=t.length+e.length-1;r=new Array(n)}!function(t){for(var e=0;e<t.length;e++)t[e]=0}(r);for(var n=0;n<t.length;n++)for(var i=0;i<e.length;i++)r[n+i]+=t[n]*e[i];return r}r(9645),r(995);function Fa(t,e,r,n){const i=new Array(t.length);let o,s,a,l;l=e[1],a=(l.length-1)/2,s=new Array(r+l.length-1),o=new Array(r);for(let e=0;e<n;e++){for(let n=0;n<r;n++)o[n]=t[e*r+n];Ta(o,l,s);for(let t=0;t<r;t++)i[e*r+t]=s[a+t]}l=e[0],a=(l.length-1)/2,s=new Array(n+l.length-1),o=new Array(n);for(let t=0;t<r;t++){for(let e=0;e<n;e++)o[e]=i[e*r+t];Ta(o,l,s);for(let e=0;e<n;e++)i[e*r+t]=s[a+e]}return i}var ja=r(4805);const Na=" ".repeat(2),Ba=" ".repeat(4);function Ua(t,e={}){const{maxRows:r=15,maxColumns:n=10,maxNumSize:i=8}=e;return`${t.constructor.name} {\n${Na}[\n${Ba}${function(t,e,r,n){const{rows:i,columns:o}=t,s=Math.min(i,e),a=Math.min(o,r),l=[];for(let e=0;e<s;e++){let r=[];for(let i=0;i<a;i++)r.push(La(t.get(e,i),n));l.push(`${r.join(" ")}`)}a!==o&&(l[l.length-1]+=` ... ${o-r} more columns`);s!==i&&l.push(`... ${i-e} more rows`);return l.join(`\n${Ba}`)}(t,r,n,i)}\n${Na}]\n${Na}rows: ${t.rows}\n${Na}columns: ${t.columns}\n}`}function La(t,e){const r=String(t);if(r.length<=e)return r.padEnd(e," ");const n=t.toPrecision(e-2);if(n.length<=e)return n;const i=t.toExponential(e-2),o=i.indexOf("e"),s=i.slice(o);return i.slice(0,e-s.length)+s}function $a(t,e,r){let n=r?t.rows:t.rows-1;if(e<0||e>n)throw new RangeError("Row index out of range")}function za(t,e,r){let n=r?t.columns:t.columns-1;if(e<0||e>n)throw new RangeError("Column index out of range")}function qa(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.columns)throw new RangeError("vector size must be the same as the number of columns");return e}function Va(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.rows)throw new RangeError("vector size must be the same as the number of rows");return e}function Ya(t,e){if("object"!=typeof e)throw new TypeError("unexpected type for row indices");if(e.some((e=>e<0||e>=t.rows)))throw new RangeError("row indices are out of range");return Array.isArray(e)||(e=Array.from(e)),e}function Za(t,e){if("object"!=typeof e)throw new TypeError("unexpected type for column indices");if(e.some((e=>e<0||e>=t.columns)))throw new RangeError("column indices are out of range");return Array.isArray(e)||(e=Array.from(e)),e}function Ga(t,e,r,n,i){if(5!==arguments.length)throw new RangeError("expected 4 arguments");if(Ha("startRow",e),Ha("endRow",r),Ha("startColumn",n),Ha("endColumn",i),e>r||n>i||e<0||e>=t.rows||r<0||r>=t.rows||n<0||n>=t.columns||i<0||i>=t.columns)throw new RangeError("Submatrix indices are out of range")}function Xa(t,e=0){let r=[];for(let n=0;n<t;n++)r.push(e);return r}function Ha(t,e){if("number"!=typeof e)throw new TypeError(`${t} must be a number`)}function Qa(t){if(t.isEmpty())throw new Error("Empty matrix has no elements to index")}class Wa{static from1DArray(t,e,r){if(t*e!==r.length)throw new RangeError("data length does not match given dimensions");let n=new Ja(t,e);for(let i=0;i<t;i++)for(let t=0;t<e;t++)n.set(i,t,r[i*e+t]);return n}static rowVector(t){let e=new Ja(1,t.length);for(let r=0;r<t.length;r++)e.set(0,r,t[r]);return e}static columnVector(t){let e=new Ja(t.length,1);for(let r=0;r<t.length;r++)e.set(r,0,t[r]);return e}static zeros(t,e){return new Ja(t,e)}static ones(t,e){return new Ja(t,e).fill(1)}static rand(t,e,r={}){if("object"!=typeof r)throw new TypeError("options must be an object");const{random:n=Math.random}=r;let i=new Ja(t,e);for(let r=0;r<t;r++)for(let t=0;t<e;t++)i.set(r,t,n());return i}static randInt(t,e,r={}){if("object"!=typeof r)throw new TypeError("options must be an object");const{min:n=0,max:i=1e3,random:o=Math.random}=r;if(!Number.isInteger(n))throw new TypeError("min must be an integer");if(!Number.isInteger(i))throw new TypeError("max must be an integer");if(n>=i)throw new RangeError("min must be smaller than max");let s=i-n,a=new Ja(t,e);for(let r=0;r<t;r++)for(let t=0;t<e;t++){let e=n+Math.round(o()*s);a.set(r,t,e)}return a}static eye(t,e,r){void 0===e&&(e=t),void 0===r&&(r=1);let n=Math.min(t,e),i=this.zeros(t,e);for(let t=0;t<n;t++)i.set(t,t,r);return i}static diag(t,e,r){let n=t.length;void 0===e&&(e=n),void 0===r&&(r=e);let i=Math.min(n,e,r),o=this.zeros(e,r);for(let e=0;e<i;e++)o.set(e,e,t[e]);return o}static min(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);let r=t.rows,n=t.columns,i=new Ja(r,n);for(let o=0;o<r;o++)for(let r=0;r<n;r++)i.set(o,r,Math.min(t.get(o,r),e.get(o,r)));return i}static max(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);let r=t.rows,n=t.columns,i=new this(r,n);for(let o=0;o<r;o++)for(let r=0;r<n;r++)i.set(o,r,Math.max(t.get(o,r),e.get(o,r)));return i}static checkMatrix(t){return Wa.isMatrix(t)?t:new Ja(t)}static isMatrix(t){return null!=t&&"Matrix"===t.klass}get size(){return this.rows*this.columns}apply(t){if("function"!=typeof t)throw new TypeError("callback must be a function");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)t.call(this,e,r);return this}to1DArray(){let t=[];for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)t.push(this.get(e,r));return t}to2DArray(){let t=[];for(let e=0;e<this.rows;e++){t.push([]);for(let r=0;r<this.columns;r++)t[e].push(this.get(e,r))}return t}toJSON(){return this.to2DArray()}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isEmpty(){return 0===this.rows||0===this.columns}isSymmetric(){if(this.isSquare()){for(let t=0;t<this.rows;t++)for(let e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}isEchelonForm(){let t=0,e=0,r=-1,n=!0,i=!1;for(;t<this.rows&&n;){for(e=0,i=!1;e<this.columns&&!1===i;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>r?(i=!0,r=e):(n=!1,i=!0);t++}return n}isReducedEchelonForm(){let t=0,e=0,r=-1,n=!0,i=!1;for(;t<this.rows&&n;){for(e=0,i=!1;e<this.columns&&!1===i;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>r?(i=!0,r=e):(n=!1,i=!0);for(let r=e+1;r<this.rows;r++)0!==this.get(t,r)&&(n=!1);t++}return n}echelonForm(){let t=this.clone(),e=0,r=0;for(;e<t.rows&&r<t.columns;){let n=e;for(let i=e;i<t.rows;i++)t.get(i,r)>t.get(n,r)&&(n=i);if(0===t.get(n,r))r++;else{t.swapRows(e,n);let i=t.get(e,r);for(let n=r;n<t.columns;n++)t.set(e,n,t.get(e,n)/i);for(let n=e+1;n<t.rows;n++){let i=t.get(n,r)/t.get(e,r);t.set(n,r,0);for(let o=r+1;o<t.columns;o++)t.set(n,o,t.get(n,o)-t.get(e,o)*i)}e++,r++}}return t}reducedEchelonForm(){let t=this.echelonForm(),e=t.columns,r=t.rows,n=r-1;for(;n>=0;)if(0===t.maxRow(n))n--;else{let i=0,o=!1;for(;i<r&&!1===o;)1===t.get(n,i)?o=!0:i++;for(let r=0;r<n;r++){let o=t.get(r,i);for(let s=i;s<e;s++){let e=t.get(r,s)-o*t.get(n,s);t.set(r,s,e)}}n--}return t}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(t={}){if("object"!=typeof t)throw new TypeError("options must be an object");const{rows:e=1,columns:r=1}=t;if(!Number.isInteger(e)||e<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(r)||r<=0)throw new TypeError("columns must be a positive integer");let n=new Ja(this.rows*e,this.columns*r);for(let t=0;t<e;t++)for(let e=0;e<r;e++)n.setSubMatrix(this,this.rows*t,this.columns*e);return n}fill(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,t);return this}neg(){return this.mulS(-1)}getRow(t){$a(this,t);let e=[];for(let r=0;r<this.columns;r++)e.push(this.get(t,r));return e}getRowVector(t){return Ja.rowVector(this.getRow(t))}setRow(t,e){$a(this,t),e=qa(this,e);for(let r=0;r<this.columns;r++)this.set(t,r,e[r]);return this}swapRows(t,e){$a(this,t),$a(this,e);for(let r=0;r<this.columns;r++){let n=this.get(t,r);this.set(t,r,this.get(e,r)),this.set(e,r,n)}return this}getColumn(t){za(this,t);let e=[];for(let r=0;r<this.rows;r++)e.push(this.get(r,t));return e}getColumnVector(t){return Ja.columnVector(this.getColumn(t))}setColumn(t,e){za(this,t),e=Va(this,e);for(let r=0;r<this.rows;r++)this.set(r,t,e[r]);return this}swapColumns(t,e){za(this,t),za(this,e);for(let r=0;r<this.rows;r++){let n=this.get(r,t);this.set(r,t,this.get(r,e)),this.set(r,e,n)}return this}addRowVector(t){t=qa(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t[r]);return this}subRowVector(t){t=qa(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t[r]);return this}mulRowVector(t){t=qa(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t[r]);return this}divRowVector(t){t=qa(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t[r]);return this}addColumnVector(t){t=Va(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t[e]);return this}subColumnVector(t){t=Va(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t[e]);return this}mulColumnVector(t){t=Va(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t[e]);return this}divColumnVector(t){t=Va(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t[e]);return this}mulRow(t,e){$a(this,t);for(let r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)*e);return this}mulColumn(t,e){za(this,t);for(let r=0;r<this.rows;r++)this.set(r,t,this.get(r,t)*e);return this}max(){if(this.isEmpty())return NaN;let t=this.get(0,0);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.get(e,r)>t&&(t=this.get(e,r));return t}maxIndex(){Qa(this);let t=this.get(0,0),e=[0,0];for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.get(r,n)>t&&(t=this.get(r,n),e[0]=r,e[1]=n);return e}min(){if(this.isEmpty())return NaN;let t=this.get(0,0);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.get(e,r)<t&&(t=this.get(e,r));return t}minIndex(){Qa(this);let t=this.get(0,0),e=[0,0];for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.get(r,n)<t&&(t=this.get(r,n),e[0]=r,e[1]=n);return e}maxRow(t){if($a(this,t),this.isEmpty())return NaN;let e=this.get(t,0);for(let r=1;r<this.columns;r++)this.get(t,r)>e&&(e=this.get(t,r));return e}maxRowIndex(t){$a(this,t),Qa(this);let e=this.get(t,0),r=[t,0];for(let n=1;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n),r[1]=n);return r}minRow(t){if($a(this,t),this.isEmpty())return NaN;let e=this.get(t,0);for(let r=1;r<this.columns;r++)this.get(t,r)<e&&(e=this.get(t,r));return e}minRowIndex(t){$a(this,t),Qa(this);let e=this.get(t,0),r=[t,0];for(let n=1;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n),r[1]=n);return r}maxColumn(t){if(za(this,t),this.isEmpty())return NaN;let e=this.get(0,t);for(let r=1;r<this.rows;r++)this.get(r,t)>e&&(e=this.get(r,t));return e}maxColumnIndex(t){za(this,t),Qa(this);let e=this.get(0,t),r=[0,t];for(let n=1;n<this.rows;n++)this.get(n,t)>e&&(e=this.get(n,t),r[0]=n);return r}minColumn(t){if(za(this,t),this.isEmpty())return NaN;let e=this.get(0,t);for(let r=1;r<this.rows;r++)this.get(r,t)<e&&(e=this.get(r,t));return e}minColumnIndex(t){za(this,t),Qa(this);let e=this.get(0,t),r=[0,t];for(let n=1;n<this.rows;n++)this.get(n,t)<e&&(e=this.get(n,t),r[0]=n);return r}diag(){let t=Math.min(this.rows,this.columns),e=[];for(let r=0;r<t;r++)e.push(this.get(r,r));return e}norm(t="frobenius"){let e=0;if("max"===t)return this.max();if("frobenius"===t){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)e+=this.get(t,r)*this.get(t,r);return Math.sqrt(e)}throw new RangeError(`unknown norm type: ${t}`)}cumulativeSum(){let t=0;for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)t+=this.get(e,r),this.set(e,r,t);return this}dot(t){Wa.isMatrix(t)&&(t=t.to1DArray());let e=this.to1DArray();if(e.length!==t.length)throw new RangeError("vectors do not have the same size");let r=0;for(let n=0;n<e.length;n++)r+=e[n]*t[n];return r}mmul(t){t=Ja.checkMatrix(t);let e=this.rows,r=this.columns,n=t.columns,i=new Ja(e,n),o=new Float64Array(r);for(let s=0;s<n;s++){for(let e=0;e<r;e++)o[e]=t.get(e,s);for(let t=0;t<e;t++){let e=0;for(let n=0;n<r;n++)e+=this.get(t,n)*o[n];i.set(t,s,e)}}return i}strassen2x2(t){t=Ja.checkMatrix(t);let e=new Ja(2,2);const r=this.get(0,0),n=t.get(0,0),i=this.get(0,1),o=t.get(0,1),s=this.get(1,0),a=t.get(1,0),l=this.get(1,1),u=t.get(1,1),h=(r+l)*(n+u),c=(s+l)*n,f=r*(o-u),d=l*(a-n),p=(r+i)*u,m=h+d-p+(i-l)*(a+u),g=f+p,v=c+d,w=h-c+f+(s-r)*(n+o);return e.set(0,0,m),e.set(0,1,g),e.set(1,0,v),e.set(1,1,w),e}strassen3x3(t){t=Ja.checkMatrix(t);let e=new Ja(3,3);const r=this.get(0,0),n=this.get(0,1),i=this.get(0,2),o=this.get(1,0),s=this.get(1,1),a=this.get(1,2),l=this.get(2,0),u=this.get(2,1),h=this.get(2,2),c=t.get(0,0),f=t.get(0,1),d=t.get(0,2),p=t.get(1,0),m=t.get(1,1),g=t.get(1,2),v=t.get(2,0),w=t.get(2,1),y=t.get(2,2),b=(r-o)*(-f+m),_=(-r+o+s)*(c-f+m),x=(o+s)*(-c+f),k=r*c,M=(-r+l+u)*(c-d+g),S=(-r+l)*(d-g),E=(l+u)*(-c+d),A=(-i+u+h)*(m+v-w),C=(i-h)*(m-w),D=i*v,O=(u+h)*(-v+w),P=(-i+s+a)*(g+v-y),R=(i-a)*(g-y),I=(s+a)*(-v+y),T=k+D+n*p,F=(r+n+i-o-s-u-h)*m+_+x+k+A+D+O,j=k+M+E+(r+n+i-s-a-l-u)*g+D+P+I,N=b+s*(-c+f+p-m-g-v+y)+_+k+D+P+R,B=b+_+x+k+a*w,U=D+P+R+I+o*d,L=k+M+S+u*(-c+d+p-m-g-v+w)+A+C+D,$=A+C+D+O+l*f,z=k+M+S+E+h*y;return e.set(0,0,T),e.set(0,1,F),e.set(0,2,j),e.set(1,0,N),e.set(1,1,B),e.set(1,2,U),e.set(2,0,L),e.set(2,1,$),e.set(2,2,z),e}mmulStrassen(t){t=Ja.checkMatrix(t);let e=this.clone(),r=e.rows,n=e.columns,i=t.rows,o=t.columns;function s(t,e,r){let n=t.rows,i=t.columns;if(n===e&&i===r)return t;{let n=Wa.zeros(e,r);return n=n.setSubMatrix(t,0,0),n}}n!==i&&console.warn(`Multiplying ${r} x ${n} and ${i} x ${o} matrix: dimensions do not match.`);let a=Math.max(r,i),l=Math.max(n,o);return e=s(e,a,l),function t(e,r,n,i){if(n<=512||i<=512)return e.mmul(r);n%2==1&&i%2==1?(e=s(e,n+1,i+1),r=s(r,n+1,i+1)):n%2==1?(e=s(e,n+1,i),r=s(r,n+1,i)):i%2==1&&(e=s(e,n,i+1),r=s(r,n,i+1));let o=parseInt(e.rows/2,10),a=parseInt(e.columns/2,10),l=e.subMatrix(0,o-1,0,a-1),u=r.subMatrix(0,o-1,0,a-1),h=e.subMatrix(0,o-1,a,e.columns-1),c=r.subMatrix(0,o-1,a,r.columns-1),f=e.subMatrix(o,e.rows-1,0,a-1),d=r.subMatrix(o,r.rows-1,0,a-1),p=e.subMatrix(o,e.rows-1,a,e.columns-1),m=r.subMatrix(o,r.rows-1,a,r.columns-1),g=t(Wa.add(l,p),Wa.add(u,m),o,a),v=t(Wa.add(f,p),u,o,a),w=t(l,Wa.sub(c,m),o,a),y=t(p,Wa.sub(d,u),o,a),b=t(Wa.add(l,h),m,o,a),_=t(Wa.sub(f,l),Wa.add(u,c),o,a),x=t(Wa.sub(h,p),Wa.add(d,m),o,a),k=Wa.add(g,y);k.sub(b),k.add(x);let M=Wa.add(w,b),S=Wa.add(v,y),E=Wa.sub(g,v);E.add(w),E.add(_);let A=Wa.zeros(2*k.rows,2*k.columns);return A=A.setSubMatrix(k,0,0),A=A.setSubMatrix(M,k.rows,0),A=A.setSubMatrix(S,0,k.columns),A=A.setSubMatrix(E,k.rows,k.columns),A.subMatrix(0,n-1,0,i-1)}(e,t=s(t,a,l),a,l)}scaleRows(t={}){if("object"!=typeof t)throw new TypeError("options must be an object");const{min:e=0,max:r=1}=t;if(!Number.isFinite(e))throw new TypeError("min must be a number");if(!Number.isFinite(r))throw new TypeError("max must be a number");if(e>=r)throw new RangeError("min must be smaller than max");let n=new Ja(this.rows,this.columns);for(let t=0;t<this.rows;t++){const i=this.getRow(t);i.length>0&&(0,ja.Z)(i,{min:e,max:r,output:i}),n.setRow(t,i)}return n}scaleColumns(t={}){if("object"!=typeof t)throw new TypeError("options must be an object");const{min:e=0,max:r=1}=t;if(!Number.isFinite(e))throw new TypeError("min must be a number");if(!Number.isFinite(r))throw new TypeError("max must be a number");if(e>=r)throw new RangeError("min must be smaller than max");let n=new Ja(this.rows,this.columns);for(let t=0;t<this.columns;t++){const i=this.getColumn(t);i.length&&(0,ja.Z)(i,{min:e,max:r,output:i}),n.setColumn(t,i)}return n}flipRows(){const t=Math.ceil(this.columns/2);for(let e=0;e<this.rows;e++)for(let r=0;r<t;r++){let t=this.get(e,r),n=this.get(e,this.columns-1-r);this.set(e,r,n),this.set(e,this.columns-1-r,t)}return this}flipColumns(){const t=Math.ceil(this.rows/2);for(let e=0;e<this.columns;e++)for(let r=0;r<t;r++){let t=this.get(r,e),n=this.get(this.rows-1-r,e);this.set(r,e,n),this.set(this.rows-1-r,e,t)}return this}kroneckerProduct(t){t=Ja.checkMatrix(t);let e=this.rows,r=this.columns,n=t.rows,i=t.columns,o=new Ja(e*n,r*i);for(let s=0;s<e;s++)for(let e=0;e<r;e++)for(let r=0;r<n;r++)for(let a=0;a<i;a++)o.set(n*s+r,i*e+a,this.get(s,e)*t.get(r,a));return o}kroneckerSum(t){if(t=Ja.checkMatrix(t),!this.isSquare()||!t.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let e=this.rows,r=t.rows,n=this.kroneckerProduct(Ja.eye(r,r)),i=Ja.eye(e,e).kroneckerProduct(t);return n.add(i)}transpose(){let t=new Ja(this.columns,this.rows);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)t.set(r,e,this.get(e,r));return t}sortRows(t=Ka){for(let e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}sortColumns(t=Ka){for(let e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}subMatrix(t,e,r,n){Ga(this,t,e,r,n);let i=new Ja(e-t+1,n-r+1);for(let o=t;o<=e;o++)for(let e=r;e<=n;e++)i.set(o-t,e-r,this.get(o,e));return i}subMatrixRow(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=this.columns-1),e>r||e<0||e>=this.columns||r<0||r>=this.columns)throw new RangeError("Argument out of range");let n=new Ja(t.length,r-e+1);for(let i=0;i<t.length;i++)for(let o=e;o<=r;o++){if(t[i]<0||t[i]>=this.rows)throw new RangeError(`Row index out of range: ${t[i]}`);n.set(i,o-e,this.get(t[i],o))}return n}subMatrixColumn(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=this.rows-1),e>r||e<0||e>=this.rows||r<0||r>=this.rows)throw new RangeError("Argument out of range");let n=new Ja(r-e+1,t.length);for(let i=0;i<t.length;i++)for(let o=e;o<=r;o++){if(t[i]<0||t[i]>=this.columns)throw new RangeError(`Column index out of range: ${t[i]}`);n.set(o-e,i,this.get(o,t[i]))}return n}setSubMatrix(t,e,r){if((t=Ja.checkMatrix(t)).isEmpty())return this;Ga(this,e,e+t.rows-1,r,r+t.columns-1);for(let n=0;n<t.rows;n++)for(let i=0;i<t.columns;i++)this.set(e+n,r+i,t.get(n,i));return this}selection(t,e){let r=function(t,e,r){return{row:Ya(t,e),column:Za(t,r)}}(this,t,e),n=new Ja(t.length,e.length);for(let t=0;t<r.row.length;t++){let e=r.row[t];for(let i=0;i<r.column.length;i++){let o=r.column[i];n.set(t,i,this.get(e,o))}}return n}trace(){let t=Math.min(this.rows,this.columns),e=0;for(let r=0;r<t;r++)e+=this.get(r,r);return e}clone(){let t=new Ja(this.rows,this.columns);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)t.set(e,r,this.get(e,r));return t}sum(t){switch(t){case"row":return function(t){let e=Xa(t.rows);for(let r=0;r<t.rows;++r)for(let n=0;n<t.columns;++n)e[r]+=t.get(r,n);return e}(this);case"column":return function(t){let e=Xa(t.columns);for(let r=0;r<t.rows;++r)for(let n=0;n<t.columns;++n)e[n]+=t.get(r,n);return e}(this);case void 0:return function(t){let e=0;for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)e+=t.get(r,n);return e}(this);default:throw new Error(`invalid option: ${t}`)}}product(t){switch(t){case"row":return function(t){let e=Xa(t.rows,1);for(let r=0;r<t.rows;++r)for(let n=0;n<t.columns;++n)e[r]*=t.get(r,n);return e}(this);case"column":return function(t){let e=Xa(t.columns,1);for(let r=0;r<t.rows;++r)for(let n=0;n<t.columns;++n)e[n]*=t.get(r,n);return e}(this);case void 0:return function(t){let e=1;for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)e*=t.get(r,n);return e}(this);default:throw new Error(`invalid option: ${t}`)}}mean(t){const e=this.sum(t);switch(t){case"row":for(let t=0;t<this.rows;t++)e[t]/=this.columns;return e;case"column":for(let t=0;t<this.columns;t++)e[t]/=this.rows;return e;case void 0:return e/this.size;default:throw new Error(`invalid option: ${t}`)}}variance(t,e={}){if("object"==typeof t&&(e=t,t=void 0),"object"!=typeof e)throw new TypeError("options must be an object");const{unbiased:r=!0,mean:n=this.mean(t)}=e;if("boolean"!=typeof r)throw new TypeError("unbiased must be a boolean");switch(t){case"row":if(!Array.isArray(n))throw new TypeError("mean must be an array");return function(t,e,r){const n=t.rows,i=t.columns,o=[];for(let s=0;s<n;s++){let n=0,a=0,l=0;for(let e=0;e<i;e++)l=t.get(s,e)-r[s],n+=l,a+=l*l;e?o.push((a-n*n/i)/(i-1)):o.push((a-n*n/i)/i)}return o}(this,r,n);case"column":if(!Array.isArray(n))throw new TypeError("mean must be an array");return function(t,e,r){const n=t.rows,i=t.columns,o=[];for(let s=0;s<i;s++){let i=0,a=0,l=0;for(let e=0;e<n;e++)l=t.get(e,s)-r[s],i+=l,a+=l*l;e?o.push((a-i*i/n)/(n-1)):o.push((a-i*i/n)/n)}return o}(this,r,n);case void 0:if("number"!=typeof n)throw new TypeError("mean must be a number");return function(t,e,r){const n=t.rows,i=t.columns,o=n*i;let s=0,a=0,l=0;for(let e=0;e<n;e++)for(let n=0;n<i;n++)l=t.get(e,n)-r,s+=l,a+=l*l;return e?(a-s*s/o)/(o-1):(a-s*s/o)/o}(this,r,n);default:throw new Error(`invalid option: ${t}`)}}standardDeviation(t,e){"object"==typeof t&&(e=t,t=void 0);const r=this.variance(t,e);if(void 0===t)return Math.sqrt(r);for(let t=0;t<r.length;t++)r[t]=Math.sqrt(r[t]);return r}center(t,e={}){if("object"==typeof t&&(e=t,t=void 0),"object"!=typeof e)throw new TypeError("options must be an object");const{center:r=this.mean(t)}=e;switch(t){case"row":if(!Array.isArray(r))throw new TypeError("center must be an array");return function(t,e){for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)-e[r])}(this,r),this;case"column":if(!Array.isArray(r))throw new TypeError("center must be an array");return function(t,e){for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)-e[n])}(this,r),this;case void 0:if("number"!=typeof r)throw new TypeError("center must be a number");return function(t,e){for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)-e)}(this,r),this;default:throw new Error(`invalid option: ${t}`)}}scale(t,e={}){if("object"==typeof t&&(e=t,t=void 0),"object"!=typeof e)throw new TypeError("options must be an object");let r=e.scale;switch(t){case"row":if(void 0===r)r=function(t){const e=[];for(let r=0;r<t.rows;r++){let n=0;for(let e=0;e<t.columns;e++)n+=Math.pow(t.get(r,e),2)/(t.columns-1);e.push(Math.sqrt(n))}return e}(this);else if(!Array.isArray(r))throw new TypeError("scale must be an array");return function(t,e){for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)/e[r])}(this,r),this;case"column":if(void 0===r)r=function(t){const e=[];for(let r=0;r<t.columns;r++){let n=0;for(let e=0;e<t.rows;e++)n+=Math.pow(t.get(e,r),2)/(t.rows-1);e.push(Math.sqrt(n))}return e}(this);else if(!Array.isArray(r))throw new TypeError("scale must be an array");return function(t,e){for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)/e[n])}(this,r),this;case void 0:if(void 0===r)r=function(t){const e=t.size-1;let r=0;for(let n=0;n<t.columns;n++)for(let i=0;i<t.rows;i++)r+=Math.pow(t.get(i,n),2)/e;return Math.sqrt(r)}(this);else if("number"!=typeof r)throw new TypeError("scale must be a number");return function(t,e){for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)/e)}(this,r),this;default:throw new Error(`invalid option: ${t}`)}}toString(t){return Ua(this,t)}}function Ka(t,e){return t-e}Wa.prototype.klass="Matrix","undefined"!=typeof Symbol&&(Wa.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return Ua(this)}),Wa.random=Wa.rand,Wa.randomInt=Wa.randInt,Wa.diagonal=Wa.diag,Wa.prototype.diagonal=Wa.prototype.diag,Wa.identity=Wa.eye,Wa.prototype.negate=Wa.prototype.neg,Wa.prototype.tensorProduct=Wa.prototype.kroneckerProduct;class Ja extends Wa{constructor(t,e){if(super(),Ja.isMatrix(t))return t.clone();if(Number.isInteger(t)&&t>=0){if(this.data=[],!(Number.isInteger(e)&&e>=0))throw new TypeError("nColumns must be a positive integer");for(let r=0;r<t;r++)this.data.push(new Float64Array(e))}else{if(!Array.isArray(t))throw new TypeError("First argument must be a positive number or an array");{const r=t;if("number"!=typeof(e=(t=r.length)?r[0].length:0))throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let n=0;n<t;n++){if(r[n].length!==e)throw new RangeError("Inconsistent array dimensions");this.data.push(Float64Array.from(r[n]))}}}this.rows=t,this.columns=e}set(t,e,r){return this.data[t][e]=r,this}get(t,e){return this.data[t][e]}removeRow(t){return $a(this,t),this.data.splice(t,1),this.rows-=1,this}addRow(t,e){return void 0===e&&(e=t,t=this.rows),$a(this,t,!0),e=Float64Array.from(qa(this,e)),this.data.splice(t,0,e),this.rows+=1,this}removeColumn(t){za(this,t);for(let e=0;e<this.rows;e++){const r=new Float64Array(this.columns-1);for(let n=0;n<t;n++)r[n]=this.data[e][n];for(let n=t+1;n<this.columns;n++)r[n-1]=this.data[e][n];this.data[e]=r}return this.columns-=1,this}addColumn(t,e){void 0===e&&(e=t,t=this.columns),za(this,t,!0),e=Va(this,e);for(let r=0;r<this.rows;r++){const n=new Float64Array(this.columns+1);let i=0;for(;i<t;i++)n[i]=this.data[r][i];for(n[i++]=e[r];i<this.columns+1;i++)n[i]=this.data[r][i-1];this.data[r]=n}return this.columns+=1,this}}!function(t,e){t.prototype.add=function(t){return"number"==typeof t?this.addS(t):this.addM(t)},t.prototype.addS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t);return this},t.prototype.addM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t.get(e,r));return this},t.add=function(t,r){return new e(t).add(r)},t.prototype.sub=function(t){return"number"==typeof t?this.subS(t):this.subM(t)},t.prototype.subS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t);return this},t.prototype.subM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t.get(e,r));return this},t.sub=function(t,r){return new e(t).sub(r)},t.prototype.subtract=t.prototype.sub,t.prototype.subtractS=t.prototype.subS,t.prototype.subtractM=t.prototype.subM,t.subtract=t.sub,t.prototype.mul=function(t){return"number"==typeof t?this.mulS(t):this.mulM(t)},t.prototype.mulS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t);return this},t.prototype.mulM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t.get(e,r));return this},t.mul=function(t,r){return new e(t).mul(r)},t.prototype.multiply=t.prototype.mul,t.prototype.multiplyS=t.prototype.mulS,t.prototype.multiplyM=t.prototype.mulM,t.multiply=t.mul,t.prototype.div=function(t){return"number"==typeof t?this.divS(t):this.divM(t)},t.prototype.divS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t);return this},t.prototype.divM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t.get(e,r));return this},t.div=function(t,r){return new e(t).div(r)},t.prototype.divide=t.prototype.div,t.prototype.divideS=t.prototype.divS,t.prototype.divideM=t.prototype.divM,t.divide=t.div,t.prototype.mod=function(t){return"number"==typeof t?this.modS(t):this.modM(t)},t.prototype.modS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)%t);return this},t.prototype.modM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)%t.get(e,r));return this},t.mod=function(t,r){return new e(t).mod(r)},t.prototype.modulus=t.prototype.mod,t.prototype.modulusS=t.prototype.modS,t.prototype.modulusM=t.prototype.modM,t.modulus=t.mod,t.prototype.and=function(t){return"number"==typeof t?this.andS(t):this.andM(t)},t.prototype.andS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)&t);return this},t.prototype.andM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)&t.get(e,r));return this},t.and=function(t,r){return new e(t).and(r)},t.prototype.or=function(t){return"number"==typeof t?this.orS(t):this.orM(t)},t.prototype.orS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)|t);return this},t.prototype.orM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)|t.get(e,r));return this},t.or=function(t,r){return new e(t).or(r)},t.prototype.xor=function(t){return"number"==typeof t?this.xorS(t):this.xorM(t)},t.prototype.xorS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)^t);return this},t.prototype.xorM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)^t.get(e,r));return this},t.xor=function(t,r){return new e(t).xor(r)},t.prototype.leftShift=function(t){return"number"==typeof t?this.leftShiftS(t):this.leftShiftM(t)},t.prototype.leftShiftS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)<<t);return this},t.prototype.leftShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)<<t.get(e,r));return this},t.leftShift=function(t,r){return new e(t).leftShift(r)},t.prototype.signPropagatingRightShift=function(t){return"number"==typeof t?this.signPropagatingRightShiftS(t):this.signPropagatingRightShiftM(t)},t.prototype.signPropagatingRightShiftS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)>>t);return this},t.prototype.signPropagatingRightShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)>>t.get(e,r));return this},t.signPropagatingRightShift=function(t,r){return new e(t).signPropagatingRightShift(r)},t.prototype.rightShift=function(t){return"number"==typeof t?this.rightShiftS(t):this.rightShiftM(t)},t.prototype.rightShiftS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)>>>t);return this},t.prototype.rightShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)>>>t.get(e,r));return this},t.rightShift=function(t,r){return new e(t).rightShift(r)},t.prototype.zeroFillRightShift=t.prototype.rightShift,t.prototype.zeroFillRightShiftS=t.prototype.rightShiftS,t.prototype.zeroFillRightShiftM=t.prototype.rightShiftM,t.zeroFillRightShift=t.rightShift,t.prototype.not=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,~this.get(t,e));return this},t.not=function(t){return new e(t).not()},t.prototype.abs=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.abs(this.get(t,e)));return this},t.abs=function(t){return new e(t).abs()},t.prototype.acos=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.acos(this.get(t,e)));return this},t.acos=function(t){return new e(t).acos()},t.prototype.acosh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.acosh(this.get(t,e)));return this},t.acosh=function(t){return new e(t).acosh()},t.prototype.asin=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.asin(this.get(t,e)));return this},t.asin=function(t){return new e(t).asin()},t.prototype.asinh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.asinh(this.get(t,e)));return this},t.asinh=function(t){return new e(t).asinh()},t.prototype.atan=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.atan(this.get(t,e)));return this},t.atan=function(t){return new e(t).atan()},t.prototype.atanh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.atanh(this.get(t,e)));return this},t.atanh=function(t){return new e(t).atanh()},t.prototype.cbrt=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.cbrt(this.get(t,e)));return this},t.cbrt=function(t){return new e(t).cbrt()},t.prototype.ceil=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.ceil(this.get(t,e)));return this},t.ceil=function(t){return new e(t).ceil()},t.prototype.clz32=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.clz32(this.get(t,e)));return this},t.clz32=function(t){return new e(t).clz32()},t.prototype.cos=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.cos(this.get(t,e)));return this},t.cos=function(t){return new e(t).cos()},t.prototype.cosh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.cosh(this.get(t,e)));return this},t.cosh=function(t){return new e(t).cosh()},t.prototype.exp=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.exp(this.get(t,e)));return this},t.exp=function(t){return new e(t).exp()},t.prototype.expm1=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.expm1(this.get(t,e)));return this},t.expm1=function(t){return new e(t).expm1()},t.prototype.floor=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.floor(this.get(t,e)));return this},t.floor=function(t){return new e(t).floor()},t.prototype.fround=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.fround(this.get(t,e)));return this},t.fround=function(t){return new e(t).fround()},t.prototype.log=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log(this.get(t,e)));return this},t.log=function(t){return new e(t).log()},t.prototype.log1p=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log1p(this.get(t,e)));return this},t.log1p=function(t){return new e(t).log1p()},t.prototype.log10=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log10(this.get(t,e)));return this},t.log10=function(t){return new e(t).log10()},t.prototype.log2=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log2(this.get(t,e)));return this},t.log2=function(t){return new e(t).log2()},t.prototype.round=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.round(this.get(t,e)));return this},t.round=function(t){return new e(t).round()},t.prototype.sign=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sign(this.get(t,e)));return this},t.sign=function(t){return new e(t).sign()},t.prototype.sin=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sin(this.get(t,e)));return this},t.sin=function(t){return new e(t).sin()},t.prototype.sinh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sinh(this.get(t,e)));return this},t.sinh=function(t){return new e(t).sinh()},t.prototype.sqrt=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sqrt(this.get(t,e)));return this},t.sqrt=function(t){return new e(t).sqrt()},t.prototype.tan=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.tan(this.get(t,e)));return this},t.tan=function(t){return new e(t).tan()},t.prototype.tanh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.tanh(this.get(t,e)));return this},t.tanh=function(t){return new e(t).tanh()},t.prototype.trunc=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.trunc(this.get(t,e)));return this},t.trunc=function(t){return new e(t).trunc()},t.pow=function(t,r){return new e(t).pow(r)},t.prototype.pow=function(t){return"number"==typeof t?this.powS(t):this.powM(t)},t.prototype.powS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,Math.pow(this.get(e,r),t));return this},t.prototype.powM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,Math.pow(this.get(e,r),t.get(e,r)));return this}}(Wa,Ja);class tl extends Wa{constructor(t){super(),this.data=t,this.rows=t.length,this.columns=t[0].length}set(t,e,r){return this.data[t][e]=r,this}get(t,e){return this.data[t][e]}}function el(t,e){let r=0;return Math.abs(t)>Math.abs(e)?(r=e/t,Math.abs(t)*Math.sqrt(1+r*r)):0!==e?(r=t/e,Math.abs(e)*Math.sqrt(1+r*r)):0}class rl{constructor(t,e={}){if((t=tl.checkMatrix(t)).isEmpty())throw new Error("Matrix must be non-empty");let r=t.rows,n=t.columns;const{computeLeftSingularVectors:i=!0,computeRightSingularVectors:o=!0,autoTranspose:s=!1}=e;let a,l=Boolean(i),u=Boolean(o),h=!1;if(r<n)if(s){a=t.transpose(),r=a.rows,n=a.columns,h=!0;let e=l;l=u,u=e}else a=t.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else a=t.clone();let c=Math.min(r,n),f=Math.min(r+1,n),d=new Float64Array(f),p=new Ja(r,c),m=new Ja(n,n),g=new Float64Array(n),v=new Float64Array(r),w=new Float64Array(f);for(let t=0;t<f;t++)w[t]=t;let y=Math.min(r-1,n),b=Math.max(0,Math.min(n-2,r)),_=Math.max(y,b);for(let t=0;t<_;t++){if(t<y){d[t]=0;for(let e=t;e<r;e++)d[t]=el(d[t],a.get(e,t));if(0!==d[t]){a.get(t,t)<0&&(d[t]=-d[t]);for(let e=t;e<r;e++)a.set(e,t,a.get(e,t)/d[t]);a.set(t,t,a.get(t,t)+1)}d[t]=-d[t]}for(let e=t+1;e<n;e++){if(t<y&&0!==d[t]){let n=0;for(let i=t;i<r;i++)n+=a.get(i,t)*a.get(i,e);n=-n/a.get(t,t);for(let i=t;i<r;i++)a.set(i,e,a.get(i,e)+n*a.get(i,t))}g[e]=a.get(t,e)}if(l&&t<y)for(let e=t;e<r;e++)p.set(e,t,a.get(e,t));if(t<b){g[t]=0;for(let e=t+1;e<n;e++)g[t]=el(g[t],g[e]);if(0!==g[t]){g[t+1]<0&&(g[t]=0-g[t]);for(let e=t+1;e<n;e++)g[e]/=g[t];g[t+1]+=1}if(g[t]=-g[t],t+1<r&&0!==g[t]){for(let e=t+1;e<r;e++)v[e]=0;for(let e=t+1;e<r;e++)for(let r=t+1;r<n;r++)v[e]+=g[r]*a.get(e,r);for(let e=t+1;e<n;e++){let n=-g[e]/g[t+1];for(let i=t+1;i<r;i++)a.set(i,e,a.get(i,e)+n*v[i])}}if(u)for(let e=t+1;e<n;e++)m.set(e,t,g[e])}}let x=Math.min(n,r+1);if(y<n&&(d[y]=a.get(y,y)),r<x&&(d[x-1]=0),b+1<x&&(g[b]=a.get(b,x-1)),g[x-1]=0,l){for(let t=y;t<c;t++){for(let e=0;e<r;e++)p.set(e,t,0);p.set(t,t,1)}for(let t=y-1;t>=0;t--)if(0!==d[t]){for(let e=t+1;e<c;e++){let n=0;for(let i=t;i<r;i++)n+=p.get(i,t)*p.get(i,e);n=-n/p.get(t,t);for(let i=t;i<r;i++)p.set(i,e,p.get(i,e)+n*p.get(i,t))}for(let e=t;e<r;e++)p.set(e,t,-p.get(e,t));p.set(t,t,1+p.get(t,t));for(let e=0;e<t-1;e++)p.set(e,t,0)}else{for(let e=0;e<r;e++)p.set(e,t,0);p.set(t,t,1)}}if(u)for(let t=n-1;t>=0;t--){if(t<b&&0!==g[t])for(let e=t+1;e<n;e++){let r=0;for(let i=t+1;i<n;i++)r+=m.get(i,t)*m.get(i,e);r=-r/m.get(t+1,t);for(let i=t+1;i<n;i++)m.set(i,e,m.get(i,e)+r*m.get(i,t))}for(let e=0;e<n;e++)m.set(e,t,0);m.set(t,t,1)}let k=x-1,M=0,S=Number.EPSILON;for(;x>0;){let t,e;for(t=x-2;t>=-1&&-1!==t;t--){const e=Number.MIN_VALUE+S*Math.abs(d[t]+Math.abs(d[t+1]));if(Math.abs(g[t])<=e||Number.isNaN(g[t])){g[t]=0;break}}if(t===x-2)e=4;else{let r;for(r=x-1;r>=t&&r!==t;r--){let e=(r!==x?Math.abs(g[r]):0)+(r!==t+1?Math.abs(g[r-1]):0);if(Math.abs(d[r])<=S*e){d[r]=0;break}}r===t?e=3:r===x-1?e=1:(e=2,t=r)}switch(t++,e){case 1:{let e=g[x-2];g[x-2]=0;for(let r=x-2;r>=t;r--){let i=el(d[r],e),o=d[r]/i,s=e/i;if(d[r]=i,r!==t&&(e=-s*g[r-1],g[r-1]=o*g[r-1]),u)for(let t=0;t<n;t++)i=o*m.get(t,r)+s*m.get(t,x-1),m.set(t,x-1,-s*m.get(t,r)+o*m.get(t,x-1)),m.set(t,r,i)}break}case 2:{let e=g[t-1];g[t-1]=0;for(let n=t;n<x;n++){let i=el(d[n],e),o=d[n]/i,s=e/i;if(d[n]=i,e=-s*g[n],g[n]=o*g[n],l)for(let e=0;e<r;e++)i=o*p.get(e,n)+s*p.get(e,t-1),p.set(e,t-1,-s*p.get(e,n)+o*p.get(e,t-1)),p.set(e,n,i)}break}case 3:{const e=Math.max(Math.abs(d[x-1]),Math.abs(d[x-2]),Math.abs(g[x-2]),Math.abs(d[t]),Math.abs(g[t])),i=d[x-1]/e,o=d[x-2]/e,s=g[x-2]/e,a=d[t]/e,h=g[t]/e,c=((o+i)*(o-i)+s*s)/2,f=i*s*(i*s);let v=0;0===c&&0===f||(v=c<0?0-Math.sqrt(c*c+f):Math.sqrt(c*c+f),v=f/(c+v));let w=(a+i)*(a-i)+v,y=a*h;for(let e=t;e<x-1;e++){let i=el(w,y);0===i&&(i=Number.MIN_VALUE);let o=w/i,s=y/i;if(e!==t&&(g[e-1]=i),w=o*d[e]+s*g[e],g[e]=o*g[e]-s*d[e],y=s*d[e+1],d[e+1]=o*d[e+1],u)for(let t=0;t<n;t++)i=o*m.get(t,e)+s*m.get(t,e+1),m.set(t,e+1,-s*m.get(t,e)+o*m.get(t,e+1)),m.set(t,e,i);if(i=el(w,y),0===i&&(i=Number.MIN_VALUE),o=w/i,s=y/i,d[e]=i,w=o*g[e]+s*d[e+1],d[e+1]=-s*g[e]+o*d[e+1],y=s*g[e+1],g[e+1]=o*g[e+1],l&&e<r-1)for(let t=0;t<r;t++)i=o*p.get(t,e)+s*p.get(t,e+1),p.set(t,e+1,-s*p.get(t,e)+o*p.get(t,e+1)),p.set(t,e,i)}g[x-2]=w,M+=1;break}case 4:if(d[t]<=0&&(d[t]=d[t]<0?-d[t]:0,u))for(let e=0;e<=k;e++)m.set(e,t,-m.get(e,t));for(;t<k&&!(d[t]>=d[t+1]);){let e=d[t];if(d[t]=d[t+1],d[t+1]=e,u&&t<n-1)for(let r=0;r<n;r++)e=m.get(r,t+1),m.set(r,t+1,m.get(r,t)),m.set(r,t,e);if(l&&t<r-1)for(let n=0;n<r;n++)e=p.get(n,t+1),p.set(n,t+1,p.get(n,t)),p.set(n,t,e);t++}M=0,x--}}if(h){let t=m;m=p,p=t}this.m=r,this.n=n,this.s=d,this.U=p,this.V=m}solve(t){let e=t,r=this.threshold,n=this.s.length,i=Ja.zeros(n,n);for(let t=0;t<n;t++)Math.abs(this.s[t])<=r?i.set(t,t,0):i.set(t,t,1/this.s[t]);let o=this.U,s=this.rightSingularVectors,a=s.mmul(i),l=s.rows,u=o.rows,h=Ja.zeros(l,u);for(let t=0;t<l;t++)for(let e=0;e<u;e++){let r=0;for(let i=0;i<n;i++)r+=a.get(t,i)*o.get(e,i);h.set(t,e,r)}return h.mmul(e)}solveForDiagonal(t){return this.solve(Ja.diag(t))}inverse(){let t=this.V,e=this.threshold,r=t.rows,n=t.columns,i=new Ja(r,this.s.length);for(let o=0;o<r;o++)for(let r=0;r<n;r++)Math.abs(this.s[r])>e&&i.set(o,r,t.get(o,r)/this.s[r]);let o=this.U,s=o.rows,a=o.columns,l=new Ja(r,s);for(let t=0;t<r;t++)for(let e=0;e<s;e++){let r=0;for(let n=0;n<a;n++)r+=i.get(t,n)*o.get(e,n);l.set(t,e,r)}return l}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,e=0,r=this.s;for(let n=0,i=r.length;n<i;n++)r[n]>t&&e++;return e}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return Ja.diag(this.s)}}function nl(t,e={}){let{channels:r,bitDepth:n,normalize:i=!1,divisor:o=1,border:s="copy",algorithm:a="auto"}=e,l={};n&&(l.bitDepth=n);let u,h,c=Qc.createFrom(this,l);if(r=xa(this,r),"separable"!==a)({kernel:t}=function(t){let e,r;if(!Array.isArray(t))throw new Error(`validateKernel: Invalid Kernel: ${t}`);if(Array.isArray(t[0])){if(0==(1&t.length)||0==(1&t[0].length))throw new RangeError("validateKernel: Kernel rows and columns should be odd numbers");e=Math.floor(t.length/2),r=Math.floor(t[0].length/2)}else{let n=Math.sqrt(t.length);if(!Ra()(n))throw new RangeError("validateKernel: Kernel array should be a square");r=e=Math.floor(Math.sqrt(t.length)/2);let i=new Array(n);for(let e=0;e<n;e++){i[e]=new Array(n);for(let r=0;r<n;r++)i[e][r]=t[e*n+r]}t=i}return{kernel:t,kWidth:r,kHeight:e}}(t));else if(!Array.isArray(t)||2!==t.length)throw new RangeError("separable convolution requires two arrays of numbers to represent the kernel");if("auto"===a){let e=function(t){const e=new rl(t,{autoTranspose:!0});if(1!==e.rank)return null;const r=Math.sqrt(e.s[0]);return[e.U.to2DArray().map((t=>t[0]*r)),e.V.to2DArray().map((t=>t[0]*r))]}(t);null!==e?(a="separable",t=e):a=(t.length>9||t[0].length>9)&&this.width<=4096&&this.height<=4096?"fft":"direct"}"separable"===a?(u=Math.floor(t[0].length/2),h=Math.floor(t[1].length/2)):(u=Math.floor(t.length/2),h=Math.floor(t[0].length/2));let f,d,p,m,g,v,w=c.isClamped,y=new Array(this.height*this.width);for(m=0;m<r.length;m++){for(g=r[m],p=0;p<this.height;p++)for(d=0;d<this.width;d++)f=p*this.width+d,y[f]=this.data[f*this.channels+g];if("direct"===a)v=(0,Oa.direct)(y,t,{rows:this.height,cols:this.width,normalize:i,divisor:o});else if("separable"===a){if(v=Fa(y,t,this.width,this.height),i){o=0;for(let e=0;e<t[0].length;e++)for(let r=0;r<t[1].length;r++)o+=t[0][e]*t[1][r]}if(1!==o)for(let t=0;t<v.length;t++)v[t]/=o}else v=(0,Oa.fft)(y,t,{rows:this.height,cols:this.width,normalize:i,divisor:o});for(p=0;p<this.height;p++)for(d=0;d<this.width;d++)f=p*this.width+d,c.data[f*this.channels+g]=w?Ia(v[f],c):v[f]}if(this.alpha&&!r.includes(this.channels))for(d=this.components;d<this.data.length;d+=this.channels)c.data[d]=this.data[d];return"periodic"!==s&&c.setBorder({size:[h,u],algorithm:s}),c}function il(t={}){let{direction:e="xy",border:r="copy",kernelX:n,kernelY:i,channels:o,bitDepth:s=this.bitDepth}=t;switch(this.checkProcessable("gradientFilter",{bitDepth:[8,16]}),e){case"x":if(!n)throw new Error("kernelX option is missing");return nl.call(this,n,{channels:o,border:r,bitDepth:s});case"y":if(!i)throw new Error("kernelY option is missing");return nl.call(this,i,{channels:o,border:r,bitDepth:s});case"xy":{if(!n)throw new Error("kernelX option is missing");if(!i)throw new Error("kernelY option is missing");const t=nl.call(this,n,{channels:o,border:r,bitDepth:32}),e=nl.call(this,i,{channels:o,border:r,bitDepth:32});return t.hypotenuse(e,{bitDepth:s,channels:o})}default:throw new Error(`Unknown parameter direction: ${e}`)}}function ol(t){return il.call(this,Object.assign({},t,{kernelX:Ea,kernelY:Aa}))}function sl(t){return il.call(this,Object.assign({},t,{kernelX:Ca,kernelY:Da}))}var al=r(2664),ll=r.n(al);function ul(t={}){let{algorithm:e="range",channels:r,min:n=this.min,max:i=this.max}=t;switch(this.checkProcessable("level",{bitDepth:[8,16,32]}),r=xa(this,{channels:r}),r.length!==this.channel&&(Array.isArray(n)&&n.length===this.channels&&(n=n.filter(((t,e)=>r.includes(e)))),Array.isArray(i)&&i.length===this.channels&&(i=i.filter(((t,e)=>r.includes(e))))),e){case"range":n<0&&(n=0),i>this.maxValue&&(i=this.maxValue),Array.isArray(n)||(n=ll()(r.length,n)),Array.isArray(i)||(i=ll()(r.length,i)),function(t,e,r,n){let i=1e-5,o=new Array(n.length);for(let s=0;s<n.length;s++)0===e[s]&&r[s]===t.maxValue||r[s]===e[s]?o[s]=0:o[s]=(t.maxValue+1-i)/(r[s]-e[s]),e[s]+=(.5-i/2)/o[s];for(let r=0;r<n.length;r++){let i=n[r];if(0!==o[r])for(let n=0;n<t.data.length;n+=t.channels)t.data[n+i]=Math.min(Math.max(0,(t.data[n+i]-e[r])*o[r]+.5|0),t.maxValue)}}(this,n,i,r);break;default:throw new Error(`level: algorithm not implement: ${e}`)}return this}var hl=r(7811),cl=r.n(hl);function fl(t){if(isNaN(t)){if(t instanceof Qc)return t.data;if(!cl()(t))throw new Error("checkNumberArray: the value should be either a number, array or Image");return t}if(t<=0)throw new Error("checkNumberArray: the value must be greater than 0");return t}function dl(t,e={}){let{channels:r}=e;if(this.checkProcessable("add",{bitDepth:[8,16]}),r=xa(this,{channels:r}),t=fl(t),isNaN(t)){if(this.data.length!==t.length)throw new Error("add: the data size is different");for(let e=0;e<r.length;e++){let n=r[e];for(let e=0;e<this.data.length;e+=this.channels)this.data[e+n]=Math.max(0,Math.min(this.maxValue,this.data[e+n]+t[e+n]>>0))}}else for(let e=0;e<r.length;e++){let n=r[e];for(let e=0;e<this.data.length;e+=this.channels)this.data[e+n]=Math.min(this.maxValue,this.data[e+n]+t>>0)}return this}function pl(t,e={}){let{channels:r}=e;if(this.checkProcessable("subtract",{bitDepth:[8,16]}),r=xa(this,{channels:r}),t=fl(t),isNaN(t)){if(this.data.length!==t.length)throw new Error("subtract: the data size is different");for(let e=0;e<r.length;e++){let n=r[e];for(let e=0;e<this.data.length;e+=this.channels)this.data[e+n]=Math.max(0,Math.min(this.maxValue,this.data[e+n]-t[e+n]>>0))}}else for(let e=0;e<r.length;e++){let n=r[e];for(let e=0;e<this.data.length;e+=this.channels)this.data[e+n]=Math.max(0,this.data[e+n]-t>>0)}return this}function ml(t,e={}){let{channels:r,absolute:n=!1}=e;if(this.checkProcessable("subtractImage",{bitDepth:[8,16]}),this.width!==t.width||this.height!==t.height)throw new Error("subtractImage: both images must have the same size");if(this.alpha!==t.alpha||this.bitDepth!==t.bitDepth)throw new Error("subtractImage: both images must have the same alpha and bitDepth");if(this.channels!==t.channels)throw new Error("subtractImage: both images must have the same number of channels");let i=this.clone();r=xa(this,{channels:r});for(let e=0;e<r.length;e++){for(let o=r[e];o<this.data.length;o+=this.channels){let e=this.data[o]-t.data[o];i.data[o]=n?Math.abs(e):Math.max(e,0)}}return i}function gl(t,e={}){let{bitDepth:r=this.bitDepth,channels:n}=e;if(this.checkProcessable("hypotenuse",{bitDepth:[8,16,32]}),this.width!==t.width||this.height!==t.height)throw new Error("hypotenuse: both images must have the same size");if(this.alpha!==t.alpha||this.bitDepth!==t.bitDepth)throw new Error("hypotenuse: both images must have the same alpha and bitDepth");if(this.channels!==t.channels)throw new Error("hypotenuse: both images must have the same number of channels");let i=Qc.createFrom(this,{bitDepth:r});n=xa(this,{channels:n});let o=i.isClamped;for(let e=0;e<n.length;e++){for(let r=n[e];r<this.data.length;r+=this.channels){let e=Math.hypot(this.data[r],t.data[r]);i.data[r]=o?Math.min(Math.max(Math.round(e),0),i.maxValue):e}}return i}function vl(t,e={}){let{channels:r}=e;if(this.checkProcessable("multiply",{bitDepth:[8,16]}),t<=0)throw new Error("multiply: the value must be greater than 0");if(r=xa(this,{channels:r}),t=fl(t),isNaN(t)){if(this.data.length!==t.length)throw new Error("multiply: the data size is different");for(let e=0;e<r.length;e++){let n=r[e];for(let e=0;e<this.data.length;e+=this.channels)this.data[e+n]=Math.max(0,Math.min(this.maxValue,this.data[e+n]*t[e+n]>>0))}}else for(let e=0;e<r.length;e++){let n=r[e];for(let e=0;e<this.data.length;e+=this.channels)this.data[e+n]=Math.min(this.maxValue,this.data[e+n]*t>>0)}return this}function wl(t,e={}){let{channels:r}=e;if(this.checkProcessable("divide",{bitDepth:[8,16]}),r=xa(this,{channels:r}),t=fl(t),isNaN(t)){if(this.data.length!==t.length)throw new Error("divide: the: the data size is different");for(let e=0;e<r.length;e++){let n=r[e];for(let e=0;e<this.data.length;e+=this.channels)this.data[e+n]=Math.max(0,Math.min(this.maxValue,this.data[e+n]/t[e+n]>>0))}}else for(let e=0;e<r.length;e++){let n=r[e];for(let e=0;e<this.data.length;e+=this.channels)this.data[e+n]=Math.min(this.maxValue,this.data[e+n]/t>>0)}return this}var yl=r(7531);class bl{constructor(){if(new.target===bl)throw new Error("BaseRegression must be subclassed")}predict(t){if("number"==typeof t)return this._predict(t);if((0,yl.Z)(t)){const e=[];for(let r=0;r<t.length;r++)e.push(this._predict(t[r]));return e}throw new TypeError("x must be a number or array")}_predict(){throw new Error("_predict must be implemented")}train(){}toString(){return""}toLaTeX(){return""}score(t,e){if(!(0,yl.Z)(t)||!(0,yl.Z)(e)||t.length!==e.length)throw new Error("x and y must be arrays of the same length");const r=t.length,n=new Array(r);for(let e=0;e<r;e++)n[e]=this._predict(t[e]);let i=0,o=0,s=0,a=0,l=0,u=0,h=0;for(let t=0;t<r;t++)i+=n[t],o+=e[t],l+=n[t]*n[t],u+=e[t]*e[t],h+=n[t]*e[t],0!==e[t]&&(s+=(e[t]-n[t])*(e[t]-n[t])/e[t]),a+=(e[t]-n[t])*(e[t]-n[t]);const c=(r*h-i*o)/Math.sqrt((r*l-i*i)*(r*u-o*o));return{r:c,r2:c*c,chi2:s,rmsd:Math.sqrt(a/r)}}}const _l=" ".repeat(2),xl=" ".repeat(4);function kl(t,e={}){const{maxRows:r=15,maxColumns:n=10,maxNumSize:i=8}=e;return`${t.constructor.name} {\n${_l}[\n${xl}${function(t,e,r,n){const{rows:i,columns:o}=t,s=Math.min(i,e),a=Math.min(o,r),l=[];for(let e=0;e<s;e++){let r=[];for(let i=0;i<a;i++)r.push(Ml(t.get(e,i),n));l.push(`${r.join(" ")}`)}a!==o&&(l[l.length-1]+=` ... ${o-r} more columns`);s!==i&&l.push(`... ${i-e} more rows`);return l.join(`\n${xl}`)}(t,r,n,i)}\n${_l}]\n${_l}rows: ${t.rows}\n${_l}columns: ${t.columns}\n}`}function Ml(t,e){const r=String(t);if(r.length<=e)return r.padEnd(e," ");const n=t.toPrecision(e-2);if(n.length<=e)return n;const i=t.toExponential(e-2),o=i.indexOf("e"),s=i.slice(o);return i.slice(0,e-s.length)+s}function Sl(t,e,r){let n=r?t.rows:t.rows-1;if(e<0||e>n)throw new RangeError("Row index out of range")}function El(t,e,r){let n=r?t.columns:t.columns-1;if(e<0||e>n)throw new RangeError("Column index out of range")}function Al(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.columns)throw new RangeError("vector size must be the same as the number of columns");return e}function Cl(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.rows)throw new RangeError("vector size must be the same as the number of rows");return e}function Dl(t,e){if("object"!=typeof e)throw new TypeError("unexpected type for row indices");if(e.some((e=>e<0||e>=t.rows)))throw new RangeError("row indices are out of range");return Array.isArray(e)||(e=Array.from(e)),e}function Ol(t,e){if("object"!=typeof e)throw new TypeError("unexpected type for column indices");if(e.some((e=>e<0||e>=t.columns)))throw new RangeError("column indices are out of range");return Array.isArray(e)||(e=Array.from(e)),e}function Pl(t,e,r,n,i){if(5!==arguments.length)throw new RangeError("expected 4 arguments");if(Il("startRow",e),Il("endRow",r),Il("startColumn",n),Il("endColumn",i),e>r||n>i||e<0||e>=t.rows||r<0||r>=t.rows||n<0||n>=t.columns||i<0||i>=t.columns)throw new RangeError("Submatrix indices are out of range")}function Rl(t,e=0){let r=[];for(let n=0;n<t;n++)r.push(e);return r}function Il(t,e){if("number"!=typeof e)throw new TypeError(`${t} must be a number`)}function Tl(t){if(t.isEmpty())throw new Error("Empty matrix has no elements to index")}class Fl{static from1DArray(t,e,r){if(t*e!==r.length)throw new RangeError("data length does not match given dimensions");let n=new Nl(t,e);for(let i=0;i<t;i++)for(let t=0;t<e;t++)n.set(i,t,r[i*e+t]);return n}static rowVector(t){let e=new Nl(1,t.length);for(let r=0;r<t.length;r++)e.set(0,r,t[r]);return e}static columnVector(t){let e=new Nl(t.length,1);for(let r=0;r<t.length;r++)e.set(r,0,t[r]);return e}static zeros(t,e){return new Nl(t,e)}static ones(t,e){return new Nl(t,e).fill(1)}static rand(t,e,r={}){if("object"!=typeof r)throw new TypeError("options must be an object");const{random:n=Math.random}=r;let i=new Nl(t,e);for(let r=0;r<t;r++)for(let t=0;t<e;t++)i.set(r,t,n());return i}static randInt(t,e,r={}){if("object"!=typeof r)throw new TypeError("options must be an object");const{min:n=0,max:i=1e3,random:o=Math.random}=r;if(!Number.isInteger(n))throw new TypeError("min must be an integer");if(!Number.isInteger(i))throw new TypeError("max must be an integer");if(n>=i)throw new RangeError("min must be smaller than max");let s=i-n,a=new Nl(t,e);for(let r=0;r<t;r++)for(let t=0;t<e;t++){let e=n+Math.round(o()*s);a.set(r,t,e)}return a}static eye(t,e,r){void 0===e&&(e=t),void 0===r&&(r=1);let n=Math.min(t,e),i=this.zeros(t,e);for(let t=0;t<n;t++)i.set(t,t,r);return i}static diag(t,e,r){let n=t.length;void 0===e&&(e=n),void 0===r&&(r=e);let i=Math.min(n,e,r),o=this.zeros(e,r);for(let e=0;e<i;e++)o.set(e,e,t[e]);return o}static min(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);let r=t.rows,n=t.columns,i=new Nl(r,n);for(let o=0;o<r;o++)for(let r=0;r<n;r++)i.set(o,r,Math.min(t.get(o,r),e.get(o,r)));return i}static max(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);let r=t.rows,n=t.columns,i=new this(r,n);for(let o=0;o<r;o++)for(let r=0;r<n;r++)i.set(o,r,Math.max(t.get(o,r),e.get(o,r)));return i}static checkMatrix(t){return Fl.isMatrix(t)?t:new Nl(t)}static isMatrix(t){return null!=t&&"Matrix"===t.klass}get size(){return this.rows*this.columns}apply(t){if("function"!=typeof t)throw new TypeError("callback must be a function");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)t.call(this,e,r);return this}to1DArray(){let t=[];for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)t.push(this.get(e,r));return t}to2DArray(){let t=[];for(let e=0;e<this.rows;e++){t.push([]);for(let r=0;r<this.columns;r++)t[e].push(this.get(e,r))}return t}toJSON(){return this.to2DArray()}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isEmpty(){return 0===this.rows||0===this.columns}isSymmetric(){if(this.isSquare()){for(let t=0;t<this.rows;t++)for(let e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}isEchelonForm(){let t=0,e=0,r=-1,n=!0,i=!1;for(;t<this.rows&&n;){for(e=0,i=!1;e<this.columns&&!1===i;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>r?(i=!0,r=e):(n=!1,i=!0);t++}return n}isReducedEchelonForm(){let t=0,e=0,r=-1,n=!0,i=!1;for(;t<this.rows&&n;){for(e=0,i=!1;e<this.columns&&!1===i;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>r?(i=!0,r=e):(n=!1,i=!0);for(let r=e+1;r<this.rows;r++)0!==this.get(t,r)&&(n=!1);t++}return n}echelonForm(){let t=this.clone(),e=0,r=0;for(;e<t.rows&&r<t.columns;){let n=e;for(let i=e;i<t.rows;i++)t.get(i,r)>t.get(n,r)&&(n=i);if(0===t.get(n,r))r++;else{t.swapRows(e,n);let i=t.get(e,r);for(let n=r;n<t.columns;n++)t.set(e,n,t.get(e,n)/i);for(let n=e+1;n<t.rows;n++){let i=t.get(n,r)/t.get(e,r);t.set(n,r,0);for(let o=r+1;o<t.columns;o++)t.set(n,o,t.get(n,o)-t.get(e,o)*i)}e++,r++}}return t}reducedEchelonForm(){let t=this.echelonForm(),e=t.columns,r=t.rows,n=r-1;for(;n>=0;)if(0===t.maxRow(n))n--;else{let i=0,o=!1;for(;i<r&&!1===o;)1===t.get(n,i)?o=!0:i++;for(let r=0;r<n;r++){let o=t.get(r,i);for(let s=i;s<e;s++){let e=t.get(r,s)-o*t.get(n,s);t.set(r,s,e)}}n--}return t}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(t={}){if("object"!=typeof t)throw new TypeError("options must be an object");const{rows:e=1,columns:r=1}=t;if(!Number.isInteger(e)||e<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(r)||r<=0)throw new TypeError("columns must be a positive integer");let n=new Nl(this.rows*e,this.columns*r);for(let t=0;t<e;t++)for(let e=0;e<r;e++)n.setSubMatrix(this,this.rows*t,this.columns*e);return n}fill(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,t);return this}neg(){return this.mulS(-1)}getRow(t){Sl(this,t);let e=[];for(let r=0;r<this.columns;r++)e.push(this.get(t,r));return e}getRowVector(t){return Nl.rowVector(this.getRow(t))}setRow(t,e){Sl(this,t),e=Al(this,e);for(let r=0;r<this.columns;r++)this.set(t,r,e[r]);return this}swapRows(t,e){Sl(this,t),Sl(this,e);for(let r=0;r<this.columns;r++){let n=this.get(t,r);this.set(t,r,this.get(e,r)),this.set(e,r,n)}return this}getColumn(t){El(this,t);let e=[];for(let r=0;r<this.rows;r++)e.push(this.get(r,t));return e}getColumnVector(t){return Nl.columnVector(this.getColumn(t))}setColumn(t,e){El(this,t),e=Cl(this,e);for(let r=0;r<this.rows;r++)this.set(r,t,e[r]);return this}swapColumns(t,e){El(this,t),El(this,e);for(let r=0;r<this.rows;r++){let n=this.get(r,t);this.set(r,t,this.get(r,e)),this.set(r,e,n)}return this}addRowVector(t){t=Al(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t[r]);return this}subRowVector(t){t=Al(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t[r]);return this}mulRowVector(t){t=Al(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t[r]);return this}divRowVector(t){t=Al(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t[r]);return this}addColumnVector(t){t=Cl(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t[e]);return this}subColumnVector(t){t=Cl(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t[e]);return this}mulColumnVector(t){t=Cl(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t[e]);return this}divColumnVector(t){t=Cl(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t[e]);return this}mulRow(t,e){Sl(this,t);for(let r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)*e);return this}mulColumn(t,e){El(this,t);for(let r=0;r<this.rows;r++)this.set(r,t,this.get(r,t)*e);return this}max(){if(this.isEmpty())return NaN;let t=this.get(0,0);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.get(e,r)>t&&(t=this.get(e,r));return t}maxIndex(){Tl(this);let t=this.get(0,0),e=[0,0];for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.get(r,n)>t&&(t=this.get(r,n),e[0]=r,e[1]=n);return e}min(){if(this.isEmpty())return NaN;let t=this.get(0,0);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.get(e,r)<t&&(t=this.get(e,r));return t}minIndex(){Tl(this);let t=this.get(0,0),e=[0,0];for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.get(r,n)<t&&(t=this.get(r,n),e[0]=r,e[1]=n);return e}maxRow(t){if(Sl(this,t),this.isEmpty())return NaN;let e=this.get(t,0);for(let r=1;r<this.columns;r++)this.get(t,r)>e&&(e=this.get(t,r));return e}maxRowIndex(t){Sl(this,t),Tl(this);let e=this.get(t,0),r=[t,0];for(let n=1;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n),r[1]=n);return r}minRow(t){if(Sl(this,t),this.isEmpty())return NaN;let e=this.get(t,0);for(let r=1;r<this.columns;r++)this.get(t,r)<e&&(e=this.get(t,r));return e}minRowIndex(t){Sl(this,t),Tl(this);let e=this.get(t,0),r=[t,0];for(let n=1;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n),r[1]=n);return r}maxColumn(t){if(El(this,t),this.isEmpty())return NaN;let e=this.get(0,t);for(let r=1;r<this.rows;r++)this.get(r,t)>e&&(e=this.get(r,t));return e}maxColumnIndex(t){El(this,t),Tl(this);let e=this.get(0,t),r=[0,t];for(let n=1;n<this.rows;n++)this.get(n,t)>e&&(e=this.get(n,t),r[0]=n);return r}minColumn(t){if(El(this,t),this.isEmpty())return NaN;let e=this.get(0,t);for(let r=1;r<this.rows;r++)this.get(r,t)<e&&(e=this.get(r,t));return e}minColumnIndex(t){El(this,t),Tl(this);let e=this.get(0,t),r=[0,t];for(let n=1;n<this.rows;n++)this.get(n,t)<e&&(e=this.get(n,t),r[0]=n);return r}diag(){let t=Math.min(this.rows,this.columns),e=[];for(let r=0;r<t;r++)e.push(this.get(r,r));return e}norm(t="frobenius"){let e=0;if("max"===t)return this.max();if("frobenius"===t){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)e+=this.get(t,r)*this.get(t,r);return Math.sqrt(e)}throw new RangeError(`unknown norm type: ${t}`)}cumulativeSum(){let t=0;for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)t+=this.get(e,r),this.set(e,r,t);return this}dot(t){Fl.isMatrix(t)&&(t=t.to1DArray());let e=this.to1DArray();if(e.length!==t.length)throw new RangeError("vectors do not have the same size");let r=0;for(let n=0;n<e.length;n++)r+=e[n]*t[n];return r}mmul(t){t=Nl.checkMatrix(t);let e=this.rows,r=this.columns,n=t.columns,i=new Nl(e,n),o=new Float64Array(r);for(let s=0;s<n;s++){for(let e=0;e<r;e++)o[e]=t.get(e,s);for(let t=0;t<e;t++){let e=0;for(let n=0;n<r;n++)e+=this.get(t,n)*o[n];i.set(t,s,e)}}return i}strassen2x2(t){t=Nl.checkMatrix(t);let e=new Nl(2,2);const r=this.get(0,0),n=t.get(0,0),i=this.get(0,1),o=t.get(0,1),s=this.get(1,0),a=t.get(1,0),l=this.get(1,1),u=t.get(1,1),h=(r+l)*(n+u),c=(s+l)*n,f=r*(o-u),d=l*(a-n),p=(r+i)*u,m=h+d-p+(i-l)*(a+u),g=f+p,v=c+d,w=h-c+f+(s-r)*(n+o);return e.set(0,0,m),e.set(0,1,g),e.set(1,0,v),e.set(1,1,w),e}strassen3x3(t){t=Nl.checkMatrix(t);let e=new Nl(3,3);const r=this.get(0,0),n=this.get(0,1),i=this.get(0,2),o=this.get(1,0),s=this.get(1,1),a=this.get(1,2),l=this.get(2,0),u=this.get(2,1),h=this.get(2,2),c=t.get(0,0),f=t.get(0,1),d=t.get(0,2),p=t.get(1,0),m=t.get(1,1),g=t.get(1,2),v=t.get(2,0),w=t.get(2,1),y=t.get(2,2),b=(r-o)*(-f+m),_=(-r+o+s)*(c-f+m),x=(o+s)*(-c+f),k=r*c,M=(-r+l+u)*(c-d+g),S=(-r+l)*(d-g),E=(l+u)*(-c+d),A=(-i+u+h)*(m+v-w),C=(i-h)*(m-w),D=i*v,O=(u+h)*(-v+w),P=(-i+s+a)*(g+v-y),R=(i-a)*(g-y),I=(s+a)*(-v+y),T=k+D+n*p,F=(r+n+i-o-s-u-h)*m+_+x+k+A+D+O,j=k+M+E+(r+n+i-s-a-l-u)*g+D+P+I,N=b+s*(-c+f+p-m-g-v+y)+_+k+D+P+R,B=b+_+x+k+a*w,U=D+P+R+I+o*d,L=k+M+S+u*(-c+d+p-m-g-v+w)+A+C+D,$=A+C+D+O+l*f,z=k+M+S+E+h*y;return e.set(0,0,T),e.set(0,1,F),e.set(0,2,j),e.set(1,0,N),e.set(1,1,B),e.set(1,2,U),e.set(2,0,L),e.set(2,1,$),e.set(2,2,z),e}mmulStrassen(t){t=Nl.checkMatrix(t);let e=this.clone(),r=e.rows,n=e.columns,i=t.rows,o=t.columns;function s(t,e,r){let n=t.rows,i=t.columns;if(n===e&&i===r)return t;{let n=Fl.zeros(e,r);return n=n.setSubMatrix(t,0,0),n}}n!==i&&console.warn(`Multiplying ${r} x ${n} and ${i} x ${o} matrix: dimensions do not match.`);let a=Math.max(r,i),l=Math.max(n,o);return e=s(e,a,l),function t(e,r,n,i){if(n<=512||i<=512)return e.mmul(r);n%2==1&&i%2==1?(e=s(e,n+1,i+1),r=s(r,n+1,i+1)):n%2==1?(e=s(e,n+1,i),r=s(r,n+1,i)):i%2==1&&(e=s(e,n,i+1),r=s(r,n,i+1));let o=parseInt(e.rows/2,10),a=parseInt(e.columns/2,10),l=e.subMatrix(0,o-1,0,a-1),u=r.subMatrix(0,o-1,0,a-1),h=e.subMatrix(0,o-1,a,e.columns-1),c=r.subMatrix(0,o-1,a,r.columns-1),f=e.subMatrix(o,e.rows-1,0,a-1),d=r.subMatrix(o,r.rows-1,0,a-1),p=e.subMatrix(o,e.rows-1,a,e.columns-1),m=r.subMatrix(o,r.rows-1,a,r.columns-1),g=t(Fl.add(l,p),Fl.add(u,m),o,a),v=t(Fl.add(f,p),u,o,a),w=t(l,Fl.sub(c,m),o,a),y=t(p,Fl.sub(d,u),o,a),b=t(Fl.add(l,h),m,o,a),_=t(Fl.sub(f,l),Fl.add(u,c),o,a),x=t(Fl.sub(h,p),Fl.add(d,m),o,a),k=Fl.add(g,y);k.sub(b),k.add(x);let M=Fl.add(w,b),S=Fl.add(v,y),E=Fl.sub(g,v);E.add(w),E.add(_);let A=Fl.zeros(2*k.rows,2*k.columns);return A=A.setSubMatrix(k,0,0),A=A.setSubMatrix(M,k.rows,0),A=A.setSubMatrix(S,0,k.columns),A=A.setSubMatrix(E,k.rows,k.columns),A.subMatrix(0,n-1,0,i-1)}(e,t=s(t,a,l),a,l)}scaleRows(t={}){if("object"!=typeof t)throw new TypeError("options must be an object");const{min:e=0,max:r=1}=t;if(!Number.isFinite(e))throw new TypeError("min must be a number");if(!Number.isFinite(r))throw new TypeError("max must be a number");if(e>=r)throw new RangeError("min must be smaller than max");let n=new Nl(this.rows,this.columns);for(let t=0;t<this.rows;t++){const i=this.getRow(t);i.length>0&&(0,ja.Z)(i,{min:e,max:r,output:i}),n.setRow(t,i)}return n}scaleColumns(t={}){if("object"!=typeof t)throw new TypeError("options must be an object");const{min:e=0,max:r=1}=t;if(!Number.isFinite(e))throw new TypeError("min must be a number");if(!Number.isFinite(r))throw new TypeError("max must be a number");if(e>=r)throw new RangeError("min must be smaller than max");let n=new Nl(this.rows,this.columns);for(let t=0;t<this.columns;t++){const i=this.getColumn(t);i.length&&(0,ja.Z)(i,{min:e,max:r,output:i}),n.setColumn(t,i)}return n}flipRows(){const t=Math.ceil(this.columns/2);for(let e=0;e<this.rows;e++)for(let r=0;r<t;r++){let t=this.get(e,r),n=this.get(e,this.columns-1-r);this.set(e,r,n),this.set(e,this.columns-1-r,t)}return this}flipColumns(){const t=Math.ceil(this.rows/2);for(let e=0;e<this.columns;e++)for(let r=0;r<t;r++){let t=this.get(r,e),n=this.get(this.rows-1-r,e);this.set(r,e,n),this.set(this.rows-1-r,e,t)}return this}kroneckerProduct(t){t=Nl.checkMatrix(t);let e=this.rows,r=this.columns,n=t.rows,i=t.columns,o=new Nl(e*n,r*i);for(let s=0;s<e;s++)for(let e=0;e<r;e++)for(let r=0;r<n;r++)for(let a=0;a<i;a++)o.set(n*s+r,i*e+a,this.get(s,e)*t.get(r,a));return o}kroneckerSum(t){if(t=Nl.checkMatrix(t),!this.isSquare()||!t.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let e=this.rows,r=t.rows,n=this.kroneckerProduct(Nl.eye(r,r)),i=Nl.eye(e,e).kroneckerProduct(t);return n.add(i)}transpose(){let t=new Nl(this.columns,this.rows);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)t.set(r,e,this.get(e,r));return t}sortRows(t=jl){for(let e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}sortColumns(t=jl){for(let e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}subMatrix(t,e,r,n){Pl(this,t,e,r,n);let i=new Nl(e-t+1,n-r+1);for(let o=t;o<=e;o++)for(let e=r;e<=n;e++)i.set(o-t,e-r,this.get(o,e));return i}subMatrixRow(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=this.columns-1),e>r||e<0||e>=this.columns||r<0||r>=this.columns)throw new RangeError("Argument out of range");let n=new Nl(t.length,r-e+1);for(let i=0;i<t.length;i++)for(let o=e;o<=r;o++){if(t[i]<0||t[i]>=this.rows)throw new RangeError(`Row index out of range: ${t[i]}`);n.set(i,o-e,this.get(t[i],o))}return n}subMatrixColumn(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=this.rows-1),e>r||e<0||e>=this.rows||r<0||r>=this.rows)throw new RangeError("Argument out of range");let n=new Nl(r-e+1,t.length);for(let i=0;i<t.length;i++)for(let o=e;o<=r;o++){if(t[i]<0||t[i]>=this.columns)throw new RangeError(`Column index out of range: ${t[i]}`);n.set(o-e,i,this.get(o,t[i]))}return n}setSubMatrix(t,e,r){if((t=Nl.checkMatrix(t)).isEmpty())return this;Pl(this,e,e+t.rows-1,r,r+t.columns-1);for(let n=0;n<t.rows;n++)for(let i=0;i<t.columns;i++)this.set(e+n,r+i,t.get(n,i));return this}selection(t,e){let r=function(t,e,r){return{row:Dl(t,e),column:Ol(t,r)}}(this,t,e),n=new Nl(t.length,e.length);for(let t=0;t<r.row.length;t++){let e=r.row[t];for(let i=0;i<r.column.length;i++){let o=r.column[i];n.set(t,i,this.get(e,o))}}return n}trace(){let t=Math.min(this.rows,this.columns),e=0;for(let r=0;r<t;r++)e+=this.get(r,r);return e}clone(){let t=new Nl(this.rows,this.columns);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)t.set(e,r,this.get(e,r));return t}sum(t){switch(t){case"row":return function(t){let e=Rl(t.rows);for(let r=0;r<t.rows;++r)for(let n=0;n<t.columns;++n)e[r]+=t.get(r,n);return e}(this);case"column":return function(t){let e=Rl(t.columns);for(let r=0;r<t.rows;++r)for(let n=0;n<t.columns;++n)e[n]+=t.get(r,n);return e}(this);case void 0:return function(t){let e=0;for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)e+=t.get(r,n);return e}(this);default:throw new Error(`invalid option: ${t}`)}}product(t){switch(t){case"row":return function(t){let e=Rl(t.rows,1);for(let r=0;r<t.rows;++r)for(let n=0;n<t.columns;++n)e[r]*=t.get(r,n);return e}(this);case"column":return function(t){let e=Rl(t.columns,1);for(let r=0;r<t.rows;++r)for(let n=0;n<t.columns;++n)e[n]*=t.get(r,n);return e}(this);case void 0:return function(t){let e=1;for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)e*=t.get(r,n);return e}(this);default:throw new Error(`invalid option: ${t}`)}}mean(t){const e=this.sum(t);switch(t){case"row":for(let t=0;t<this.rows;t++)e[t]/=this.columns;return e;case"column":for(let t=0;t<this.columns;t++)e[t]/=this.rows;return e;case void 0:return e/this.size;default:throw new Error(`invalid option: ${t}`)}}variance(t,e={}){if("object"==typeof t&&(e=t,t=void 0),"object"!=typeof e)throw new TypeError("options must be an object");const{unbiased:r=!0,mean:n=this.mean(t)}=e;if("boolean"!=typeof r)throw new TypeError("unbiased must be a boolean");switch(t){case"row":if(!Array.isArray(n))throw new TypeError("mean must be an array");return function(t,e,r){const n=t.rows,i=t.columns,o=[];for(let s=0;s<n;s++){let n=0,a=0,l=0;for(let e=0;e<i;e++)l=t.get(s,e)-r[s],n+=l,a+=l*l;e?o.push((a-n*n/i)/(i-1)):o.push((a-n*n/i)/i)}return o}(this,r,n);case"column":if(!Array.isArray(n))throw new TypeError("mean must be an array");return function(t,e,r){const n=t.rows,i=t.columns,o=[];for(let s=0;s<i;s++){let i=0,a=0,l=0;for(let e=0;e<n;e++)l=t.get(e,s)-r[s],i+=l,a+=l*l;e?o.push((a-i*i/n)/(n-1)):o.push((a-i*i/n)/n)}return o}(this,r,n);case void 0:if("number"!=typeof n)throw new TypeError("mean must be a number");return function(t,e,r){const n=t.rows,i=t.columns,o=n*i;let s=0,a=0,l=0;for(let e=0;e<n;e++)for(let n=0;n<i;n++)l=t.get(e,n)-r,s+=l,a+=l*l;return e?(a-s*s/o)/(o-1):(a-s*s/o)/o}(this,r,n);default:throw new Error(`invalid option: ${t}`)}}standardDeviation(t,e){"object"==typeof t&&(e=t,t=void 0);const r=this.variance(t,e);if(void 0===t)return Math.sqrt(r);for(let t=0;t<r.length;t++)r[t]=Math.sqrt(r[t]);return r}center(t,e={}){if("object"==typeof t&&(e=t,t=void 0),"object"!=typeof e)throw new TypeError("options must be an object");const{center:r=this.mean(t)}=e;switch(t){case"row":if(!Array.isArray(r))throw new TypeError("center must be an array");return function(t,e){for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)-e[r])}(this,r),this;case"column":if(!Array.isArray(r))throw new TypeError("center must be an array");return function(t,e){for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)-e[n])}(this,r),this;case void 0:if("number"!=typeof r)throw new TypeError("center must be a number");return function(t,e){for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)-e)}(this,r),this;default:throw new Error(`invalid option: ${t}`)}}scale(t,e={}){if("object"==typeof t&&(e=t,t=void 0),"object"!=typeof e)throw new TypeError("options must be an object");let r=e.scale;switch(t){case"row":if(void 0===r)r=function(t){const e=[];for(let r=0;r<t.rows;r++){let n=0;for(let e=0;e<t.columns;e++)n+=Math.pow(t.get(r,e),2)/(t.columns-1);e.push(Math.sqrt(n))}return e}(this);else if(!Array.isArray(r))throw new TypeError("scale must be an array");return function(t,e){for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)/e[r])}(this,r),this;case"column":if(void 0===r)r=function(t){const e=[];for(let r=0;r<t.columns;r++){let n=0;for(let e=0;e<t.rows;e++)n+=Math.pow(t.get(e,r),2)/(t.rows-1);e.push(Math.sqrt(n))}return e}(this);else if(!Array.isArray(r))throw new TypeError("scale must be an array");return function(t,e){for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)/e[n])}(this,r),this;case void 0:if(void 0===r)r=function(t){const e=t.size-1;let r=0;for(let n=0;n<t.columns;n++)for(let i=0;i<t.rows;i++)r+=Math.pow(t.get(i,n),2)/e;return Math.sqrt(r)}(this);else if("number"!=typeof r)throw new TypeError("scale must be a number");return function(t,e){for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)/e)}(this,r),this;default:throw new Error(`invalid option: ${t}`)}}toString(t){return kl(this,t)}}function jl(t,e){return t-e}Fl.prototype.klass="Matrix","undefined"!=typeof Symbol&&(Fl.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return kl(this)}),Fl.random=Fl.rand,Fl.randomInt=Fl.randInt,Fl.diagonal=Fl.diag,Fl.prototype.diagonal=Fl.prototype.diag,Fl.identity=Fl.eye,Fl.prototype.negate=Fl.prototype.neg,Fl.prototype.tensorProduct=Fl.prototype.kroneckerProduct;class Nl extends Fl{constructor(t,e){if(super(),Nl.isMatrix(t))return t.clone();if(Number.isInteger(t)&&t>=0){if(this.data=[],!(Number.isInteger(e)&&e>=0))throw new TypeError("nColumns must be a positive integer");for(let r=0;r<t;r++)this.data.push(new Float64Array(e))}else{if(!Array.isArray(t))throw new TypeError("First argument must be a positive number or an array");{const r=t;if("number"!=typeof(e=(t=r.length)?r[0].length:0))throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let n=0;n<t;n++){if(r[n].length!==e)throw new RangeError("Inconsistent array dimensions");this.data.push(Float64Array.from(r[n]))}}}this.rows=t,this.columns=e}set(t,e,r){return this.data[t][e]=r,this}get(t,e){return this.data[t][e]}removeRow(t){return Sl(this,t),this.data.splice(t,1),this.rows-=1,this}addRow(t,e){return void 0===e&&(e=t,t=this.rows),Sl(this,t,!0),e=Float64Array.from(Al(this,e)),this.data.splice(t,0,e),this.rows+=1,this}removeColumn(t){El(this,t);for(let e=0;e<this.rows;e++){const r=new Float64Array(this.columns-1);for(let n=0;n<t;n++)r[n]=this.data[e][n];for(let n=t+1;n<this.columns;n++)r[n-1]=this.data[e][n];this.data[e]=r}return this.columns-=1,this}addColumn(t,e){void 0===e&&(e=t,t=this.columns),El(this,t,!0),e=Cl(this,e);for(let r=0;r<this.rows;r++){const n=new Float64Array(this.columns+1);let i=0;for(;i<t;i++)n[i]=this.data[r][i];for(n[i++]=e[r];i<this.columns+1;i++)n[i]=this.data[r][i-1];this.data[r]=n}return this.columns+=1,this}}!function(t,e){t.prototype.add=function(t){return"number"==typeof t?this.addS(t):this.addM(t)},t.prototype.addS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t);return this},t.prototype.addM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t.get(e,r));return this},t.add=function(t,r){return new e(t).add(r)},t.prototype.sub=function(t){return"number"==typeof t?this.subS(t):this.subM(t)},t.prototype.subS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t);return this},t.prototype.subM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t.get(e,r));return this},t.sub=function(t,r){return new e(t).sub(r)},t.prototype.subtract=t.prototype.sub,t.prototype.subtractS=t.prototype.subS,t.prototype.subtractM=t.prototype.subM,t.subtract=t.sub,t.prototype.mul=function(t){return"number"==typeof t?this.mulS(t):this.mulM(t)},t.prototype.mulS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t);return this},t.prototype.mulM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t.get(e,r));return this},t.mul=function(t,r){return new e(t).mul(r)},t.prototype.multiply=t.prototype.mul,t.prototype.multiplyS=t.prototype.mulS,t.prototype.multiplyM=t.prototype.mulM,t.multiply=t.mul,t.prototype.div=function(t){return"number"==typeof t?this.divS(t):this.divM(t)},t.prototype.divS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t);return this},t.prototype.divM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t.get(e,r));return this},t.div=function(t,r){return new e(t).div(r)},t.prototype.divide=t.prototype.div,t.prototype.divideS=t.prototype.divS,t.prototype.divideM=t.prototype.divM,t.divide=t.div,t.prototype.mod=function(t){return"number"==typeof t?this.modS(t):this.modM(t)},t.prototype.modS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)%t);return this},t.prototype.modM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)%t.get(e,r));return this},t.mod=function(t,r){return new e(t).mod(r)},t.prototype.modulus=t.prototype.mod,t.prototype.modulusS=t.prototype.modS,t.prototype.modulusM=t.prototype.modM,t.modulus=t.mod,t.prototype.and=function(t){return"number"==typeof t?this.andS(t):this.andM(t)},t.prototype.andS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)&t);return this},t.prototype.andM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)&t.get(e,r));return this},t.and=function(t,r){return new e(t).and(r)},t.prototype.or=function(t){return"number"==typeof t?this.orS(t):this.orM(t)},t.prototype.orS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)|t);return this},t.prototype.orM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)|t.get(e,r));return this},t.or=function(t,r){return new e(t).or(r)},t.prototype.xor=function(t){return"number"==typeof t?this.xorS(t):this.xorM(t)},t.prototype.xorS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)^t);return this},t.prototype.xorM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)^t.get(e,r));return this},t.xor=function(t,r){return new e(t).xor(r)},t.prototype.leftShift=function(t){return"number"==typeof t?this.leftShiftS(t):this.leftShiftM(t)},t.prototype.leftShiftS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)<<t);return this},t.prototype.leftShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)<<t.get(e,r));return this},t.leftShift=function(t,r){return new e(t).leftShift(r)},t.prototype.signPropagatingRightShift=function(t){return"number"==typeof t?this.signPropagatingRightShiftS(t):this.signPropagatingRightShiftM(t)},t.prototype.signPropagatingRightShiftS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)>>t);return this},t.prototype.signPropagatingRightShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)>>t.get(e,r));return this},t.signPropagatingRightShift=function(t,r){return new e(t).signPropagatingRightShift(r)},t.prototype.rightShift=function(t){return"number"==typeof t?this.rightShiftS(t):this.rightShiftM(t)},t.prototype.rightShiftS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)>>>t);return this},t.prototype.rightShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)>>>t.get(e,r));return this},t.rightShift=function(t,r){return new e(t).rightShift(r)},t.prototype.zeroFillRightShift=t.prototype.rightShift,t.prototype.zeroFillRightShiftS=t.prototype.rightShiftS,t.prototype.zeroFillRightShiftM=t.prototype.rightShiftM,t.zeroFillRightShift=t.rightShift,t.prototype.not=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,~this.get(t,e));return this},t.not=function(t){return new e(t).not()},t.prototype.abs=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.abs(this.get(t,e)));return this},t.abs=function(t){return new e(t).abs()},t.prototype.acos=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.acos(this.get(t,e)));return this},t.acos=function(t){return new e(t).acos()},t.prototype.acosh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.acosh(this.get(t,e)));return this},t.acosh=function(t){return new e(t).acosh()},t.prototype.asin=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.asin(this.get(t,e)));return this},t.asin=function(t){return new e(t).asin()},t.prototype.asinh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.asinh(this.get(t,e)));return this},t.asinh=function(t){return new e(t).asinh()},t.prototype.atan=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.atan(this.get(t,e)));return this},t.atan=function(t){return new e(t).atan()},t.prototype.atanh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.atanh(this.get(t,e)));return this},t.atanh=function(t){return new e(t).atanh()},t.prototype.cbrt=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.cbrt(this.get(t,e)));return this},t.cbrt=function(t){return new e(t).cbrt()},t.prototype.ceil=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.ceil(this.get(t,e)));return this},t.ceil=function(t){return new e(t).ceil()},t.prototype.clz32=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.clz32(this.get(t,e)));return this},t.clz32=function(t){return new e(t).clz32()},t.prototype.cos=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.cos(this.get(t,e)));return this},t.cos=function(t){return new e(t).cos()},t.prototype.cosh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.cosh(this.get(t,e)));return this},t.cosh=function(t){return new e(t).cosh()},t.prototype.exp=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.exp(this.get(t,e)));return this},t.exp=function(t){return new e(t).exp()},t.prototype.expm1=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.expm1(this.get(t,e)));return this},t.expm1=function(t){return new e(t).expm1()},t.prototype.floor=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.floor(this.get(t,e)));return this},t.floor=function(t){return new e(t).floor()},t.prototype.fround=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.fround(this.get(t,e)));return this},t.fround=function(t){return new e(t).fround()},t.prototype.log=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log(this.get(t,e)));return this},t.log=function(t){return new e(t).log()},t.prototype.log1p=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log1p(this.get(t,e)));return this},t.log1p=function(t){return new e(t).log1p()},t.prototype.log10=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log10(this.get(t,e)));return this},t.log10=function(t){return new e(t).log10()},t.prototype.log2=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log2(this.get(t,e)));return this},t.log2=function(t){return new e(t).log2()},t.prototype.round=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.round(this.get(t,e)));return this},t.round=function(t){return new e(t).round()},t.prototype.sign=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sign(this.get(t,e)));return this},t.sign=function(t){return new e(t).sign()},t.prototype.sin=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sin(this.get(t,e)));return this},t.sin=function(t){return new e(t).sin()},t.prototype.sinh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sinh(this.get(t,e)));return this},t.sinh=function(t){return new e(t).sinh()},t.prototype.sqrt=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sqrt(this.get(t,e)));return this},t.sqrt=function(t){return new e(t).sqrt()},t.prototype.tan=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.tan(this.get(t,e)));return this},t.tan=function(t){return new e(t).tan()},t.prototype.tanh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.tanh(this.get(t,e)));return this},t.tanh=function(t){return new e(t).tanh()},t.prototype.trunc=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.trunc(this.get(t,e)));return this},t.trunc=function(t){return new e(t).trunc()},t.pow=function(t,r){return new e(t).pow(r)},t.prototype.pow=function(t){return"number"==typeof t?this.powS(t):this.powM(t)},t.prototype.powS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,Math.pow(this.get(e,r),t));return this},t.prototype.powM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,Math.pow(this.get(e,r),t.get(e,r)));return this}}(Fl,Nl);var Bl=r(5591),Ul=r(7452),Ll=r(992),$l=r.n(Ll);const zl={lambda:.1,kernelType:"gaussian",kernelOptions:{},computeCoefficient:!1};class ql extends bl{constructor(t,e,r){if(super(),!0===t)this.alpha=e.alpha,this.inputs=e.inputs,this.kernelType=e.kernelType,this.kernelOptions=e.kernelOptions,this.kernel=new($l())(e.kernelType,e.kernelOptions);else{t=Bl.Z.checkMatrix(t),r=Object.assign({},zl,r);const n=new($l())(r.kernelType,r.kernelOptions),i=n.compute(t),o=t.rows;i.add(Bl.Z.eye(o,o).mul(r.lambda)),this.alpha=(0,Ul.F)(i,e),this.inputs=t,this.kernelType=r.kernelType,this.kernelOptions=r.kernelOptions,this.kernel=n}}_predict(t){return this.kernel.compute([t],this.inputs).mmul(this.alpha).getRow(0)}toJSON(){return{name:"kernelRidgeRegression",alpha:this.alpha,inputs:this.inputs,kernelType:this.kernelType,kernelOptions:this.kernelOptions}}static load(t){if("kernelRidgeRegression"!==t.name)throw new TypeError("not a KRR model");return new ql(!0,t)}}function Vl(t,e,r){const n=new ql(t,e,r),i=new Array(this.size);for(let t=0;t<this.width;t++)for(let e=0;e<this.height;e++)i[e*this.width+t]=[t,e];const o=n.predict(i),s=Qc.createFrom(this);for(let t=0;t<this.size;t++)s.data[t]=Math.min(this.maxValue,Math.max(0,o[t][0]));return s}function Yl(t={}){let{kernel:e=[[1,1,1],[1,1,1],[1,1,1]],iterations:r=1}=t;if(this.checkProcessable("dilate",{bitDepth:[1,8,16],components:1,alpha:0}),e.columns%2==0||e.rows%2==0)throw new TypeError("dilate: The number of rows and columns of the kernel must be odd");let n=!0;t:for(const t of e)for(const e of t)if(1!==e){n=!1;break t}let i=this;for(let t=0;t<r;t++)if(1===this.bitDepth)if(n){const t=i.clone();i=Hl(i,t,e.length,e[0].length)}else{i=Xl(i,Qc.createFrom(i),e)}else if(n){i=Gl(i,Qc.createFrom(i),e.length,e[0].length)}else{i=Zl(i,Qc.createFrom(i),e)}return i}function Zl(t,e,r){const n=r.length,i=r[0].length;let o=(n-1)/2,s=(i-1)/2;for(let a=0;a<t.height;a++)for(let l=0;l<t.width;l++){let u=0;for(let e=0;e<i;e++)for(let i=0;i<n;i++){if(1!==r[i][e])continue;let n=i-o+l,h=e-s+a;if(n<0||h<0||n>=t.width||h>=t.height)continue;const c=t.getValueXY(n,h,0);c>u&&(u=c)}e.setValueXY(l,a,0,u)}return e}function Gl(t,e,r,n){const i=(r-1)/2,o=(n-1)/2,s=[];for(let e=0;e<t.width;e++)s.push(0);for(let r=0;r<t.height;r++){for(let e=0;e<t.width;e++){let n=0;for(let i=Math.max(0,r-o);i<Math.min(t.height,r+o+1);i++){const r=t.getValueXY(e,i,0);r>n&&(n=r)}s[e]=n}for(let n=0;n<t.width;n++){let o=0;for(let e=Math.max(0,n-i);e<Math.min(t.width,n+i+1);e++)s[e]>o&&(o=s[e]);e.setValueXY(n,r,0,o)}}return e}function Xl(t,e,r){const n=r.length,i=r[0].length;let o=(n-1)/2,s=(i-1)/2;for(let a=0;a<t.height;a++)for(let l=0;l<t.width;l++){let u=0;t:for(let e=0;e<i;e++)for(let i=0;i<n;i++){if(1!==r[i][e])continue;let n=i-o+l,h=e-s+a;if(h<0||n<0||n>=t.width||h>=t.height)continue;if(1===t.getBitXY(n,h)){u=1;break t}}1===u&&e.setBitXY(l,a)}return e}function Hl(t,e,r,n){const i=(r-1)/2,o=(n-1)/2,s=[];for(let e=0;e<t.width;e++)s.push(1);for(let r=0;r<t.height;r++){for(let e=0;e<t.width;e++){s[e]=0;for(let n=Math.max(0,r-o);n<Math.min(t.height,r+o+1);n++)if(1===t.getBitXY(e,n)){s[e]=1;break}}for(let n=0;n<t.width;n++)if(1!==e.getBitXY(n,r))for(let o=Math.max(0,n-i);o<Math.min(t.width,n+i+1);o++)if(1===s[o]){e.setBitXY(n,r);break}}return e}function Ql(t={}){let{kernel:e=[[1,1,1],[1,1,1],[1,1,1]],iterations:r=1}=t;if(this.checkProcessable("erode",{bitDepth:[1,8,16],components:1,alpha:0}),e.columns%2==0||e.rows%2==0)throw new TypeError("erode: The number of rows and columns of the kernel must be odd");let n=!0;t:for(const t of e)for(const e of t)if(1!==e){n=!1;break t}let i=this;for(let t=0;t<r;t++)if(1===this.bitDepth)if(n){const t=i.clone();i=tu(i,t,e.length,e[0].length)}else{i=Jl(i,Qc.createFrom(i),e)}else if(n){i=Kl(i,Qc.createFrom(i),e.length,e[0].length)}else{i=Wl(i,Qc.createFrom(i),e)}return i}function Wl(t,e,r){const n=r.length,i=r[0].length;let o=(n-1)/2,s=(i-1)/2;for(let a=0;a<t.height;a++)for(let l=0;l<t.width;l++){let u=t.maxValue;for(let e=0;e<i;e++)for(let i=0;i<n;i++){if(1!==r[i][e])continue;let n=i-o+l,h=e-s+a;if(n<0||h<0||n>=t.width||h>=t.height)continue;const c=t.getValueXY(n,h,0);c<u&&(u=c)}e.setValueXY(l,a,0,u)}return e}function Kl(t,e,r,n){const i=(r-1)/2,o=(n-1)/2,s=[];for(let e=0;e<t.width;e++)s.push(0);for(let r=0;r<t.height;r++){for(let e=0;e<t.width;e++){let n=t.maxValue;for(let i=Math.max(0,r-o);i<Math.min(t.height,r+o+1);i++){const r=t.getValueXY(e,i,0);r<n&&(n=r)}s[e]=n}for(let n=0;n<t.width;n++){let o=t.maxValue;for(let e=Math.max(0,n-i);e<Math.min(t.width,n+i+1);e++)s[e]<o&&(o=s[e]);e.setValueXY(n,r,0,o)}}return e}function Jl(t,e,r){const n=r.length,i=r[0].length;let o=(n-1)/2,s=(i-1)/2;for(let a=0;a<t.height;a++)for(let l=0;l<t.width;l++){let u=1;t:for(let e=0;e<i;e++)for(let i=0;i<n;i++){if(1!==r[i][e])continue;let n=i-o+l,h=e-s+a;if(h<0||n<0||n>=t.width||h>=t.height)continue;if(0===t.getBitXY(n,h)){u=0;break t}}1===u&&e.setBitXY(l,a)}return e}function tu(t,e,r,n){const i=(r-1)/2,o=(n-1)/2,s=[];for(let e=0;e<t.width;e++)s.push(0);for(let r=0;r<t.height;r++){for(let e=0;e<t.width;e++){s[e]=1;for(let n=Math.max(0,r-o);n<Math.min(t.height,r+o+1);n++)if(0===t.getBitXY(e,n)){s[e]=0;break}}for(let n=0;n<t.width;n++)if(0!==e.getBitXY(n,r))for(let o=Math.max(0,n-i);o<Math.min(t.width,n+i+1);o++)if(0===s[o]){e.clearBitXY(n,r);break}}return e}function eu(t={}){let{kernel:e=[[1,1,1],[1,1,1],[1,1,1]],iterations:r=1}=t;if(this.checkProcessable("open",{bitDepth:[8,16],components:1,alpha:0}),e.columns%2==0||e.rows%2==0)throw new TypeError("open: The number of rows and columns of the kernel must be odd");let n=this;for(let t=0;t<r;t++)n=n.erode({kernel:e}),n=n.dilate({kernel:e});return n}function ru(t={}){let{kernel:e=[[1,1,1],[1,1,1],[1,1,1]],iterations:r=1}=t;if(this.checkProcessable("close",{bitDepth:[1,8,16],components:1,alpha:0}),e.columns%2==0||e.rows%2==0)throw new TypeError("close: The number of rows and columns of the kernel must be odd");let n=this;for(let t=0;t<r;t++)n=n.dilate({kernel:e}).erode({kernel:e});return n}function nu(t={}){let{kernel:e=[[1,1,1],[1,1,1],[1,1,1]],iterations:r=1}=t;if(this.checkProcessable("topHat",{bitDepth:[8,16],components:1,alpha:0}),e.length%2==0||e[0].length%2==0)throw new TypeError("topHat: The number of rows and columns of the kernel must be odd");let n=this;for(let t=0;t<r;t++){let t=n.open({kernel:e});n=t.subtractImage(n,{absolute:!0})}return n}function iu(t={}){let{kernel:e=[[1,1,1],[1,1,1],[1,1,1]],iterations:r=1}=t;if(this.checkProcessable("blackHat",{bitDepth:[8,16],components:1,alpha:0}),e.columns%2==0||e.rows%2==0)throw new TypeError("blackHat: The number of rows and columns of the kernel must be odd");let n=this;for(let t=0;t<r;t++){const t=n.close({kernel:e});n=t.subtractImage(n,{absolute:!0})}return n}function ou(t={}){let{kernel:e=[[1,1,1],[1,1,1],[1,1,1]],iterations:r=1}=t;if(this.checkProcessable("morphologicalGradient",{bitDepth:[8,16],components:1,alpha:0}),e.columns%2==0||e.rows%2==0)throw new TypeError("morphologicalGradient: The number of rows and columns of the kernel must be odd");let n=this;for(let t=0;t<r;t++){let t=n.dilate({kernel:e}),r=n.erode({kernel:e});n=t.subtractImage(r,{absolute:!0})}return n}class su{constructor(t){let e,r,n,i,o,s,a,l,u,h=(t=tl.checkMatrix(t)).clone(),c=h.rows,f=h.columns,d=new Float64Array(c),p=1;for(e=0;e<c;e++)d[e]=e;for(l=new Float64Array(c),r=0;r<f;r++){for(e=0;e<c;e++)l[e]=h.get(e,r);for(e=0;e<c;e++){for(u=Math.min(e,r),o=0,n=0;n<u;n++)o+=h.get(e,n)*l[n];l[e]-=o,h.set(e,r,l[e])}for(i=r,e=r+1;e<c;e++)Math.abs(l[e])>Math.abs(l[i])&&(i=e);if(i!==r){for(n=0;n<f;n++)s=h.get(i,n),h.set(i,n,h.get(r,n)),h.set(r,n,s);a=d[i],d[i]=d[r],d[r]=a,p=-p}if(r<c&&0!==h.get(r,r))for(e=r+1;e<c;e++)h.set(e,r,h.get(e,r)/h.get(r,r))}this.LU=h,this.pivotVector=d,this.pivotSign=p}isSingular(){let t=this.LU,e=t.columns;for(let r=0;r<e;r++)if(0===t.get(r,r))return!0;return!1}solve(t){t=Ja.checkMatrix(t);let e=this.LU;if(e.rows!==t.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");let r,n,i,o=t.columns,s=t.subMatrixRow(this.pivotVector,0,o-1),a=e.columns;for(i=0;i<a;i++)for(r=i+1;r<a;r++)for(n=0;n<o;n++)s.set(r,n,s.get(r,n)-s.get(i,n)*e.get(r,i));for(i=a-1;i>=0;i--){for(n=0;n<o;n++)s.set(i,n,s.get(i,n)/e.get(i,i));for(r=0;r<i;r++)for(n=0;n<o;n++)s.set(r,n,s.get(r,n)-s.get(i,n)*e.get(r,i))}return s}get determinant(){let t=this.LU;if(!t.isSquare())throw new Error("Matrix must be square");let e=this.pivotSign,r=t.columns;for(let n=0;n<r;n++)e*=t.get(n,n);return e}get lowerTriangularMatrix(){let t=this.LU,e=t.rows,r=t.columns,n=new Ja(e,r);for(let i=0;i<e;i++)for(let e=0;e<r;e++)i>e?n.set(i,e,t.get(i,e)):i===e?n.set(i,e,1):n.set(i,e,0);return n}get upperTriangularMatrix(){let t=this.LU,e=t.rows,r=t.columns,n=new Ja(e,r);for(let i=0;i<e;i++)for(let e=0;e<r;e++)i<=e?n.set(i,e,t.get(i,e)):n.set(i,e,0);return n}get pivotPermutationVector(){return Array.from(this.pivotVector)}}class au{constructor(t){let e,r,n,i,o=(t=tl.checkMatrix(t)).clone(),s=t.rows,a=t.columns,l=new Float64Array(a);for(n=0;n<a;n++){let t=0;for(e=n;e<s;e++)t=el(t,o.get(e,n));if(0!==t){for(o.get(n,n)<0&&(t=-t),e=n;e<s;e++)o.set(e,n,o.get(e,n)/t);for(o.set(n,n,o.get(n,n)+1),r=n+1;r<a;r++){for(i=0,e=n;e<s;e++)i+=o.get(e,n)*o.get(e,r);for(i=-i/o.get(n,n),e=n;e<s;e++)o.set(e,r,o.get(e,r)+i*o.get(e,n))}}l[n]=-t}this.QR=o,this.Rdiag=l}solve(t){t=Ja.checkMatrix(t);let e=this.QR,r=e.rows;if(t.rows!==r)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");let n,i,o,s,a=t.columns,l=t.clone(),u=e.columns;for(o=0;o<u;o++)for(i=0;i<a;i++){for(s=0,n=o;n<r;n++)s+=e.get(n,o)*l.get(n,i);for(s=-s/e.get(o,o),n=o;n<r;n++)l.set(n,i,l.get(n,i)+s*e.get(n,o))}for(o=u-1;o>=0;o--){for(i=0;i<a;i++)l.set(o,i,l.get(o,i)/this.Rdiag[o]);for(n=0;n<o;n++)for(i=0;i<a;i++)l.set(n,i,l.get(n,i)-l.get(o,i)*e.get(n,o))}return l.subMatrix(0,u-1,0,a-1)}isFullRank(){let t=this.QR.columns;for(let e=0;e<t;e++)if(0===this.Rdiag[e])return!1;return!0}get upperTriangularMatrix(){let t,e,r=this.QR,n=r.columns,i=new Ja(n,n);for(t=0;t<n;t++)for(e=0;e<n;e++)t<e?i.set(t,e,r.get(t,e)):t===e?i.set(t,e,this.Rdiag[t]):i.set(t,e,0);return i}get orthogonalMatrix(){let t,e,r,n,i=this.QR,o=i.rows,s=i.columns,a=new Ja(o,s);for(r=s-1;r>=0;r--){for(t=0;t<o;t++)a.set(t,r,0);for(a.set(r,r,1),e=r;e<s;e++)if(0!==i.get(r,r)){for(n=0,t=r;t<o;t++)n+=i.get(t,r)*a.get(t,e);for(n=-n/i.get(r,r),t=r;t<o;t++)a.set(t,e,a.get(t,e)+n*i.get(t,r))}}return a}}function lu(t,e=!1){return t=tl.checkMatrix(t),e?new rl(t).inverse():function(t,e,r=!1){return t=tl.checkMatrix(t),e=tl.checkMatrix(e),r?new rl(t).solve(e):t.isSquare()?new su(t).solve(e):new au(t).solve(e)}(t,Ja.eye(t.rows))}function uu(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}function hu(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function cu(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function fu(t,e,r,n,i,o,s,a,l,u,h,c){let[f,d]=[(r*t+n*e+i)/(l*t+u*e+1),(o*t+s*e+a)/(l*t+u*e+1)];return h.getValueXY(Math.floor(f),Math.floor(d),c)}function du(t,e={}){let{calculateRatio:r=!0}=e;if(4!==t.length)throw new Error(`The array pts must have four elements, which are the four corners. Currently, pts have ${t.length} elements`);let n,i,[o,s,a,l]=t,u=[o,s,a,l],[h,c,f,d]=function(t){let e=0,r=0,n=0,i=0,o=t[0][0],s=0;for(let e=1;e<t.length;e++)t[e][0]<o&&(o=t[e][0],s=e);let a=t[(s+1)%t.length][0],l=(s+1)%t.length;for(let e=1;e<t.length;e++)t[e][0]<a&&e!==s&&(a=t[e][0],l=e);return t[l][1]<t[s][1]?(e=t[l],i=t[s],s!==(l+1)%4?(r=t[(l+1)%4],n=t[(l+2)%4]):(r=t[(l+2)%4],n=t[(l+3)%4])):(i=t[l],e=t[s],l!==(s+1)%4?(r=t[(s+1)%4],n=t[(s+2)%4]):(r=t[(s+2)%4],n=t[(s+3)%4])),[e,r,n,i]}(u);r?[n,i]=function(t,e,r,n,i,o){let s=Math.max(uu(t,e),uu(n,r)),a=Math.max(uu(t,n),uu(e,r)),l=0,u=0,h=Math.ceil(i/2),c=Math.ceil(o/2),f=s/a,d=[t[0],t[1],1],p=[e[0],e[1],1],m=[n[0],n[1],1],g=[r[0],r[1],1],v=cu(hu(d,g),m)/cu(hu(p,g),m),w=cu(hu(d,g),p)/cu(hu(m,g),p),y=[v*p[0]-d[0],v*p[1]-d[1],v*p[2]-d[2]],b=[w*m[0]-d[0],w*m[1]-d[1],w*m[2]-d[2]],_=y[0],x=y[1],k=y[2],M=b[0],S=b[1],E=b[2],A=1/(k*E)*(_*M-(_*E+k*M)*h+k*E*h*h+(x*S-(x*E+k*S)*c+k*E*c*c));A=A>=0?Math.sqrt(A):Math.sqrt(-A);let C=new Ja([[A,0,h],[0,A,c],[0,0,1]]),D=lu(C.transpose()),O=lu(C),P=Ja.rowVector(y),R=Ja.rowVector(b),I=Math.sqrt(cu(P.mmul(D).mmul(O).to1DArray(),y)/cu(R.mmul(D).mmul(O).to1DArray(),b));return 0===I||0===f?(l=Math.ceil(s),u=Math.ceil(a)):I<f?(l=Math.ceil(s),u=Math.ceil(l/I)):(u=Math.ceil(a),l=Math.ceil(I*u)),[l,u]}(h,c,f,d,this.width,this.height):(n=Math.ceil(Math.max(uu(h,c),uu(d,f))),i=Math.ceil(Math.max(uu(h,d),uu(c,f))));let p=Qc.createFrom(this,{width:n,height:i}),[m,g]=h,[v,w]=c,[y,b]=f,[_,x]=d,[k,M]=[0,0],[S,E]=[0,n-1],[A,C]=[i-1,n-1],[D,O]=[i-1,0],P=new Ja([[k,M,1,0,0,0,-k*m,-M*m],[S,E,1,0,0,0,-S*v,-E*v],[A,C,1,0,0,0,-A*y,-M*y],[D,O,1,0,0,0,-D*_,-O*_],[0,0,0,k,M,1,-k*g,-M*g],[0,0,0,S,E,1,-S*w,-E*w],[0,0,0,A,C,1,-A*b,-C*b],[0,0,0,D,O,1,-D*x,-O*x]]),R=Ja.columnVector([m,v,y,_,g,w,b,x]),I=new rl(P).solve(R),[T,F,j,N,B,U,L,$]=I.to1DArray(),z=new Ja(i,n);for(let t=0;t<this.channels;t++){for(let e=0;e<i;e++)for(let r=0;r<n;r++)z.set(e,r,fu(e,r,T,F,j,N,B,U,L,$,this,t));p.setMatrix(z,{channel:t})}return p}function pu(t={}){let{x:e=0,y:r=0,width:n=this.width-e,height:i=this.height-r}=t;if(this.checkProcessable("max",{bitDepth:[8,16]}),e=Math.round(e),r=Math.round(r),n=Math.round(n),i=Math.round(i),e>this.width-1||r>this.height-1)throw new RangeError(`crop: origin (x:${e}, y:${r}) out of range (${this.width-1}; ${this.height-1})`);if(n<=0||i<=0)throw new RangeError(`crop: width and height (width:${n}; height:${i}) must be positive numbers`);if(e<0||r<0)throw new RangeError(`crop: x and y (x:${e}, y:${r}) must be positive numbers`);if(n>this.width-e||i>this.height-r)throw new RangeError(`crop: (x: ${e}, y:${r}, width:${n}, height:${i}) size is out of range`);let o=Qc.createFrom(this,{width:n,height:i,position:[e,r]}),s=n*this.channels,a=r+i,l=0,u=e*this.channels;for(let t=r;t<a;t++){let e=t*this.width*this.channels+u,r=e+s;for(;e<r;e++)o.data[l++]=this.data[e]}return o}function mu(t={}){this.checkProcessable("cropAlpha",{alpha:1});const{threshold:e=this.maxValue}=t;let r=function(t,e,r){for(let n=0;n<t.width;n++)for(let i=0;i<t.height;i++)if(t.getValueXY(n,i,r)>=e)return n;return-1}(this,e,this.components);if(-1===r)throw new Error("Could not find new dimensions. Threshold may be too high.");let n=function(t,e,r,n){for(let i=0;i<t.height;i++)for(let o=n;o<t.width;o++)if(t.getValueXY(o,i,r)>=e)return i;return-1}(this,e,this.components,r),i=function(t,e,r,n){for(let i=t.height-1;i>=0;i--)for(let o=n;o<t.width;o++)if(t.getValueXY(o,i,r)>=e)return i;return-1}(this,e,this.components,r),o=function(t,e,r,n,i,o){for(let s=t.width-1;s>=n;s--)for(let n=i;n<=o;n++)if(t.getValueXY(s,n,r)>=e)return s;return-1}(this,e,this.components,r,n,i);return this.crop({x:r,y:n,width:o-r+1,height:i-n+1})}function gu(t,e,r){t=function(t){if("string"==typeof t){const e=t[t.length-1];t=parseFloat(t),"%"===e&&(t/=100)}return t}(t);let n=Math.round(t*e),i=Math.round(t*r);return n<=0&&(n=1),i<=0&&(i=1),{width:n,height:i}}function vu(t,e){if(e<0||e>=t.channels)throw new RangeError(`channel must be included between 0 and ${t.channels-1}. Current value: ${e}`)}const wu={nearestneighbor:"nearestNeighbor",nearestneighbour:"nearestNeighbor",bilinear:"bilinear"};function yu(t){if("string"!=typeof t)throw new TypeError("interpolation must be a string");if(t=t.toLowerCase(),!wu[t])throw new RangeError(`invalid interpolation algorithm: ${t}`);return wu[t]}function bu(t,e,r){const n=this.width/e,i=this.height/r;if(this.bitDepth>1)for(let o=0;o<e;o++){const e=Math.floor((o+.5)*n);for(let n=0;n<r;n++){const r=Math.floor((n+.5)*i);for(let i=0;i<this.channels;i++)t.setValueXY(o,n,i,this.getValueXY(e,r,i))}}else for(let o=0;o<e;o++){const e=Math.floor((o+.5)*n);for(let n=0;n<r;n++){const r=Math.floor((n+.5)*i);this.getBitXY(e,r)&&t.setBitXY(o,n)}}}function _u(t={}){const{factor:e=1,interpolation:r=wu.nearestneighbor,preserveAspectRatio:n=!0}=t,i=yu(r);let o=t.width,s=t.height;if(o||(o=s&&n?Math.round(s*(this.width/this.height)):this.width),s||(s=n?Math.round(o*(this.height/this.width)):this.height),({width:o,height:s}=gu(e,o,s)),o===this.width&&s===this.height){const t=this.clone();return t.position=[0,0],t}let a=Math.round((this.width-o)/2),l=Math.round((this.height-s)/2);const u=Qc.createFrom(this,{width:o,height:s,position:[a,l]});switch(i){case wu.nearestneighbor:bu.call(this,u,o,s);break;default:throw new Error(`unsupported resize interpolation: ${i}`)}return u}function xu(){this.checkProcessable("hsv",{bitDepth:[8,16],alpha:[0,1],colorModel:[an]});let t=Qc.createFrom(this,{colorModel:un}),e=0,r=this.data;for(let n=0;n<r.length;n+=this.channels){let i=r[n],o=r[n+1],s=r[n+2],a=Math.min(i,o,s),l=Math.max(i,o,s),u=l-a,h=0,c=0===l?0:u/l,f=l;if(l!==a){switch(l){case i:h=(o-s)/u+(o<s?6:0);break;case o:h=(s-i)/u+2;break;case s:h=(i-o)/u+4;break;default:throw new Error("unreachable")}h/=6}t.data[e++]=h*this.maxValue,t.data[e++]=c*this.maxValue,t.data[e++]=f,this.alpha&&(t.data[e++]=r[n+3])}return t}function ku(){this.checkProcessable("hsl",{bitDepth:[8,16],alpha:[0,1],colorModel:[an]});let t=Qc.createFrom(this,{colorModel:ln}),e=Math.floor(this.maxValue/2),r=0,n=this.data;for(let i=0;i<n.length;i+=this.channels){let o=n[i],s=n[i+1],a=n[i+2],l=Math.max(o,s,a),u=Math.min(o,s,a),h=0,c=0,f=(l+u)/2;if(l!==u){let t=l-u;switch(c=f>e?t/(2-l-u):t/(l+u),l){case o:h=(s-a)/t+(s<a?6:0);break;case s:h=(a-o)/t+2;break;case a:h=(o-s)/t+4;break;default:throw new Error("unreachable")}h/=6}t.data[r++]=h*this.maxValue,t.data[r++]=c*this.maxValue,t.data[r++]=f,this.alpha&&(t.data[r++]=n[i+3])}return t}function Mu(){this.checkProcessable("cmyk",{bitDepth:[8,16],alpha:[0,1],colorModel:[an]});let t=Qc.createFrom(this,{components:4,colorModel:hn}),e=0,r=this.data;for(let n=0;n<r.length;n+=this.channels){let i=r[n],o=r[n+1],s=r[n+2],a=Math.min(this.maxValue-i,this.maxValue-o,this.maxValue-s),l=(this.maxValue-i-a)/(1-a/this.maxValue),u=(this.maxValue-o-a)/(1-a/this.maxValue),h=(this.maxValue-s-a)/(1-a/this.maxValue);t.data[e++]=Math.round(l),t.data[e++]=Math.round(u),t.data[e++]=Math.round(h),t.data[e++]=Math.round(a),this.alpha&&(t.data[e++]=r[n+3])}return t}function Su(){return new Qc(this.width,this.height,this.getRGBAData(),{kind:"RGBA",parent:this})}const Eu={luma709:(t,e,r)=>6966*t+23436*e+2366*r>>15,luma601:(t,e,r)=>9798*t+19235*e+3735*r>>15,maximum:(t,e,r)=>Math.max(t,e,r),minimum:(t,e,r)=>Math.min(t,e,r),average:(t,e,r)=>(t+e+r)/3>>0,minmax:(t,e,r)=>(Math.max(t,e,r)+Math.min(t,e,r))/2,red:t=>t,green:(t,e)=>e,blue:(t,e,r)=>r,cyan(t,e,r,n){let i=Eu.black(t,e,r,n);return(n.maxValue-t-i)/(1-i/n.maxValue)>>0},magenta(t,e,r,n){let i=Eu.black(t,e,r,n);return(n.maxValue-e-i)/(1-i/n.maxValue)>>0},yellow(t,e,r,n){let i=Eu.black(t,e,r,n);return(n.maxValue-r-i)/(1-i/n.maxValue)>>0},black:(t,e,r,n)=>Math.min(n.maxValue-t,n.maxValue-e,n.maxValue-r),hue(t,e,r,n){let i=Eu.min(t,e,r),o=Eu.max(t,e,r);if(o===i)return 0;let s=0,a=o-i;switch(o){case t:s=(e-r)/a+(e<r?6:0);break;case e:s=(r-t)/a+2;break;case r:s=(t-e)/a+4;break;default:throw new Error("unreachable")}return s/6*n.maxValue>>0},saturation(t,e,r,n){let i=Eu.min(t,e,r),o=Eu.max(t,e,r);return 0===o?0:(o-i)/o*n.maxValue},lightness(t,e,r){let n=Eu.min(t,e,r);return(Eu.max(t,e,r)+n)/2}};Object.defineProperty(Eu,"luminosity",{enumerable:!1,value:Eu.lightness}),Object.defineProperty(Eu,"luminance",{enumerable:!1,value:Eu.lightness}),Object.defineProperty(Eu,"min",{enumerable:!1,value:Eu.minimum}),Object.defineProperty(Eu,"max",{enumerable:!1,value:Eu.maximum}),Object.defineProperty(Eu,"brightness",{enumerable:!1,value:Eu.maximum});const Au={};function Cu(t={}){let{algorithm:e="luma709",keepAlpha:r=!1,mergeAlpha:n=!0}=t;if("string"!=typeof e&&"function"!=typeof e)throw new TypeError("algorithm must be a string or a function");this.checkProcessable("grey",{bitDepth:[8,16],alpha:[0,1]}),1===this.components&&(e="red"),r&=this.alpha,n&=this.alpha,r&&(n=!1);let i,o=da(this,t,{components:1,alpha:r,colorModel:sn});if("function"==typeof e)i=e;else if(i=Eu[e.toLowerCase()],!i)throw new Error(`unsupported grey algorithm: ${e}`);let s=0;for(let t=0;t<this.data.length;t+=this.channels)n?o.data[s++]=Ia(i(this.data[t],this.data[t+1],this.data[t+2],this)*this.data[t+this.components]/this.maxValue,this):(o.data[s++]=Ia(i(this.data[t],this.data[t+1],this.data[t+2],this),this),o.alpha&&(o.data[s++]=this.data[t+this.components]));return o}function Du(t){let e=!1,r=0;for(let e=1;e<t.length-1;e++)if(t[e-1]<t[e]&&t[e+1]<t[e]&&(r++,r>2))return!1;return 2===r&&(e=!0),e}function Ou(t,e){let r=0;for(let n=0;n<=e;n++)r+=t[n];return r}function Pu(t,e){let r=0;for(let n=0;n<=e;n++)r+=n*t[n];return r}function Ru(t,e){let r=0;for(let n=0;n<=e;n++)r+=n*n*t[n];return r}function Iu(t){let e=new Array(t.length);for(let r=1;r<t.length-1;r++)e[r]=(t[r-1]+t[r]+t[r+1])/3;return e[0]=(t[0]+t[1])/3,e[t.length-1]=(t[t.length-2]+t[t.length-1])/3,e}function Tu(t){let e=t.length,r=!1,n=0;for(let r=1;r<e-1;r++)if(t[r-1]<t[r]&&t[r+1]<t[r]&&(n++,n>2))return!1;return 2===n&&(r=!0),r}function Fu(t,e){let r=0;for(let n=0;n<=e;n++)r+=t[n];return r}Object.keys(Eu).forEach((t=>{Au[t]=t}));var ju=r(6563);const Nu={huang:function(t){let e=0;for(let r=0;r<t.length;r++)if(0!==t[r]){e=r;break}let r=t.length-1;for(let n=t.length-1;n>=e;n--)if(0!==t[n]){r=n;break}let n=1/(r-e),i=new Array(t.length),o=0,s=0;for(let r=e;r<t.length;r++)o+=r*t[r],s+=t[r],i[r]=o/s;let a=new Array(t.length);o=s=0;for(let e=r;e>0;e--)o+=e*t[e],s+=t[e],a[e-1]=o/s;let l=-1,u=Number.MAX_VALUE;for(let e=0;e<t.length;e++){let r,o=0;for(let s=0;s<=e;s++)r=1/(1+n*Math.abs(s-i[e])),r<1e-6||r>.999999||(o+=t[s]*(-r*Math.log(r)-(1-r)*Math.log(1-r)));for(let i=e+1;i<t.length;i++)r=1/(1+n*Math.abs(i-a[e])),r<1e-6||r>.999999||(o+=t[i]*(-r*Math.log(r)-(1-r)*Math.log(1-r)));o<u&&(u=o,l=e)}return l},intermodes:function(t){let e=t.slice(),r=0;for(;!Du(e);){let n=0,i=0,o=e[0];for(let r=0;r<t.length-1;r++)n=i,i=o,o=e[r+1],e[r]=(n+i+o)/3;if(e[t.length-1]=(i+o)/3,r++,r>1e4)throw new Error("Intermodes Threshold not found after 10000 iterations")}let n=0;for(let r=1;r<t.length-1;r++)e[r-1]<e[r]&&e[r+1]<e[r]&&(n+=r);return Math.floor(n/2)},isodata:function(t){let e,r,n,i,o=0;for(let e=1;e<t.length;e++)if(t[e]>0){o=e+1;break}for(;;){e=0,n=0;for(let r=0;r<o;r++)n+=t[r],e+=t[r]*r;i=0,r=0;for(let e=o+1;e<t.length;e++)r+=t[e],i+=t[e]*e;if(n>0&&r>0&&(e/=n,i/=r,o===Math.round((e+i)/2)))break;if(o++,o>t.length-2)throw new Error("Threshold not found")}return o},li:function(t,e){let r,n,i,o,s,a,l,u,h,c,f,d;f=.5,c=0;for(let e=0;e<t.length;e++)c+=e*t[e];c/=e,l=c;do{a=l,r=a+.5|0,n=0,o=0;for(let e=0;e<=r;e++)n+=e*t[e],o+=t[e];u=0===o?0:n/o,i=0,s=0;for(let e=r+1;e<t.length;e++)i+=e*t[e],s+=t[e];h=0===s?0:i/s,d=(u-h)/(Math.log(u)-Math.log(h)),l=d<-Number.EPSILON?d-.5|0:d+.5|0}while(Math.abs(l-a)>.5);return r},maxentropy:function(t,e){let r=new Array(t.length);for(let n=0;n<t.length;n++)r[n]=t[n]/e;let n=new Array(t.length),i=new Array(t.length);n[0]=r[0],i[0]=1-n[0];for(let e=1;e<t.length;e++)n[e]=n[e-1]+r[e],i[e]=1-n[e];let o=0;for(let e=0;e<t.length;e++)if(Math.abs(n[e])>=Number.EPSILON){o=e;break}let s=t.length-1;for(let e=t.length-1;e>=o;e--)if(Math.abs(i[e])>=Number.EPSILON){s=e;break}let a,l,u,h=-1,c=Number.MIN_VALUE;for(let e=o;e<=s;e++){l=0;for(let i=0;i<=e;i++)0!==t[i]&&(l-=r[i]/n[e]*Math.log(r[i]/n[e]));u=0;for(let n=e+1;n<t.length;n++)0!==t[n]&&(u-=r[n]/i[e]*Math.log(r[n]/i[e]));a=l+u,c<a&&(c=a,h=e)}return h},mean:function(t,e){let r=0;for(let e=0;e<t.length;e++)r+=e*t[e];return Math.floor(r/e)},minerror:function(t,e){let r,n,i,o,s,a,l,u,h,c,f,d,p=-2,m=0;for(let e=0;e<t.length;e++)m+=e*t[e];for(m/=e,r=m;r!==p;){let e=Ou(t,r),m=Ou(t,t.length-1),g=Pu(t,r),v=Pu(t,t.length-1),w=Ru(t,r);if(n=g/e,i=(v-g)/(m-e),o=e/m,s=(m-e)/m,a=w/e-n*n,l=(Ru(t,t.length-1)-w)/(m-e)-i*i,u=1/a-1/l,h=n/a-i/l,c=n*n/a-i*i/l+Math.log10(a*(s*s)/(l*(o*o))),f=h*h-u*c,f<0)return r;p=r,d=(h+Math.sqrt(f))/u,r=isNaN(d)?p:Math.floor(d)}return r},minimum:function(t){if(t.length<2)return 0;let e=0,r=-1,n=-1,i=new Array(t.length);for(let e=0;e<t.length;e++)i[e]=t[e],t[e]>0&&(n=e);for(;!Tu(i);)if(i=Iu(i),e++,e>1e4)return r;return r=function(t,e){let r;for(let n=1;n<e;n++)if(t[n-1]>t[n]&&t[n+1]>=t[n]){r=n;break}return r}(i,n),r},moments:function(t,e){let r,n,i,o,s,a,l=0,u=0,h=0,c=0,f=-1,d=t.length,p=new Array(d);for(let r=0;r<d;r++)p[r]=t[r]/e;for(let t=0;t<d;t++)l+=t*p[t],u+=t*t*p[t],h+=t*t*t*p[t];n=1*u-l*l,i=(-u*u+l*h)/n,o=(1*-h+u*l)/n,s=.5*(-o-Math.sqrt(o*o-4*i)),a=.5*(-o+Math.sqrt(o*o-4*i)),r=(a-l)/(a-s);for(let t=0;t<d;t++)if(c+=p[t],c>r){f=t;break}return f},otsu:function(t,e){let r=0,n=0,i=0,o=0,s=0;for(let e=0;e<t.length;e++)s+=e*t[e];for(let a=0;a<t.length;a++){n+=t[a];const l=e-n;if(0===n||0===l)continue;r+=a*t[a];const u=(s-r)/l,h=n*l*(r/n-u)*(r/n-u);h>=i&&(o=a,i=h)}return o},percentile:function(t){let e=-1,r=new Array(t.length),n=Fu(t,t.length-1),i=1;for(let o=0;o<t.length;o++)r[o]=Math.abs(Fu(t,o)/n-.5),r[o]<i&&(i=r[o],e=o);return e},renyientropy:function(t,e){let r,n,i,o=new Array(t.length),s=new Array(t.length),a=new Array(t.length),l=0,u=0,h=0,c=0,f=0,d=0;for(let r=0;r<t.length;r++)o[r]=t[r]/e;s[0]=o[0],a[0]=1-s[0];for(let e=1;e<t.length;e++)s[e]=s[e-1]+o[e],a[e]=1-s[e];n=0;for(let e=0;e<t.length;e++)if(Math.abs(s[e])>=Number.EPSILON){n=e;break}i=t.length-1;for(let e=t.length-1;e>=n;e--)if(Math.abs(a[e])>=Number.EPSILON){i=e;break}for(let e=n;e<=i;e++){let r=0,n=0,i=0;for(let a=0;a<=e;a++)0!==t[a]&&(r-=o[a]/s[e]*Math.log(o[a]/s[e])),n+=Math.sqrt(o[a]/s[e]),i+=o[a]*o[a]/(s[e]*s[e]);let p=0,m=0,g=0;for(let r=e+1;r<t.length;r++)0!==t[r]&&(p-=o[r]/a[e]*Math.log(o[r]/a[e])),m+=Math.sqrt(o[r]/a[e]),g+=o[r]*o[r]/(a[e]*a[e]);let v=r+p,w=2*(n*m>0?Math.log(n*m):0),y=-1*(i*g>0?Math.log(i*g):0);v>c&&(c=v,l=e),w>f&&(f=w,u=e),y>d&&(d=y,h=e)}let p,m=[l,u,h];m.sort(ju.j),p=Math.abs(m[0]-m[1])<=5?Math.abs(m[1]-m[2])<=5?[1,2,1]:[0,1,3]:Math.abs(m[1]-m[2])<=5?[3,1,0]:[1,2,1];let g=s[m[2]]-s[m[0]];return r=Math.round(m[0]*(s[m[0]]+.25*g*p[0])+.25*m[1]*g*p[1]+m[2]*(a[m[2]]+.25*g*p[2])),r},shanbhag:function(t,e){let r=new Array(t.length);for(let n=0;n<t.length;n++)r[n]=t[n]/e;let n=new Array(t.length),i=new Array(t.length);n[0]=r[0],i[0]=1-n[0];for(let e=1;e<t.length;e++)n[e]=n[e-1]+r[e],i[e]=1-n[e];let o=0;for(let e=0;e<t.length;e++)if(Math.abs(n[e])>=Number.EPSILON){o=e;break}let s=t.length-1;for(let e=t.length-1;e>=o;e--)if(Math.abs(i[e])>=Number.EPSILON){s=e;break}let a,l,u,h,c=-1,f=Number.MAX_VALUE;for(let e=o;e<=s;e++){u=0,a=.5/n[e];for(let t=1;t<=e;t++)u-=r[t]*Math.log(1-a*n[t-1]);u*=a,h=0,a=.5/i[e];for(let n=e+1;n<t.length;n++)h-=r[n]*Math.log(1-a*i[n]);h*=a,l=Math.abs(u-h),l<f&&(f=l,c=e)}return c},triangle:function(t){let e=0,r=0,n=0,i=0;for(let r=0;r<t.length;r++)if(t[r]>0){e=r;break}e>0&&e--;for(let e=t.length-1;e>0;e--)if(t[e]>0){i=e;break}i<t.length-1&&i++;for(let e=0;e<t.length;e++)t[e]>r&&(n=e,r=t[e]);let o,s,a,l=!1;if(n-e<i-n){l=!0;let r=0,o=t.length-1;for(;r<o;){let e=t[r];t[r]=t[o],t[o]=e,r++,o--}e=t.length-1-i,n=t.length-1-n}if(e===n)return e;o=t[n],s=e-n,a=Math.sqrt(o*o+s*s),o/=a,s/=a,a=o*e+s*t[e];let u=e,h=0;for(let r=e+1;r<=n;r++){let e=o*r+s*t[r]-a;e>h&&(u=r,h=e)}if(u--,l){let e=0,r=t.length-1;for(;e<r;){let n=t[e];t[e]=t[r],t[r]=n,e++,r--}return t.length-1-u}return u},yen:function(t,e){let r=new Array(t.length);for(let n=0;n<t.length;n++)r[n]=t[n]/e;let n=new Array(t.length);n[0]=r[0];for(let e=1;e<t.length;e++)n[e]=n[e-1]+r[e];let i=new Array(t.length);i[0]=r[0]*r[0];for(let e=1;e<t.length;e++)i[e]=i[e-1]+r[e]*r[e];let o=new Array(t.length);o[t.length-1]=0;for(let e=t.length-2;e>=0;e--)o[e]=o[e+1]+r[e+1]*r[e+1];let s,a=-1,l=Number.MIN_VALUE;for(let e=0;e<t.length;e++)s=-1*(i[e]*o[e]>0?Math.log(i[e]*o[e]):0)+2*(n[e]*(1-n[e])>0?Math.log(n[e]*(1-n[e])):0),s>l&&(l=s,a=e);return a}},Bu={};function Uu(t={}){let{algorithm:e=Bu.otsu}=t;this.checkProcessable("getThreshold",{components:1,bitDepth:[8,16]});let r=Nu[e.toLowerCase()];if(r){return r(this.getHistogram(),this.size)}throw new Error(`unknown thresholding algorithm: ${e}`)}Object.keys(Nu).forEach((t=>{Bu[t]=t}));const Lu="threshold";function $u(t={}){let{algorithm:e=Lu,threshold:r=.5,useAlpha:n=!0,invert:i=!1}=t;this.checkProcessable("mask",{components:1,bitDepth:[8,16]}),r=e===Lu?function(t,e){if(!e)throw Error("getThreshold : the maxValue should be specified");if("string"==typeof t){if("%"!==t[t.length-1])throw Error("getThreshold : if the value is a string it must finish by %");return parseFloat(t)/100*e}if("number"==typeof t)return t<1?t*e:t;throw Error("getThreshold : the value is not valid")}(r,this.maxValue):Uu.call(this,t);let o=new Qc(this.width,this.height,{kind:"BINARY",parent:this}),s=0;if(this.alpha&&n)for(let t=0;t<this.data.length;t+=this.channels){let e=this.data[t]+(this.maxValue-this.data[t])*(this.maxValue-this.data[t+1])/this.maxValue;(i&&e<=r||!i&&e>=r)&&o.setBit(s),s++}else for(let t=0;t<this.data.length;t+=this.channels)(i&&this.data[t]<=r||!i&&this.data[t]>=r)&&o.setBit(s),s++;return o}function zu(t={}){let{size:e=0,algorithm:r="copy",color:n}=t;if(this.checkProcessable("pad",{bitDepth:[8,16]}),"set"===r){if(n.length!==this.channels)throw new Error(`pad: the color array must have the same length as the number of channels. Here: ${this.channels}`);for(let t=0;t<n.length;t++)0===n[t]&&(n[t]=.001)}else n=ll()(this.channels,null);Array.isArray(e)||(e=[e,e]);let i=this.width+2*e[0],o=this.height+2*e[1],s=this.channels,a=Qc.createFrom(this,{width:i,height:o});!function(t,e,r,n){let i=t.width,o=t.height,s=e.width,a=t.channels;for(let l=0;l<i;l++)for(let u=0;u<o;u++)for(let o=0;o<a;o++){let h=(u*i+l)*a+o,c=((n+u)*s+r+l)*a+o;e.data[c]=t.data[h]}}(this,a,e[0],e[1]);for(let t=e[0];t<i-e[0];t++)for(let r=0;r<s;r++){let l=n[r]||a.data[(e[1]*i+t)*s+r];for(let n=0;n<e[1];n++)a.data[(n*i+t)*s+r]=l;l=n[r]||a.data[((o-e[1]-1)*i+t)*s+r];for(let n=o-e[1];n<o;n++)a.data[(n*i+t)*s+r]=l}for(let t=0;t<o;t++)for(let r=0;r<s;r++){let o=n[r]||a.data[(t*i+e[0])*s+r];for(let n=0;n<e[0];n++)a.data[(t*i+n)*s+r]=o;o=n[r]||a.data[(t*i+i-e[0]-1)*s+r];for(let n=i-e[0];n<i;n++)a.data[(t*i+n)*s+r]=o}return a}function qu(t=8){if(this.checkProcessable("colorDepth",{bitDepth:[1,8,16]}),![8,16].includes(t))throw Error("You need to specify the new colorDepth as 8 or 16");if(this.bitDepth===t)return this.clone();let e=Qc.createFrom(this,{bitDepth:t});switch(t){case 8:if(1===this.bitDepth)for(let t=0;t<this.size;t++)this.getBit(t)&&(e.data[t]=255);else for(let t=0;t<this.data.length;t++)e.data[t]=this.data[t]>>8;break;case 16:if(1===this.bitDepth)for(let t=0;t<this.size;t++)this.getBit(t)&&(e.data[t]=65535);else for(let t=0;t<this.data.length;t++)e.data[t]=this.data[t]<<8|this.data[t];break;default:throw new Error("colorDepth conversion unexpected case")}return e}function Vu(t,e={}){const{interpolation:r=wu.nearestneighbor,width:n=this.width,height:i=this.height}=e;if("number"!=typeof t)throw new TypeError("degrees must be a number");const o=yu(r),s=t*Math.PI/180,a=Math.floor(Math.abs(n*Math.cos(s))+Math.abs(i*Math.sin(s))),l=Math.floor(Math.abs(i*Math.cos(s))+Math.abs(n*Math.sin(s))),u=Qc.createFrom(this,{width:a,height:l}),h=Math.cos(-s),c=Math.sin(-s);let f=a/2,d=l/2;a%2==0?(f-=.5,l%2==0?d-=.5:d=Math.floor(d)):(f=Math.floor(f),l%2==0?d-=.5:d=Math.floor(d));const p=Math.floor(n/2-f),m=Math.floor(i/2-d);switch(o){case wu.nearestneighbor:return function(t,e,r,n,i,o,s,a){for(let l=0;l<e.width;l+=1)for(let u=0;u<e.height;u+=1)for(let h=0;h<t.channels;h++){let c=Math.round((l-i)*s-(u-o)*a+i)+r,f=Math.round((u-o)*s+(l-i)*a+o)+n;c<0||c>=t.width||f<0||f>=t.height?1===t.alpha&&h===t.channels-1?e.setValueXY(l,u,h,0):e.setValueXY(l,u,h,t.maxValue):e.setValueXY(l,u,h,t.getValueXY(c,f,h))}return e}(this,u,p,m,f,d,h,c);case wu.bilinear:return function(t,e,r,n,i,o,s,a){let l=t.width*t.channels;for(let u=0;u<e.height;u++)for(let h=0;h<e.width;h++){let c=(h-i)*s-(u-o)*a+i+r,f=(u-o)*s+(h-i)*a+o+n,d=0|c,p=0|f,m=c-d,g=f-p;for(let r=0;r<t.channels;r++)if(c<0||c>=t.width||f<0||f>=t.height)1===t.alpha&&r===t.channels-1?e.setValueXY(h,u,r,0):e.setValueXY(h,u,r,t.maxValue);else{let n=(p*t.width+d)*t.channels+r,i=t.data[n],o=t.data[n+t.channels],s=t.data[n+l],a=i+m*(o-i)+g*(s-i)+m*g*(i-o-s+t.data[n+l+t.channels])|0;e.setValueXY(h,u,r,a)}}return e}(this,u,p,m,f,d,h,c);default:throw new Error(`unsupported rotate interpolation: ${o}`)}}function Yu(t,e){if("number"!=typeof t)throw new TypeError("angle must be a number");switch(t<0&&(t=360*Math.ceil(-t/360)+t),t%360){case 0:return this.clone();case 90:return Gu.call(this);case 180:return Xu.call(this);case 270:return Zu.call(this);default:return Vu.call(this,t,e)}}function Zu(){const t=Qc.createFrom(this,{width:this.height,height:this.width}),e=t.height-1;for(let r=0;r<this.height;r++)for(let n=0;n<this.width;n++)for(let i=0;i<this.channels;i++)t.setValueXY(r,e-n,i,this.getValueXY(n,r,i));return t}function Gu(){const t=Qc.createFrom(this,{width:this.height,height:this.width}),e=t.width-1;for(let r=0;r<this.height;r++)for(let n=0;n<this.width;n++)for(let i=0;i<this.channels;i++)t.setValueXY(e-r,n,i,this.getValueXY(n,r,i));return t}function Xu(){const t=Qc.createFrom(this),e=t.width-1,r=t.height-1;for(let n=0;n<this.height;n++)for(let i=0;i<this.width;i++)for(let o=0;o<this.channels;o++)t.setValueXY(e-i,r-n,o,this.getValueXY(i,n,o));return t}function Hu(t,e={}){const r=fa(t);this.checkProcessable("insert",r);let{x:n=0,y:i=0}=e;const o=pa(this,e,{copy:!0}),s=Math.min(o.height,i+t.height),a=Math.min(o.width,n+t.width);if(1===o.bitDepth)for(let e=i;e<s;e++)for(let r=n;r<a;r++){t.getBitXY(r-n,e-i)?o.setBitXY(r,e):o.clearBitXY(r,e)}else for(let e=i;e<s;e++)for(let r=n;r<a;r++)o.setPixelXY(r,e,t.getPixelXY(r-n,e-i));return o}function Qu(t={}){let{size:e=0,algorithm:r="copy",color:n}=t;if(this.checkProcessable("setBorder",{bitDepth:[8,16,32,64]}),"set"===r){if(n.length!==this.channels)throw new Error(`setBorder: the color array must have the same length as the number of channels. Here: ${this.channels}`);for(let t=0;t<n.length;t++)0===n[t]&&(n[t]=.001)}else n=ll()(this.channels,null);Array.isArray(e)||(e=[e,e]);let i=e[0],o=e[1],s=this.channels;for(let t=i;t<this.width-i;t++)for(let e=0;e<s;e++){let r=n[e]||this.data[(t+this.width*o)*s+e];for(let n=0;n<o;n++)this.data[(n*this.width+t)*s+e]=r;r=n[e]||this.data[(t+this.width*(this.height-o-1))*s+e];for(let n=this.height-o;n<this.height;n++)this.data[(n*this.width+t)*s+e]=r}for(let t=0;t<this.height;t++)for(let e=0;e<s;e++){let r=n[e]||this.data[(t*this.width+i)*s+e];for(let n=0;n<i;n++)this.data[(t*this.width+n)*s+e]=r;r=n[e]||this.data[(t*this.width+this.width-i-1)*s+e];for(let n=this.width-i;n<this.width;n++)this.data[(t*this.width+n)*s+e]=r}return this}function Wu(t={}){let{preserveAlpha:e=!0}=t;if(this.checkProcessable("split",{bitDepth:[8,16]}),1===this.components)return new oa([this.clone()]);let r=new oa,n=this.data;if(this.alpha&&e)for(let t=0;t<this.components;t++){let e=Qc.createFrom(this,{components:1,alpha:!0,colorModel:sn}),i=0;for(let r=0;r<n.length;r+=this.channels)e.data[i++]=n[r+t],e.data[i++]=n[r+this.components];r.push(e)}else for(let t=0;t<this.channels;t++){let e=Qc.createFrom(this,{components:1,alpha:!1,colorModel:sn}),i=0;for(let r=0;r<n.length;r+=this.channels)e.data[i++]=n[r+t];r.push(e)}return r}function Ku(t,e={}){let{keepAlpha:r=!1,mergeAlpha:n=!1}=e;r&=this.alpha,n&=this.alpha,this.checkProcessable("getChannel",{bitDepth:[8,16]}),t=ka(this,t);let i=Qc.createFrom(this,{components:1,alpha:r,colorModel:sn}),o=0;for(let e=0;e<this.data.length;e+=this.channels)n?i.data[o++]=this.data[e+t]*this.data[e+this.components]/this.maxValue:(i.data[o++]=this.data[e+t],r&&(i.data[o++]=this.data[e+this.components]));return i}function Ju(t=th,e={}){let{mergeAlpha:r=!1,keepAlpha:n=!1}=e;r&=this.alpha,n&=this.alpha,this.checkProcessable("combineChannels",{bitDepth:[8,16]});let i=Qc.createFrom(this,{components:1,alpha:n,colorModel:sn}),o=0;for(let e=0;e<this.size;e++){let s=t(this.getPixel(e));r?i.data[o++]=s*this.data[e*this.channels+this.components]/this.maxValue:(i.data[o++]=s,n&&(i.data[o++]=this.data[e*this.channels+this.components]))}return i}function th(t){return(t[0]+t[1]+t[2])/3}function eh(t,e){if(this.checkProcessable("setChannel",{bitDepth:[8,16]}),e.checkProcessable("setChannel (image parameter check)",{bitDepth:[this.bitDepth],alpha:[0],components:[1]}),e.width!==this.width||e.height!==this.height)throw new Error("Images must have exactly the same width and height");let r=t=ka(this,t);for(let t=0;t<e.data.length;t++)this.data[r]=e.data[t],r+=this.channels;return this}function rh(t,e={}){let{shift:r=[0,0],average:n,channels:i,defaultAlpha:o,normalize:s,border:a=[0,0]}=e;if(this.checkProcessable("getSimilarity",{bitDepth:[8,16]}),Array.isArray(a)||(a=[a,a]),i=xa(this,{channels:i,defaultAlpha:o}),this.bitDepth!==t.bitDepth)throw new Error("Both images must have the same bitDepth");if(this.channels!==t.channels)throw new Error("Both images must have the same number of channels");if(this.colorModel!==t.colorModel)throw new Error("Both images must have the same colorModel");void 0===n&&(n=!0);let l=Math.max(a[0],-r[0]),u=Math.min(this.width-a[0],this.width-r[0]),h=Math.max(a[1],-r[1]),c=Math.min(this.height-a[1],this.height-r[1]),f=ll()(i.length,0);for(let e=0;e<i.length;e++){let n=i[e],o=s?this.sum[n]:Math.max(this.sum[n],t.sum[n]),a=s?t.sum[n]:Math.max(this.sum[n],t.sum[n]);if(0!==o&&0!==a)for(let i=l;i<u;i++)for(let s=h;s<c;s++){let l=i*this.multiplierX+s*this.multiplierY+n,u=l+r[0]*this.multiplierX+r[1]*this.multiplierY;f[e]+=Math.min(this.data[l]/o,t.data[u]/a)}}return n?f.reduce(((t,e)=>t+e))/f.length:f}function nh(t={}){let{sampling:e=[10,10],painted:r=!1,mask:n}=t;this.checkProcessable("getPixelsGrid",{bitDepth:[8,16],channels:1}),Array.isArray(e)||(e=[e,e]);const i=e[0],o=e[1],s=[],a=[],l=this.width/i,u=this.height/o;let h=Math.floor(l/2);for(let t=0;t<i;t++){let t=Math.floor(u/2);for(let e=0;e<o;e++){let e=Math.round(h),r=Math.round(t);n&&!n.getBitXY(e,r)||(s.push([e,r]),a.push(this.getPixelXY(e,r))),t+=u}h+=l}const c={xyS:s,zS:a};return r&&(c.painted=this.rgba8().paintPoints(s)),c}function ih(t,e,r){const n=new Array(t);for(let r=0;r<t;r++)n[r]=new Array(e);if(r)for(let i=0;i<t;i++)for(let t=0;t<e;t++)n[i][t]=r;return n.width=t,n.height=e,Object.setPrototypeOf(n,ih.prototype),n}function oh(t,e={}){let{border:r}=e;if(this.checkProcessable("getChannel",{bitDepth:[8,16]}),this.bitDepth!==t.bitDepth)throw new Error("Both images must have the same bitDepth");if(this.channels!==t.channels)throw new Error("Both images must have the same number of channels");if(this.colorModel!==t.colorModel)throw new Error("Both images must have the same colorModel");let n=new ih(t.width,t.height,-1/0),i=Math.floor(t.width/2),o=Math.floor(t.height/2),s=i,a=o,l=!1;for(;!l;){let e=n.localSearch(i,o,-1/0);for(let i=0;i<e.length;i++){let o=e[i],l=this.getSimilarity(t,{border:r,shift:[s-o[0],a-o[1]]});n[o[0]][o[1]]=l}let u=n.localMax(i,o);u.position[0]!==i||u.position[1]!==o?(i=u.position[0],o=u.position[1]):l=!0}return[i-s,o-a]}function sh(t,e=0){this.checkProcessable("getRow",{bitDepth:[8,16]}),function(t,e){if(e<0||e>=t.height)throw new RangeError(`row must be included between 0 and ${t.height-1}. Current value: ${e}`)}(this,t),vu(this,e);let r=new Array(this.width),n=0,i=t*this.width*this.channels+e,o=i+this.width*this.channels;for(let t=i;t<o;t+=this.channels)r[n++]=this.data[t];return r}function ah(t,e=0){this.checkProcessable("getColumn",{bitDepth:[8,16]}),function(t,e){if(e<0||e>=t.width)throw new RangeError(`column must be included between 0 and ${t.width-1}. Current value: ${e}`)}(this,t),vu(this,e);let r=new Array(this.height),n=0,i=this.width*this.channels;for(let o=e+t*this.channels;o<this.data.length;o+=i)r[n++]=this.data[o];return r}function lh(t={}){let{channel:e}=t;if(this.checkProcessable("getMatrix",{bitDepth:[8,16]}),void 0===e){if(this.components>1)throw new RangeError("You need to define the channel for an image that contains more than one channel");e=0}let r=new Ja(this.height,this.width);for(let t=0;t<this.height;t++)for(let n=0;n<this.width;n++)r.set(t,n,this.getValueXY(n,t,e));return r}function uh(t,e={}){t=new Ja(t);let{channel:r}=e;if(this.checkProcessable("getMatrix",{bitDepth:[8,16]}),void 0===r){if(this.components>1)throw new RangeError("You need to define the channel for an image that contains more than one channel");r=0}if(this.width!==t.columns||this.height!==t.rows)throw new RangeError("The size of the matrix must be equal to the size of the image");for(let e=0;e<this.height;e++)for(let n=0;n<this.width;n++)this.setValueXY(n,e,r,t.get(e,n))}function hh(){this.checkProcessable("getPixelsArray",{bitDepth:[8,16,32]});let t=new Array(this.size),e=0;for(let r=0;r<this.data.length;r+=this.channels){let n=new Array(this.components);for(let t=0;t<this.components;t++)n[t]=this.data[r+t];t[e++]=n}return t}function ch(t){let e=this,r=e.getClosestCommonParent(t),n=e.getRelativePosition(r,{defaultFurther:!0}),i=fh(e,n),o=t.getRelativePosition(r,{defaultFurther:!0}),s=fh(t,o),a=function(t,e){let r=0,n=0,i=[];for(;r<t.length&&n<e.length;)t[r][0]===e[n][0]&&t[r][1]===e[n][1]?(i.push(t[r]),r++,n++):t[r][0]<e[n][0]||t[r][0]===e[n][0]&&t[r][1]<e[n][1]?r++:n++;return i}(i,s),l={whitePixelsMask1:[],whitePixelsMask2:[],commonWhitePixels:[]};for(let r=0;r<a.length;r++){let i=a[r],s=[i[0]-n[0],i[1]-n[1]],u=[i[0]-o[0],i[1]-o[1]],h=e.getBitXY(s[0],s[1]),c=t.getBitXY(u[0],u[1]);1===h&&1===c&&l.commonWhitePixels.push(i)}for(let t=0;t<i.length;t++){let r,n;0!==t&&(r=Math.floor(t/e.width),n=t%e.width),1===e.getBitXY(r,n)&&l.whitePixelsMask1.push(i[t])}for(let e=0;e<s.length;e++){let r=0,n=0;0!==e&&(r=Math.floor(e/t.width),n=e%t.width),1===t.getBitXY(r,n)&&l.whitePixelsMask2.push(s[e])}return l}function fh(t,e){let r=[];for(let n=0;n<t.height;n++)for(let i=0;i<t.width;i++){let t=[n,i];r.push([t[0]+e[0],t[1]+e[1]])}return r}function dh(t){let e,r=ph(this),n=ph(t);if(e=r>=n?mh(this,r):mh(t,n),0===r||0===n)return e;let i=this,o=t;for(;r!==n;)if(r>n){if(i=i.parent,null===i)return e;r-=1}else{if(o=o.parent,null===o)return e;n-=1}for(;i!==o&&null!==i&&null!==o;)if(i=i.parent,o=o.parent,null===i||null===o)return e;return i!==o?e:i}function ph(t){let e=0,r=t;for(;null!=r.parent;)r=r.parent,e++;return e}function mh(t,e){let r=t;for(;e>0;)r=r.parent,e-=1;return r}ih.prototype.localMin=function(t,e){let r=this[t][e],n=[t,e];for(let i=Math.max(0,t-1);i<Math.min(this.length,t+2);i++)for(let t=Math.max(0,e-1);t<Math.min(this[0].length,e+2);t++)this[i][t]<r&&(r=this[i][t],n=[i,t]);return{position:n,value:r}},ih.prototype.localMax=function(t,e){let r=this[t][e],n=[t,e];for(let i=Math.max(0,t-1);i<Math.min(this.length,t+2);i++)for(let t=Math.max(0,e-1);t<Math.min(this[0].length,e+2);t++)this[i][t]>r&&(r=this[i][t],n=[i,t]);return{position:n,value:r}},ih.prototype.localSearch=function(t,e,r){let n=[];for(let i=Math.max(0,t-1);i<Math.min(this.length,t+2);i++)for(let t=Math.max(0,e-1);t<Math.min(this[0].length,e+2);t++)this[i][t]===r&&n.push([i,t]);return n};const gh={lowThreshold:10,highThreshold:30,gaussianBlur:1.1},vh=[[-1,0,1],[-2,0,2],[-1,0,1]],wh=[[-1,-2,-1],[0,0,0],[1,2,1]],yh={bitDepth:32,mode:"periodic"};function bh(t){return function(t,e){t.checkProcessable("Canny edge detector",{bitDepth:8,channels:1,components:1}),e=Object.assign({},gh,e);const r=t.width,n=t.height,i=t.maxValue,o={sigma:e.gaussianBlur,radius:3},s=t.gaussianFilter(o),a=s.convolution(wh,yh),l=s.convolution(vh,yh),u=l.hypotenuse(a),h=t.constructor,c=new h(r,n,{kind:"GREY",bitDepth:32}),f=new h(r,n,{kind:"GREY",bitDepth:32}),d=new h(r,n,{kind:"GREY"});for(var p=1;p<r-1;p++)for(var m=1;m<n-1;m++){var g=(Math.round(Math.atan2(l.getValueXY(p,m,0),a.getValueXY(p,m,0))*(5/Math.PI))+5)%5;0===g&&(u.getValueXY(p,m,0)<=u.getValueXY(p,m-1,0)||u.getValueXY(p,m,0)<=u.getValueXY(p,m+1,0))||1===g&&(u.getValueXY(p,m,0)<=u.getValueXY(p-1,m+1,0)||u.getValueXY(p,m,0)<=u.getValueXY(p+1,m-1,0))||2===g&&(u.getValueXY(p,m,0)<=u.getValueXY(p-1,m,0)||u.getValueXY(p,m,0)<=u.getValueXY(p+1,m,0))||3===g&&(u.getValueXY(p,m,0)<=u.getValueXY(p-1,m-1,0)||u.getValueXY(p,m,0)<=u.getValueXY(p+1,m+1,0))||c.setValueXY(p,m,0,u.getValueXY(p,m,0))}for(p=0;p<r*n;++p){var v=c.data[p],w=0;v>e.highThreshold&&(w++,d.data[p]=i),v>e.lowThreshold&&w++,f.data[p]=w}var y=[];for(p=1;p<r-1;++p)for(m=1;m<n-1;++m)if(1===f.getValueXY(p,m,0))t:for(var b=p-1;b<p+2;++b)for(var _=m-1;_<m+2;++_)if(2===f.getValueXY(b,_,0)){y.push([p,m]),d.setValueXY(p,m,0,i);break t}for(;y.length>0;){var x=[];for(p=0;p<y.length;++p)for(m=-1;m<2;++m)for(b=-1;b<2;++b)if(0!==m||0!==b){var k=y[p][0]+m,M=y[p][1]+b;1===f.getValueXY(k,M,0)&&0===d.getValueXY(k,M,0)&&(x.push([k,M]),d.setValueXY(k,M,0,i))}y=x}return d}(this,t)}function _h(t,e={}){let{position:r}=e;if(this.checkProcessable("extract",{bitDepth:[1,8,16]}),!r&&(r=t.getRelativePosition(this),!r))throw new Error("extract : can not extract an image because the relative position can not be determined, try to specify manually the position as an array of 2 elements [x,y].");if(this.bitDepth>1){let e=Qc.createFrom(this,{width:t.width,height:t.height,alpha:1,position:r,parent:this});for(let n=0;n<t.width;n++)for(let i=0;i<t.height;i++){for(let t=0;t<this.channels;t++){let o=this.getValueXY(n+r[0],i+r[1],t);e.setValueXY(n,i,t,o)}t.getBitXY(n,i)||e.setValueXY(n,i,this.components,0)}return e}{let e=Qc.createFrom(this,{width:t.width,height:t.height,position:r,parent:this});for(let n=0;n<t.height;n++)for(let i=0;i<t.width;i++)t.getBitXY(i,n)&&this.getBitXY(i+r[0],n+r[1])&&e.setBitXY(i,n);return e}}var xh=r(8737),kh=r.n(xh);function Mh(t={}){const{x:e=0,y:r=0,inPlace:n=!0}=t,i=n?this:Qc.createFrom(this);this.checkProcessable("floodFill",{bitDepth:1});if(this.getBitXY(e,r))return i;const o=new(kh());for(o.push(new Sh(e,r));o.length>0;){const t=o.shift();i.setBitXY(t.x,t.y);for(let e=t.x+1;e<this.width&&(!i.getBitXY(e,t.y)&&!this.getBitXY(e,t.y));e++)i.setBitXY(e,t.y),t.y+1<this.height&&!this.getBitXY(e,t.y+1)&&o.push(new Sh(e,t.y+1)),t.y-1>=0&&!this.getBitXY(e,t.y-1)&&o.push(new Sh(e,t.y-1));for(let e=t.x-1;e>=0&&(!i.getBitXY(e,t.y)&&!this.getBitXY(e,t.y));e++)i.setBitXY(e,t.y),t.y+1<this.height&&!this.getBitXY(e,t.y+1)&&o.push(new Sh(e,t.y+1)),t.y-1>=0&&!this.getBitXY(e,t.y-1)&&o.push(new Sh(e,t.y-1))}return i}function Sh(t,e){this.x=t,this.y=e}function Eh(){return(Eh=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function Ah(t,e,r){var n=[],i=(r/=100)*(e/=100),o=t/60,s=i*(1-Math.abs(o%2-1)),a=r-i;return n=o>=0&&o<1?[i,s,0]:o>=1&&o<2?[s,i,0]:o>=2&&o<3?[0,i,s]:t>=3&&o<4?[0,s,i]:t>=4&&o<5?[s,0,i]:t>=5&&o<=6?[i,0,s]:[0,0,0],{r:Math.round(255*(n[0]+a)),g:Math.round(255*(n[1]+a)),b:Math.round(255*(n[2]+a))}}function Ch(t,e,r){var n=function(t,e,r){return{h:t,s:2*(e*=(r<50?r:100-r)/100)/(r+e)*100,v:r+e}}(t,e,r);return Ah(n.h,n.s,n.v)}var Dh={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]};function Oh(t){return function(t){var e=Dh[t.toLowerCase()];if(!e)return;return{r:e[0],g:e[1],b:e[2],a:100}}(t)||function(t){if("#"===t[0]&&4===t.length)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:100}}(t)||function(t){if("#"===t[0]&&7===t.length)return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:100}}(t)||function(t){var e=t.match(/rgb\(([^)]+)\)/);if(e){var r=e[1].split(/ *, */).map(Number);return{r:r[0],g:r[1],b:r[2],a:100}}}(t)||function(t){var e=t.match(/rgba\(([^)]+)\)/);if(e){var r=e[1].split(/ *, */).map(Number);return{r:r[0],g:r[1],b:r[2],a:100*r[3]}}}(t)||function(t){var e=t.match(/hsl\(([^)]+)\)/);if(e){var r=e[1].split(/ *, */);return Eh({},Ch(parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10)),{a:100})}}(t)||function(t){var e=t.match(/hsla\(([^)]+)\)/);if(e){var r=e[1].split(/ *, */),n=parseInt(r[0],10),i=parseInt(r[1],10),o=parseInt(r[2],10),s=parseInt(100*parseFloat(r[3]),10);return Eh({},Ch(n,i,o),{a:s})}}(t)}function Ph(t){let e=Oh(t);return[e.r,e.g,e.b,Math.round(255*e.a/100)]}function Rh(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function Ih(t,e,r){let n,i,o,s,a,l;return r/=100,0===(e/=100)?s=a=l=255*r:(i=r<=.5?r*(e+1):r+e-r*e,n=2*r-i,o=t/360,s=Rh(n,i,o+1/3),a=Rh(n,i,o),l=Rh(n,i,o-1/3)),{r:s,g:a,b:l}}function Th(t){let{color:e,colors:r,randomColors:n,numberColors:i=50}=t;if(e&&!Array.isArray(e)&&(e=Ph(e)),e)return[e];if(r)return r=r.map((function(t){return Array.isArray(t)?t:Ph(t)})),r;if(n){r=new Array(i);for(let t=0;t<i;t++)r[t]=[Math.floor(256*Math.random()),Math.floor(256*Math.random()),Math.floor(256*Math.random())]}return function(t){let e=new Array(t),r=0;for(let n=0;n<360;n+=360/t){r++;let t=Ih(n,100,30+r%4*15);e[r-1]=[Math.round(255*t.r),Math.round(255*t.g),Math.round(255*t.b)]}return e}(i)}function Fh(t,e,r={}){let{color:n="blue",colors:i,font:o="12px Helvetica",rotate:s=0}=r;if(this.checkProcessable("paintMasks",{channels:[3,4],bitDepth:[8,16],colorModel:an}),!Array.isArray(t))throw Error("paintLabels: labels must be an array");if(!Array.isArray(e))throw Error("paintLabels: positions must be an array");if(n&&!Array.isArray(n)&&(n=Ph(n)),i=i?i.map((function(t){return Array.isArray(t)?t:Ph(t)})):[n],t.length!==e.length)throw Error("paintLabels: positions and labels must be arrays from the same size");Array.isArray(o)||(o=[o]),Array.isArray(s)||(s=[s]);let a=this.getCanvas().getContext("2d");for(let r=0;r<t.length;r++){a.save();let n=i[r%i.length];a.fillStyle=`rgba(${n[0]},${n[1]},${n[2]},${n[3]/this.maxValue})`,a.font=o[r%o.length];let l=e[r];a.translate(l[0],l[1]),a.rotate(s[r%s.length]/180*Math.PI),a.fillText(t[r],0,0),a.restore()}return this.data=Uint8Array.from(a.getImageData(0,0,this.width,this.height).data),this}function jh(t,e={}){let{alpha:r=255,labels:n=[],labelsPosition:i=[],labelColor:o="blue",labelFont:s="12px Helvetica"}=e;this.checkProcessable("paintMasks",{channels:[3,4],bitDepth:[8,16],colorModel:an});let a=Th(Object.assign({},e,{numberColors:t.length}));Array.isArray(t)||(t=[t]);for(let e=0;e<t.length;e++){let n=t[e],i=a[e%a.length];for(let t=0;t<n.width;t++)for(let e=0;e<n.height;e++)if(n.getBitXY(t,e))for(let o=0;o<Math.min(this.components,i.length);o++)if(255===r)this.setValueXY(t+n.position[0],e+n.position[1],o,i[o]);else{let s=this.getValueXY(t+n.position[0],e+n.position[1],o);s=Math.round((s*(255-r)+i[o]*r)/255),this.setValueXY(t+n.position[0],e+n.position[1],o,s)}}if(Array.isArray(n)&&n.length>0){let e=this.getCanvas().getContext("2d");e.fillStyle=o,e.font=s;for(let r=0;r<Math.min(t.length,n.length);r++){let o=i[r]?i[r]:t[r].position;e.fillText(n[r],o[0],o[1])}this.data=Uint8Array.from(e.getImageData(0,0,this.width,this.height).data)}return this}function Nh(t,e){let r=new Array(t);for(let n=0;n<t;n++)r[n]=new Array(e).fill(0);return r}const Bh=[[0,0,1,0,0],[0,0,1,0,0],[1,1,1,1,1],[0,0,1,0,0],[0,0,1,0,0]],Uh=[[0,1,0],[1,1,1],[0,1,0]];class Lh{constructor(t={}){let{kind:e="cross",shape:r,size:n,width:i,height:o,filled:s=!0}=t;if(n&&(i=n,o=n),r)switch(r.toLowerCase()){case"square":case"rectangle":this.matrix=function(t,e,r){const n=Nh(e,t);if(r.filled)for(let r=0;r<e;r++)for(let e=0;e<t;e++)n[r][e]=1;else{for(let r of[0,e-1])for(let e=0;e<t;e++)n[r][e]=1;for(let r=0;r<e;r++)for(let e of[0,t-1])n[r][e]=1}return n}(i,o,{filled:s});break;case"circle":case"ellipse":this.matrix=function(t,e,r){const n=Nh(e,t);let i=1-e%2,o=1-t%2,s=Math.floor((t-1)/2),a=Math.floor((e-1)/2),l=s*s,u=a*a;if(r.filled)for(let e=0;e<=a;e++){for(let r=s-Math.floor(Math.sqrt(l-l*e*e/u));r<=s;r++)n[a-e][r]=1,n[a+e+i][r]=1,n[a-e][t-r-1]=1,n[a+e+i][t-r-1]=1}else{for(let e=0;e<=a;e++){let r=s-Math.floor(Math.sqrt(l-l*e*e/u));n[a-e][r]=1,n[a+e+i][r]=1,n[a-e][t-r-1]=1,n[a+e+i][t-r-1]=1}for(let t=0;t<=s;t++){let r=a-Math.floor(Math.sqrt(u-u*t*t/l));n[r][s-t]=1,n[r][s+t+o]=1,n[e-r-1][s-t]=1,n[e-r-1][s+t+o]=1}}return n}(i,o,{filled:s});break;case"triangle":this.matrix=function(t,e,r){if(!r.filled)throw new Error("Non filled triangle is not implemented");const n=Nh(e,t);for(let r=0;r<e;r++){let i=Math.floor((1-r/e)*t/2);for(let e=i;e<t-i;e++)n[r][e]=1}return n}(i,o,{filled:s});break;default:throw new Error(`Shape: unexpected shape: ${r}`)}else{if(!e)throw new Error("Shape: expected a kind or a shape option");switch(e.toLowerCase()){case"cross":this.matrix=Bh;break;case"smallcross":this.matrix=Uh;break;default:throw new Error(`Shape: unexpected kind: ${e}`)}}this.height=this.matrix.length,this.width=this.matrix[0].length,this.halfHeight=this.height/2>>0,this.halfWidth=this.width/2>>0}getPoints(){let t=this.matrix,e=[];for(let r=0;r<t.length;r++)for(let n=0;n<t[0].length;n++)t[r][n]&&e.push([n-this.halfWidth,r-this.halfHeight]);return e}getMask(){let t=new Qc(this.width,this.height,{kind:cn});for(let e=0;e<this.matrix.length;e++)for(let r=0;r<this.matrix[0].length;r++)this.matrix[e][r]&&t.setBitXY(r,e);return t}}function $h(t,e={}){let{shape:r}=e;this.checkProcessable("paintPoints",{bitDepth:[8,16]});let n=Th(Object.assign({},e,{numberColors:t.length})),i=new Lh(r).getPoints(),o=Math.min(this.channels,n[0].length);for(let e=0;e<t.length;e++){let r=n[e%n.length],s=t[e][0],a=t[e][1];for(let t=0;t<i.length;t++){let e=i[t][0],n=i[t][1];if(s+e>=0&&a+n>=0&&s+e<this.width&&a+n<this.height){let t=(s+e+(a+n)*this.width)*this.channels;for(let e=0;e<o;e++)this.data[t+e]=r[e]}}}return this}function zh(t,e={}){let{color:r=[this.maxValue,0,0],closed:n=!1}=e;this.checkProcessable("paintPoints",{bitDepth:[1,8,16]});let i=Math.min(this.channels,r.length);for(let e=0;e<t.length-1+n;e++){let n=t[e],o=t[(e+1)%t.length],s=o[0]-n[0],a=o[1]-n[1],l=Math.max(Math.abs(s),Math.abs(a)),u=s/l,h=a/l,c=n[0],f=n[1];for(let t=0;t<=l;t++){let t=Math.round(c),e=Math.round(f);if(t>=0&&e>=0&&t<this.width&&e<this.height)if(1===this.bitDepth)this.setBitXY(t,e);else{let n=(t+e*this.width)*this.channels;for(let t=0;t<i;t++)this.data[n+t]=r[t]}c+=u,f+=h}}return this}function qh(t,e={}){let r=Object.assign({},e);this.checkProcessable("paintPolylines",{bitDepth:[8,16]});let n=Th(Object.assign({},e,{numberColors:t.length}));for(let e=0;e<t.length;e++)r.color=n[e%n.length],this.paintPolyline(t[e],r);return this}function Vh(t,e={}){let{color:r=[this.maxValue,0,0],filled:n=!1}=e;this.checkProcessable("paintPoints",{bitDepth:[1,8,16]}),e.closed=!0;let i=function(t){let e=[];for(let r=0;r<t.length;r++)t[r][0]===t[(r+1)%t.length][0]&&t[r][1]===t[(r+1)%t.length][1]||t[r][0]===t[(r-1+t.length)%t.length][0]&&t[r][1]===t[(r-1+t.length)%t.length][1]||t[(r+1)%t.length][0]===t[(r-1+t.length)%t.length][0]&&t[(r-1+t.length)%t.length][1]===t[(r+1)%t.length][1]||e.push(t[r]);return e}(t);if(!1===n)return this.paintPolyline(t,e);{let n=Array(this.height);for(let t=0;t<this.height;t++){n[t]=[];for(let e=0;e<this.width;e++)n[t].push(0)}for(let t=0;t<i.length;t++){const e=Yh(i[t],i[(t+1)%i.length]);for(let t=0;t<this.height;t++)for(let r=0;r<this.width;r++)Zh(r,t,e,this.height)&&(n[t][r]=0===n[t][r]?1:0)}for(let t=0;t<this.height;t++)for(let e=0;e<this.width;e++)if(1===n[t][e])if(1===this.bitDepth)this.setBitXY(e,t);else{let n=Math.min(this.channels,r.length),i=(e+t*this.width)*this.channels;for(let t=0;t<n;t++)this.data[i+t]=r[t]}return this.paintPolyline(t,e)}}function Yh(t,e){if(t[0]===e[0])return{a:0,b:t[0],vertical:!0};{const r=(e[1]-t[1])/(e[0]-t[0]);return{a:r,b:t[1]-r*t[0],vertical:!1}}}function Zh(t,e,r,n){if(!0===r.vertical)return r.b<=t;if(0===r.a)return!1;{const i=(e-r.b)/r.a;return i<t&&i>=0&&i<=n}}function Gh(t,e={}){let r=Object.assign({},e);this.checkProcessable("paintPolygons",{bitDepth:[8,16]});let n=Th(Object.assign({},e,{numberColors:t.length}));for(let e=0;e<t.length;e++)r.color=n[e%n.length],this.paintPolygon(t[e],r);return this}function Xh(t={}){let{maxSlots:e=256,channel:r,useAlpha:n=!0}=t;if(this.checkProcessable("getHistogram",{bitDepth:[1,8,16]}),void 0===r){if(this.components>1)throw new RangeError("You need to define the channel for an image that contains more than one channel");r=0}return Qh.call(this,r,{useAlpha:n,maxSlots:e})}function Hh(t={}){const{maxSlots:e=256,useAlpha:r=!0}=t;this.checkProcessable("getHistograms",{bitDepth:[8,16]});let n=new Array(r?this.components:this.channels);for(let t=0;t<n.length;t++)n[t]=Qh.call(this,t,{useAlpha:r,maxSlots:e});return n}function Qh(t,e){let{useAlpha:r,maxSlots:n}=e;if(1===this.bitDepth){let t=[0,0];for(let e=0;e<this.height;e++)for(let r=0;r<this.width;r++){let n=this.getBitXY(e,r);0===n?t[0]+=1:1===n&&(t[1]+=1)}return t}let i=Math.log2(n);if(!Ra()(i))throw new RangeError("maxSlots must be a power of 2, for example: 64, 256, 1024");let o=0;this.bitDepth>i&&(o=this.bitDepth-i);let s=this.data,a=ll()(Math.pow(2,Math.min(this.bitDepth,i)),0);if(r&&this.alpha){let e=this.channels-t-1;for(let r=t;r<s.length;r+=this.channels)a[s[r]>>o]+=s[r+e]/this.maxValue}else for(let e=t;e<s.length;e+=this.channels)a[s[e]>>o]++;return a}function Wh(t={}){let{useAlpha:e=!0,nbSlots:r=512}=t;this.checkProcessable("getColorHistogram",{bitDepth:[8,16],components:[3]});let n=Math.log(r)/Math.log(8);if(n!==Math.floor(n))throw new RangeError("nbSlots must be a power of 8. Usually 8, 64, 512 or 4096");let i=this.bitDepth-n,o=this.data,s=ll()(Math.pow(8,n),0),a=Math.pow(2,2*n),l=Math.pow(2,n);for(let t=0;t<o.length;t+=this.channels){let r=(o[t]>>i)*a+(o[t+1]>>i)*l+(o[t+2]>>i);e&&this.alpha?s[r]+=o[t+this.channels-1]/this.maxValue:s[r]++}return s}function Kh(){this.checkProcessable("min",{bitDepth:[8,16,32]});let t=ll()(this.channels,1/0);for(let e=0;e<this.data.length;e+=this.channels)for(let r=0;r<this.channels;r++)this.data[e+r]<t[r]&&(t[r]=this.data[e+r]);return t}function Jh(){this.checkProcessable("max",{bitDepth:[8,16,32]});let t=ll()(this.channels,-1/0);for(let e=0;e<this.data.length;e+=this.channels)for(let r=0;r<this.channels;r++)this.data[e+r]>t[r]&&(t[r]=this.data[e+r]);return t}function tc(){this.checkProcessable("sum",{bitDepth:[8,16]});let t=ll()(this.channels,0);for(let e=0;e<this.data.length;e+=this.channels)for(let r=0;r<this.channels;r++)t[r]+=this.data[e+r];return t}function ec(t=0,e=0){this.checkProcessable("getMoment",{bitDepth:[1]});let r=0;for(let n=0;n<this.width;n++)for(let i=0;i<this.height;i++)1===this.getBitXY(n,i)&&(r+=n**t*i**e);return r}function rc(t={}){let{mask:e,region:r=3,removeClosePoints:n=0,invert:i=!1,maxEquals:o=2}=t,s=this;this.checkProcessable("localMaxima",{bitDepth:[8,16],components:1}),r*=4;let a=i?0:1,l=[1,0,-1,0,1,1,-1,-1,2,0,-2,0,2,2,-2,-2],u=[0,1,0,-1,1,-1,1,-1,0,2,0,-2,2,-2,2,-2],h=r<=8?1:2,c=[];for(let t=h;t<s.height-h;t++)for(let n=h;n<s.width-h;n++){if(e&&e.getBitXY(n,t)!==a)continue;let h=0,f=0,d=s.data[n+t*s.width];for(let e=0;e<r;e++)i?s.data[n+l[e]+(t+u[e])*s.width]>d&&h++:s.data[n+l[e]+(t+u[e])*s.width]<d&&h++,s.data[n+l[e]+(t+u[e])*s.width]===d&&f++;h+f===r&&f<=o&&c.push([n,t])}if(n>0)for(let t=0;t<c.length;t++)for(let e=t+1;e<c.length;e++)Math.sqrt(Math.pow(c[t][0]-c[e][0],2)+Math.pow(c[t][1]-c[e][1],2))<n&&(c[t][0]=c[t][0]+c[e][0]>>1,c[t][1]=c[t][1]+c[e][1]>>1,c.splice(e,1),e--);return c}function nc(){let t=this.getHistograms({maxSlots:this.maxValue+1}),e=new Array(t.length);for(let r=0;r<t.length;r++){let n=t[r];e[r]=Ws(n)}return e}function ic(){let t=this.getHistograms({maxSlots:this.maxValue+1}),e=new Array(t.length);for(let r=0;r<t.length;r++){let n=t[r];e[r]=Qs(n)}return e}function oc(){this.checkProcessable("points",{bitDepth:[1]});const t=[];for(let e=0;e<this.width;e++)for(let r=0;r<this.height;r++)1===this.getBitXY(e,r)&&t.push([e,r]);return t}function sc(){this.checkProcessable("extendedPoints",{bitDepth:[1]});const t=[];for(let e=0;e<this.height;e++)for(let r=0;r<this.width;r++)1===this.getBitXY(r,e)&&(t.push([r,e]),1!==this.getBitXY(r+1,e)?(t.push([r+1,e]),t.push([r+1,e+1]),1!==this.getBitXY(r,e+1)&&t.push([r,e+1])):1!==this.getBitXY(r,e+1)&&(t.push([r,e+1]),t.push([r+1,e+1])));return t}function ac(t,e={}){if(this===t)return[0,0];let r=[0,0],n=this;for(;n;){if(n===t)return r;n.position&&(r[0]+=n.position[0],r[1]+=n.position[1]),n=n.parent}return!!e.defaultFurther&&r}function lc(t={}){let{alpha:e=1}=t;this.checkProcessable("countAlphaPixels",{bitDepth:[8,16],alpha:1});let r=0;if(void 0!==e){for(let t=this.components;t<this.data.length;t+=this.channels)this.data[t]===e&&r++;return r}return this.size}function uc(t,e={}){e.sorted||t.sort(cc);const r=t.length,n=new Array(2*r);for(var i=0,o=0;o<r;o++){const e=t[o];for(;i>=2&&hc(n[i-2],n[i-1],e)<=0;)i--;n[i++]=e}const s=i+1;for(o=r-2;o>=0;o--){const e=t[o];for(;i>=s&&hc(n[i-2],n[i-1],e)<=0;)i--;n[i++]=e}return n.slice(0,i-1)}function hc(t,e,r){return(e[1]-t[1])*(r[0]-t[0])-(e[0]-t[0])*(r[1]-t[1])}function cc(t,e){return t[0]===e[0]?t[1]-e[1]:t[0]-e[0]}function fc(){return uc(this.extendedPoints,{sorted:!1})}function dc(t,e){return[t[0]-e[0],t[1]-e[1]]}function pc(t){let e=Math.sqrt(t[0]**2+t[1]**2);return[t[0]/e,t[1]/e]}function mc(t,e,r){void 0===r&&(r=new Array(e.length));let n=Math.cos(t),i=Math.sin(t);for(let t=0;t<r.length;++t)r[t]=[n*e[t][0]-i*e[t][1],i*e[t][0]+n*e[t][1]];return r}function gc(t){let e=0;for(let r=0;r<t.length;r++){let n=t[r][0],i=t[r][1],o=t[r===t.length-1?0:r+1][0],s=t[r===t.length-1?0:r+1][1];e+=Math.sqrt((o-n)**2+(s-i)**2)}return e}function vc(t){let e=0;for(let r=0;r<t.length;r++){e+=t[r][0]*t[r===t.length-1?0:r+1][1]*.5,e-=t[r===t.length-1?0:r+1][0]*t[r][1]*.5}return Math.abs(e)}function wc(t){let e=1/0,r=1/0,n=-1/0,i=-1/0;for(let o=0;o<t.length;o++)t[o][0]<e&&(e=t[o][0]),t[o][0]>n&&(n=t[o][0]),t[o][1]<r&&(r=t[o][1]),t[o][1]>i&&(i=t[o][1]);return[[e,r],[n,i]]}function yc(t={}){const{originalPoints:e=fc.call(this)}=t;if(0===e.length)return[];if(1===e.length)return[e[0],e[0],e[0],e[0]];const r=new Array(e.length);let n,i=1/0,o=0;for(let t=0;t<r.length;t++){let s=bc(e[t],e[(t+1)%r.length]);mc(-s,e,r);let a=r[t][0],l=r[t][1],u=r[(t+1)%r.length][0],h=r[(t+1)%r.length][1],c=!0,f=0,d=0,p=0;for(let t=0;t<r.length;t++){let e=r[t][0],n=r[t][1],i=(e-a)/(u-a);!0===c?(c=!1,f=i,d=i):(i<f&&(f=i),i>d&&(d=i));let o=(-(u-a)*n+u*l-h*a)/(u-a);Math.abs(o)>Math.abs(p)&&(p=o)}let m=[a+f*(u-a),l],g=[a+d*(u-a),l],v=Math.abs(p*(f-d)*(u-a));v<i&&(o=s,i=v,n=[m,g,[g[0],g[1]-p],[m[0],m[1]-p]])}return mc(o,n,n),n}function bc(t,e){let r=pc(dc(e,t)),n=Math.acos(r[0]);return r[1]<0?-n:n}var _c=r(2229),xc=r.n(_c);var kc=r(4707),Mc=r.n(kc);function Sc(t,e){let r=pc(dc(e,t)),n=Math.acos(r[0]);return r[1]<0?-n:n}class Ec{constructor(t,e){this.map=t,this.id=e,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY,this.meanX=0,this.meanY=0,this.surface=0,this.computed={}}getMask(t={}){const{scale:e=1,kind:r=""}=t;let n;switch(r){case"contour":n=this.contourMask;break;case"box":n=this.boxMask;break;case"filled":n=this.filledMask;break;case"center":n=this.centerMask;break;case"mbr":n=this.mbrFilledMask;break;case"hull":n=this.convexHullFilledMask;break;case"hullContour":n=this.convexHullMask;break;case"mbrContour":n=this.mbrMask;break;case"feret":n=this.feretMask;break;default:n=this.mask}return e<1&&(n=n.resize({factor:e}),n.parent=this.mask.parent,n.position[0]+=this.minX,n.position[1]+=this.minY),n}get mean(){throw new Error("Roi mean not implemented yet")}get center(){return this.computed.center||(this.computed.center=[this.width/2>>0,this.height/2>>0]),this.computed.center}get ratio(){return this.width/this.height}get width(){return this.maxX-this.minX+1}get height(){return this.maxY-this.minY+1}_computExternalIDs(){let t=this.borderIDs,e=this.borderLengths;this.computed.externalIDs=[],this.computed.externalLengths=[];let r=this.internalIDs;for(let n=0;n<t.length;n++)r.includes(t[n])||(this.computed.externalIDs.push(t[n]),this.computed.externalLengths.push(e[n]))}get externalIDs(){return this.computed.externalIDs||this._computExternalIDs(),this.computed.externalIDs}get externalLengths(){return this.computed.externalLengths||this._computExternalIDs(),this.computed.externalLengths}_computeBorderIDs(){let t=function(t){let e=t.map,r=e.data,n=new Set,i=new Map,o=new Set,s=[1,0,-1,0],a=[0,1,0,-1];for(let l=t.minX;l<=t.maxX;l++)for(let u=t.minY;u<=t.maxY;u++){if(r[l+u*e.width]===t.id)for(let h=0;h<4;h++){let c=l+s[h],f=u+a[h];if(c>=0&&f>=0&&c<e.width&&f<e.height){let s=c+f*e.width;if(r[s]!==t.id&&!o.has(s)){o.add(s),n.add(r[s]);let t=i.get(r[s]);t?i.set(r[s],++t):i.set(r[s],1)}}}}let l=Array.from(n),u=l.map((function(t){return i.get(t)}));return{ids:l,lengths:u}}(this);this.computed.borderIDs=t.ids,this.computed.borderLengths=t.lengths}get borderIDs(){return this.computed.borderIDs||this._computeBorderIDs(),this.computed.borderIDs}get borderLengths(){return this.computed.borderLengths||this._computeBorderIDs(),this.computed.borderLengths}get boxIDs(){return this.computed.boxIDs||(this.computed.boxIDs=function(t){let e=new Set,r=t.map,n=r.data;for(let i of[0,t.height-1])for(let o=0;o<t.width;o++){let s=(i+t.minY)*r.width+o+t.minX;if(o-t.minX>0&&n[s]===t.id&&n[s-1]!==t.id){let t=n[s-1];e.add(t)}if(r.width-o-t.minX>1&&n[s]===t.id&&n[s+1]!==t.id){let t=n[s+1];e.add(t)}}for(let i of[0,t.width-1])for(let o=0;o<t.height;o++){let s=(o+t.minY)*r.width+i+t.minX;if(o-t.minY>0&&n[s]===t.id&&n[s-r.width]!==t.id){let t=n[s-r.width];e.add(t)}if(r.height-o-t.minY>1&&n[s]===t.id&&n[s+r.width]!==t.id){let t=n[s+r.width];e.add(t)}}return Array.from(e)}(this)),this.computed.boxIDs}get internalIDs(){return this.computed.internalIDs||(this.computed.internalIDs=function(t){let e=[t.id],r=t.map,n=r.data;if(t.height>2)for(let i=0;i<t.width;i++){let o=t.minY*r.width+i+t.minX;if(e.includes(n[o])){let i=n[o+r.width];e.includes(i)||t.boxIDs.includes(i)||e.push(i)}}let i=new Array(4);for(let o=1;o<t.width-1;o++)for(let s=1;s<t.height-1;s++){let a=(s+t.minY)*r.width+o+t.minX;if(e.includes(n[a])){i[0]=n[a-1],i[1]=n[a+1],i[2]=n[a-r.width],i[3]=n[a+r.width];for(let r=0;r<4;r++){let n=i[r];e.includes(n)||t.boxIDs.includes(n)||e.push(n)}}}return e}(this)),this.computed.internalIDs}get box(){return this.computed.box||(this.computed.box=function(t){let e=0,r=t.map,n=r.data,i=[0];t.height>1&&(i[1]=t.height-1);for(let o of i)for(let i=1;i<t.width-1;i++){n[(o+t.minY)*r.width+i+t.minX]===t.id&&e++}let o=[0];t.width>1&&(o[1]=t.width-1);for(let i of o)for(let o=0;o<t.height;o++){n[(o+t.minY)*r.width+i+t.minX]===t.id&&e++}return e}(this)),this.computed.box}get external(){return this.computed.external||(this.computed.external=function(t){let e=0,r=t.map,n=r.data;for(let i=1;i<t.width-1;i++)for(let o=1;o<t.height-1;o++){let s=(o+t.minY)*r.width+i+t.minX;n[s]===t.id&&(t.externalIDs.includes(n[s-1])||t.externalIDs.includes(n[s+1])||t.externalIDs.includes(n[s-r.width])||t.externalIDs.includes(n[s+r.width]))&&e++}return e+t.box}(this)),this.computed.external}get holesInfo(){return this.computed.holesInfo||(this.computed.holesInfo=function(t){let e=0,r=t.map.width,n=t.map.data;for(let i=1;i<t.width-1;i++)for(let o=1;o<t.height-1;o++){let s=(o+t.minY)*r+i+t.minX;t.internalIDs.includes(n[s])&&n[s]!==t.id&&e++}return{number:t.internalIDs.length-1,surface:e}}(this)),this.computed.holesInfo}get border(){return this.computed.border||(this.computed.border=function(t){let e=0,r=t.map,n=r.data;for(let i=1;i<t.width-1;i++)for(let o=1;o<t.height-1;o++){let s=(o+t.minY)*r.width+i+t.minX;n[s]===t.id&&(n[s-1]===t.id&&n[s+1]===t.id&&n[s-r.width]===t.id&&n[s+r.width]===t.id||e++)}return e+t.box}(this)),this.computed.border}get contourMask(){if(!this.computed.contourMask){let t=new Qc(this.width,this.height,{kind:cn,position:[this.minX,this.minY],parent:this.map.parent});for(let e=0;e<this.width;e++)for(let r=0;r<this.height;r++)this.map.data[e+this.minX+(r+this.minY)*this.map.width]===this.id&&(e>0&&e<this.width-1&&r>0&&r<this.height-1&&this.map.data[e-1+this.minX+(r+this.minY)*this.map.width]===this.id&&this.map.data[e+1+this.minX+(r+this.minY)*this.map.width]===this.id&&this.map.data[e+this.minX+(r-1+this.minY)*this.map.width]===this.id&&this.map.data[e+this.minX+(r+1+this.minY)*this.map.width]===this.id||t.setBitXY(e,r));this.computed.contourMask=t}return this.computed.contourMask}get boxMask(){if(!this.computed.boxMask){let t=new Qc(this.width,this.height,{kind:cn,position:[this.minX,this.minY],parent:this.map.parent});for(let e=0;e<this.width;e++)t.setBitXY(e,0),t.setBitXY(e,this.height-1);for(let e=0;e<this.height;e++)t.setBitXY(0,e),t.setBitXY(this.width-1,e);this.computed.boxMask=t}return this.computed.boxMask}get mask(){if(!this.computed.mask){let t=new Qc(this.width,this.height,{kind:cn,position:[this.minX,this.minY],parent:this.map.parent});for(let e=0;e<this.width;e++)for(let r=0;r<this.height;r++)this.map.data[e+this.minX+(r+this.minY)*this.map.width]===this.id&&t.setBitXY(e,r);this.computed.mask=t}return this.computed.mask}get filledMask(){if(!this.computed.filledMask){let t=new Qc(this.width,this.height,{kind:cn,position:[this.minX,this.minY],parent:this.map.parent});for(let e=0;e<this.width;e++)for(let r=0;r<this.height;r++){let n=e+this.minX+(r+this.minY)*this.map.width;this.internalIDs.includes(this.map.data[n])&&t.setBitXY(e,r)}this.computed.filledMask=t}return this.computed.filledMask}get centerMask(){if(!this.computed.centerMask){let t=new Lh({kind:"smallCross"}).getMask();t.parent=this.map.parent,t.position=[this.minX+this.center[0]-1,this.minY+this.center[1]-1],this.computed.centerMask=t}return this.computed.centerMask}get convexHull(){if(!this.computed.convexHull){const t=[];for(let e=0;e<this.width;e++)for(let r=0;r<this.height;r++)this.map.data[e+this.minX+(r+this.minY)*this.map.width]===this.id&&(e>0&&e<this.width-1&&r>0&&r<this.height-1&&this.map.data[e-1+this.minX+(r+this.minY)*this.map.width]===this.id&&this.map.data[e+1+this.minX+(r+this.minY)*this.map.width]===this.id&&this.map.data[e+this.minX+(r-1+this.minY)*this.map.width]===this.id&&this.map.data[e+this.minX+(r+1+this.minY)*this.map.width]===this.id||(t.push([e,r]),t.push([e+1,r]),t.push([e,r+1]),t.push([e+1,r+1])));const e=uc(t);this.computed.convexHull={polyline:e,surface:vc(e),perimeter:gc(e)}}return this.computed.convexHull}get convexHullMask(){if(!this.computed.convexHullMask){const t=this.convexHull,e=new Qc(this.width+1,this.height+1,{kind:cn,position:[this.minX,this.minY],parent:this.map.parent});e.paintPolyline(t.polyline,{closed:!0}),this.computed.convexHullMask=e}return this.computed.convexHullMask}get convexHullFilledMask(){if(!this.computed.convexHullFilledMask){const t=this.convexHull,e=new Qc(this.width,this.height,{kind:cn,position:[this.minX,this.minY],parent:this.map.parent});for(let r=0;r<this.width;r++)for(let n=0;n<this.height;n++)1!==Mc()(t.polyline,[r,n])&&e.setBitXY(r,n);this.computed.convexHullFilledMask=e}return this.computed.convexHullFilledMask}get mbr(){if(!this.computed.mbr){let t=yc({originalPoints:this.convexHull.polyline});if(0===t.length)this.computed.mbr={width:0,height:0,surface:0,perimeter:0,rectangle:t};else{let e=t[0],r=t[1],n=t[2],i=Math.sqrt((e[0]-r[0])**2+(e[1]-r[1])**2),o=Math.sqrt((n[0]-r[0])**2+(n[1]-r[1])**2);this.computed.mbr={width:i,height:o,elongation:1-i/o,aspectRatio:i/o,surface:i*o,perimeter:2*(i+o),rectangle:t}}}return this.computed.mbr}get fillRatio(){return this.surface/(this.surface+this.holesInfo.surface)}get feretDiameters(){return this.computed.feretDiameters||(this.computed.feretDiameters=function(t={}){const{originalPoints:e=fc.call(this)}=t;if(0===e.length)return{min:0,max:0,minLine:[],maxLine:[],aspectRatio:1};if(1===e.length)return{min:1,max:1,minLine:[e[0],e[0]],maxLine:[e[0],e[0]],aspectRatio:1};const r=new Array(e.length);let n=1/0,i=0,o=[];for(let t=0;t<e.length;t++){let s=Sc(e[t],e[(t+1)%e.length]);mc(-s,e,r);let a=0,l=[];for(let n=0;n<e.length;n++){let e=Math.abs(r[t][1]-r[n][1]);e>a&&(a=e,l=[],l.push([r[n][0],r[t][1]],[r[n][0],r[n][1]]))}a<n&&(n=a,i=s,o=l)}mc(i,o,o);let s=0,a=[],l=0;for(let t=0;t<e.length-1;t++)for(let r=t+1;r<e.length;r++){let n=(e[t][0]-e[r][0])**2+(e[t][1]-e[r][1])**2;n>l&&(l=n,s=Math.sqrt(n),a=[e[t],e[r]])}return{min:n,minLine:o,max:s,maxLine:a,aspectRatio:n/s}}({originalPoints:this.convexHull.polyline})),this.computed.feretDiameters}get eqpc(){return this.computed.eqpc||(this.computed.eqpc=2*Math.sqrt(this.surface/Math.PI)),this.computed.eqpc}get perimeterInfo(){return this.computed.perimeterInfo||(this.computed.perimeterInfo=function(t){let e=t.map,r=e.data,n=0,i=0,o=0,s=0;for(let a=0;a<t.width;a++)for(let l=0;l<t.height;l++){let u=(l+t.minY)*e.width+a+t.minX;if(r[u]===t.id){let h=0;switch((0===a||t.externalIDs.includes(r[u-1]))&&h++,(a===t.width-1||t.externalIDs.includes(r[u+1]))&&h++,(0===l||t.externalIDs.includes(r[u-e.width]))&&h++,(l===t.height-1||t.externalIDs.includes(r[u+e.width]))&&h++,h){case 1:n++;break;case 2:i++;break;case 3:o++;break;case 4:s++}}}return{one:n,two:i,three:o,four:s}}(this)),this.computed.perimeterInfo}get perimeter(){let t=this.perimeterInfo,e=2-Math.sqrt(2);return t.one+2*t.two+3*t.three+4*t.four-e*(t.two+2*t.three+t.four)}get ped(){return this.computed.ped||(this.computed.ped=this.perimeter/Math.PI),this.computed.ped}get feretMask(){if(!this.computed.feretMask){const t=new Qc(this.width+1,this.height+1,{kind:cn,position:[this.minX,this.minY],parent:this.map.parent});t.paintPolyline(this.feretDiameters.minLine),t.paintPolyline(this.feretDiameters.maxLine),this.computed.feretMask=t}return this.computed.feretMask}get mbrMask(){if(!this.computed.mbrMask){let t=function(t){for(let e=0;e<t.length;e++)t[e][0]=Math.round(t[e][0]),t[e][1]=Math.round(t[e][1]);return t}(this.mbr.rectangle);if(t.length>0){const e=wc(t),r=new Qc(e[1][0]-e[0][0]+1,e[1][1]-e[0][1]+1,{kind:cn,position:[this.minX+e[0][0],this.minY+e[0][1]],parent:this.map.parent});t=function(t,e){void 0===e&&(e=new Array(t.length).fill(0).map((()=>[])));let r=wc(t),n=r[0][0],i=r[0][1];for(let r=0;r<t.length;r++)e[r][0]=t[r][0]-n,e[r][1]=t[r][1]-i;return e}(t),r.paintPolyline(t,{closed:!0}),this.computed.mbrMask=r}else this.computed.mbrMask=new Qc(1,1,{kind:cn,position:[this.minX,this.minY],parent:this.map.parent})}return this.computed.mbrMask}get mbrFilledMask(){if(!this.computed.mbrFilledMask){const t=new Qc(this.width,this.height,{kind:cn,position:[this.minX,this.minY],parent:this.map.parent}),e=this.mask.minimalBoundingRectangle();for(let r=0;r<this.width;r++)for(let n=0;n<this.height;n++)1!==Mc()(e,[r,n])&&t.setBitXY(r,n);this.computed.mbrFilledMask=t}return this.computed.mbrFilledMask}get points(){if(!this.computed.points){let t=[];for(let e=0;e<this.height;e++)for(let r=0;r<this.width;r++){let n=(e+this.minY)*this.map.width+r+this.minX;this.map.data[n]===this.id&&t.push([r,e])}this.computed.points=t}return this.computed.points}get maxLengthPoints(){if(!this.computed.maxLengthPoints){let t,e=0;const r=this.points;for(let n=0;n<r.length;n++)for(let i=n+1;i<r.length;i++){let o=Math.pow(r[n][0]-r[i][0],2)+Math.pow(r[n][1]-r[i][1],2);o>=e&&(e=o,t=[r[n],r[i]])}this.computed.maxLengthPoints=t}return this.computed.maxLengthPoints}get maxLength(){if(!this.computed.maxLength){let t=Math.sqrt(Math.pow(this.maxLengthPoints[0][0]-this.maxLengthPoints[1][0],2)+Math.pow(this.maxLengthPoints[0][1]-this.maxLengthPoints[1][1],2));this.computed.maxLength=t}return this.computed.maxLength}get roundness(){return 4*this.surface/(Math.PI*this.feretDiameters.max**2)}get sphericity(){return 2*Math.sqrt(this.surface*Math.PI)/this.perimeter}get solidity(){return this.surface/this.convexHull.surface}get angle(){if(!this.computed.angle){let t=this.maxLengthPoints,e=180*-Math.atan2(t[0][1]-t[1][1],t[0][0]-t[1][0])/Math.PI;this.computed.angle=e}return this.computed.angle}toJSON(){return{id:this.id,minX:this.minX,maxX:this.maxX,minY:this.minY,maxY:this.maxY,meanX:this.meanX,meanY:this.meanY,height:this.height,width:this.width,surface:this.surface,mbrWidth:this.mbr.width,mbrHeight:this.mbr.height,mbrSurface:this.mbr.surface,eqpc:this.eqpc,ped:this.ped,feretDiameterMin:this.feretDiameters.min,feretDiameterMax:this.feretDiameters.max,aspectRatio:this.feretDiameters.aspectRatio,fillRatio:this.fillRatio,sphericity:this.sphericity,roundness:this.roundness,solidity:this.solidity,perimeter:this.perimeter}}}class Ac{constructor(t,e){this.roiMap=t,this.options=e,this.roi=this.createRoi()}createRoi(){let t=this.roiMap.data,e={};this.roiMap.positive=0,this.roiMap.negative=0;for(let r=0;r<t.length;r++)t[r]&&!e[t[r]]&&(e[t[r]]=!0,t[r]>0?this.roiMap.positive++:this.roiMap.negative++);let r={};for(let t in e)r[t]=new Ec(this.roiMap,1*t);let n=this.roiMap.width,i=this.roiMap.height;for(let e=0;e<i;e++)for(let i=0;i<n;i++){let o=e*n+i;if(0!==t[o]){const n=r[t[o]];i<n.minX&&(n.minX=i),i>n.maxX&&(n.maxX=i),e<n.minY&&(n.minY=e),e>n.maxY&&(n.maxY=e),n.meanX+=i,n.meanY+=e,n.surface++}}let o=[];for(let t in e)r[t].meanX/=r[t].surface,r[t].meanY/=r[t].surface,o.push(r[t]);return o}}function Cc(t={}){const{algorithm:e="commonBorderLength",minCommonBorderLength:r=5,maxCommonBorderLength:n=100,minCommonBorderRatio:i=.3,maxCommonBorderRatio:o=1}=t;let s=function(t,e,i){return t[i]>=r&&t[i]<=n};"function"==typeof e&&(s=e),"commonborderratio"===e.toLowerCase()&&(s=function(t,e,r){let n=Math.min(t[r]/t[e],1);return n>=i&&n<=o});const a=this,l=a.commonBorderLength;let u={},h={};for(let t of Object.keys(l)){let e=l[t],r=Object.keys(e);for(let n of r)if(n!==t&&s(e,t,n)){let e=n;h[n]&&(e=h[n]);let r=t;if(h[t]&&(r=h[t]),Number(e)!==r){let t=Math.min(e,r),n=Math.max(e,r);if(u[t]||(u[t]={}),u[t][n]=!0,h[n]=t,u[n]){for(let e of Object.keys(u[n]))u[t][e]=!0,h[e]=t;delete u[n]}}}}let c=a.minMax,f=-c.min,d=c.max+f,p=new Array(d+1).fill(0);for(let t of Object.keys(h))p[Number(t)+f]=h[t];let m=a.data;for(let t=0;t<m.length;t++){let e=m[t];if(0!==e){let r=p[e+f];0!==r&&(m[t]=r)}}return a.computed={},a}class Dc{constructor(t,e){this.parent=t,this.width=t.width,this.height=t.height,this.data=e,this.negative=0,this.positive=0}get total(){return this.negative+this.positive}get minMax(){let t=Number.MAX_SAFE_INTEGER,e=Number.MIN_SAFE_INTEGER;for(let r=0;r<this.data.length;r++)this.data[r]<t&&(t=this.data[r]),this.data[r]>e&&(e=this.data[r]);return{min:t,max:e}}get commonBorderLength(){return function(t){let e=t.data,r=[1,0,-1,0],n=[0,1,0,-1],i=t.minMax,o=-i.min,s=i.max+o,a=[];for(let t=0;t<=s;t++)a.push(Object.create(null));for(let i=0;i<t.width;i++)for(let s=0;s<t.height;s++){let l=e[i+s*t.width];if(0!==l){let u=Object.create(null),h=!1;for(let c=0;c<4;c++){let f=i+r[c],d=s+n[c];if(f>=0&&d>=0&&f<t.width&&d<t.height){let r=e[f+d*t.width];l!==r&&(h=!0,0!==r&&void 0===u[r]&&(u[r]=!0,a[r+o][l]?a[r+o][l]++:a[r+o][l]=1))}else h=!0}h&&(a[l+o][l]?a[l+o][l]++:a[l+o][l]=1)}}let l={};for(let t=0;t<a.length;t++)Object.keys(a[t]).length>0&&(l[t-o]=a[t]);return l}(this)}mergeRoi(t={}){return Cc.call(this,t)}mergeRois(t){const e=t[0],r=t.slice(1);for(let t=0;t<this.data.length;t++)r.includes(this.data[t])&&(this.data[t]=e)}rowsInfo(){let t=new Array(this.height),e=0;for(let r=0;r<this.data.length;r+=this.width){let n={row:e,positivePixel:0,negativePixel:0,zeroPixel:0,positiveRoi:0,negativeRoi:0,medianChange:0};t[e++]=n;let i={},o={},s=[],a=this.data[r],l=0;for(let t=r;t<r+this.width;t++){let e=this.data[t];a!==e&&(a=e,s.push(l),l=0),l++,e>0?(n.positivePixel++,i[e]||(i[e]=!0)):e<0?(n.negativePixel++,o[e]||(o[e]=!0)):n.zeroPixel++}s.push(l),n.medianChange=s.sort(((t,e)=>t-e))[Math.floor(s.length/2)],n.positiveRoiIDs=Object.keys(i),n.negativeRoiIDs=Object.keys(o),n.positiveRoi=n.positiveRoiIDs.length,n.negativeRoi=n.negativeRoiIDs.length}return t}colsInfo(){let t=new Array(this.width),e=0;for(let r=0;r<this.width;r++){let n={col:e,positivePixel:0,negativePixel:0,zeroPixel:0,positiveRoi:0,negativeRoi:0,medianChange:0};t[e++]=n;let i={},o={},s=[],a=this.data[r],l=0;for(let t=r;t<r+this.data.length;t+=this.width){let e=this.data[t];a!==e&&(a=e,s.push(l),l=0),l++,e>0?(n.positivePixel++,i[e]||(i[e]=!0)):e<0?(n.negativePixel++,o[e]||(o[e]=!0)):n.zeroPixel++}s.push(l),n.medianChange=s.sort(((t,e)=>t-e))[Math.floor(s.length/2)],n.positiveRoiIDs=Object.keys(i),n.negativeRoiIDs=Object.keys(o),n.positiveRoi=n.positiveRoiIDs.length,n.negativeRoi=n.negativeRoiIDs.length}return t}}function Oc(t,e={}){const{allowCorners:r=!1}=e,n=65535;let i=new Int16Array(t.size),o=0,s=0,a=new Uint16Array(65536),l=new Uint16Array(65536);for(let e=0;e<t.width;e++)for(let r=0;r<t.height;r++)0===i[r*t.width+e]&&u(e,r);function u(e,u){let h=0,c=0,f=t.getBitXY(e,u),d=f?++o:--s;if(o>32767||s<-32768)throw new Error("Too many regions of interest");for(a[0]=e,l[0]=u;h<=c;){let e=a[h&n],o=l[h&n];if(i[o*t.width+e]=d,e>0&&0===i[o*t.width+e-1]&&t.getBitXY(e-1,o)===f&&(c++,a[c&n]=e-1,l[c&n]=o,i[o*t.width+e-1]=-32768),o>0&&0===i[(o-1)*t.width+e]&&t.getBitXY(e,o-1)===f&&(c++,a[c&n]=e,l[c&n]=o-1,i[(o-1)*t.width+e]=-32768),e<t.width-1&&0===i[o*t.width+e+1]&&t.getBitXY(e+1,o)===f&&(c++,a[c&n]=e+1,l[c&n]=o,i[o*t.width+e+1]=-32768),o<t.height-1&&0===i[(o+1)*t.width+e]&&t.getBitXY(e,o+1)===f&&(c++,a[c&n]=e,l[c&n]=o+1,i[(o+1)*t.width+e]=-32768),r&&(e>0&&o>0&&0===i[(o-1)*t.width+e-1]&&t.getBitXY(e-1,o-1)===f&&(c++,a[c&n]=e-1,l[c&n]=o-1,i[(o-1)*t.width+e-1]=-32768),e<t.width-1&&o>0&&0===i[(o-1)*t.width+e+1]&&t.getBitXY(e+1,o-1)===f&&(c++,a[c&n]=e+1,l[c&n]=o-1,i[(o-1)*t.width+e+1]=-32768),e>0&&o<t.height-1&&0===i[(o+1)*t.width+e-1]&&t.getBitXY(e-1,o+1)===f&&(c++,a[c&n]=e-1,l[c&n]=o+1,i[(o+1)*t.width+e-1]=-32768),e<t.width-1&&o<t.height-1&&0===i[(o+1)*t.width+e+1]&&t.getBitXY(e+1,o+1)===f&&(c++,a[c&n]=e+1,l[c&n]=o+1,i[(o+1)*t.width+e+1]=-32768)),h++,c-h>n)throw new Error("analyseMask can not finish, the array to manage internal data is not big enough.You could improve mask by changing MAX_ARRAY")}}return new Dc(t,i)}var Pc=r(530),Rc=r.n(Pc);const Ic=[-1,0],Tc=[0,-1],Fc=[null,null],jc=[-1,-1,0,1],Nc=[0,-1,-1,-1],Bc=[null,null,null,null];function Uc(t,e={}){const{allowCorners:r=!1}=e;let n,i,o,s=4;if(r&&(s=8),8===s)n=jc,i=Nc,o=Bc;else{if(4!==s)throw new RangeError(`unsupported neighbours count: ${s}`);n=Ic,i=Tc,o=Fc}const a=t.size,l=t.width,u=t.height,h=new Array(a),c=new Uint32Array(a),f=new(Rc());let d=1;for(let e=0;e<u;e++)for(let r=0;r<l;r++){const s=r+e*l;if(t.getBit(s)){let t=null;for(let s=0;s<o.length;s++){const a=r+n[s],c=e+i[s];if(a>=0&&c>=0&&a<l&&c<u){let e=h[a+c*l];e?(o[s]=e,(!t||o[s].value<t.value)&&(t=o[s])):o[s]=null}}if(t){h[s]=t;for(let e=0;e<o.length;e++)o[e]&&o[e]!==t&&f.union(t,o[e])}else h[s]=f.add(d++)}}for(let e=0;e<u;e++)for(let r=0;r<l;r++){const n=r+e*l;t.getBit(n)&&(c[n]=f.find(h[n]).value)}return new Dc(t,c)}function Lc(t={}){let{allowCorner:e=!0,onlyTop:r=!1,invert:n=!1}=t,i=this;i.checkProcessable("fromMaxima",{components:[1]});let o=0,s=0,a=new Int16Array(i.size),l=new Int8Array(i.size),u=new Float32Array(i.size),h=1048575,c=new Uint16Array(1048576),f=new Uint16Array(1048576),d=0,p=0,m=new Uint16Array(1048576),g=new Uint16Array(1048576),v=0,w=0;for(!function({maxima:t=!0}){for(let r=1;r<i.height-1;r++)for(let n=1;n<i.width-1;n++){let u=n+r*i.width;if(0===l[u]){let l=t?i.data[u]:-i.data[n+r*i.width];if(i.data[r*i.width+n-1]>l)continue;if(i.data[r*i.width+n+1]>l)continue;if(i.data[(r-1)*i.width+n]>l)continue;if(i.data[(r+1)*i.width+n]>l)continue;if(e){if(i.data[(r-1)*i.width+n-1]>l)continue;if(i.data[(r-1)*i.width+n+1]>l)continue;if(i.data[(r+1)*i.width+n-1]>l)continue;if(i.data[(r+1)*i.width+n+1]>l)continue}a[u]=t?++o:--s,y(n,r)||(t?--o:++s)}}}(i);d<p;){b(c[d&h],f[d&h],2),d++}return new Dc(i,a);function y(t,e){let r=p;v=0,w=1,m[0]=t,g[0]=e;let n=!0;for(;v<w;){n&=b(m[v&h],g[v&h],1),v++}if(!n){for(let t=0;t<w;t++){let e=m[t&h],r=g[t&h]*i.width+e;a[r]=0}p=r}return n}function b(t,e,n){let o=a[e*i.width+t],s=i.data[e*i.width+t];for(let d=e-1;d<=e+1;d++)for(let e=t-1;e<=t+1;e++){let t=d*i.width+e;if(0===l[t])switch(l[t]=1,u[t]=i.data[t]-s,n){case 1:if(0===u[t]){if(0===e||0===d||e===i.width-1||d===i.height-1)return!1;a[t]=o,m[w&h]=e,g[w&h]=d,w++}else{if(u[t]>0)return!1;r||(a[t]=o,c[p&h]=e,f[p&h]=d,p++)}break;case 2:u[t]<=0&&(a[t]=o,c[p&h]=e,f[p&h]=d,p++);break;default:throw new Error("unreachable")}}return!0}}function $c(t,e={}){let r=new Lh(e),n=new Int16Array(this.size),i=0,o=r.getPoints();for(let e=0;e<t.length;e++){i++;let r=t[e][0],s=t[e][1];for(let t=0;t<o.length;t++){let e=o[t][0],a=o[t][1];r+e>=0&&s+a>=0&&r+e<this.width&&s+a<this.height&&(n[r+e+(s+a)*this.width]=i)}}return new Dc(this,n)}var zc=r(5307),qc=r.n(zc);const Vc=[1,0,-1,0,1,1,-1,-1],Yc=[0,1,0,-1,1,-1,1,-1];function Zc(t={}){let{points:e,mask:r,image:n,fillMaxValue:i=this.maxValue,invert:o=!1}=t,s=n||this;s.checkProcessable("fromWaterShed",{bitDepth:[8,16],components:1}),o=!o,e||(e=s.getLocalMaxima({invert:o,mask:r}));let a=o?0:1,l=new Int16Array(s.size),u=s.width,h=s.height,c=new(qc())({comparator:(t,e)=>t[2]-e[2],strategy:qc().BinaryHeapStrategy});for(let t=0;t<e.length;t++){let r=e[t][0]+e[t][1]*u;l[r]=t+1;let n=s.data[r];(o&&n<=i||!o&&n>=i)&&c.queue([e[t][0],e[t][1],n])}for(;c.length>0;){let t=c.dequeue(),e=t[0]+t[1]*u;for(let n=0;n<4;n++){let f=t[0]+Vc[n],d=t[1]+Yc[n];if(f>=0&&d>=0&&f<u&&d<h){let h=f+d*u;if(!r||r.getBit(h)===a){let r=s.data[h];(o&&r<=i||!o&&r>=i)&&0===l[h]&&(l[h]=l[e],c.queue([t[0]+Vc[n],t[1]+Yc[n],r]))}}}}return new Dc(s,l)}class Gc{constructor(t,e={}){this._image=t,this._options=e,this._options.label||(this._options.label="default"),this._layers={},this._painted=null}fromMaxima(t={}){let e=Object.assign({},this._options,t),r=Lc.call(this._image,t);this._layers[e.label]=new Ac(r,e)}fromPoints(t,e={}){let r=Object.assign({},this._options,e),n=$c.call(this._image,t,e);return this._layers[r.label]=new Ac(n,r),this}putMap(t,e={}){let r=new Dc(this._image,t),n=Object.assign({},this._options,e);return this._layers[n.label]=new Ac(r,n),this}fromWaterShed(t={}){let e=Object.assign({},this._options,t),r=Zc.call(this._image,t);this._layers[e.label]=new Ac(r,e)}fromMask(t,e={}){let r=Object.assign({},this._options,e),n=Oc.call(this._image,t,e);return this._layers[r.label]=new Ac(n,r),this}fromMaskConnectedComponentLabelingAlgorithm(t,e={}){let r=Object.assign({},this._options,e),n=Uc.call(this._image,t,e);return this._layers[r.label]=new Ac(n,r),this}getMap(t={}){let e=Object.assign({},this._options,t);return this._assertLayerWithLabel(e.label),this._layers[e.label].roiMap}rowsInfo(t={}){return this.getMap(t).rowsInfo()}colsInfo(t={}){return this.getMap(t).rowsInfo()}getRoiIds(t={}){let e=this.getRois(t);if(e){let t=new Array(e.length);for(let r=0;r<e.length;r++)t[r]=e[r].id;return t}throw new Error("ROIs not found")}getRois(t={}){let{label:e=this._options.label,positive:r=!0,negative:n=!0,minSurface:i=0,maxSurface:o=Number.POSITIVE_INFINITY,minWidth:s=0,maxWidth:a=Number.POSITIVE_INFINITY,minHeight:l=0,maxHeight:u=Number.POSITIVE_INFINITY,minRatio:h=0,maxRatio:c=Number.POSITIVE_INFINITY}=t;if(!this._layers[e])throw new Error(`this Roi layer (${e}) does not exist`);const f=this._layers[e].roi,d=[];for(const t of f)(t.id<0&&n||t.id>0&&r)&&t.surface>=i&&t.surface<=o&&t.width>=s&&t.width<=a&&t.height>=l&&t.height<=u&&t.ratio>=h&&t.ratio<=c&&d.push(t);return d}getRoi(t,e={}){const{label:r=this._options.label}=e;if(!this._layers[r])throw new Error(`this Roi layer (${r}) does not exist`);const n=this._layers[r].roi.find((e=>e.id===t));if(!n)throw new Error(`found no Roi with id ${t}`);return n}getMasks(t={}){let e=this.getRois(t),r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=e[n].getMask(t);return r}getAnalysisMasks(t={}){const{analysisProperty:e}=t;let r=`${e}Mask`,n=this.getRois(t);return 0!==n.length&&n[0][r]?n.map((t=>t[r])):[]}getData(t={}){let e=Object.assign({},this._options,t);return this._assertLayerWithLabel(e.label),this._layers[e.label].roiMap.data}paint(t={}){let{labelProperty:e,analysisProperty:r}=t;this._painted||(this._painted=this._image.rgba8());let n=this.getMasks(t);if(e){const r=this.getRois(t);t.labels=r.map((t=>function(t,e=""){let r=e.split(".");for(let e of r){if(void 0===t[e])return;t=t[e]}return t}(t,e)));const n=Math.max(...t.labels);let i=!1,o=!1;if(e.includes("surface")?i=!0:/(?:perimeter|min|max|external|width|height|length)/.test(e)&&(o=!0),isFinite(n)){let e="";if("pixel"!==t.unit&&t.pixelSize&&(o||i)){e=i?`${t.unit}^2`:t.unit;let r=i?"m^2":"m",n=i?t.pixelSize**2:t.pixelSize;const o=xc().swiftConverter(r,e);t.labels=t.labels.map((t=>o(n*t)))}t.labels=n>50?t.labels.map((t=>Math.round(t)+e)):n>10?t.labels.map((t=>t.toFixed(1)+e)):t.labels.map((t=>t.toFixed(2)+e))}t.labelsPosition=r.map((t=>[t.meanX,t.meanY]))}if(this._painted.paintMasks(n,t),r){let e=this.getAnalysisMasks(t);this._painted.paintMasks(e,{color:t.analysisColor,alpha:t.analysisAlpha})}return this._painted}getMask(t={}){let e=new Qc(this._image.width,this._image.height,{kind:"BINARY"}),r=this.getMasks(t);for(let t=0;t<r.length;t++){let n=r[t];for(let t=0;t<n.width;t++)for(let r=0;r<n.height;r++)n.getBitXY(t,r)&&e.setBitXY(t+n.position[0],r+n.position[1])}return e}resetPainted(t={}){const{image:e}=t;this._painted=e?this.image.rgba8():this._image.rgba8()}mergeRoi(t={}){const e=this.getMap(t);return e.mergeRoi(t),this.putMap(e.data,t),this}mergeRois(t,e={}){if(!Array.isArray(t)||t.some((t=>!Number.isInteger(t))))throw new Error("Roi ids must be an array of integers");if(t.length<2)throw new Error("Roi ids must have at least two elements");if(new Set(t).size!==t.length)throw new Error("Roi ids must be all different");t.forEach((t=>this.getRoi(t)));const r=this.getMap(e);return r.mergeRois(t),this.putMap(r.data,e),this}findCorrespondingRoi(t,e={}){let r=this.getRois(e),n=[];for(let e=0;e<r.length;e++){let i=r[e],o=Xc(i.minX,i.minY,i.points,t,Math.sign(i.id));n.push(o)}return n}_assertLayerWithLabel(t){if(!this._layers[t])throw new Error(`no layer with label ${t}`)}}function Xc(t,e,r,n,i){let o={id:[],surface:[],roiSurfaceCovered:[],same:0,opposite:0,total:0};for(let i=0;i<r.length;i++){let s=r[i],a=s[0]+t+(s[1]+e)*n.width,l=n.data[a];(l>0||l<0)&&(o.id.includes(l)?o.surface[o.id.indexOf(l)]+=1:(o.id.push(l),o.surface.push(1)))}for(let t=0;t<o.id.length;t++){Math.sign(o.id[t])===i?o.same+=o.surface[t]:o.opposite+=o.surface[t],o.roiSurfaceCovered[t]=o.surface[t]/r.length}return o.total=o.opposite+o.same,o}const Hc=Object.prototype.toString;class Qc{constructor(t,e,r,i){if(1===arguments.length?(i=t,({width:t,height:e,data:r}=i)):r&&!r.length&&(i=r,({data:r}=i)),void 0===t&&(t=1),void 0===e&&(e=1),void 0===i&&(i={}),"object"!=typeof i||null===i)throw new TypeError("options must be an object");if(!Number.isInteger(t)||t<=0)throw new RangeError("width must be a positive integer");if(!Number.isInteger(e)||e<=0)throw new RangeError("height must be a positive integer");const{kind:o=fn}=i;if("string"!=typeof o)throw new TypeError("kind must be a string");const s=function(t){const e=dn[t];if(!e)throw new RangeError(`invalid image kind: ${t}`);return e}(o),a=Object.assign({},i);for(const t in s)void 0===a[t]&&(a[t]=s[t]);!function(t){const{components:e,alpha:r,bitDepth:i,colorModel:o}=t;if(!Number.isInteger(e)||e<=0)throw new RangeError(`invalid components: ${e}. Must be a positive integer`);if(0!==r&&1!==r&&"boolean"!=typeof r)throw new TypeError(`invalid alpha: ${r}: must be a boolean, 0 or 1`);if(!pn.includes(i))throw new RangeError(`invalid bitDepth: ${i}. Must be one of ${pn.join(", ")}`);if(!n[o])throw new RangeError(`invalid colorModel: ${o}. Must be one of ${Object.keys(n).join(", ")}`)}(a);const{components:l,bitDepth:u,colorModel:h}=a,c=a.alpha+0,f=t*e,d=l+c,p=32===u?Number.MAX_VALUE:2**u-1;if(void 0===r)r=function(t,e,r,n,i,o){const s=n*t;let a;switch(i){case 1:a=new Uint8Array(Math.ceil(s/8));break;case 8:a=new Uint8Array(s);break;case 16:a=new Uint16Array(s);break;case 32:a=new Float32Array(s);break;default:throw new Error(`Cannot create pixel array for bit depth ${i}`)}if(r)for(let t=e;t<a.length;t+=n)a[t]=o;return a}(f,l,c,d,u,p);else{const t=function(t,e,r){let n=e*t;return 1===r&&(n=Math.ceil(n/8)),n}(f,d,u);if(r.length!==t)throw new RangeError(`incorrect data size: ${r.length}. Should be ${t}`)}this.width=t,this.height=e,this.data=r,this.size=f,this.components=l,this.alpha=c,this.bitDepth=u,this.maxValue=p,this.colorModel=h,this.channels=d,this.meta=i.meta||{},Object.defineProperty(this,"parent",{enumerable:!1,writable:!0,configurable:!0,value:i.parent||null}),this.position=i.position||[0,0],this.computed=null,this.sizes=[this.width,this.height],this.multiplierX=this.channels,this.multiplierY=this.channels*this.width,this.isClamped=this.bitDepth<32,this.borderSizes=[0,0]}get[Symbol.toStringTag](){return"IJSImage"}static isImage(t){return"[object IJSImage]"===Hc.call(t)}static fromCanvas(t){const e=t.getContext("2d").getImageData(0,0,t.width,t.height);return new Qc(e.width,e.height,e.data)}static createFrom(t,e){const r=fa(t);return Object.assign(r,{parent:t,position:[0,0]},e),new Qc(r)}getRoiManager(t){return new Gc(this,t)}clone(){const t=this.data.slice();return new Qc(this.width,this.height,t,this)}apply(t){for(let e=0;e<this.height;e++)for(let r=0;r<this.width;r++){let n=(e*this.width+r)*this.channels;t.call(this,n)}}}!function(t){for(const e in ca)t.prototype[e]=ca[e]}(Qc),function(t){for(const e in a)t.prototype[e]=a[e]}(Qc),function(t){for(const e in en)t.prototype[e]=en[e]}(Qc),Qc.prototype.checkProcessable=function(t,e={}){let{bitDepth:r,alpha:n,colorModel:i,components:o,channels:s}=e;if("string"!=typeof t||0===t.length)throw new TypeError("processName must be a string");if(r&&(Array.isArray(r)||(r=[r]),!r.includes(this.bitDepth)))throw new TypeError(`The process: ${t} can only be applied if bit depth is in: ${r}`);if(n&&(Array.isArray(n)||(n=[n]),!n.includes(this.alpha)))throw new TypeError(`The process: ${t} can only be applied if alpha is in: ${n}`);if(i&&(Array.isArray(i)||(i=[i]),!i.includes(this.colorModel)))throw new TypeError(`The process: ${t} can only be applied if color model is in: ${i}`);if(o&&(Array.isArray(o)||(o=[o]),!o.includes(this.components))){let e=`The process: ${t} can only be applied if the number of components is in: ${o}`;throw 1===o.length&&1===o[0]?new TypeError(`${e}.\rYou should transform your image using "image.grey()" before applying the algorithm.`):new TypeError(e)}if(s&&(Array.isArray(s)||(s=[s]),!s.includes(this.channels)))throw new TypeError(`The process: ${t} can only be applied if the number of channels is in: ${s}`)},Qc.prototype.getRGBAData=function(t={}){const{clamped:e}=t;this.checkProcessable("getRGBAData",{components:[1,3],bitDepth:[1,8,16,32]});const r=this.width*this.height*4;let n=e?new Uint8ClampedArray(r):new Uint8Array(r);return 1===this.bitDepth?function(t,e){for(let r=0;r<t.size;r++){const n=t.getBit(r);e[4*r]=255*n,e[4*r+1]=255*n,e[4*r+2]=255*n}}(this,n):32===this.bitDepth?(this.checkProcessable("getRGBAData",{alpha:0}),1===this.components?function(t,e){const r=t.min[0],n=t.max[0]-r;for(let i=0;i<t.size;i++){const o=Math.floor(255*(t.data[i]-r)/n);e[4*i]=o,e[4*i+1]=o,e[4*i+2]=o}}(this,n):3===this.components&&(this.checkProcessable("getRGBAData",{colorModel:[an]}),function(t,e){const r=Math.min(...t.min),n=Math.max(...t.max)-r;for(let i=0;i<t.size;i++){const o=Math.floor(255*(t.data[3*i]-r)/n),s=Math.floor(255*(t.data[3*i+1]-r)/n),a=Math.floor(255*(t.data[3*i+2]-r)/n);e[4*i]=o,e[4*i+1]=s,e[4*i+2]=a}}(this,n))):1===this.components?function(t,e){for(let r=0;r<t.size;r++)e[4*r]=t.data[r*t.channels]>>>t.bitDepth-8,e[4*r+1]=t.data[r*t.channels]>>>t.bitDepth-8,e[4*r+2]=t.data[r*t.channels]>>>t.bitDepth-8}(this,n):3===this.components&&(this.checkProcessable("getRGBAData",{colorModel:[an]}),function(t,e){for(let r=0;r<t.size;r++)e[4*r]=t.data[r*t.channels]>>>t.bitDepth-8,e[4*r+1]=t.data[r*t.channels+1]>>>t.bitDepth-8,e[4*r+2]=t.data[r*t.channels+2]>>>t.bitDepth-8}(this,n)),1===this.alpha?(this.checkProcessable("getRGBAData",{bitDepth:[8,16]}),function(t,e){for(let r=0;r<t.size;r++)e[4*r+3]=t.data[r*t.channels+t.components]>>t.bitDepth-8}(this,n)):function(t,e){for(let r=0;r<t.size;r++)e[4*r+3]=255}(this,n),n},Qc.load=function(t,e){if("string"==typeof t)return function(t,e){const r=t.slice(0,64).match(sa);let n;n=null!==r?Promise.resolve(function(t){let e,r,n,i,o=.75*t.length,s=t.length,a=0;"="===t[t.length-1]&&(o--,"="===t[t.length-2]&&o--);const l=new Uint8Array(o);for(let o=0;o<s;o+=4)e=Xr[t.charCodeAt(o)],r=Xr[t.charCodeAt(o+1)],n=Xr[t.charCodeAt(o+2)],i=Xr[t.charCodeAt(o+3)],l[a++]=e<<2|r>>4,l[a++]=(15&r)<<4|n>>2,l[a++]=(3&n)<<6|63&i;return l}(t.slice(r[0].length))):function(t,{withCredentials:e=!1}={}){return new Promise((function(r,n){let i=new self.XMLHttpRequest;i.open("GET",t,!0),i.responseType="arraybuffer",i.withCredentials=e,i.onload=function(t){200!==this.status?n(t):r(this.response)},i.onerror=n,i.send()}))}(t,e);return n.then((e=>aa(new Uint8Array(e),r?t:void 0)))}(t,e);if(t instanceof ArrayBuffer)return Promise.resolve(aa(new Uint8Array(t)));if(t.buffer)return Promise.resolve(aa(t));throw new Error('argument to "load" must be a string or buffer.')},Qc.extendMethod=function(t,e,r={}){let{inPlace:n=!1,returnThis:i=!0,partialArgs:o=[]}=r;return Qc.prototype[t]=n?function(...t){this.computed=null;let r=e.apply(this,[...o,...t]);return i?this:r}:function(...t){return e.apply(this,[...o,...t])},Qc},Qc.extendProperty=function(t,e,r={}){let{partialArgs:n=[]}=r;return on.get=function(){if(null===this.computed)this.computed={};else if(nn()(t,this.computed))return this.computed[t];let r=e.apply(this,n);return this.computed[t]=r,r},Object.defineProperty(Qc.prototype,t,on),Qc},function(t){let e={inPlace:!0};t.extendMethod("invert",ga),t.extendMethod("abs",ma),t.extendMethod("level",ul,e),t.extendMethod("add",dl,e),t.extendMethod("subtract",pl,e),t.extendMethod("subtractImage",ml),t.extendMethod("multiply",vl,e),t.extendMethod("divide",wl,e),t.extendMethod("hypotenuse",gl),t.extendMethod("background",Vl),t.extendMethod("flipX",va),t.extendMethod("flipY",wa),t.extendMethod("blurFilter",ya),t.extendMethod("medianFilter",Ma),t.extendMethod("gaussianFilter",Sa),t.extendMethod("sobelFilter",ol),t.extendMethod("gradientFilter",il),t.extendMethod("scharrFilter",sl),t.extendMethod("dilate",Yl),t.extendMethod("erode",Ql),t.extendMethod("open",eu),t.extendMethod("close",ru),t.extendMethod("topHat",nu),t.extendMethod("blackHat",iu),t.extendMethod("morphologicalGradient",ou),t.extendMethod("warpingFourPoints",du),t.extendMethod("crop",pu),t.extendMethod("cropAlpha",mu),t.extendMethod("resize",_u).extendMethod("scale",_u),t.extendMethod("hsv",xu),t.extendMethod("hsl",ku),t.extendMethod("cmyk",Mu),t.extendMethod("rgba8",Su),t.extendMethod("grey",Cu).extendMethod("gray",Cu),t.extendMethod("mask",$u),t.extendMethod("pad",zu),t.extendMethod("colorDepth",qu),t.extendMethod("setBorder",Qu,e),t.extendMethod("rotate",Yu),t.extendMethod("rotateLeft",Zu),t.extendMethod("rotateRight",Gu),t.extendMethod("insert",Hu),t.extendMethod("getRow",sh),t.extendMethod("getColumn",ah),t.extendMethod("getMatrix",lh),t.extendMethod("setMatrix",uh),t.extendMethod("getPixelsArray",hh),t.extendMethod("getIntersection",ch),t.extendMethod("getClosestCommonParent",dh),t.extendMethod("getThreshold",Uu),t.extendMethod("split",Wu),t.extendMethod("getChannel",Ku),t.extendMethod("combineChannels",Ju),t.extendMethod("setChannel",eh),t.extendMethod("getSimilarity",rh),t.extendMethod("getPixelsGrid",nh),t.extendMethod("getBestMatch",oh),t.extendMethod("cannyEdge",bh),t.extendMethod("convolution",nl),t.extendMethod("extract",_h),t.extendMethod("floodFill",Mh),t.extendMethod("paintLabels",Fh,e),t.extendMethod("paintMasks",jh,e),t.extendMethod("paintPoints",$h,e),t.extendMethod("paintPolyline",zh,e),t.extendMethod("paintPolylines",qh,e),t.extendMethod("paintPolygon",Vh,e),t.extendMethod("paintPolygons",Gh,e),t.extendMethod("countAlphaPixels",lc),t.extendMethod("monotoneChainConvexHull",fc),t.extendMethod("minimalBoundingRectangle",yc),t.extendMethod("getHistogram",Xh).extendProperty("histogram",Xh),t.extendMethod("getHistograms",Hh).extendProperty("histograms",Hh),t.extendMethod("getColorHistogram",Wh).extendProperty("colorHistogram",Wh),t.extendMethod("getMin",Kh).extendProperty("min",Kh),t.extendMethod("getMax",Jh).extendProperty("max",Jh),t.extendMethod("getSum",tc).extendProperty("sum",tc),t.extendMethod("getMoment",ec).extendProperty("moment",ec),t.extendMethod("getLocalMaxima",rc),t.extendMethod("getMedian",ic).extendProperty("median",ic),t.extendMethod("getMean",nc).extendProperty("mean",nc),t.extendMethod("getPoints",oc).extendProperty("points",oc),t.extendMethod("getExtendedPoints",sc).extendProperty("extendedPoints",sc),t.extendMethod("getRelativePosition",ac)}(Qc);var Wc=r(6732),Kc=r.n(Wc);const Jc={regression:{kernelType:"polynomial",kernelOptions:{degree:2,constant:1}},threshold:.02,roi:{minSurface:100,positive:!1},sampling:20,include:[]};function tf(t,e,r){return t.post("data",[e,r]).then((function(t){for(let e in t)t[e]=new Qc(t[e]);return t}))}const ef={run:function(t,e,r){e=Object.assign({},Jc,e);const n=this.manager;return Array.isArray(t)?Promise.all(t.map((function(t){const i=tf(n,t,e);return"function"==typeof r&&i.then(r),i}))):tf(n,t,e)},work:function(){worker.on("data",(function(t,e,r){e=new IJS(e);const n={},i=[],o=e.grey(),s=o.sobelFilter();d("sobel",s);const a=s.level().mask({threshold:r.threshold});d("mask",a);const l=s.getRoiManager();l.fromMask(a);const u=l.getMask(r.roi);d("realMask",u);const h=o.getPixelsGrid({sampling:r.sampling,mask:u}),c=e.getBackground(h.xyS,h.zS,r.regression);d("background",c);const f=e.subtract(c);function d(t,e){r.include.includes(t)&&(n[t]=e,i.push(e.data.buffer))}n.result=f,i.push(f.data.buffer),t(n,i)}))}};class rf{constructor(){this._url=null,this._deps=[null]}checkUrl(){if(null===this._url)throw new Error("image worker must be initialized with an URL")}get url(){return this._url}set url(t){if("string"!=typeof t)throw new TypeError("worker URL must be a string");this._url=t,this._deps[0]=t}static extendMethod(t,e){let r,n,i={};function o(...t){return r||(this.checkUrl(),n=this.url,r=new(Kc())(e.work,{deps:n}),i.manager=r),e.run.call(i,...t)}o.reset=function(){r&&(r.terminate(),r=new(Kc())(e.work,{deps:n}),i.manager=r)},rf.prototype[t]=o}}!function(t){t.extendMethod("background",ef)}(rf);new rf},9184:(t,e,r)=>{"use strict";const n=r(3082),i=new Set(["jpg","png","gif","webp","flif","cr2","tif","bmp","jxr","psd","ico","bpg","jp2","jpm","jpx","heic","cur","dcm"]),o=t=>{const e=n(t);return i.has(e&&e.ext)?e:null};t.exports=o,t.exports.default=o,Object.defineProperty(o,"minimumBytes",{value:n.minimumBytes})},3082:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__(8764).Buffer;const toBytes=t=>[...t].map((t=>t.charCodeAt(0))),xpiZipFilename=toBytes("META-INF/mozilla.rsa"),oxmlContentTypes=toBytes("[Content_Types].xml"),oxmlRels=toBytes("_rels/.rels");function readUInt64LE(t,e=0){let r=t[e],n=1,i=0;for(;++i<8;)n*=256,r+=t[e+i]*n;return r}const fileType=t=>{if(!(t instanceof Uint8Array||t instanceof ArrayBuffer||Buffer.isBuffer(t)))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`Buffer\` or \`ArrayBuffer\`, got \`${typeof t}\``);const e=t instanceof Uint8Array?t:new Uint8Array(t);if(!(e&&e.length>1))return null;const r=(t,r)=>{r=Object.assign({offset:0},r);for(let n=0;n<t.length;n++)if(r.mask){if(t[n]!==(r.mask[n]&e[n+r.offset]))return!1}else if(t[n]!==e[n+r.offset])return!1;return!0},n=(t,e)=>r(toBytes(t),e);if(r([255,216,255]))return{ext:"jpg",mime:"image/jpeg"};if(r([137,80,78,71,13,10,26,10]))return{ext:"png",mime:"image/png"};if(r([71,73,70]))return{ext:"gif",mime:"image/gif"};if(r([87,69,66,80],{offset:8}))return{ext:"webp",mime:"image/webp"};if(r([70,76,73,70]))return{ext:"flif",mime:"image/flif"};if((r([73,73,42,0])||r([77,77,0,42]))&&r([67,82],{offset:8}))return{ext:"cr2",mime:"image/x-canon-cr2"};if(r([73,73,42,0])||r([77,77,0,42]))return{ext:"tif",mime:"image/tiff"};if(r([66,77]))return{ext:"bmp",mime:"image/bmp"};if(r([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(r([56,66,80,83]))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(r([80,75,3,4])){if(r([109,105,109,101,116,121,112,101,97,112,112,108,105,99,97,116,105,111,110,47,101,112,117,98,43,122,105,112],{offset:30}))return{ext:"epub",mime:"application/epub+zip"};if(r(xpiZipFilename,{offset:30}))return{ext:"xpi",mime:"application/x-xpinstall"};if(n("mimetypeapplication/vnd.oasis.opendocument.text",{offset:30}))return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};if(n("mimetypeapplication/vnd.oasis.opendocument.spreadsheet",{offset:30}))return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};if(n("mimetypeapplication/vnd.oasis.opendocument.presentation",{offset:30}))return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};const t=(t,e=0)=>t.findIndex(((t,r,n)=>r>=e&&80===n[r]&&75===n[r+1]&&3===n[r+2]&&4===n[r+3]));let i=0,o=!1,s=null;do{const a=i+30;if(o||(o=r(oxmlContentTypes,{offset:a})||r(oxmlRels,{offset:a})),s||(n("word/",{offset:a})?s={ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}:n("ppt/",{offset:a})?s={ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"}:n("xl/",{offset:a})&&(s={ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})),o&&s)return s;i=t(e,a)}while(i>=0);if(s)return s}if(r([80,75])&&(3===e[2]||5===e[2]||7===e[2])&&(4===e[3]||6===e[3]||8===e[3]))return{ext:"zip",mime:"application/zip"};if(r([117,115,116,97,114],{offset:257}))return{ext:"tar",mime:"application/x-tar"};if(r([82,97,114,33,26,7])&&(0===e[6]||1===e[6]))return{ext:"rar",mime:"application/x-rar-compressed"};if(r([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(r([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(r([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(r([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(r([51,103,112,53])||r([0,0,0])&&r([102,116,121,112],{offset:4})&&(r([109,112,52,49],{offset:8})||r([109,112,52,50],{offset:8})||r([105,115,111,109],{offset:8})||r([105,115,111,50],{offset:8})||r([109,109,112,52],{offset:8})||r([77,52,86],{offset:8})||r([100,97,115,104],{offset:8})))return{ext:"mp4",mime:"video/mp4"};if(r([77,84,104,100]))return{ext:"mid",mime:"audio/midi"};if(r([26,69,223,163])){const t=e.subarray(4,4100),r=t.findIndex(((t,e,r)=>66===r[e]&&130===r[e+1]));if(-1!==r){const e=r+3,n=r=>[...r].every(((r,n)=>t[e+n]===r.charCodeAt(0)));if(n("matroska"))return{ext:"mkv",mime:"video/x-matroska"};if(n("webm"))return{ext:"webm",mime:"video/webm"}}}if(r([0,0,0,20,102,116,121,112,113,116,32,32])||r([102,114,101,101],{offset:4})||r([102,116,121,112,113,116,32,32],{offset:4})||r([109,100,97,116],{offset:4})||r([109,111,111,118],{offset:4})||r([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(r([82,73,70,70])){if(r([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(r([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/vnd.wave"};if(r([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(r([48,38,178,117,142,102,207,17,166,217])){let t=30;do{const n=readUInt64LE(e,t+16);if(r([145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101],{offset:t})){if(r([64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43],{offset:t+24}))return{ext:"wma",mime:"audio/x-ms-wma"};if(r([192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43],{offset:t+24}))return{ext:"wmv",mime:"video/x-ms-asf"};break}t+=n}while(t+24<=e.length);return{ext:"asf",mime:"application/vnd.ms-asf"}}if(r([0,0,1,186])||r([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(r([102,116,121,112,51,103],{offset:4}))return{ext:"3gp",mime:"video/3gpp"};for(let t=0;t<2&&t<e.length-16;t++){if(r([73,68,51],{offset:t})||r([255,226],{offset:t,mask:[255,226]}))return{ext:"mp3",mime:"audio/mpeg"};if(r([255,228],{offset:t,mask:[255,228]}))return{ext:"mp2",mime:"audio/mpeg"};if(r([255,248],{offset:t,mask:[255,252]}))return{ext:"mp2",mime:"audio/mpeg"};if(r([255,240],{offset:t,mask:[255,252]}))return{ext:"mp4",mime:"audio/mpeg"}}if(r([102,116,121,112,77,52,65],{offset:4}))return{ext:"m4a",mime:"audio/mp4"};if(r([79,112,117,115,72,101,97,100],{offset:28}))return{ext:"opus",mime:"audio/opus"};if(r([79,103,103,83]))return r([128,116,104,101,111,114,97],{offset:28})?{ext:"ogv",mime:"video/ogg"}:r([1,118,105,100,101,111,0],{offset:28})?{ext:"ogm",mime:"video/ogg"}:r([127,70,76,65,67],{offset:28})?{ext:"oga",mime:"audio/ogg"}:r([83,112,101,101,120,32,32],{offset:28})?{ext:"spx",mime:"audio/ogg"}:r([1,118,111,114,98,105,115],{offset:28})?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"};if(r([102,76,97,67]))return{ext:"flac",mime:"audio/x-flac"};if(r([77,65,67,32]))return{ext:"ape",mime:"audio/ape"};if(r([119,118,112,107]))return{ext:"wv",mime:"audio/wavpack"};if(r([35,33,65,77,82,10]))return{ext:"amr",mime:"audio/amr"};if(r([37,80,68,70]))return{ext:"pdf",mime:"application/pdf"};if(r([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if((67===e[0]||70===e[0])&&r([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(r([123,92,114,116,102]))return{ext:"rtf",mime:"application/rtf"};if(r([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(r([119,79,70,70])&&(r([0,1,0,0],{offset:4})||r([79,84,84,79],{offset:4})))return{ext:"woff",mime:"font/woff"};if(r([119,79,70,50])&&(r([0,1,0,0],{offset:4})||r([79,84,84,79],{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(r([76,80],{offset:34})&&(r([0,0,1],{offset:8})||r([1,0,2],{offset:8})||r([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(r([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(r([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(r([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(r([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(r([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(r([37,33]))return{ext:"ps",mime:"application/postscript"};if(r([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(r([83,81,76,105]))return{ext:"sqlite",mime:"application/x-sqlite3"};if(r([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(r([67,114,50,52]))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(r([77,83,67,70])||r([73,83,99,40]))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(r([33,60,97,114,99,104,62,10,100,101,98,105,97,110,45,98,105,110,97,114,121]))return{ext:"deb",mime:"application/x-deb"};if(r([33,60,97,114,99,104,62]))return{ext:"ar",mime:"application/x-unix-archive"};if(r([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(r([31,160])||r([31,157]))return{ext:"Z",mime:"application/x-compress"};if(r([76,90,73,80]))return{ext:"lz",mime:"application/x-lzip"};if(r([208,207,17,224,161,177,26,225]))return{ext:"msi",mime:"application/x-msi"};if(r([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(r([71],{offset:4})&&(r([71],{offset:192})||r([71],{offset:196})))return{ext:"mts",mime:"video/mp2t"};if(r([66,76,69,78,68,69,82]))return{ext:"blend",mime:"application/x-blender"};if(r([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(r([0,0,0,12,106,80,32,32,13,10,135,10])){if(r([106,112,50,32],{offset:20}))return{ext:"jp2",mime:"image/jp2"};if(r([106,112,120,32],{offset:20}))return{ext:"jpx",mime:"image/jpx"};if(r([106,112,109,32],{offset:20}))return{ext:"jpm",mime:"image/jpm"};if(r([109,106,112,50],{offset:20}))return{ext:"mj2",mime:"image/mj2"}}if(r([70,79,82,77]))return{ext:"aif",mime:"audio/aiff"};if(n("<?xml "))return{ext:"xml",mime:"application/xml"};if(r([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(r([102,116,121,112],{offset:4})){if(r([109,105,102,49],{offset:8}))return{ext:"heic",mime:"image/heif"};if(r([109,115,102,49],{offset:8}))return{ext:"heic",mime:"image/heif-sequence"};if(r([104,101,105,99],{offset:8})||r([104,101,105,120],{offset:8}))return{ext:"heic",mime:"image/heic"};if(r([104,101,118,99],{offset:8})||r([104,101,118,120],{offset:8}))return{ext:"heic",mime:"image/heic-sequence"}}return r([171,75,84,88,32,49,49,187,13,10,26,10])?{ext:"ktx",mime:"image/ktx"}:r([68,73,67,77],{offset:128})?{ext:"dcm",mime:"application/dicom"}:r([77,80,43])||r([77,80,67,75])?{ext:"mpc",mime:"audio/x-musepack"}:r([66,69,71,73,78,58])?{ext:"ics",mime:"text/calendar"}:r([103,108,84,70,2,0,0,0])?{ext:"glb",mime:"model/gltf-binary"}:r([212,195,178,161])||r([161,178,195,212])?{ext:"pcap",mime:"application/vnd.tcpdump.pcap"}:null};module.exports=fileType,module.exports.default=fileType,Object.defineProperty(fileType,"minimumBytes",{value:4100}),module.exports.stream=readableStream=>new Promise(((resolve,reject)=>{const stream=eval("require")("stream");readableStream.once("readable",(()=>{const t=new stream.PassThrough,e=readableStream.read(module.exports.minimumBytes)||readableStream.read();try{t.fileType=fileType(e)}catch(t){reject(t)}readableStream.unshift(e),stream.pipeline?resolve(stream.pipeline(readableStream,t,(()=>{}))):resolve(readableStream.pipe(t))}))}))},5838:(t,e,r)=>{"use strict";var n=r(8764).Buffer;const i=r(7458),o=[];t.exports=class{constructor(t,e){e=e||{};var r=!1;void 0===t&&(t=8192),"number"==typeof t?t=new ArrayBuffer(t):(r=!0,this._lastWrittenByte=t.byteLength);const n=e.offset?e.offset>>>0:0;let i=t.byteLength-n,o=n;t.buffer&&(t.byteLength!==t.buffer.byteLength&&(o=t.byteOffset+n),t=t.buffer),this._lastWrittenByte=r?i:0,this.buffer=t,this.length=i,this.byteLength=i,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,i),this._mark=0,this._marks=[]}available(t){return void 0===t&&(t=1),this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t){return void 0===t&&(t=1),this.offset+=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(void 0===t)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t){if(void 0===t&&(t=1),!this.available(t)){const e=2*(this.offset+t),r=new Uint8Array(e);r.set(new Uint8Array(this.buffer)),this.buffer=r.buffer,this.length=this.byteLength=e,this._data=new DataView(this.buffer)}return this}readBoolean(){return 0!==this.readUint8()}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t){void 0===t&&(t=1);for(var e=new Uint8Array(t),r=0;r<t;r++)e[r]=this.readByte();return e}readInt16(){var t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){var t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){var t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){var t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){var t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){var t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t){void 0===t&&(t=1),o.length=t;for(var e=0;e<t;e++)o[e]=this.readChar();return o.join("")}readUtf8(t){void 0===t&&(t=1);const e=this.readChars(t);return i.decode(e)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(var e=0;e<t.length;e++)this._data.setUint8(this.offset++,t[e]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(var e=0;e<t.length;e++)this.writeUint8(t.charCodeAt(e));return this}writeUtf8(t){const e=i.encode(t);return this.writeChars(e)}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this._lastWrittenByte)}getBuffer(){return void 0!==n?n.from(this.toArray()):this.toArray()}_updateLastWrittenByte(){this.offset>this._lastWrittenByte&&(this._lastWrittenByte=this.offset)}}},7531:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});const n=Object.prototype.toString;function i(t){return n.call(t).endsWith("Array]")}},7811:t=>{"use strict";var e=Object.prototype.toString;t.exports=function(t){return"Array"===e.call(t).substr(-6,5)}},1867:t=>{"use strict";t.exports=Number.isFinite||function(t){return!("number"!=typeof t||t!=t||t===1/0||t===-1/0)}},8336:(t,e,r)=>{var n=r(1867);t.exports=Number.isInteger||function(t){return"number"==typeof t&&n(t)&&Math.floor(t)===t}},5826:t=>{var e={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==e.call(t)}},7870:(t,e,r)=>{var n=r(587),i=r(914);t.exports={encode:n,decode:i}},914:(t,e,r)=>{var n=r(8764).Buffer,i=function(){"use strict";var t=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),e=4017,r=799,n=3406,i=2276,o=1567,s=3784,a=5793,l=2896;function u(){}function h(t,e){for(var r,n,i=0,o=[],s=16;s>0&&!t[s-1];)s--;o.push({children:[],index:0});var a,l=o[0];for(r=0;r<s;r++){for(n=0;n<t[r];n++){for((l=o.pop()).children[l.index]=e[i];l.index>0;){if(0===o.length)throw new Error("Could not recreate Huffman Table");l=o.pop()}for(l.index++,o.push(l);o.length<=r;)o.push(a={children:[],index:0}),l.children[l.index]=a.children,l=a;i++}r+1<s&&(o.push(a={children:[],index:0}),l.children[l.index]=a.children,l=a)}return o[0].children}function c(e,r,n,i,o,s,a,l,u,h){n.precision,n.samplesPerLine,n.scanLines;var c=n.mcusPerLine,f=n.progressive,d=(n.maxH,n.maxV,r),p=0,m=0;function g(){if(m>0)return m--,p>>m&1;if(255==(p=e[r++])){var t=e[r++];if(t)throw new Error("unexpected marker: "+(p<<8|t).toString(16))}return m=7,p>>>7}function v(t){for(var e,r=t;null!==(e=g());){if("number"==typeof(r=r[e]))return r;if("object"!=typeof r)throw new Error("invalid huffman sequence")}return null}function w(t){for(var e=0;t>0;){var r=g();if(null===r)return;e=e<<1|r,t--}return e}function y(t){var e=w(t);return e>=1<<t-1?e:e+(-1<<t)+1}var b=0;var _,x=0;function k(t,e,r,n,i){var o=r%c,s=(r/c|0)*t.v+n,a=o*t.h+i;void 0===t.blocks[s]&&h.tolerantDecoding||e(t,t.blocks[s][a])}function M(t,e,r){var n=r/t.blocksPerLine|0,i=r%t.blocksPerLine;void 0===t.blocks[n]&&h.tolerantDecoding||e(t,t.blocks[n][i])}var S,E,A,C,D,O,P=i.length;O=f?0===s?0===l?function(t,e){var r=v(t.huffmanTableDC),n=0===r?0:y(r)<<u;e[0]=t.pred+=n}:function(t,e){e[0]|=g()<<u}:0===l?function(e,r){if(b>0)b--;else for(var n=s,i=a;n<=i;){var o=v(e.huffmanTableAC),l=15&o,h=o>>4;if(0!==l)r[t[n+=h]]=y(l)*(1<<u),n++;else{if(h<15){b=w(h)+(1<<h)-1;break}n+=16}}}:function(e,r){for(var n=s,i=a,o=0;n<=i;){var l=t[n],h=r[l]<0?-1:1;switch(x){case 0:var c=v(e.huffmanTableAC),f=15&c;if(o=c>>4,0===f)o<15?(b=w(o)+(1<<o),x=4):(o=16,x=1);else{if(1!==f)throw new Error("invalid ACn encoding");_=y(f),x=o?2:3}continue;case 1:case 2:r[l]?r[l]+=(g()<<u)*h:0==--o&&(x=2==x?3:0);break;case 3:r[l]?r[l]+=(g()<<u)*h:(r[l]=_<<u,x=0);break;case 4:r[l]&&(r[l]+=(g()<<u)*h)}n++}4===x&&0==--b&&(x=0)}:function(e,r){var n=v(e.huffmanTableDC),i=0===n?0:y(n);r[0]=e.pred+=i;for(var o=1;o<64;){var s=v(e.huffmanTableAC),a=15&s,l=s>>4;if(0!==a)r[t[o+=l]]=y(a),o++;else{if(l<15)break;o+=16}}};var R,I,T,F,j=0;for(I=1==P?i[0].blocksPerLine*i[0].blocksPerColumn:c*n.mcusPerColumn,o||(o=I);j<I;){for(E=0;E<P;E++)i[E].pred=0;if(b=0,1==P)for(S=i[0],D=0;D<o;D++)M(S,O,j),j++;else for(D=0;D<o;D++){for(E=0;E<P;E++)for(T=(S=i[E]).h,F=S.v,A=0;A<F;A++)for(C=0;C<T;C++)k(S,O,j,A,C);if(++j===I)break}if(j===I)do{if(255===e[r]&&0!==e[r+1])break;r+=1}while(r<e.length-2);if(m=0,(R=e[r]<<8|e[r+1])<65280)throw new Error("marker was not found");if(!(R>=65488&&R<=65495))break;r+=2}return r-d}function f(t,u){var h,c,f=[],d=u.blocksPerLine,p=u.blocksPerColumn,m=d<<3,v=new Int32Array(64),w=new Uint8Array(64);function y(t,h,c){var f,d,p,m,g,v,w,y,b,_,x=u.quantizationTable,k=c;for(_=0;_<64;_++)k[_]=t[_]*x[_];for(_=0;_<8;++_){var M=8*_;0!=k[1+M]||0!=k[2+M]||0!=k[3+M]||0!=k[4+M]||0!=k[5+M]||0!=k[6+M]||0!=k[7+M]?(f=a*k[0+M]+128>>8,d=a*k[4+M]+128>>8,p=k[2+M],m=k[6+M],g=l*(k[1+M]-k[7+M])+128>>8,y=l*(k[1+M]+k[7+M])+128>>8,v=k[3+M]<<4,w=k[5+M]<<4,b=f-d+1>>1,f=f+d+1>>1,d=b,b=p*s+m*o+128>>8,p=p*o-m*s+128>>8,m=b,b=g-w+1>>1,g=g+w+1>>1,w=b,b=y+v+1>>1,v=y-v+1>>1,y=b,b=f-m+1>>1,f=f+m+1>>1,m=b,b=d-p+1>>1,d=d+p+1>>1,p=b,b=g*i+y*n+2048>>12,g=g*n-y*i+2048>>12,y=b,b=v*r+w*e+2048>>12,v=v*e-w*r+2048>>12,w=b,k[0+M]=f+y,k[7+M]=f-y,k[1+M]=d+w,k[6+M]=d-w,k[2+M]=p+v,k[5+M]=p-v,k[3+M]=m+g,k[4+M]=m-g):(b=a*k[0+M]+512>>10,k[0+M]=b,k[1+M]=b,k[2+M]=b,k[3+M]=b,k[4+M]=b,k[5+M]=b,k[6+M]=b,k[7+M]=b)}for(_=0;_<8;++_){var S=_;0!=k[8+S]||0!=k[16+S]||0!=k[24+S]||0!=k[32+S]||0!=k[40+S]||0!=k[48+S]||0!=k[56+S]?(f=a*k[0+S]+2048>>12,d=a*k[32+S]+2048>>12,p=k[16+S],m=k[48+S],g=l*(k[8+S]-k[56+S])+2048>>12,y=l*(k[8+S]+k[56+S])+2048>>12,v=k[24+S],w=k[40+S],b=f-d+1>>1,f=f+d+1>>1,d=b,b=p*s+m*o+2048>>12,p=p*o-m*s+2048>>12,m=b,b=g-w+1>>1,g=g+w+1>>1,w=b,b=y+v+1>>1,v=y-v+1>>1,y=b,b=f-m+1>>1,f=f+m+1>>1,m=b,b=d-p+1>>1,d=d+p+1>>1,p=b,b=g*i+y*n+2048>>12,g=g*n-y*i+2048>>12,y=b,b=v*r+w*e+2048>>12,v=v*e-w*r+2048>>12,w=b,k[0+S]=f+y,k[56+S]=f-y,k[8+S]=d+w,k[48+S]=d-w,k[16+S]=p+v,k[40+S]=p-v,k[24+S]=m+g,k[32+S]=m-g):(b=a*c[_+0]+8192>>14,k[0+S]=b,k[8+S]=b,k[16+S]=b,k[24+S]=b,k[32+S]=b,k[40+S]=b,k[48+S]=b,k[56+S]=b)}for(_=0;_<64;++_){var E=128+(k[_]+8>>4);h[_]=E<0?0:E>255?255:E}}g(m*p*8);for(var b=0;b<p;b++){var _=b<<3;for(h=0;h<8;h++)f.push(new Uint8Array(m));for(var x=0;x<d;x++){y(u.blocks[b][x],w,v);var k=0,M=x<<3;for(c=0;c<8;c++){var S=f[_+c];for(h=0;h<8;h++)S[M+h]=w[k++]}}}return f}function d(t){return t<0?0:t>255?255:t}u.prototype={load:function(t){var e=new XMLHttpRequest;e.open("GET",t,!0),e.responseType="arraybuffer",e.onload=function(){var t=new Uint8Array(e.response||e.mozResponseArrayBuffer);this.parse(t),this.onload&&this.onload()}.bind(this),e.send(null)},parse:function(e){var r=1e3*this.opts.maxResolutionInMP*1e3,n=0;e.length;function i(){var t=e[n]<<8|e[n+1];return n+=2,t}function o(){var t=i(),r=e.subarray(n,n+t-2);return n+=r.length,r}function s(t){var e,r,n=0,i=0;for(r in t.components)t.components.hasOwnProperty(r)&&(n<(e=t.components[r]).h&&(n=e.h),i<e.v&&(i=e.v));var o=Math.ceil(t.samplesPerLine/8/n),s=Math.ceil(t.scanLines/8/i);for(r in t.components)if(t.components.hasOwnProperty(r)){e=t.components[r];var a=Math.ceil(Math.ceil(t.samplesPerLine/8)*e.h/n),l=Math.ceil(Math.ceil(t.scanLines/8)*e.v/i),u=o*e.h,h=s*e.v,c=[];g(256*(h*u));for(var f=0;f<h;f++){for(var d=[],p=0;p<u;p++)d.push(new Int32Array(64));c.push(d)}e.blocksPerLine=a,e.blocksPerColumn=l,e.blocks=c}t.maxH=n,t.maxV=i,t.mcusPerLine=o,t.mcusPerColumn=s}var a,l,u=null,d=null,p=[],m=[],v=[],w=[],y=i(),b=-1;if(this.comments=[],65496!=y)throw new Error("SOI not found");for(y=i();65497!=y;){switch(y){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var _=o();if(65534===y){var x=String.fromCharCode.apply(null,_);this.comments.push(x)}65504===y&&74===_[0]&&70===_[1]&&73===_[2]&&70===_[3]&&0===_[4]&&(u={version:{major:_[5],minor:_[6]},densityUnits:_[7],xDensity:_[8]<<8|_[9],yDensity:_[10]<<8|_[11],thumbWidth:_[12],thumbHeight:_[13],thumbData:_.subarray(14,14+3*_[12]*_[13])}),65505===y&&69===_[0]&&120===_[1]&&105===_[2]&&102===_[3]&&0===_[4]&&(this.exifBuffer=_.subarray(5,_.length)),65518===y&&65===_[0]&&100===_[1]&&111===_[2]&&98===_[3]&&101===_[4]&&0===_[5]&&(d={version:_[6],flags0:_[7]<<8|_[8],flags1:_[9]<<8|_[10],transformCode:_[11]});break;case 65499:for(var k=i()+n-2;n<k;){var M=e[n++];g(256);var S=new Int32Array(64);if(M>>4==0)for(G=0;G<64;G++){S[t[G]]=e[n++]}else{if(M>>4!=1)throw new Error("DQT: invalid table spec");for(G=0;G<64;G++){S[t[G]]=i()}}p[15&M]=S}break;case 65472:case 65473:case 65474:i(),(a={}).extended=65473===y,a.progressive=65474===y,a.precision=e[n++],a.scanLines=i(),a.samplesPerLine=i(),a.components={},a.componentsOrder=[];var E=a.scanLines*a.samplesPerLine;if(E>r){var A=Math.ceil((E-r)/1e6);throw new Error(`maxResolutionInMP limit exceeded by ${A}MP`)}var C,D=e[n++];for(Y=0;Y<D;Y++){C=e[n];var O=e[n+1]>>4,P=15&e[n+1],R=e[n+2];a.componentsOrder.push(C),a.components[C]={h:O,v:P,quantizationIdx:R},n+=3}s(a),m.push(a);break;case 65476:var I=i();for(Y=2;Y<I;){var T=e[n++],F=new Uint8Array(16),j=0;for(G=0;G<16;G++,n++)j+=F[G]=e[n];g(16+j);var N=new Uint8Array(j);for(G=0;G<j;G++,n++)N[G]=e[n];Y+=17+j,(T>>4==0?w:v)[15&T]=h(F,N)}break;case 65501:i(),l=i();break;case 65500:i(),i();break;case 65498:i();var B=e[n++],U=[];for(Y=0;Y<B;Y++){X=a.components[e[n++]];var L=e[n++];X.huffmanTableDC=w[L>>4],X.huffmanTableAC=v[15&L],U.push(X)}var $=e[n++],z=e[n++],q=e[n++],V=c(e,n,a,U,l,$,z,q>>4,15&q,this.opts);n+=V;break;case 65535:255!==e[n]&&n--;break;default:if(255==e[n-3]&&e[n-2]>=192&&e[n-2]<=254){n-=3;break}if(224===y||225==y){if(-1!==b)throw new Error(`first unknown JPEG marker at offset ${b.toString(16)}, second unknown JPEG marker ${y.toString(16)} at offset ${(n-1).toString(16)}`);b=n-1;const t=i();if(255===e[n+t-2]){n+=t-2;break}}throw new Error("unknown JPEG marker "+y.toString(16))}y=i()}if(1!=m.length)throw new Error("only single frame JPEGs supported");for(var Y=0;Y<m.length;Y++){var Z=m[Y].components;for(var G in Z)Z[G].quantizationTable=p[Z[G].quantizationIdx],delete Z[G].quantizationIdx}this.width=a.samplesPerLine,this.height=a.scanLines,this.jfif=u,this.adobe=d,this.components=[];for(Y=0;Y<a.componentsOrder.length;Y++){var X=a.components[a.componentsOrder[Y]];this.components.push({lines:f(0,X),scaleX:X.h/a.maxH,scaleY:X.v/a.maxV})}},getData:function(t,e){var r,n,i,o,s,a,l,u,h,c,f,p,m,v,w,y,b,_,x,k,M,S=this.width/t,E=this.height/e,A=0,C=t*e*this.components.length;g(C);var D=new Uint8Array(C);switch(this.components.length){case 1:for(r=this.components[0],c=0;c<e;c++)for(s=r.lines[0|c*r.scaleY*E],h=0;h<t;h++)f=s[0|h*r.scaleX*S],D[A++]=f;break;case 2:for(r=this.components[0],n=this.components[1],c=0;c<e;c++)for(s=r.lines[0|c*r.scaleY*E],a=n.lines[0|c*n.scaleY*E],h=0;h<t;h++)f=s[0|h*r.scaleX*S],D[A++]=f,f=a[0|h*n.scaleX*S],D[A++]=f;break;case 3:for(M=!0,this.adobe&&this.adobe.transformCode?M=!0:void 0!==this.opts.colorTransform&&(M=!!this.opts.colorTransform),r=this.components[0],n=this.components[1],i=this.components[2],c=0;c<e;c++)for(s=r.lines[0|c*r.scaleY*E],a=n.lines[0|c*n.scaleY*E],l=i.lines[0|c*i.scaleY*E],h=0;h<t;h++)M?(f=s[0|h*r.scaleX*S],p=a[0|h*n.scaleX*S],_=d(f+1.402*((m=l[0|h*i.scaleX*S])-128)),x=d(f-.3441363*(p-128)-.71413636*(m-128)),k=d(f+1.772*(p-128))):(_=s[0|h*r.scaleX*S],x=a[0|h*n.scaleX*S],k=l[0|h*i.scaleX*S]),D[A++]=_,D[A++]=x,D[A++]=k;break;case 4:if(!this.adobe)throw new Error("Unsupported color mode (4 components)");for(M=!1,this.adobe&&this.adobe.transformCode?M=!0:void 0!==this.opts.colorTransform&&(M=!!this.opts.colorTransform),r=this.components[0],n=this.components[1],i=this.components[2],o=this.components[3],c=0;c<e;c++)for(s=r.lines[0|c*r.scaleY*E],a=n.lines[0|c*n.scaleY*E],l=i.lines[0|c*i.scaleY*E],u=o.lines[0|c*o.scaleY*E],h=0;h<t;h++)M?(f=s[0|h*r.scaleX*S],p=a[0|h*n.scaleX*S],m=l[0|h*i.scaleX*S],v=u[0|h*o.scaleX*S],w=255-d(f+1.402*(m-128)),y=255-d(f-.3441363*(p-128)-.71413636*(m-128)),b=255-d(f+1.772*(p-128))):(w=s[0|h*r.scaleX*S],y=a[0|h*n.scaleX*S],b=l[0|h*i.scaleX*S],v=u[0|h*o.scaleX*S]),D[A++]=255-w,D[A++]=255-y,D[A++]=255-b,D[A++]=255-v;break;default:throw new Error("Unsupported color mode")}return D},copyToImageData:function(t,e){var r,n,i,o,s,a,l,u,h,c=t.width,f=t.height,p=t.data,m=this.getData(c,f),g=0,v=0;switch(this.components.length){case 1:for(n=0;n<f;n++)for(r=0;r<c;r++)i=m[g++],p[v++]=i,p[v++]=i,p[v++]=i,e&&(p[v++]=255);break;case 3:for(n=0;n<f;n++)for(r=0;r<c;r++)l=m[g++],u=m[g++],h=m[g++],p[v++]=l,p[v++]=u,p[v++]=h,e&&(p[v++]=255);break;case 4:for(n=0;n<f;n++)for(r=0;r<c;r++)s=m[g++],a=m[g++],i=m[g++],l=255-d(s*(1-(o=m[g++])/255)+o),u=255-d(a*(1-o/255)+o),h=255-d(i*(1-o/255)+o),p[v++]=l,p[v++]=u,p[v++]=h,e&&(p[v++]=255);break;default:throw new Error("Unsupported color mode")}}};var p=0,m=0;function g(t=0){var e=p+t;if(e>m){var r=Math.ceil((e-m)/1024/1024);throw new Error(`maxMemoryUsageInMB limit exceeded by at least ${r}MB`)}p=e}return u.resetMaxMemoryUsage=function(t){p=0,m=t},u.getBytesAllocated=function(){return p},u.requestMemoryAllocation=g,u}();t.exports=function(t,e={}){var r={colorTransform:void 0,useTArray:!1,formatAsRGBA:!0,tolerantDecoding:!0,maxResolutionInMP:100,maxMemoryUsageInMB:512,...e},o=new Uint8Array(t),s=new i;s.opts=r,i.resetMaxMemoryUsage(1024*r.maxMemoryUsageInMB*1024),s.parse(o);var a=r.formatAsRGBA?4:3,l=s.width*s.height*a;try{i.requestMemoryAllocation(l);var u={width:s.width,height:s.height,exifBuffer:s.exifBuffer,data:r.useTArray?new Uint8Array(l):n.alloc(l)};s.comments.length>0&&(u.comments=s.comments)}catch(t){throw t instanceof RangeError?new Error("Could not allocate enough memory for the image. Required: "+l):t}return s.copyToImageData(u,r.formatAsRGBA),u}},587:(t,e,r)=>{var n=r(8764).Buffer;function i(t){Math.round;var e,r,i,o,s,a=Math.floor,l=new Array(64),u=new Array(64),h=new Array(64),c=new Array(64),f=new Array(65535),d=new Array(65535),p=new Array(64),m=new Array(64),g=[],v=0,w=7,y=new Array(64),b=new Array(64),_=new Array(64),x=new Array(256),k=new Array(2048),M=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],S=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],E=[0,1,2,3,4,5,6,7,8,9,10,11],A=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],C=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],D=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],O=[0,1,2,3,4,5,6,7,8,9,10,11],P=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],R=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function I(t,e){for(var r=0,n=0,i=new Array,o=1;o<=16;o++){for(var s=1;s<=t[o];s++)i[e[n]]=[],i[e[n]][0]=r,i[e[n]][1]=o,n++,r++;r*=2}return i}function T(t){for(var e=t[0],r=t[1]-1;r>=0;)e&1<<r&&(v|=1<<w),r--,--w<0&&(255==v?(F(255),F(0)):F(v),w=7,v=0)}function F(t){g.push(t)}function j(t){F(t>>8&255),F(255&t)}function N(t,e,r,n,i){for(var o,s=i[0],a=i[240],l=function(t,e){var r,n,i,o,s,a,l,u,h,c,f=0;for(h=0;h<8;++h){r=t[f],n=t[f+1],i=t[f+2],o=t[f+3],s=t[f+4],a=t[f+5],l=t[f+6];var d=r+(u=t[f+7]),m=r-u,g=n+l,v=n-l,w=i+a,y=i-a,b=o+s,_=o-s,x=d+b,k=d-b,M=g+w,S=g-w;t[f]=x+M,t[f+4]=x-M;var E=.707106781*(S+k);t[f+2]=k+E,t[f+6]=k-E;var A=.382683433*((x=_+y)-(S=v+m)),C=.5411961*x+A,D=1.306562965*S+A,O=.707106781*(M=y+v),P=m+O,R=m-O;t[f+5]=R+C,t[f+3]=R-C,t[f+1]=P+D,t[f+7]=P-D,f+=8}for(f=0,h=0;h<8;++h){r=t[f],n=t[f+8],i=t[f+16],o=t[f+24],s=t[f+32],a=t[f+40],l=t[f+48];var I=r+(u=t[f+56]),T=r-u,F=n+l,j=n-l,N=i+a,B=i-a,U=o+s,L=o-s,$=I+U,z=I-U,q=F+N,V=F-N;t[f]=$+q,t[f+32]=$-q;var Y=.707106781*(V+z);t[f+16]=z+Y,t[f+48]=z-Y;var Z=.382683433*(($=L+B)-(V=j+T)),G=.5411961*$+Z,X=1.306562965*V+Z,H=.707106781*(q=B+j),Q=T+H,W=T-H;t[f+40]=W+G,t[f+24]=W-G,t[f+8]=Q+X,t[f+56]=Q-X,f++}for(h=0;h<64;++h)c=t[h]*e[h],p[h]=c>0?c+.5|0:c-.5|0;return p}(t,e),u=0;u<64;++u)m[M[u]]=l[u];var h=m[0]-r;r=m[0],0==h?T(n[0]):(T(n[d[o=32767+h]]),T(f[o]));for(var c=63;c>0&&0==m[c];c--);if(0==c)return T(s),r;for(var g,v=1;v<=c;){for(var w=v;0==m[v]&&v<=c;++v);var y=v-w;if(y>=16){g=y>>4;for(var b=1;b<=g;++b)T(a);y&=15}o=32767+m[v],T(i[(y<<4)+d[o]]),T(f[o]),v++}return 63!=c&&T(s),r}function B(t){if(t<=0&&(t=1),t>100&&(t=100),s!=t){(function(t){for(var e=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],r=0;r<64;r++){var n=a((e[r]*t+50)/100);n<1?n=1:n>255&&(n=255),l[M[r]]=n}for(var i=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],o=0;o<64;o++){var s=a((i[o]*t+50)/100);s<1?s=1:s>255&&(s=255),u[M[o]]=s}for(var f=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],d=0,p=0;p<8;p++)for(var m=0;m<8;m++)h[d]=1/(l[M[d]]*f[p]*f[m]*8),c[d]=1/(u[M[d]]*f[p]*f[m]*8),d++})(t<50?Math.floor(5e3/t):Math.floor(200-2*t)),s=t}}this.encode=function(t,s){(new Date).getTime();s&&B(s),g=new Array,v=0,w=7,j(65496),j(65504),j(16),F(74),F(70),F(73),F(70),F(0),F(1),F(1),F(0),j(1),j(1),F(0),F(0),function(t){if(t){j(65505),69===t[0]&&120===t[1]&&105===t[2]&&102===t[3]?j(t.length+2):(j(t.length+5+2),F(69),F(120),F(105),F(102),F(0));for(var e=0;e<t.length;e++)F(t[e])}}(t.exifBuffer),function(){j(65499),j(132),F(0);for(var t=0;t<64;t++)F(l[t]);F(1);for(var e=0;e<64;e++)F(u[e])}(),function(t,e){j(65472),j(17),F(8),j(e),j(t),F(3),F(1),F(17),F(0),F(2),F(17),F(1),F(3),F(17),F(1)}(t.width,t.height),function(){j(65476),j(418),F(0);for(var t=0;t<16;t++)F(S[t+1]);for(var e=0;e<=11;e++)F(E[e]);F(16);for(var r=0;r<16;r++)F(A[r+1]);for(var n=0;n<=161;n++)F(C[n]);F(1);for(var i=0;i<16;i++)F(D[i+1]);for(var o=0;o<=11;o++)F(O[o]);F(17);for(var s=0;s<16;s++)F(P[s+1]);for(var a=0;a<=161;a++)F(R[a])}(),j(65498),j(12),F(3),F(1),F(0),F(2),F(17),F(3),F(17),F(0),F(63),F(0);var a=0,f=0,d=0;v=0,w=7,this.encode.displayName="_encode_";for(var p,m,x,M,I,U,L,$,z,q=t.data,V=t.width,Y=t.height,Z=4*V,G=0;G<Y;){for(p=0;p<Z;){for(U=I=Z*G+p,L=-1,$=0,z=0;z<64;z++)U=I+($=z>>3)*Z+(L=4*(7&z)),G+$>=Y&&(U-=Z*(G+1+$-Y)),p+L>=Z&&(U-=p+L-Z+4),m=q[U++],x=q[U++],M=q[U++],y[z]=(k[m]+k[x+256>>0]+k[M+512>>0]>>16)-128,b[z]=(k[m+768>>0]+k[x+1024>>0]+k[M+1280>>0]>>16)-128,_[z]=(k[m+1280>>0]+k[x+1536>>0]+k[M+1792>>0]>>16)-128;a=N(y,h,a,e,i),f=N(b,c,f,r,o),d=N(_,c,d,r,o),p+=32}G+=8}if(w>=0){var X=[];X[1]=w+1,X[0]=(1<<w+1)-1,T(X)}return j(65497),n.from(g)},function(){(new Date).getTime();t||(t=50),function(){for(var t=String.fromCharCode,e=0;e<256;e++)x[e]=t(e)}(),e=I(S,E),r=I(D,O),i=I(A,C),o=I(P,R),function(){for(var t=1,e=2,r=1;r<=15;r++){for(var n=t;n<e;n++)d[32767+n]=r,f[32767+n]=[],f[32767+n][1]=r,f[32767+n][0]=n;for(var i=-(e-1);i<=-t;i++)d[32767+i]=r,f[32767+i]=[],f[32767+i][1]=r,f[32767+i][0]=e-1+i;t<<=1,e<<=1}}(),function(){for(var t=0;t<256;t++)k[t]=19595*t,k[t+256>>0]=38470*t,k[t+512>>0]=7471*t+32768,k[t+768>>0]=-11059*t,k[t+1024>>0]=-21709*t,k[t+1280>>0]=32768*t+8421375,k[t+1536>>0]=-27439*t,k[t+1792>>0]=-5329*t}(),B(t),(new Date).getTime()}()}t.exports=function(t,e){void 0===e&&(e=50);return{data:new i(e).encode(t,e),width:t.width,height:t.height}}},5307:t=>{t.exports=function t(e,r,n){function i(s,a){if(!r[s]){if(!e[s]){if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var u=r[s]={exports:{}};e[s][0].call(u.exports,(function(t){var r=e[s][1][t];return i(r||t)}),u,u.exports,t,e,r,n)}return r[s].exports}for(var o=void 0,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,e,r){var n,i,o,s,a,l=function(t,e){for(var r in e)u.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},u={}.hasOwnProperty;n=t("./PriorityQueue/AbstractPriorityQueue"),i=t("./PriorityQueue/ArrayStrategy"),s=t("./PriorityQueue/BinaryHeapStrategy"),o=t("./PriorityQueue/BHeapStrategy"),(a=function(t){function e(t){t||(t={}),t.strategy||(t.strategy=s),t.comparator||(t.comparator=function(t,e){return(t||0)-(e||0)}),e.__super__.constructor.call(this,t)}return l(e,t),e}(n)).ArrayStrategy=i,a.BinaryHeapStrategy=s,a.BHeapStrategy=o,e.exports=a},{"./PriorityQueue/AbstractPriorityQueue":2,"./PriorityQueue/ArrayStrategy":3,"./PriorityQueue/BHeapStrategy":4,"./PriorityQueue/BinaryHeapStrategy":5}],2:[function(t,e,r){e.exports=function(){function t(t){var e;if(null==(null!=t?t.strategy:void 0))throw"Must pass options.strategy, a strategy";if(null==(null!=t?t.comparator:void 0))throw"Must pass options.comparator, a comparator";this.priv=new t.strategy(t),this.length=(null!=t&&null!=(e=t.initialValues)?e.length:void 0)||0}return t.prototype.queue=function(t){this.length++,this.priv.queue(t)},t.prototype.dequeue=function(t){if(!this.length)throw"Empty queue";return this.length--,this.priv.dequeue()},t.prototype.peek=function(t){if(!this.length)throw"Empty queue";return this.priv.peek()},t.prototype.clear=function(){return this.length=0,this.priv.clear()},t}()},{}],3:[function(t,e,r){var n;n=function(t,e,r){var n,i,o;for(i=0,n=t.length;i<n;)r(t[o=i+n>>>1],e)>=0?i=o+1:n=o;return i},e.exports=function(){function t(t){var e;this.options=t,this.comparator=this.options.comparator,this.data=(null!=(e=this.options.initialValues)?e.slice(0):void 0)||[],this.data.sort(this.comparator).reverse()}return t.prototype.queue=function(t){var e;e=n(this.data,t,this.comparator),this.data.splice(e,0,t)},t.prototype.dequeue=function(){return this.data.pop()},t.prototype.peek=function(){return this.data[this.data.length-1]},t.prototype.clear=function(){this.data.length=0},t}()},{}],4:[function(t,e,r){e.exports=function(){function t(t){var e,r,n,i,o,s,a,l;for(this.comparator=(null!=t?t.comparator:void 0)||function(t,e){return t-e},this.pageSize=(null!=t?t.pageSize:void 0)||512,this.length=0,a=0;1<<a<this.pageSize;)a+=1;if(1<<a!==this.pageSize)throw"pageSize must be a power of two";for(this._shift=a,this._emptyMemoryPageTemplate=e=[],r=0,o=this.pageSize;0<=o?r<o:r>o;0<=o?++r:--r)e.push(null);if(this._memory=[],this._mask=this.pageSize-1,t.initialValues)for(n=0,i=(s=t.initialValues).length;n<i;n++)l=s[n],this.queue(l)}return t.prototype.queue=function(t){this.length+=1,this._write(this.length,t),this._bubbleUp(this.length,t)},t.prototype.dequeue=function(){var t,e;return t=this._read(1),e=this._read(this.length),this.length-=1,this.length>0&&(this._write(1,e),this._bubbleDown(1,e)),t},t.prototype.peek=function(){return this._read(1)},t.prototype.clear=function(){this.length=0,this._memory.length=0},t.prototype._write=function(t,e){var r;for(r=t>>this._shift;r>=this._memory.length;)this._memory.push(this._emptyMemoryPageTemplate.slice(0));return this._memory[r][t&this._mask]=e},t.prototype._read=function(t){return this._memory[t>>this._shift][t&this._mask]},t.prototype._bubbleUp=function(t,e){var r,n,i,o;for(r=this.comparator;t>1&&(n=t&this._mask,t<this.pageSize||n>3?i=t&~this._mask|n>>1:n<2?(i=t-this.pageSize>>this._shift,i+=i&~(this._mask>>1),i|=this.pageSize>>1):i=t-2,!(r(o=this._read(i),e)<0));)this._write(i,e),this._write(t,o),t=i},t.prototype._bubbleDown=function(t,e){var r,n,i,o,s;for(s=this.comparator;t<this.length;)if(t>this._mask&&!(t&this._mask-1)?r=n=t+2:t&this.pageSize>>1?(r=(t&~this._mask)>>1,n=1+(r=1+(r|=t&this._mask>>1)<<this._shift)):n=(r=t+(t&this._mask))+1,r!==n&&n<=this.length)if(i=this._read(r),o=this._read(n),s(i,e)<0&&s(i,o)<=0)this._write(r,e),this._write(t,i),t=r;else{if(!(s(o,e)<0))break;this._write(n,e),this._write(t,o),t=n}else{if(!(r<=this.length))break;if(!(s(i=this._read(r),e)<0))break;this._write(r,e),this._write(t,i),t=r}},t}()},{}],5:[function(t,e,r){e.exports=function(){function t(t){var e;this.comparator=(null!=t?t.comparator:void 0)||function(t,e){return t-e},this.length=0,this.data=(null!=(e=t.initialValues)?e.slice(0):void 0)||[],this._heapify()}return t.prototype._heapify=function(){var t,e,r;if(this.data.length>0)for(t=e=1,r=this.data.length;1<=r?e<r:e>r;t=1<=r?++e:--e)this._bubbleUp(t)},t.prototype.queue=function(t){this.data.push(t),this._bubbleUp(this.data.length-1)},t.prototype.dequeue=function(){var t,e;return e=this.data[0],t=this.data.pop(),this.data.length>0&&(this.data[0]=t,this._bubbleDown(0)),e},t.prototype.peek=function(){return this.data[0]},t.prototype.clear=function(){this.length=0,this.data.length=0},t.prototype._bubbleUp=function(t){for(var e,r;t>0&&(e=t-1>>>1,this.comparator(this.data[t],this.data[e])<0);)r=this.data[e],this.data[e]=this.data[t],this.data[t]=r,t=e},t.prototype._bubbleDown=function(t){var e,r,n,i,o;for(e=this.data.length-1;i=1+(r=1+(t<<1)),n=t,r<=e&&this.comparator(this.data[r],this.data[n])<0&&(n=r),i<=e&&this.comparator(this.data[i],this.data[n])<0&&(n=i),n!==t;)o=this.data[n],this.data[n]=this.data[t],this.data[t]=o,t=n},t}()},{}]},{},[1])(1)},2229:function(t){t.exports=function(){"use strict";function t(t){return"string"==typeof t||t instanceof String}var e=Number.isFinite||window.isFinite;function r(t){return e(t)}function n(t){return t}function i(t){var e={};return t.filter((function(t){return!e.hasOwnProperty(t)&&(e[t]=!0)}))}function o(t,e){if(e.length!==t.length)return!1;for(var r=0;r<t.length;r++){if(e[r].compareArray&&!e[r].compareArray(t[r]))return!1;if(e[r]!==t[r])return!1}return!0}function s(t,e){Object.keys(e).forEach((function(r){t[r]=e[r]}))}function a(){for(var t=1,e=0,r=0;r<arguments.length;r++){var n=arguments[r];e+=h(n),t*=n}return 0!==e?u(t,e):t}function l(t,e){if(0===e)throw new Error("Divide by zero");var r=Math.pow(10,h(e));return a(t,r/(r*e))}function u(t,e){return Math.round(t*Math.pow(10,e))/Math.pow(10,e)}function h(t){if(!isFinite(t))return 0;for(var e=0;t%1!=0;)t*=10,e++;return e}function c(){var t;if(!this)return t=Object.create(c.prototype),c.apply(t,arguments),t;t=Error.apply(this,arguments),this.name="QtyError",this.message=t.message,this.stack=t.stack}function f(t,e){throw new c("Incompatible units: "+t+" and "+e)}c.prototype=Object.create(Error.prototype,{constructor:{value:c}});var d={"<googol>":[["googol"],1e100,"prefix"],"<kibi>":[["Ki","Kibi","kibi"],Math.pow(2,10),"prefix"],"<mebi>":[["Mi","Mebi","mebi"],Math.pow(2,20),"prefix"],"<gibi>":[["Gi","Gibi","gibi"],Math.pow(2,30),"prefix"],"<tebi>":[["Ti","Tebi","tebi"],Math.pow(2,40),"prefix"],"<pebi>":[["Pi","Pebi","pebi"],Math.pow(2,50),"prefix"],"<exi>":[["Ei","Exi","exi"],Math.pow(2,60),"prefix"],"<zebi>":[["Zi","Zebi","zebi"],Math.pow(2,70),"prefix"],"<yebi>":[["Yi","Yebi","yebi"],Math.pow(2,80),"prefix"],"<yotta>":[["Y","Yotta","yotta"],1e24,"prefix"],"<zetta>":[["Z","Zetta","zetta"],1e21,"prefix"],"<exa>":[["E","Exa","exa"],1e18,"prefix"],"<peta>":[["P","Peta","peta"],1e15,"prefix"],"<tera>":[["T","Tera","tera"],1e12,"prefix"],"<giga>":[["G","Giga","giga"],1e9,"prefix"],"<mega>":[["M","Mega","mega"],1e6,"prefix"],"<kilo>":[["k","kilo"],1e3,"prefix"],"<hecto>":[["h","Hecto","hecto"],100,"prefix"],"<deca>":[["da","Deca","deca","deka"],10,"prefix"],"<deci>":[["d","Deci","deci"],.1,"prefix"],"<centi>":[["c","Centi","centi"],.01,"prefix"],"<milli>":[["m","Milli","milli"],.001,"prefix"],"<micro>":[["u","","","Micro","mc","micro"],1e-6,"prefix"],"<nano>":[["n","Nano","nano"],1e-9,"prefix"],"<pico>":[["p","Pico","pico"],1e-12,"prefix"],"<femto>":[["f","Femto","femto"],1e-15,"prefix"],"<atto>":[["a","Atto","atto"],1e-18,"prefix"],"<zepto>":[["z","Zepto","zepto"],1e-21,"prefix"],"<yocto>":[["y","Yocto","yocto"],1e-24,"prefix"],"<1>":[["1","<1>"],1,""],"<meter>":[["m","meter","meters","metre","metres"],1,"length",["<meter>"]],"<inch>":[["in","inch","inches",'"'],.0254,"length",["<meter>"]],"<foot>":[["ft","foot","feet","'"],.3048,"length",["<meter>"]],"<yard>":[["yd","yard","yards"],.9144,"length",["<meter>"]],"<mile>":[["mi","mile","miles"],1609.344,"length",["<meter>"]],"<naut-mile>":[["nmi","naut-mile"],1852,"length",["<meter>"]],"<league>":[["league","leagues"],4828,"length",["<meter>"]],"<furlong>":[["furlong","furlongs"],201.2,"length",["<meter>"]],"<rod>":[["rd","rod","rods"],5.029,"length",["<meter>"]],"<mil>":[["mil","mils"],254e-7,"length",["<meter>"]],"<angstrom>":[["ang","angstrom","angstroms"],1e-10,"length",["<meter>"]],"<fathom>":[["fathom","fathoms"],1.829,"length",["<meter>"]],"<pica>":[["pica","picas"],.00423333333,"length",["<meter>"]],"<point>":[["pt","point","points"],.000352777778,"length",["<meter>"]],"<redshift>":[["z","red-shift","redshift"],1302773e20,"length",["<meter>"]],"<AU>":[["AU","astronomical-unit"],1495979e5,"length",["<meter>"]],"<light-second>":[["ls","light-second"],299792500,"length",["<meter>"]],"<light-minute>":[["lmin","light-minute"],1798755e4,"length",["<meter>"]],"<light-year>":[["ly","light-year"],9460528e9,"length",["<meter>"]],"<parsec>":[["pc","parsec","parsecs"],3085678e10,"length",["<meter>"]],"<datamile>":[["DM","datamile"],1828.8,"length",["<meter>"]],"<kilogram>":[["kg","kilogram","kilograms"],1,"mass",["<kilogram>"]],"<AMU>":[["u","AMU","amu"],1660538921e-36,"mass",["<kilogram>"]],"<dalton>":[["Da","Dalton","Daltons","dalton","daltons"],1660538921e-36,"mass",["<kilogram>"]],"<slug>":[["slug","slugs"],14.5939029,"mass",["<kilogram>"]],"<short-ton>":[["tn","ton","short-ton"],907.18474,"mass",["<kilogram>"]],"<metric-ton>":[["tonne","metric-ton"],1e3,"mass",["<kilogram>"]],"<carat>":[["ct","carat","carats"],2e-4,"mass",["<kilogram>"]],"<pound>":[["lbs","lb","pound","pounds","#"],.45359237,"mass",["<kilogram>"]],"<ounce>":[["oz","ounce","ounces"],.0283495231,"mass",["<kilogram>"]],"<gram>":[["g","gram","grams","gramme","grammes"],.001,"mass",["<kilogram>"]],"<grain>":[["grain","grains","gr"],6479891e-11,"mass",["<kilogram>"]],"<dram>":[["dram","drams","dr"],.0017718452,"mass",["<kilogram>"]],"<stone>":[["stone","stones","st"],6.35029318,"mass",["<kilogram>"]],"<hectare>":[["hectare"],1e4,"area",["<meter>","<meter>"]],"<acre>":[["acre","acres"],4046.85642,"area",["<meter>","<meter>"]],"<sqft>":[["sqft"],1,"area",["<foot>","<foot>"]],"<liter>":[["l","L","liter","liters","litre","litres"],.001,"volume",["<meter>","<meter>","<meter>"]],"<gallon>":[["gal","gallon","gallons"],.0037854118,"volume",["<meter>","<meter>","<meter>"]],"<gallon-imp>":[["galimp","gallon-imp","gallons-imp"],.00454609,"volume",["<meter>","<meter>","<meter>"]],"<quart>":[["qt","quart","quarts"],.00094635295,"volume",["<meter>","<meter>","<meter>"]],"<pint>":[["pt","pint","pints"],.000473176475,"volume",["<meter>","<meter>","<meter>"]],"<pint-imp>":[["ptimp","pint-imp","pints-imp"],.00056826125,"volume",["<meter>","<meter>","<meter>"]],"<cup>":[["cu","cup","cups"],.000236588238,"volume",["<meter>","<meter>","<meter>"]],"<fluid-ounce>":[["floz","fluid-ounce","fluid-ounces"],295735297e-13,"volume",["<meter>","<meter>","<meter>"]],"<fluid-ounce-imp>":[["flozimp","floz-imp","fluid-ounce-imp","fluid-ounces-imp"],284130625e-13,"volume",["<meter>","<meter>","<meter>"]],"<tablespoon>":[["tb","tbsp","tbs","tablespoon","tablespoons"],147867648e-13,"volume",["<meter>","<meter>","<meter>"]],"<teaspoon>":[["tsp","teaspoon","teaspoons"],492892161e-14,"volume",["<meter>","<meter>","<meter>"]],"<bushel>":[["bu","bsh","bushel","bushels"],.035239072,"volume",["<meter>","<meter>","<meter>"]],"<oilbarrel>":[["bbl","oilbarrel","oilbarrels","oil-barrel","oil-barrels"],.158987294928,"volume",["<meter>","<meter>","<meter>"]],"<beerbarrel>":[["bl","bl-us","beerbarrel","beerbarrels","beer-barrel","beer-barrels"],.1173477658,"volume",["<meter>","<meter>","<meter>"]],"<beerbarrel-imp>":[["blimp","bl-imp","beerbarrel-imp","beerbarrels-imp","beer-barrel-imp","beer-barrels-imp"],.16365924,"volume",["<meter>","<meter>","<meter>"]],"<kph>":[["kph"],.277777778,"speed",["<meter>"],["<second>"]],"<mph>":[["mph"],.44704,"speed",["<meter>"],["<second>"]],"<knot>":[["kt","kn","kts","knot","knots"],.514444444,"speed",["<meter>"],["<second>"]],"<fps>":[["fps"],.3048,"speed",["<meter>"],["<second>"]],"<gee>":[["gee"],9.80665,"acceleration",["<meter>"],["<second>","<second>"]],"<Gal>":[["Gal"],.01,"acceleration",["<meter>"],["<second>","<second>"]],"<kelvin>":[["degK","kelvin"],1,"temperature",["<kelvin>"]],"<celsius>":[["degC","celsius","celsius","centigrade"],1,"temperature",["<kelvin>"]],"<fahrenheit>":[["degF","fahrenheit"],5/9,"temperature",["<kelvin>"]],"<rankine>":[["degR","rankine"],5/9,"temperature",["<kelvin>"]],"<temp-K>":[["tempK","temp-K"],1,"temperature",["<temp-K>"]],"<temp-C>":[["tempC","temp-C"],1,"temperature",["<temp-K>"]],"<temp-F>":[["tempF","temp-F"],5/9,"temperature",["<temp-K>"]],"<temp-R>":[["tempR","temp-R"],5/9,"temperature",["<temp-K>"]],"<second>":[["s","sec","secs","second","seconds"],1,"time",["<second>"]],"<minute>":[["min","mins","minute","minutes"],60,"time",["<second>"]],"<hour>":[["h","hr","hrs","hour","hours"],3600,"time",["<second>"]],"<day>":[["d","day","days"],86400,"time",["<second>"]],"<week>":[["wk","week","weeks"],604800,"time",["<second>"]],"<fortnight>":[["fortnight","fortnights"],1209600,"time",["<second>"]],"<year>":[["y","yr","year","years","annum"],31556926,"time",["<second>"]],"<decade>":[["decade","decades"],315569260,"time",["<second>"]],"<century>":[["century","centuries"],3155692600,"time",["<second>"]],"<pascal>":[["Pa","pascal","Pascal"],1,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<bar>":[["bar","bars"],1e5,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<mmHg>":[["mmHg"],133.322368,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<inHg>":[["inHg"],3386.3881472,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<torr>":[["torr"],133.322368,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<atm>":[["atm","ATM","atmosphere","atmospheres"],101325,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<psi>":[["psi"],6894.76,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<cmh2o>":[["cmH2O","cmh2o"],98.0638,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<inh2o>":[["inH2O","inh2o"],249.082052,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<poise>":[["P","poise"],.1,"viscosity",["<kilogram>"],["<meter>","<second>"]],"<stokes>":[["St","stokes"],1e-4,"viscosity",["<meter>","<meter>"],["<second>"]],"<mole>":[["mol","mole"],1,"substance",["<mole>"]],"<molar>":[["M","molar"],1e3,"concentration",["<mole>"],["<meter>","<meter>","<meter>"]],"<wtpercent>":[["wt%","wtpercent"],10,"concentration",["<kilogram>"],["<meter>","<meter>","<meter>"]],"<katal>":[["kat","katal","Katal"],1,"activity",["<mole>"],["<second>"]],"<unit>":[["U","enzUnit","unit"],16667e-19,"activity",["<mole>"],["<second>"]],"<farad>":[["F","farad","Farad"],1,"capacitance",["<second>","<second>","<second>","<second>","<ampere>","<ampere>"],["<meter>","<meter>","<kilogram>"]],"<coulomb>":[["C","coulomb","Coulomb"],1,"charge",["<ampere>","<second>"]],"<Ah>":[["Ah"],3600,"charge",["<ampere>","<second>"]],"<ampere>":[["A","Ampere","ampere","amp","amps"],1,"current",["<ampere>"]],"<siemens>":[["S","Siemens","siemens"],1,"conductance",["<second>","<second>","<second>","<ampere>","<ampere>"],["<kilogram>","<meter>","<meter>"]],"<henry>":[["H","Henry","henry"],1,"inductance",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<ampere>","<ampere>"]],"<volt>":[["V","Volt","volt","volts"],1,"potential",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<second>","<ampere>"]],"<ohm>":[["Ohm","ohm","",""],1,"resistance",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<second>","<ampere>","<ampere>"]],"<weber>":[["Wb","weber","webers"],1,"magnetism",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<ampere>"]],"<tesla>":[["T","tesla","teslas"],1,"magnetism",["<kilogram>"],["<second>","<second>","<ampere>"]],"<gauss>":[["G","gauss"],1e-4,"magnetism",["<kilogram>"],["<second>","<second>","<ampere>"]],"<maxwell>":[["Mx","maxwell","maxwells"],1e-8,"magnetism",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<ampere>"]],"<oersted>":[["Oe","oersted","oersteds"],250/Math.PI,"magnetism",["<ampere>"],["<meter>"]],"<joule>":[["J","joule","Joule","joules"],1,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<erg>":[["erg","ergs"],1e-7,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<btu>":[["BTU","btu","BTUs"],1055.056,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<calorie>":[["cal","calorie","calories"],4.184,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<Calorie>":[["Cal","Calorie","Calories"],4184,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<therm-US>":[["th","therm","therms","Therm","therm-US"],105480400,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<Wh>":[["Wh"],3600,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<newton>":[["N","Newton","newton"],1,"force",["<kilogram>","<meter>"],["<second>","<second>"]],"<dyne>":[["dyn","dyne"],1e-5,"force",["<kilogram>","<meter>"],["<second>","<second>"]],"<pound-force>":[["lbf","pound-force"],4.448222,"force",["<kilogram>","<meter>"],["<second>","<second>"]],"<hertz>":[["Hz","hertz","Hertz"],1,"frequency",["<1>"],["<second>"]],"<radian>":[["rad","radian","radians"],1,"angle",["<radian>"]],"<degree>":[["deg","degree","degrees"],Math.PI/180,"angle",["<radian>"]],"<gradian>":[["gon","grad","gradian","grads"],Math.PI/200,"angle",["<radian>"]],"<steradian>":[["sr","steradian","steradians"],1,"solid_angle",["<steradian>"]],"<rotation>":[["rotation"],2*Math.PI,"angle",["<radian>"]],"<rpm>":[["rpm"],2*Math.PI/60,"angular_velocity",["<radian>"],["<second>"]],"<byte>":[["B","byte","bytes"],1,"information",["<byte>"]],"<bit>":[["b","bit","bits"],.125,"information",["<byte>"]],"<Bps>":[["Bps"],1,"information_rate",["<byte>"],["<second>"]],"<bps>":[["bps"],.125,"information_rate",["<byte>"],["<second>"]],"<dollar>":[["USD","dollar"],1,"currency",["<dollar>"]],"<cents>":[["cents"],.01,"currency",["<dollar>"]],"<candela>":[["cd","candela"],1,"luminosity",["<candela>"]],"<lumen>":[["lm","lumen"],1,"luminous_power",["<candela>","<steradian>"]],"<lux>":[["lux"],1,"illuminance",["<candela>","<steradian>"],["<meter>","<meter>"]],"<watt>":[["W","watt","watts"],1,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<volt-ampere>":[["VA","volt-ampere"],1,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<volt-ampere-reactive>":[["var","Var","VAr","VAR","volt-ampere-reactive"],1,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<horsepower>":[["hp","horsepower"],745.699872,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<gray>":[["Gy","gray","grays"],1,"radiation",["<meter>","<meter>"],["<second>","<second>"]],"<roentgen>":[["R","roentgen"],.00933,"radiation",["<meter>","<meter>"],["<second>","<second>"]],"<sievert>":[["Sv","sievert","sieverts"],1,"radiation",["<meter>","<meter>"],["<second>","<second>"]],"<becquerel>":[["Bq","becquerel","becquerels"],1,"radiation",["<1>"],["<second>"]],"<curie>":[["Ci","curie","curies"],37e9,"radiation",["<1>"],["<second>"]],"<cpm>":[["cpm"],1/60,"rate",["<count>"],["<second>"]],"<dpm>":[["dpm"],1/60,"rate",["<count>"],["<second>"]],"<bpm>":[["bpm"],1/60,"rate",["<count>"],["<second>"]],"<dot>":[["dot","dots"],1,"resolution",["<each>"]],"<pixel>":[["pixel","px"],1,"resolution",["<each>"]],"<ppi>":[["ppi"],1,"resolution",["<pixel>"],["<inch>"]],"<dpi>":[["dpi"],1,"typography",["<dot>"],["<inch>"]],"<cell>":[["cells","cell"],1,"counting",["<each>"]],"<each>":[["each"],1,"counting",["<each>"]],"<count>":[["count"],1,"counting",["<each>"]],"<base-pair>":[["bp","base-pair"],1,"counting",["<each>"]],"<nucleotide>":[["nt","nucleotide"],1,"counting",["<each>"]],"<molecule>":[["molecule","molecules"],1,"counting",["<1>"]],"<dozen>":[["doz","dz","dozen"],12,"prefix_only",["<each>"]],"<percent>":[["%","percent"],.01,"prefix_only",["<1>"]],"<ppm>":[["ppm"],1e-6,"prefix_only",["<1>"]],"<ppt>":[["ppt"],1e-9,"prefix_only",["<1>"]],"<gross>":[["gr","gross"],144,"prefix_only",["<dozen>","<dozen>"]],"<decibel>":[["dB","decibel","decibels"],1,"logarithmic",["<decibel>"]]},p=["<meter>","<kilogram>","<second>","<mole>","<ampere>","<radian>","<kelvin>","<temp-K>","<byte>","<dollar>","<candela>","<each>","<steradian>","<decibel>"],m="<1>",g=[m];function v(t,e){var n=e[1],i=e[3]||[],o=e[4]||[];if(!r(n))throw new c(t+": Invalid unit definition. 'scalar' must be a number");i.forEach((function(e){if(void 0===d[e])throw new c(t+": Invalid unit definition. Unit "+e+" in 'numerator' is not recognized")})),o.forEach((function(e){if(void 0===d[e])throw new c(t+": Invalid unit definition. Unit "+e+" in 'denominator' is not recognized")}))}var w={},y={},b={},_={},x={};for(var k in d)if(d.hasOwnProperty(k)){var M=d[k];if("prefix"===M[2]){w[k]=M[1];for(var S=0;S<M[0].length;S++)y[M[0][S]]=k}else{v(k,M),b[k]={scalar:M[1],numerator:M[3],denominator:M[4]};for(var E=0;E<M[0].length;E++)_[M[0][E]]=k}x[k]=M[0][0]}function A(t){var e,r=[],n=Object.keys(d);if(void 0===t)for(e=0;e<n.length;e++)-1===["","prefix"].indexOf(d[n[e]][2])&&r.push(n[e].substr(1,n[e].length-2));else{if(-1===this.getKinds().indexOf(t))throw new c("Kind not recognized");for(e=0;e<n.length;e++)d[n[e]][2]===t&&r.push(n[e].substr(1,n[e].length-2))}return r.sort((function(t,e){return t.toLowerCase()<e.toLowerCase()?-1:t.toLowerCase()>e.toLowerCase()?1:0}))}function C(t){if(!_[t])throw new c("Unit not recognized");return d[_[t]][0]}var D=["length","time","temperature","mass","current","substance","luminosity","currency","information","angle"];function O(){if(this.signature)return this.signature;for(var t=P.call(this),e=0;e<t.length;e++)t[e]*=Math.pow(20,e);return t.reduce((function(t,e){return t+e}),0)}function P(){if(!this.isBase())return P.call(this.toBase());for(var t,e,r=new Array(D.length),n=0;n<r.length;n++)r[n]=0;for(var i=0;i<this.numerator.length;i++)(t=d[this.numerator[i]])&&(e=D.indexOf(t[2]))>=0&&(r[e]=r[e]+1);for(var o=0;o<this.denominator.length;o++)(t=d[this.denominator[o]])&&(e=D.indexOf(t[2]))>=0&&(r[e]=r[e]-1);return r}var R="[+-]",I="\\d+",T="\\."+I,F=new RegExp("^("+R+"?\\s*(?:(?:"+I+"(?:"+T+")?)|(?:"+T+"))(?:[Ee]"+R+"?"+I+")?)?\\s*([^/]*)(?:/(.+))?$"),j="\\^|\\*{2}",N="[01234]",B=new RegExp("([^ \\*\\d]+?)(?:"+j+")?(-?"+N+"(?![a-zA-Z]))"),U=new RegExp("([^ \\*\\d]+?)(?:"+j+")?("+N+"(?![a-zA-Z]))");function L(e){t(e)||(e=e.toString()),e=e.trim();var r=F.exec(e);if(!r)throw new c(e+": Quantity not recognized");var n=r[1];n?(n=n.replace(/\s/g,""),this.scalar=parseFloat(n)):this.scalar=1;for(var i,o,s,a=r[2],l=r[3];r=B.exec(a);){if(i=parseFloat(r[2]),isNaN(i))throw new c("Unit exponent is not a number");if(0===i&&!V.test(r[1]))throw new c("Unit not recognized");o=r[1]+" ",s="";for(var u=0;u<Math.abs(i);u++)s+=o;i>=0?a=a.replace(r[0],s):(l=l?l+s:s,a=a.replace(r[0],""))}for(;r=U.exec(l);){if(i=parseFloat(r[2]),isNaN(i))throw new c("Unit exponent is not a number");if(0===i&&!V.test(r[1]))throw new c("Unit not recognized");o=r[1]+" ",s="";for(var h=0;h<i;h++)s+=o;l=l.replace(r[0],s)}a&&(this.numerator=G(a.trim())),l&&(this.denominator=G(l.trim()))}var $=Object.keys(y).sort((function(t,e){return e.length-t.length})).join("|"),z=Object.keys(_).sort((function(t,e){return e.length-t.length})).join("|"),q="("+$+")??("+z+")(?:\\b|$)",V=new RegExp("^\\s*("+q+"[\\s\\*]*)+$"),Y=new RegExp(q,"g"),Z={};function G(t){var e=Z[t];if(e)return e;var r,n=[];if(!V.test(t))throw new c("Unit not recognized");for(;r=Y.exec(t);)n.push(r.slice(1));return n=(n=(n=n.map((function(t){return y[t[0]]?[y[t[0]],_[t[1]]]:[_[t[1]]]}))).reduce((function(t,e){return t.concat(e)}),[])).filter((function(t){return t})),Z[t]=n,n}function X(e){if(!t(e))throw new c("Argument should be a string");try{return this(e)}catch(t){return null}}function H(t){return t instanceof Q}function Q(t,e){if(W.apply(null,arguments),!H(this))return new Q(t,e);if(this.scalar=null,this.baseScalar=null,this.signature=null,this._conversionCache={},this.numerator=g,this.denominator=g,K(t)?(this.scalar=t.scalar,this.numerator=t.numerator&&0!==t.numerator.length?t.numerator:g,this.denominator=t.denominator&&0!==t.denominator.length?t.denominator:g):e?(L.call(this,e),this.scalar=t):L.call(this,t),this.denominator.join("*").indexOf("temp")>=0)throw new c("Cannot divide with temperatures");if(this.numerator.join("*").indexOf("temp")>=0){if(this.numerator.length>1)throw new c("Cannot multiply by temperatures");if(!o(this.denominator,g))throw new c("Cannot divide with temperatures")}if(this.initValue=t,J.call(this),this.isTemperature()&&this.baseScalar<0)throw new c("Temperatures must not be less than absolute zero")}function W(e,n){if(n){if(!r(e)||!t(n))throw new c("Only number accepted as initialization value when units are explicitly provided")}else if(!(t(e)||r(e)||H(e)||K(e)))throw new c("Only string, number or quantity accepted as single initialization value")}function K(t){return t&&"object"==typeof t&&t.hasOwnProperty("scalar")}function J(){if(this.baseScalar)return this.baseScalar;if(this.isBase())this.baseScalar=this.scalar,this.signature=O.call(this);else{var t=this.toBase();this.baseScalar=t.scalar,this.signature=t.signature}}Q.prototype={constructor:Q};var tt={"-312078":"elastance","-312058":"resistance","-312038":"inductance","-152058":"potential","-152040":"magnetism","-152038":"magnetism","-7997":"specific_volume","-79":"snap","-59":"jolt","-39":"acceleration","-38":"radiation","-20":"frequency","-19":"speed","-18":"viscosity","-17":"volumetric_flow","-1":"wavenumber",0:"unitless",1:"length",2:"area",3:"volume",20:"time",400:"temperature",7941:"yank",7942:"power",7959:"pressure",7961:"force",7962:"energy",7979:"viscosity",7981:"momentum",7982:"angular_momentum",7997:"density",7998:"area_density",8e3:"mass",152020:"radiation_exposure",159999:"magnetism",16e4:"current",160020:"charge",312058:"conductance",312078:"capacitance",3199980:"activity",3199997:"molar_concentration",32e5:"substance",63999998:"illuminance",64e6:"luminous_power",128e7:"currency",25599999980:"information_rate",256e8:"information",511999999980:"angular_velocity",512e9:"angle"};function et(){return i(Object.keys(tt).map((function(t){return tt[t]})))}function rt(t,e){var r=t.units(),n=e.to(r),i=Q(ot(r));return Q({scalar:t.scalar-n.scalar,numerator:i.numerator,denominator:i.denominator})}function nt(t,e){var r=e.to(ot(t.units()));return Q({scalar:t.scalar-r.scalar,numerator:t.numerator,denominator:t.denominator})}function it(t,e){var r=e.to(ot(t.units()));return Q({scalar:t.scalar+r.scalar,numerator:t.numerator,denominator:t.denominator})}function ot(t){if("tempK"===t)return"degK";if("tempC"===t)return"degC";if("tempF"===t)return"degF";if("tempR"===t)return"degR";throw new c("Unknown type for temp conversion from: "+t)}function st(t,e){var r,n=at(t),i=e.units();if("degK"===i)r=n.scalar;else if("degC"===i)r=n.scalar;else if("degF"===i)r=9*n.scalar/5;else{if("degR"!==i)throw new c("Unknown type for degree conversion to: "+i);r=9*n.scalar/5}return Q({scalar:r,numerator:e.numerator,denominator:e.denominator})}function at(t){var e,r=t.units();if(r.match(/(deg)[CFRK]/))e=t.baseScalar;else if("tempK"===r)e=t.scalar;else if("tempC"===r)e=t.scalar;else if("tempF"===r)e=5*t.scalar/9;else{if("tempR"!==r)throw new c("Unknown type for temp conversion from: "+r);e=5*t.scalar/9}return Q({scalar:e,numerator:["<kelvin>"],denominator:g})}function lt(t,e){var r,n=e.units();if("tempK"===n)r=t.baseScalar;else if("tempC"===n)r=t.baseScalar-273.15;else if("tempF"===n)r=9*t.baseScalar/5-459.67;else{if("tempR"!==n)throw new c("Unknown type for temp conversion to: "+n);r=9*t.baseScalar/5}return Q({scalar:r,numerator:e.numerator,denominator:e.denominator})}function ut(t){var e,r=t.units();if(r.match(/(deg)[CFRK]/))e=t.baseScalar;else if("tempK"===r)e=t.scalar;else if("tempC"===r)e=t.scalar+273.15;else if("tempF"===r)e=5*(t.scalar+459.67)/9;else{if("tempR"!==r)throw new c("Unknown type for temp conversion from: "+r);e=5*t.scalar/9}return Q({scalar:e,numerator:["<temp-K>"],denominator:g})}function ht(t,e){var r,i=Q(t),o=Q(e);return i.eq(o)?n:(r=i.isTemperature()?function(t){return i.mul(t).to(o).scalar}:function(t){return t*i.baseScalar/o.baseScalar},function(t){var e,n,i;if(Array.isArray(t)){for(n=t.length,i=[],e=0;e<n;e++)i.push(r(t[e]));return i}return r(t)})}Q.prototype.kind=function(){return tt[this.signature.toString()]},s(Q.prototype,{isDegrees:function(){return(null===this.signature||400===this.signature)&&1===this.numerator.length&&o(this.denominator,g)&&(this.numerator[0].match(/<temp-[CFRK]>/)||this.numerator[0].match(/<(kelvin|celsius|rankine|fahrenheit)>/))},isTemperature:function(){return this.isDegrees()&&this.numerator[0].match(/<temp-[CFRK]>/)}}),s(Q.prototype,{to:function(e){var r,n;return null==e?this:t(e)?(r=this._conversionCache[e])?r:(n=Q(e)).units()===this.units()?this:(this.isCompatible(n)?n=n.isTemperature()?lt(this,n):n.isDegrees()?st(this,n):Q({scalar:l(this.baseScalar,n.baseScalar),numerator:n.numerator,denominator:n.denominator}):this.isInverse(n)?n=this.inverse().to(e):f(this.units(),n.units()),this._conversionCache[e]=n,n):this.to(e.units())},toBase:function(){if(this.isBase())return this;if(this.isTemperature())return ut(this);var t=ct[this.units()];return t||(t=ft(this.numerator,this.denominator),ct[this.units()]=t),t.mul(this.scalar)},toFloat:function(){if(this.isUnitless())return this.scalar;throw new c("Can't convert to Float unless unitless.  Use Unit#scalar")},toPrec:function(e){if(t(e)&&(e=Q(e)),r(e)&&(e=Q(e+" "+this.units())),this.isUnitless()?e.isUnitless()||f(this.units(),e.units()):e=e.to(this.units()),0===e.scalar)throw new c("Divide by zero");return Q(a(Math.round(this.scalar/e.scalar),e.scalar)+this.units())}});var ct={};function ft(t,e){for(var r,n=[],i=[],o=1,s=0;s<t.length;s++)r=t[s],w[r]?o=a(o,w[r]):b[r]&&(o*=b[r].scalar,b[r].numerator&&n.push(b[r].numerator),b[r].denominator&&i.push(b[r].denominator));for(var l=0;l<e.length;l++)r=e[l],w[r]?o/=w[r]:b[r]&&(o/=b[r].scalar,b[r].numerator&&i.push(b[r].numerator),b[r].denominator&&n.push(b[r].denominator));return Q({scalar:o,numerator:n=n.reduce((function(t,e){return t.concat(e)}),[]),denominator:i=i.reduce((function(t,e){return t.concat(e)}),[])})}function dt(t,e,r,n){function i(t){return t!==m}t=t.filter(i),r=r.filter(i),e=e.filter(i),n=n.filter(i);var o={};function s(t,e){for(var r,n,i,s=0;s<t.length;s++)if(w[t[s]]?(r=t[s+1],n=t[s],i=w[n],s++):(r=t[s],n=null,i=1),r&&r!==m)if(o[r]){o[r][0]+=e;var a=o[r][2]?w[o[r][2]]:1;o[r][1===e?3:4]*=l(i,a)}else o[r]=[e,r,n,1,1]}s(t,1),s(e,-1),s(r,1),s(n,-1);var a=[],u=[],h=1;for(var c in o)if(o.hasOwnProperty(c)){var f,d=o[c];if(d[0]>0)for(f=0;f<d[0];f++)a.push(null===d[2]?d[1]:[d[2],d[1]]);else if(d[0]<0)for(f=0;f<-d[0];f++)u.push(null===d[2]?d[1]:[d[2],d[1]]);h*=l(d[3],d[4])}return 0===a.length&&(a=g),0===u.length&&(u=g),[a=a.reduce((function(t,e){return t.concat(e)}),[]),u=u.reduce((function(t,e){return t.concat(e)}),[]),h]}function pt(){}function mt(t,e){return(t+" "+e).trim()}Q.parse=X,Q.getUnits=A,Q.getAliases=C,Q.mulSafe=a,Q.divSafe=l,Q.getKinds=et,Q.swiftConverter=ht,Q.Error=c,s(Q.prototype,{add:function(e){if(t(e)&&(e=Q(e)),this.isCompatible(e)||f(this.units(),e.units()),this.isTemperature()&&e.isTemperature())throw new c("Cannot add two temperatures");return this.isTemperature()?it(this,e):e.isTemperature()?it(e,this):Q({scalar:this.scalar+e.to(this).scalar,numerator:this.numerator,denominator:this.denominator})},sub:function(e){if(t(e)&&(e=Q(e)),this.isCompatible(e)||f(this.units(),e.units()),this.isTemperature()&&e.isTemperature())return rt(this,e);if(this.isTemperature())return nt(this,e);if(e.isTemperature())throw new c("Cannot subtract a temperature from a differential degree unit");return Q({scalar:this.scalar-e.to(this).scalar,numerator:this.numerator,denominator:this.denominator})},mul:function(e){if(r(e))return Q({scalar:a(this.scalar,e),numerator:this.numerator,denominator:this.denominator});if(t(e)&&(e=Q(e)),(this.isTemperature()||e.isTemperature())&&!this.isUnitless()&&!e.isUnitless())throw new c("Cannot multiply by temperatures");var n=this,i=e;n.isCompatible(i)&&400!==n.signature&&(i=i.to(n));var o=dt(n.numerator,n.denominator,i.numerator,i.denominator);return Q({scalar:a(n.scalar,i.scalar,o[2]),numerator:o[0],denominator:o[1]})},div:function(e){if(r(e)){if(0===e)throw new c("Divide by zero");return Q({scalar:this.scalar/e,numerator:this.numerator,denominator:this.denominator})}if(t(e)&&(e=Q(e)),0===e.scalar)throw new c("Divide by zero");if(e.isTemperature())throw new c("Cannot divide with temperatures");if(this.isTemperature()&&!e.isUnitless())throw new c("Cannot divide with temperatures");var n=this,i=e;n.isCompatible(i)&&400!==n.signature&&(i=i.to(n));var o=dt(n.numerator,n.denominator,i.denominator,i.numerator);return Q({scalar:a(n.scalar,o[2])/i.scalar,numerator:o[0],denominator:o[1]})},inverse:function(){if(this.isTemperature())throw new c("Cannot divide with temperatures");if(0===this.scalar)throw new c("Divide by zero");return Q({scalar:1/this.scalar,numerator:this.denominator,denominator:this.numerator})}}),s(Q.prototype,{eq:function(t){return 0===this.compareTo(t)},lt:function(t){return-1===this.compareTo(t)},lte:function(t){return this.eq(t)||this.lt(t)},gt:function(t){return 1===this.compareTo(t)},gte:function(t){return this.eq(t)||this.gt(t)},compareTo:function(e){return t(e)?this.compareTo(Q(e)):(this.isCompatible(e)||f(this.units(),e.units()),this.baseScalar<e.baseScalar?-1:this.baseScalar===e.baseScalar?0:this.baseScalar>e.baseScalar?1:void 0)},same:function(t){return this.scalar===t.scalar&&this.units()===t.units()}}),s(Q.prototype,{isUnitless:function(){return[this.numerator,this.denominator].every((function(t){return o(t,g)}))},isCompatible:function(e){return t(e)?this.isCompatible(Q(e)):!!H(e)&&void 0!==e.signature&&this.signature===e.signature},isInverse:function(t){return this.inverse().isCompatible(t)},isBase:function(){return void 0!==this._isBase?this._isBase:this.isDegrees()&&this.numerator[0].match(/<(kelvin|temp-K)>/)?(this._isBase=!0,this._isBase):(this.numerator.concat(this.denominator).forEach((function(t){t!==m&&-1===p.indexOf(t)&&(this._isBase=!1)}),this),!1===this._isBase||(this._isBase=!0),this._isBase)}}),pt.prototype.get=function(t){return arguments.length>1&&(t=Array.apply(null,arguments)),t.reduce((function(e,r,n){if(e){var i=e[r];return n===t.length-1?i?i.data:void 0:i}}),this)},pt.prototype.set=function(t,e){return arguments.length>2&&(t=Array.prototype.slice.call(arguments,0,-1),e=arguments[arguments.length-1]),t.reduce((function(r,n,i){var o=r[n];return void 0===o&&(o=r[n]={}),i===t.length-1?(o.data=e,e):o}),this)},Q.formatter=mt,s(Q.prototype,{units:function(){if(void 0!==this._units)return this._units;var t=o(this.numerator,g),e=o(this.denominator,g);if(t&&e)return this._units="",this._units;var r=vt(this.numerator),n=vt(this.denominator);return this._units=r+(e?"":"/"+n),this._units},toString:function(e,n){var i;if(r(e))i=this.units(),n=e;else if(t(e))i=e;else if(H(e))return this.toPrec(e).toString(n);var o=this.to(i);return o=((void 0!==n?u(o.scalar,n):o.scalar)+" "+o.units()).trim()},format:function(t,e){1===arguments.length&&"function"==typeof t&&(e=t,t=void 0),e=e||Q.formatter;var r=this.to(t);return e.call(this,r.scalar,r.units())}});var gt=new pt;function vt(t){var e=gt.get(t);return e||(e=o(t,g)?"1":yt(wt(t)).join("*"),gt.set(t,e),e)}function wt(t){for(var e,r,n=[],i=0;i<t.length;i++)e=t[i],r=t[i+1],w[e]?(n.push(x[e]+x[r]),i++):n.push(x[e]);return n}function yt(t){return t.reduce((function(t,e){var r=t[e];return r||t.push(r=t[e]=[e,0]),r[1]++,t}),[]).map((function(t){return t[0]+(t[1]>1?t[1]:"")}))}return Q.version="1.7.6",Q}()},5520:t=>{!function(){function e(t){for(var e=0,i=t.length-1,o=void 0,s=void 0,a=void 0,l=n(e,i);;){if(i<=e)return t[l];if(i==e+1)return t[e]>t[i]&&r(t,e,i),t[l];for(t[o=n(e,i)]>t[i]&&r(t,o,i),t[e]>t[i]&&r(t,e,i),t[o]>t[e]&&r(t,o,e),r(t,o,e+1),s=e+1,a=i;;){do{s++}while(t[e]>t[s]);do{a--}while(t[a]>t[e]);if(a<s)break;r(t,s,a)}r(t,e,a),a<=l&&(e=s),a>=l&&(i=a-1)}}var r=function(t,e,r){var n;return n=[t[r],t[e]],t[e]=n[0],t[r]=n[1],n},n=function(t,e){return~~((t+e)/2)};t.exports?t.exports=e:window.median=e}()},4805:(t,e,r)=>{"use strict";r.d(e,{Z:()=>s});var n=r(7531);const i=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,n.Z)(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");var r=e.fromIndex,i=void 0===r?0:r,o=e.toIndex,s=void 0===o?t.length:o;if(i<0||i>=t.length||!Number.isInteger(i))throw new Error("fromIndex must be a positive integer smaller than length");if(s<=i||s>t.length||!Number.isInteger(s))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=t[i],l=i+1;l<s;l++)t[l]>a&&(a=t[l]);return a};const o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,n.Z)(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");var r=e.fromIndex,i=void 0===r?0:r,o=e.toIndex,s=void 0===o?t.length:o;if(i<0||i>=t.length||!Number.isInteger(i))throw new Error("fromIndex must be a positive integer smaller than length");if(s<=i||s>t.length||!Number.isInteger(s))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=t[i],l=i+1;l<s;l++)t[l]<a&&(a=t[l]);return a};const s=function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,n.Z)(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");if(void 0!==r.output){if(!(0,n.Z)(r.output))throw new TypeError("output option must be an array if specified");e=r.output}else e=new Array(t.length);var s=o(t),a=i(t);if(s===a)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var l=r.min,u=void 0===l?r.autoMinMax?s:0:l,h=r.max,c=void 0===h?r.autoMinMax?a:1:h;if(u>=c)throw new RangeError("min option must be smaller than max option");for(var f=(c-u)/(a-s),d=0;d<t.length;d++)e[d]=(t[d]-s)*f+u;return e}},530:t=>{"use strict";function e(t){this.value=t,this.parent=null,this.rank=0}t.exports=class{constructor(){this.nodes=new Map}add(t){var r=this.nodes.get(t);return r||(r=new e(t),this.nodes.set(t,r)),r}union(t,e){const r=this.find(t),n=this.find(e);r!==n&&(r.rank<n.rank?r.parent=n:r.rank>n.rank?n.parent=r:(n.parent=r,r.rank++))}find(t){for(var e=t;null!==e.parent;)e=e.parent;for(var r=t;null!==r.parent;){var n=r;r=r.parent,n.parent=e}return e}connected(t,e){return this.find(t)===this.find(e)}}},7345:(t,e,r)=>{"use strict";var n=r(5571),i={DEBUG:!1,ifft2DArray:function(t,e,r){var i=new Array(e*r),o=e/2,s=2*(r-1);n.init(o);for(var a={re:new Array(o),im:new Array(o)},l=0;l<r;l++){for(var u=o-1;u>=0;u--)a.re[u]=t[2*u*r+l],a.im[u]=t[(2*u+1)*r+l];n.bt(a.re,a.im);for(u=o-1;u>=0;u--)i[2*u*r+l]=a.re[u],i[(2*u+1)*r+l]=a.im[u]}var h=new Array(o*s);n.init(s);var c={re:new Array(s),im:new Array(s)},f=s*o;for(u=0;u<e;u+=2){c.re[0]=i[u*r],c.im[0]=i[(u+1)*r];for(l=1;l<r;l++)c.re[l]=i[u*r+l],c.im[l]=i[(u+1)*r+l],c.re[s-l]=i[u*r+l],c.im[s-l]=-i[(u+1)*r+l];n.bt(c.re,c.im);var d=u/2*s;for(l=s-1;l>=0;l--)h[d+l]=c.re[l]/f}return h},fft2DArray:function(t,e,r,i){Object.assign({},{inplace:!0});var o=r/2+1,s=2*e,a=new Array(s*o);n.init(r);for(var l,u,h,c,f,d={re:new Array(r),im:new Array(r)},p={re:new Array(r),im:new Array(r)},m={re:new Array(r),im:new Array(r)},g=0;g<e/2;g++){l=2*g*r,d.re=t.slice(l,l+r),l=(2*g+1)*r,d.im=t.slice(l,l+r),n.fft1d(d.re,d.im),this.reconstructTwoRealFFT(d,p,m),u=4*g*o,h=(4*g+1)*o,c=(4*g+2)*o,f=(4*g+3)*o;for(var v=o-1;v>=0;v--)a[u+v]=p.re[v],a[h+v]=p.im[v],a[c+v]=m.re[v],a[f+v]=m.im[v]}p=null,m=null;var w=new Array(s*o);n.init(e);for(var y={re:new Array(e),im:new Array(e)},b=o-1;b>=0;b--){for(g=e-1;g>=0;g--)y.re[g]=a[2*g*o+b],y.im[g]=a[(2*g+1)*o+b],isNaN(y.re[g])&&(y.re[g]=0),isNaN(y.im[g])&&(y.im[g]=0);n.fft1d(y.re,y.im);for(g=e-1;g>=0;g--)w[2*g*o+b]=y.re[g],w[(2*g+1)*o+b]=y.im[g]}return w},reconstructTwoRealFFT:function(t,e,r){var n,i,o,s,a,l=t.re.length;e.re[0]=t.re[0],e.im[0]=0,r.re[0]=t.im[0],r.im[0]=0;for(var u=l/2;u>0;u--)a=l-u,n=.5*(t.re[u]-t.re[a]),i=.5*(t.re[u]+t.re[a]),o=.5*(t.im[u]-t.im[a]),s=.5*(t.im[u]+t.im[a]),e.re[u]=i,e.im[u]=o,e.re[a]=i,e.im[a]=-o,r.re[u]=s,r.im[u]=-n,r.re[a]=s,r.im[a]=n},convolute2DI:function(t,e,r,n){for(var i,o,s=0;s<r/2;s++)for(var a=0;a<n;a++)i=t[2*s*n+a]*e[2*s*n+a]-t[(2*s+1)*n+a]*e[(2*s+1)*n+a],o=t[2*s*n+a]*e[(2*s+1)*n+a]+t[(2*s+1)*n+a]*e[2*s*n+a],t[2*s*n+a]=i,t[(2*s+1)*n+a]=o},convolute:function(t,e,r,n,i){for(var o=new Array(n*r),s=0;s<r*n;s++)o[s]=t[s];o=this.fft2DArray(o,r,n);var a,l=e.length,u=e[0].length,h=new Array(n*r);for(s=0;s<n*r;s++)h[s]=0;for(var c=Math.floor((l-1)/2),f=Math.floor((u-1)/2),d=0;d<l;d++){a=(d-c+r)%r;for(var p=0;p<u;p++)h[a*n+(p-f+n)%n]=e[d][p]}h=this.fft2DArray(h,r,n);var m=2*r,g=n/2+1;return this.convolute2DI(o,h,m,g),this.ifft2DArray(o,m,g)},toRadix2:function(t,e,r){var n,i,o,s,a=r,l=e;if(0===r||0!=(r&r-1)){for(a=0;r>>++a!=0;);(a=1<<a)-r}if(0===e||0!=(e&e-1)){for(l=0;e>>++l!=0;);((l=1<<l)-e)*a}if(l==e&&a==r)return{data:t,rows:e,cols:r};var u=new Array(l*a),h=Math.floor((l-e)/2)-e,c=Math.floor((a-r)/2)-r;for(n=0;n<l;n++)for(o=n*a,s=(n-h)%e*r,i=0;i<a;i++)u[o+i]=t[s+(i-c)%r];return{data:u,rows:l,cols:a}},crop:function(t,e,r,n,i,o){if(e==n&&r==i)return t;Object.assign({},o);var s,a,l,u,h=new Array(i*n),c=Math.floor((e-n)/2),f=Math.floor((r-i)/2);for(l=0;l<n;l++)for(s=l*i,a=(l+c)*r,u=0;u<i;u++)h[s+u]=t[a+(u+f)];return h}};t.exports=i},5571:function(t,e){(function(){var t,r="0.3.0",n="2013-03";(t=e).toString=function(){return"version "+r+", released "+n};for(var i=0,o=null,s=null,a={init:function(t){if(0===t||0!=(t&t-1))throw new Error("init: radix-2 required");i=t,a._initArray(),a._makeBitReversalTable(),a._makeCosSinTable()},fft1d:function(t,e){a.fft(t,e,1)},ifft1d:function(t,e){var r=1/i;a.fft(t,e,-1);for(var n=0;n<i;n++)t[n]*=r,e[n]*=r},bt1d:function(t,e){a.fft(t,e,-1)},fft2d:function(t,e){for(var r=[],n=[],o=0,s=0;s<i;s++){o=s*i;for(var l=0;l<i;l++)r[l]=t[l+o],n[l]=e[l+o];a.fft1d(r,n);for(var u=0;u<i;u++)t[u+o]=r[u],e[u+o]=n[u]}for(var h=0;h<i;h++){for(var c=0;c<i;c++)o=h+c*i,r[c]=t[o],n[c]=e[o];a.fft1d(r,n);for(var f=0;f<i;f++)t[o=h+f*i]=r[f],e[o]=n[f]}},ifft2d:function(t,e){for(var r=[],n=[],o=0,s=0;s<i;s++){o=s*i;for(var l=0;l<i;l++)r[l]=t[l+o],n[l]=e[l+o];a.ifft1d(r,n);for(var u=0;u<i;u++)t[u+o]=r[u],e[u+o]=n[u]}for(var h=0;h<i;h++){for(var c=0;c<i;c++)o=h+c*i,r[c]=t[o],n[c]=e[o];a.ifft1d(r,n);for(var f=0;f<i;f++)t[o=h+f*i]=r[f],e[o]=n[f]}},fft:function(t,e,r){for(var n,a,l,u,h,c,f,d,p,m=i>>2,g=0;g<i;g++)g<(u=o[g])&&(h=t[g],t[g]=t[u],t[u]=h,h=e[g],e[g]=e[u],e[u]=h);for(var v=1;v<i;v<<=1){a=0,n=i/(v<<1);for(var w=0;w<v;w++){c=s[a+m],f=r*s[a];for(var y=w;y<i;y+=v<<1)d=c*t[l=y+v]+f*e[l],p=c*e[l]-f*t[l],t[l]=t[y]-d,t[y]+=d,e[l]=e[y]-p,e[y]+=p;a+=n}}},_initArray:function(){o="undefined"!=typeof Uint32Array?new Uint32Array(i):[],s="undefined"!=typeof Float64Array?new Float64Array(1.25*i):[]},_paddingZero:function(){},_makeBitReversalTable:function(){var t=0,e=0,r=0;for(o[0]=0;++t<i;){for(r=i>>1;r<=e;)e-=r,r>>=1;e+=r,o[t]=e}},_makeCosSinTable:function(){var t=i>>1,e=i>>2,r=i>>3,n=t+e,o=Math.sin(Math.PI/i),a=2*o*o,l=Math.sqrt(a*(2-a)),u=s[e]=1,h=s[0]=0;o=2*a;for(var c=1;c<r;c++)a+=o*(u-=a),l-=o*(h+=l),s[c]=h,s[e-c]=u;0!==r&&(s[r]=Math.sqrt(.5));for(var f=0;f<e;f++)s[t-f]=s[f];for(var d=0;d<n;d++)s[d+t]=-s[d]}},l=["init","fft1d","ifft1d","fft2d","ifft2d"],u=0;u<l.length;u++)t[l[u]]=a[l[u]];return t.bt=a.bt1d,t.fft=a.fft1d,t.ifft=a.ifft1d,t}).call(this)},3910:(t,e,r)=>{"use strict";e.FFTUtils=r(7345),r(5571)},8881:(t,e,r)=>{"use strict";const{squaredEuclidean:n}=r(7465),i={sigma:1};t.exports=class{constructor(t){t=Object.assign({},i,t),this.sigma=t.sigma,this.divisor=2*t.sigma*t.sigma}compute(t,e){const r=n(t,e);return Math.exp(-r/this.divisor)}}},7465:(t,e,r)=>{"use strict";function n(t,e){let r=0;for(let n=0;n<t.length;n++)r+=(t[n]-e[n])*(t[n]-e[n]);return r}function i(t,e){return Math.sqrt(n(t,e))}r.r(e),r.d(e,{squaredEuclidean:()=>n,euclidean:()=>i})},4229:t=>{"use strict";const e={degree:1,constant:1,scale:1};t.exports=class{constructor(t){t=Object.assign({},e,t),this.degree=t.degree,this.constant=t.constant,this.scale=t.scale}compute(t,e){for(var r=0,n=0;n<t.length;n++)r+=t[n]*e[n];return Math.pow(this.scale*r+this.constant,this.degree)}}},7613:t=>{"use strict";const e={alpha:.01,constant:-Math.E};t.exports=class{constructor(t){t=Object.assign({},e,t),this.alpha=t.alpha,this.constant=t.constant}compute(t,e){for(var r=0,n=0;n<t.length;n++)r+=t[n]*e[n];return Math.tanh(this.alpha*r+this.constant)}}},414:(t,e,r)=>{var n=r(3910).FFTUtils;function i(t){var e,r,n=t;if("number"!=typeof t[0]){e=t.length,r=t[0].length,n=new Array(e*r);for(var i=0;i<e;i++)for(var o=0;o<r;o++)n[i*r+o]=t[i][o]}else{var s=Math.sqrt(t.length);Number.isInteger(s)&&(e=s,r=s)}return{data:n,rows:e,cols:r}}t.exports={fft:function(t,e,r){var o,s,a=i(t),l=a.data,u=Object.assign({normalize:!1,divisor:1,rows:a.rows,cols:a.cols},r);if(!u.rows||!u.cols)throw new Error("Invalid number of rows or columns "+o+" "+s);o=u.rows,s=u.cols;var h,c,f=u.divisor,d=e.length,p=e[0].length;if(u.normalize)for(f=0,h=0;h<d;h++)for(c=0;c<p;c++)f+=e[h][c];if(0===f)throw new RangeError("convolution: The divisor is equal to zero");var m=n.toRadix2(l,o,s),g=n.convolute(m.data,e,m.rows,m.cols);if(g=n.crop(g,m.rows,m.cols,o,s),0!=f&&1!=f)for(h=0;h<g.length;h++)g[h]/=f;return g},direct:function(t,e,r){var n,o,s=i(t),a=s.data,l=Object.assign({normalize:!1,divisor:1,rows:s.rows,cols:s.cols},r);if(!l.rows||!l.cols)throw new Error("Invalid number of rows or columns "+n+" "+o);n=l.rows,o=l.cols;var u,h,c,f,d,p,m=l.divisor,g=e.length,v=e[0].length;if(l.normalize)for(m=0,u=0;u<g;u++)for(h=0;h<v;h++)m+=e[u][h];if(0===m)throw new RangeError("convolution: The divisor is equal to zero");var w=new Array(n*o),y=Math.floor(g/2),b=Math.floor(v/2);for(f=0;f<n;f++)for(c=0;c<o;c++){for(d=0,h=0;h<g;h++)for(u=0;u<v;u++)p=e[g-h-1][v-u-1],d+=a[(f+h-y+n)%n*o+(c+u-b+o)%o]*p;w[f*o+c]=d/m}return w},kernelFactory:{LoG:function(t,e,r){var n=1e3;r&&r.factor&&(n=r.factor);var i,o,s,a,l=new Array(e);n*=-1;var u=(e-1)/2,h=2*t*t;for(i=0;i<e;i++)for(l[i]=new Array(e),a=(i-u)*(i-u),o=0;o<e;o++)s=-((o-u)*(o-u)+a)/h,l[i][o]=Math.round(n*(1+s)*Math.exp(s));return l}},matrix2Array:i}},4529:(t,e,r)=>{"use strict";function n(t,e){let r=0;for(let n=0;n<t.length;n++)r+=(t[n]-e[n])*(t[n]-e[n]);return r}function i(t,e){return Math.sqrt(n(t,e))}r.r(e),r.d(e,{squaredEuclidean:()=>n,euclidean:()=>i})},992:(t,e,r)=>{"use strict";const{Matrix:n,MatrixTransposeView:i}=r(838),o=r(8881),s=r(4229),a=r(7613),l=r(566),u=r(2463),h=r(2950),c=r(6035),f={gaussian:o,rbf:o,polynomial:s,poly:s,anova:l,cauchy:u,exponential:h,histogram:c,min:c,laplacian:r(1613),multiquadratic:r(9506),rational:r(3815),sigmoid:a,mlp:a};t.exports=class{constructor(t,e){if(this.kernelType=t,"linear"!==t)if("string"==typeof t){t=t.toLowerCase();var r=f[t];if(!r)throw new Error(`unsupported kernel type: ${t}`);this.kernelFunction=new r(e)}else{if("object"!=typeof t||"function"!=typeof t.compute)throw new TypeError("first argument must be a valid kernel type or instance");this.kernelFunction=t}}compute(t,e){if(t=n.checkMatrix(t),e=void 0===e?t:n.checkMatrix(e),"linear"===this.kernelType)return t.mmul(new i(e));const r=new n(t.rows,e.rows);if(t===e)for(let e=0;e<t.rows;e++)for(let n=e;n<t.rows;n++){const i=this.kernelFunction.compute(t.getRow(e),t.getRow(n));r.set(e,n,i),r.set(n,e,i)}else for(let n=0;n<t.rows;n++)for(let i=0;i<e.rows;i++)r.set(n,i,this.kernelFunction.compute(t.getRow(n),e.getRow(i)));return r}}},566:t=>{"use strict";const e={sigma:1,degree:1};t.exports=class{constructor(t){t=Object.assign({},e,t),this.sigma=t.sigma,this.degree=t.degree}compute(t,e){for(var r=0,n=Math.min(t.length,e.length),i=1;i<=n;++i)r+=Math.pow(Math.exp(-this.sigma*Math.pow(Math.pow(t[i-1],i)-Math.pow(e[i-1],i),2)),this.degree);return r}}},2463:(t,e,r)=>{"use strict";const{squaredEuclidean:n}=r(4529),i={sigma:1};t.exports=class{constructor(t){t=Object.assign({},i,t),this.sigma=t.sigma}compute(t,e){return 1/(1+n(t,e)/(this.sigma*this.sigma))}}},2950:(t,e,r)=>{"use strict";const{euclidean:n}=r(4529),i={sigma:1};t.exports=class{constructor(t){t=Object.assign({},i,t),this.sigma=t.sigma,this.divisor=2*t.sigma*t.sigma}compute(t,e){const r=n(t,e);return Math.exp(-r/this.divisor)}}},6035:t=>{"use strict";t.exports=class{compute(t,e){for(var r=Math.min(t.length,e.length),n=0,i=0;i<r;++i)n+=Math.min(t[i],e[i]);return n}}},1613:(t,e,r)=>{"use strict";const{euclidean:n}=r(4529),i={sigma:1};t.exports=class{constructor(t){t=Object.assign({},i,t),this.sigma=t.sigma}compute(t,e){const r=n(t,e);return Math.exp(-r/this.sigma)}}},9506:(t,e,r)=>{"use strict";const{squaredEuclidean:n}=r(4529),i={constant:1};t.exports=class{constructor(t){t=Object.assign({},i,t),this.constant=t.constant}compute(t,e){return Math.sqrt(n(t,e)+this.constant*this.constant)}}},3815:(t,e,r)=>{"use strict";const{squaredEuclidean:n}=r(4529),i={constant:1};t.exports=class{constructor(t){t=Object.assign({},i,t),this.constant=t.constant}compute(t,e){const r=n(t,e);return 1-r/(r+this.constant)}}},1660:(t,e,r)=>{"use strict";r.d(e,{Z:()=>o});var n=r(5591),i=r(2014);class o{constructor(t){let e,r,n,o,s,a,l,u,h,c=(t=i.Z.checkMatrix(t)).clone(),f=c.rows,d=c.columns,p=new Float64Array(f),m=1;for(e=0;e<f;e++)p[e]=e;for(u=new Float64Array(f),r=0;r<d;r++){for(e=0;e<f;e++)u[e]=c.get(e,r);for(e=0;e<f;e++){for(h=Math.min(e,r),s=0,n=0;n<h;n++)s+=c.get(e,n)*u[n];u[e]-=s,c.set(e,r,u[e])}for(o=r,e=r+1;e<f;e++)Math.abs(u[e])>Math.abs(u[o])&&(o=e);if(o!==r){for(n=0;n<d;n++)a=c.get(o,n),c.set(o,n,c.get(r,n)),c.set(r,n,a);l=p[o],p[o]=p[r],p[r]=l,m=-m}if(r<f&&0!==c.get(r,r))for(e=r+1;e<f;e++)c.set(e,r,c.get(e,r)/c.get(r,r))}this.LU=c,this.pivotVector=p,this.pivotSign=m}isSingular(){let t=this.LU,e=t.columns;for(let r=0;r<e;r++)if(0===t.get(r,r))return!0;return!1}solve(t){t=n.Z.checkMatrix(t);let e=this.LU;if(e.rows!==t.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");let r,i,o,s=t.columns,a=t.subMatrixRow(this.pivotVector,0,s-1),l=e.columns;for(o=0;o<l;o++)for(r=o+1;r<l;r++)for(i=0;i<s;i++)a.set(r,i,a.get(r,i)-a.get(o,i)*e.get(r,o));for(o=l-1;o>=0;o--){for(i=0;i<s;i++)a.set(o,i,a.get(o,i)/e.get(o,o));for(r=0;r<o;r++)for(i=0;i<s;i++)a.set(r,i,a.get(r,i)-a.get(o,i)*e.get(r,o))}return a}get determinant(){let t=this.LU;if(!t.isSquare())throw new Error("Matrix must be square");let e=this.pivotSign,r=t.columns;for(let n=0;n<r;n++)e*=t.get(n,n);return e}get lowerTriangularMatrix(){let t=this.LU,e=t.rows,r=t.columns,i=new n.Z(e,r);for(let n=0;n<e;n++)for(let e=0;e<r;e++)n>e?i.set(n,e,t.get(n,e)):n===e?i.set(n,e,1):i.set(n,e,0);return i}get upperTriangularMatrix(){let t=this.LU,e=t.rows,r=t.columns,i=new n.Z(e,r);for(let n=0;n<e;n++)for(let e=0;e<r;e++)n<=e?i.set(n,e,t.get(n,e)):i.set(n,e,0);return i}get pivotPermutationVector(){return Array.from(this.pivotVector)}}},5414:(t,e,r)=>{"use strict";r.d(e,{Z:()=>s});var n=r(5591),i=r(2014),o=r(5333);class s{constructor(t){let e,r,n,s,a=(t=i.Z.checkMatrix(t)).clone(),l=t.rows,u=t.columns,h=new Float64Array(u);for(n=0;n<u;n++){let t=0;for(e=n;e<l;e++)t=(0,o.G)(t,a.get(e,n));if(0!==t){for(a.get(n,n)<0&&(t=-t),e=n;e<l;e++)a.set(e,n,a.get(e,n)/t);for(a.set(n,n,a.get(n,n)+1),r=n+1;r<u;r++){for(s=0,e=n;e<l;e++)s+=a.get(e,n)*a.get(e,r);for(s=-s/a.get(n,n),e=n;e<l;e++)a.set(e,r,a.get(e,r)+s*a.get(e,n))}}h[n]=-t}this.QR=a,this.Rdiag=h}solve(t){t=n.Z.checkMatrix(t);let e=this.QR,r=e.rows;if(t.rows!==r)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");let i,o,s,a,l=t.columns,u=t.clone(),h=e.columns;for(s=0;s<h;s++)for(o=0;o<l;o++){for(a=0,i=s;i<r;i++)a+=e.get(i,s)*u.get(i,o);for(a=-a/e.get(s,s),i=s;i<r;i++)u.set(i,o,u.get(i,o)+a*e.get(i,s))}for(s=h-1;s>=0;s--){for(o=0;o<l;o++)u.set(s,o,u.get(s,o)/this.Rdiag[s]);for(i=0;i<s;i++)for(o=0;o<l;o++)u.set(i,o,u.get(i,o)-u.get(s,o)*e.get(i,s))}return u.subMatrix(0,h-1,0,l-1)}isFullRank(){let t=this.QR.columns;for(let e=0;e<t;e++)if(0===this.Rdiag[e])return!1;return!0}get upperTriangularMatrix(){let t,e,r=this.QR,i=r.columns,o=new n.Z(i,i);for(t=0;t<i;t++)for(e=0;e<i;e++)t<e?o.set(t,e,r.get(t,e)):t===e?o.set(t,e,this.Rdiag[t]):o.set(t,e,0);return o}get orthogonalMatrix(){let t,e,r,i,o=this.QR,s=o.rows,a=o.columns,l=new n.Z(s,a);for(r=a-1;r>=0;r--){for(t=0;t<s;t++)l.set(t,r,0);for(l.set(r,r,1),e=r;e<a;e++)if(0!==o.get(r,r)){for(i=0,t=r;t<s;t++)i+=o.get(t,r)*l.get(t,e);for(i=-i/o.get(r,r),t=r;t<s;t++)l.set(t,e,l.get(t,e)+i*o.get(t,r))}}return l}}},3715:(t,e,r)=>{"use strict";r.d(e,{Z:()=>s});var n=r(5591),i=r(2014),o=r(5333);class s{constructor(t,e={}){if((t=i.Z.checkMatrix(t)).isEmpty())throw new Error("Matrix must be non-empty");let r=t.rows,s=t.columns;const{computeLeftSingularVectors:a=!0,computeRightSingularVectors:l=!0,autoTranspose:u=!1}=e;let h,c=Boolean(a),f=Boolean(l),d=!1;if(r<s)if(u){h=t.transpose(),r=h.rows,s=h.columns,d=!0;let e=c;c=f,f=e}else h=t.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else h=t.clone();let p=Math.min(r,s),m=Math.min(r+1,s),g=new Float64Array(m),v=new n.Z(r,p),w=new n.Z(s,s),y=new Float64Array(s),b=new Float64Array(r),_=new Float64Array(m);for(let t=0;t<m;t++)_[t]=t;let x=Math.min(r-1,s),k=Math.max(0,Math.min(s-2,r)),M=Math.max(x,k);for(let t=0;t<M;t++){if(t<x){g[t]=0;for(let e=t;e<r;e++)g[t]=(0,o.G)(g[t],h.get(e,t));if(0!==g[t]){h.get(t,t)<0&&(g[t]=-g[t]);for(let e=t;e<r;e++)h.set(e,t,h.get(e,t)/g[t]);h.set(t,t,h.get(t,t)+1)}g[t]=-g[t]}for(let e=t+1;e<s;e++){if(t<x&&0!==g[t]){let n=0;for(let i=t;i<r;i++)n+=h.get(i,t)*h.get(i,e);n=-n/h.get(t,t);for(let i=t;i<r;i++)h.set(i,e,h.get(i,e)+n*h.get(i,t))}y[e]=h.get(t,e)}if(c&&t<x)for(let e=t;e<r;e++)v.set(e,t,h.get(e,t));if(t<k){y[t]=0;for(let e=t+1;e<s;e++)y[t]=(0,o.G)(y[t],y[e]);if(0!==y[t]){y[t+1]<0&&(y[t]=0-y[t]);for(let e=t+1;e<s;e++)y[e]/=y[t];y[t+1]+=1}if(y[t]=-y[t],t+1<r&&0!==y[t]){for(let e=t+1;e<r;e++)b[e]=0;for(let e=t+1;e<r;e++)for(let r=t+1;r<s;r++)b[e]+=y[r]*h.get(e,r);for(let e=t+1;e<s;e++){let n=-y[e]/y[t+1];for(let i=t+1;i<r;i++)h.set(i,e,h.get(i,e)+n*b[i])}}if(f)for(let e=t+1;e<s;e++)w.set(e,t,y[e])}}let S=Math.min(s,r+1);if(x<s&&(g[x]=h.get(x,x)),r<S&&(g[S-1]=0),k+1<S&&(y[k]=h.get(k,S-1)),y[S-1]=0,c){for(let t=x;t<p;t++){for(let e=0;e<r;e++)v.set(e,t,0);v.set(t,t,1)}for(let t=x-1;t>=0;t--)if(0!==g[t]){for(let e=t+1;e<p;e++){let n=0;for(let i=t;i<r;i++)n+=v.get(i,t)*v.get(i,e);n=-n/v.get(t,t);for(let i=t;i<r;i++)v.set(i,e,v.get(i,e)+n*v.get(i,t))}for(let e=t;e<r;e++)v.set(e,t,-v.get(e,t));v.set(t,t,1+v.get(t,t));for(let e=0;e<t-1;e++)v.set(e,t,0)}else{for(let e=0;e<r;e++)v.set(e,t,0);v.set(t,t,1)}}if(f)for(let t=s-1;t>=0;t--){if(t<k&&0!==y[t])for(let e=t+1;e<s;e++){let r=0;for(let n=t+1;n<s;n++)r+=w.get(n,t)*w.get(n,e);r=-r/w.get(t+1,t);for(let n=t+1;n<s;n++)w.set(n,e,w.get(n,e)+r*w.get(n,t))}for(let e=0;e<s;e++)w.set(e,t,0);w.set(t,t,1)}let E=S-1,A=0,C=Number.EPSILON;for(;S>0;){let t,e;for(t=S-2;t>=-1&&-1!==t;t--){const e=Number.MIN_VALUE+C*Math.abs(g[t]+Math.abs(g[t+1]));if(Math.abs(y[t])<=e||Number.isNaN(y[t])){y[t]=0;break}}if(t===S-2)e=4;else{let r;for(r=S-1;r>=t&&r!==t;r--){let e=(r!==S?Math.abs(y[r]):0)+(r!==t+1?Math.abs(y[r-1]):0);if(Math.abs(g[r])<=C*e){g[r]=0;break}}r===t?e=3:r===S-1?e=1:(e=2,t=r)}switch(t++,e){case 1:{let e=y[S-2];y[S-2]=0;for(let r=S-2;r>=t;r--){let n=(0,o.G)(g[r],e),i=g[r]/n,a=e/n;if(g[r]=n,r!==t&&(e=-a*y[r-1],y[r-1]=i*y[r-1]),f)for(let t=0;t<s;t++)n=i*w.get(t,r)+a*w.get(t,S-1),w.set(t,S-1,-a*w.get(t,r)+i*w.get(t,S-1)),w.set(t,r,n)}break}case 2:{let e=y[t-1];y[t-1]=0;for(let n=t;n<S;n++){let i=(0,o.G)(g[n],e),s=g[n]/i,a=e/i;if(g[n]=i,e=-a*y[n],y[n]=s*y[n],c)for(let e=0;e<r;e++)i=s*v.get(e,n)+a*v.get(e,t-1),v.set(e,t-1,-a*v.get(e,n)+s*v.get(e,t-1)),v.set(e,n,i)}break}case 3:{const e=Math.max(Math.abs(g[S-1]),Math.abs(g[S-2]),Math.abs(y[S-2]),Math.abs(g[t]),Math.abs(y[t])),n=g[S-1]/e,i=g[S-2]/e,a=y[S-2]/e,l=g[t]/e,u=y[t]/e,h=((i+n)*(i-n)+a*a)/2,d=n*a*(n*a);let p=0;0===h&&0===d||(p=h<0?0-Math.sqrt(h*h+d):Math.sqrt(h*h+d),p=d/(h+p));let m=(l+n)*(l-n)+p,b=l*u;for(let e=t;e<S-1;e++){let n=(0,o.G)(m,b);0===n&&(n=Number.MIN_VALUE);let i=m/n,a=b/n;if(e!==t&&(y[e-1]=n),m=i*g[e]+a*y[e],y[e]=i*y[e]-a*g[e],b=a*g[e+1],g[e+1]=i*g[e+1],f)for(let t=0;t<s;t++)n=i*w.get(t,e)+a*w.get(t,e+1),w.set(t,e+1,-a*w.get(t,e)+i*w.get(t,e+1)),w.set(t,e,n);if(n=(0,o.G)(m,b),0===n&&(n=Number.MIN_VALUE),i=m/n,a=b/n,g[e]=n,m=i*y[e]+a*g[e+1],g[e+1]=-a*y[e]+i*g[e+1],b=a*y[e+1],y[e+1]=i*y[e+1],c&&e<r-1)for(let t=0;t<r;t++)n=i*v.get(t,e)+a*v.get(t,e+1),v.set(t,e+1,-a*v.get(t,e)+i*v.get(t,e+1)),v.set(t,e,n)}y[S-2]=m,A+=1;break}case 4:if(g[t]<=0&&(g[t]=g[t]<0?-g[t]:0,f))for(let e=0;e<=E;e++)w.set(e,t,-w.get(e,t));for(;t<E&&!(g[t]>=g[t+1]);){let e=g[t];if(g[t]=g[t+1],g[t+1]=e,f&&t<s-1)for(let r=0;r<s;r++)e=w.get(r,t+1),w.set(r,t+1,w.get(r,t)),w.set(r,t,e);if(c&&t<r-1)for(let n=0;n<r;n++)e=v.get(n,t+1),v.set(n,t+1,v.get(n,t)),v.set(n,t,e);t++}A=0,S--}}if(d){let t=w;w=v,v=t}this.m=r,this.n=s,this.s=g,this.U=v,this.V=w}solve(t){let e=t,r=this.threshold,i=this.s.length,o=n.Z.zeros(i,i);for(let t=0;t<i;t++)Math.abs(this.s[t])<=r?o.set(t,t,0):o.set(t,t,1/this.s[t]);let s=this.U,a=this.rightSingularVectors,l=a.mmul(o),u=a.rows,h=s.rows,c=n.Z.zeros(u,h);for(let t=0;t<u;t++)for(let e=0;e<h;e++){let r=0;for(let n=0;n<i;n++)r+=l.get(t,n)*s.get(e,n);c.set(t,e,r)}return c.mmul(e)}solveForDiagonal(t){return this.solve(n.Z.diag(t))}inverse(){let t=this.V,e=this.threshold,r=t.rows,i=t.columns,o=new n.Z(r,this.s.length);for(let n=0;n<r;n++)for(let r=0;r<i;r++)Math.abs(this.s[r])>e&&o.set(n,r,t.get(n,r)/this.s[r]);let s=this.U,a=s.rows,l=s.columns,u=new n.Z(r,a);for(let t=0;t<r;t++)for(let e=0;e<a;e++){let r=0;for(let n=0;n<l;n++)r+=o.get(t,n)*s.get(e,n);u.set(t,e,r)}return u}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,e=0,r=this.s;for(let n=0,i=r.length;n<i;n++)r[n]>t&&e++;return e}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return n.Z.diag(this.s)}}},5333:(t,e,r)=>{"use strict";function n(t,e){let r=0;return Math.abs(t)>Math.abs(e)?(r=e/t,Math.abs(t)*Math.sqrt(1+r*r)):0!==e?(r=t/e,Math.abs(e)*Math.sqrt(1+r*r)):0}r.d(e,{G:()=>n})},7452:(t,e,r)=>{"use strict";r.d(e,{S:()=>l,F:()=>u});var n=r(1660),i=r(5414),o=r(3715),s=r(5591),a=r(2014);function l(t,e=!1){return t=a.Z.checkMatrix(t),e?new o.Z(t).inverse():u(t,s.Z.eye(t.rows))}function u(t,e,r=!1){return t=a.Z.checkMatrix(t),e=a.Z.checkMatrix(e),r?new o.Z(t).solve(e):t.isSquare()?new n.Z(t).solve(e):new i.Z(t).solve(e)}},838:(t,e,r)=>{"use strict";r.r(e),r.d(e,{AbstractMatrix:()=>n.X,CHO:()=>P,CholeskyDecomposition:()=>P,EVD:()=>D,EigenvalueDecomposition:()=>D,LU:()=>y.Z,LuDecomposition:()=>y.Z,Matrix:()=>n.Z,MatrixColumnSelectionView:()=>a,MatrixColumnView:()=>s,MatrixFlipColumnView:()=>l,MatrixFlipRowView:()=>u,MatrixRowSelectionView:()=>c,MatrixRowView:()=>h,MatrixSelectionView:()=>f,MatrixSubView:()=>d,MatrixTransposeView:()=>p,NIPALS:()=>I,Nipals:()=>I,QR:()=>R.Z,QrDecomposition:()=>R.Z,SVD:()=>_.Z,SingularValueDecomposition:()=>_.Z,WrapperMatrix1D:()=>m,WrapperMatrix2D:()=>g.Z,correlation:()=>A,covariance:()=>E,default:()=>n.Z,determinant:()=>b,inverse:()=>w.S,linearDependencies:()=>M,pseudoInverse:()=>S,solve:()=>w.F,wrap:()=>v});var n=r(5591),i=r(7929);class o extends n.X{constructor(t,e,r){super(),this.matrix=t,this.rows=e,this.columns=r}}class s extends o{constructor(t,e){(0,i.bp)(t,e),super(t,t.rows,1),this.column=e}set(t,e,r){return this.matrix.set(t,this.column,r),this}get(t){return this.matrix.get(t,this.column)}}class a extends o{constructor(t,e){e=(0,i.g)(t,e),super(t,t.rows,e.length),this.columnIndices=e}set(t,e,r){return this.matrix.set(t,this.columnIndices[e],r),this}get(t,e){return this.matrix.get(t,this.columnIndices[e])}}class l extends o{constructor(t){super(t,t.rows,t.columns)}set(t,e,r){return this.matrix.set(t,this.columns-e-1,r),this}get(t,e){return this.matrix.get(t,this.columns-e-1)}}class u extends o{constructor(t){super(t,t.rows,t.columns)}set(t,e,r){return this.matrix.set(this.rows-t-1,e,r),this}get(t,e){return this.matrix.get(this.rows-t-1,e)}}class h extends o{constructor(t,e){(0,i.zb)(t,e),super(t,1,t.columns),this.row=e}set(t,e,r){return this.matrix.set(this.row,e,r),this}get(t,e){return this.matrix.get(this.row,e)}}class c extends o{constructor(t,e){super(t,(e=(0,i.ZR)(t,e)).length,t.columns),this.rowIndices=e}set(t,e,r){return this.matrix.set(this.rowIndices[t],e,r),this}get(t,e){return this.matrix.get(this.rowIndices[t],e)}}class f extends o{constructor(t,e,r){let n=(0,i.N2)(t,e,r);super(t,n.row.length,n.column.length),this.rowIndices=n.row,this.columnIndices=n.column}set(t,e,r){return this.matrix.set(this.rowIndices[t],this.columnIndices[e],r),this}get(t,e){return this.matrix.get(this.rowIndices[t],this.columnIndices[e])}}class d extends o{constructor(t,e,r,n,o){(0,i.J5)(t,e,r,n,o),super(t,r-e+1,o-n+1),this.startRow=e,this.startColumn=n}set(t,e,r){return this.matrix.set(this.startRow+t,this.startColumn+e,r),this}get(t,e){return this.matrix.get(this.startRow+t,this.startColumn+e)}}class p extends o{constructor(t){super(t,t.columns,t.rows)}set(t,e,r){return this.matrix.set(e,t,r),this}get(t,e){return this.matrix.get(e,t)}}class m extends n.X{constructor(t,e={}){const{rows:r=1}=e;if(t.length%r!=0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=r,this.columns=t.length/r,this.data=t}set(t,e,r){let n=this._calculateIndex(t,e);return this.data[n]=r,this}get(t,e){let r=this._calculateIndex(t,e);return this.data[r]}_calculateIndex(t,e){return t*this.columns+e}}var g=r(2014);function v(t,e){if(Array.isArray(t))return t[0]&&Array.isArray(t[0])?new g.Z(t):new m(t,e);throw new Error("the argument is not an array")}var w=r(7452),y=r(1660);function b(t){if((t=n.Z.checkMatrix(t)).isSquare()){if(0===t.columns)return 1;let e,r,n,i;if(2===t.columns)return e=t.get(0,0),r=t.get(0,1),n=t.get(1,0),i=t.get(1,1),e*i-r*n;if(3===t.columns){let i,o,s;return i=new f(t,[1,2],[1,2]),o=new f(t,[1,2],[0,2]),s=new f(t,[1,2],[0,1]),e=t.get(0,0),r=t.get(0,1),n=t.get(0,2),e*b(i)-r*b(o)+n*b(s)}return new y.Z(t).determinant}throw Error("determinant can only be calculated for a square matrix")}var _=r(3715);function x(t,e){let r=[];for(let n=0;n<t;n++)n!==e&&r.push(n);return r}function k(t,e,r,n=1e-9,i=1e-9){if(t>i)return new Array(e.rows+1).fill(0);{let t=e.addRow(r,[0]);for(let e=0;e<t.rows;e++)Math.abs(t.get(e,0))<n&&t.set(e,0,0);return t.to1DArray()}}function M(t,e={}){const{thresholdValue:r=1e-9,thresholdError:i=1e-9}=e;let o=(t=n.Z.checkMatrix(t)).rows,s=new n.Z(o,o);for(let e=0;e<o;e++){let a=n.Z.columnVector(t.getRow(e)),l=t.subMatrixRow(x(o,e)).transpose(),u=new _.Z(l).solve(a),h=n.Z.sub(a,l.mmul(u)).abs().max();s.setRow(e,k(h,u,e,r,i))}return s}function S(t,e=Number.EPSILON){if((t=n.Z.checkMatrix(t)).isEmpty())return t.transpose();let r=new _.Z(t,{autoTranspose:!0}),i=r.leftSingularVectors,o=r.rightSingularVectors,s=r.diagonal;for(let t=0;t<s.length;t++)Math.abs(s[t])>e?s[t]=1/s[t]:s[t]=0;return o.mmul(n.Z.diag(s).mmul(i.transpose()))}function E(t,e=t,r={}){t=new n.Z(t);let i=!1;if("object"!=typeof e||n.Z.isMatrix(e)||Array.isArray(e)?e=new n.Z(e):(r=e,e=t,i=!0),t.rows!==e.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:o=!0}=r;o&&(t=t.center("column"),i||(e=e.center("column")));const s=t.transpose().mmul(e);for(let e=0;e<s.rows;e++)for(let r=0;r<s.columns;r++)s.set(e,r,s.get(e,r)*(1/(t.rows-1)));return s}function A(t,e=t,r={}){t=new n.Z(t);let i=!1;if("object"!=typeof e||n.Z.isMatrix(e)||Array.isArray(e)?e=new n.Z(e):(r=e,e=t,i=!0),t.rows!==e.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:o=!0,scale:s=!0}=r;o&&(t.center("column"),i||e.center("column")),s&&(t.scale("column"),i||e.scale("column"));const a=t.standardDeviation("column",{unbiased:!0}),l=i?a:e.standardDeviation("column",{unbiased:!0}),u=t.transpose().mmul(e);for(let e=0;e<u.rows;e++)for(let r=0;r<u.columns;r++)u.set(e,r,u.get(e,r)*(1/(a[e]*l[r]))*(1/(t.rows-1)));return u}var C=r(5333);class D{constructor(t,e={}){const{assumeSymmetric:r=!1}=e;if(!(t=g.Z.checkMatrix(t)).isSquare())throw new Error("Matrix is not a square matrix");if(t.isEmpty())throw new Error("Matrix must be non-empty");let i,o,s=t.columns,a=new n.Z(s,s),l=new Float64Array(s),u=new Float64Array(s),h=t,c=!1;if(c=!!r||t.isSymmetric(),c){for(i=0;i<s;i++)for(o=0;o<s;o++)a.set(i,o,h.get(i,o));!function(t,e,r,n){let i,o,s,a,l,u,h,c;for(l=0;l<t;l++)r[l]=n.get(t-1,l);for(a=t-1;a>0;a--){for(c=0,s=0,u=0;u<a;u++)c+=Math.abs(r[u]);if(0===c)for(e[a]=r[a-1],l=0;l<a;l++)r[l]=n.get(a-1,l),n.set(a,l,0),n.set(l,a,0);else{for(u=0;u<a;u++)r[u]/=c,s+=r[u]*r[u];for(i=r[a-1],o=Math.sqrt(s),i>0&&(o=-o),e[a]=c*o,s-=i*o,r[a-1]=i-o,l=0;l<a;l++)e[l]=0;for(l=0;l<a;l++){for(i=r[l],n.set(l,a,i),o=e[l]+n.get(l,l)*i,u=l+1;u<=a-1;u++)o+=n.get(u,l)*r[u],e[u]+=n.get(u,l)*i;e[l]=o}for(i=0,l=0;l<a;l++)e[l]/=s,i+=e[l]*r[l];for(h=i/(s+s),l=0;l<a;l++)e[l]-=h*r[l];for(l=0;l<a;l++){for(i=r[l],o=e[l],u=l;u<=a-1;u++)n.set(u,l,n.get(u,l)-(i*e[u]+o*r[u]));r[l]=n.get(a-1,l),n.set(a,l,0)}}r[a]=s}for(a=0;a<t-1;a++){if(n.set(t-1,a,n.get(a,a)),n.set(a,a,1),s=r[a+1],0!==s){for(u=0;u<=a;u++)r[u]=n.get(u,a+1)/s;for(l=0;l<=a;l++){for(o=0,u=0;u<=a;u++)o+=n.get(u,a+1)*n.get(u,l);for(u=0;u<=a;u++)n.set(u,l,n.get(u,l)-o*r[u])}}for(u=0;u<=a;u++)n.set(u,a+1,0)}for(l=0;l<t;l++)r[l]=n.get(t-1,l),n.set(t-1,l,0);n.set(t-1,t-1,1),e[0]=0}(s,u,l,a),function(t,e,r,n){let i,o,s,a,l,u,h,c,f,d,p,m,g,v,w,y,b;for(s=1;s<t;s++)e[s-1]=e[s];e[t-1]=0;let _=0,x=0,k=Number.EPSILON;for(u=0;u<t;u++){for(x=Math.max(x,Math.abs(r[u])+Math.abs(e[u])),h=u;h<t&&!(Math.abs(e[h])<=k*x);)h++;if(h>u){b=0;do{for(b+=1,i=r[u],c=(r[u+1]-i)/(2*e[u]),f=(0,C.G)(c,1),c<0&&(f=-f),r[u]=e[u]/(c+f),r[u+1]=e[u]*(c+f),d=r[u+1],o=i-r[u],s=u+2;s<t;s++)r[s]-=o;for(_+=o,c=r[h],p=1,m=p,g=p,v=e[u+1],w=0,y=0,s=h-1;s>=u;s--)for(g=m,m=p,y=w,i=p*e[s],o=p*c,f=(0,C.G)(c,e[s]),e[s+1]=w*f,w=e[s]/f,p=c/f,c=p*r[s]-w*i,r[s+1]=o+w*(p*i+w*r[s]),l=0;l<t;l++)o=n.get(l,s+1),n.set(l,s+1,w*n.get(l,s)+p*o),n.set(l,s,p*n.get(l,s)-w*o);c=-w*y*g*v*e[u]/d,e[u]=w*c,r[u]=p*c}while(Math.abs(e[u])>k*x)}r[u]=r[u]+_,e[u]=0}for(s=0;s<t-1;s++){for(l=s,c=r[s],a=s+1;a<t;a++)r[a]<c&&(l=a,c=r[a]);if(l!==s)for(r[l]=r[s],r[s]=c,a=0;a<t;a++)c=n.get(a,s),n.set(a,s,n.get(a,l)),n.set(a,l,c)}}(s,u,l,a)}else{let t=new n.Z(s,s),e=new Float64Array(s);for(o=0;o<s;o++)for(i=0;i<s;i++)t.set(i,o,h.get(i,o));!function(t,e,r,n){let i,o,s,a,l,u,h,c=0,f=t-1;for(u=c+1;u<=f-1;u++){for(h=0,a=u;a<=f;a++)h+=Math.abs(e.get(a,u-1));if(0!==h){for(s=0,a=f;a>=u;a--)r[a]=e.get(a,u-1)/h,s+=r[a]*r[a];for(o=Math.sqrt(s),r[u]>0&&(o=-o),s-=r[u]*o,r[u]=r[u]-o,l=u;l<t;l++){for(i=0,a=f;a>=u;a--)i+=r[a]*e.get(a,l);for(i/=s,a=u;a<=f;a++)e.set(a,l,e.get(a,l)-i*r[a])}for(a=0;a<=f;a++){for(i=0,l=f;l>=u;l--)i+=r[l]*e.get(a,l);for(i/=s,l=u;l<=f;l++)e.set(a,l,e.get(a,l)-i*r[l])}r[u]=h*r[u],e.set(u,u-1,h*o)}}for(a=0;a<t;a++)for(l=0;l<t;l++)n.set(a,l,a===l?1:0);for(u=f-1;u>=c+1;u--)if(0!==e.get(u,u-1)){for(a=u+1;a<=f;a++)r[a]=e.get(a,u-1);for(l=u;l<=f;l++){for(o=0,a=u;a<=f;a++)o+=r[a]*n.get(a,l);for(o=o/r[u]/e.get(u,u-1),a=u;a<=f;a++)n.set(a,l,n.get(a,l)+o*r[a])}}}(s,t,e,a),function(t,e,r,n,i){let o,s,a,l,u,h,c,f,d,p,m,g,v,w,y,b=t-1,_=0,x=t-1,k=Number.EPSILON,M=0,S=0,E=0,A=0,C=0,D=0,P=0,R=0;for(o=0;o<t;o++)for((o<_||o>x)&&(r[o]=i.get(o,o),e[o]=0),s=Math.max(o-1,0);s<t;s++)S+=Math.abs(i.get(o,s));for(;b>=_;){for(l=b;l>_&&(D=Math.abs(i.get(l-1,l-1))+Math.abs(i.get(l,l)),0===D&&(D=S),!(Math.abs(i.get(l,l-1))<k*D));)l--;if(l===b)i.set(b,b,i.get(b,b)+M),r[b]=i.get(b,b),e[b]=0,b--,R=0;else if(l===b-1){if(c=i.get(b,b-1)*i.get(b-1,b),E=(i.get(b-1,b-1)-i.get(b,b))/2,A=E*E+c,P=Math.sqrt(Math.abs(A)),i.set(b,b,i.get(b,b)+M),i.set(b-1,b-1,i.get(b-1,b-1)+M),f=i.get(b,b),A>=0){for(P=E>=0?E+P:E-P,r[b-1]=f+P,r[b]=r[b-1],0!==P&&(r[b]=f-c/P),e[b-1]=0,e[b]=0,f=i.get(b,b-1),D=Math.abs(f)+Math.abs(P),E=f/D,A=P/D,C=Math.sqrt(E*E+A*A),E/=C,A/=C,s=b-1;s<t;s++)P=i.get(b-1,s),i.set(b-1,s,A*P+E*i.get(b,s)),i.set(b,s,A*i.get(b,s)-E*P);for(o=0;o<=b;o++)P=i.get(o,b-1),i.set(o,b-1,A*P+E*i.get(o,b)),i.set(o,b,A*i.get(o,b)-E*P);for(o=_;o<=x;o++)P=n.get(o,b-1),n.set(o,b-1,A*P+E*n.get(o,b)),n.set(o,b,A*n.get(o,b)-E*P)}else r[b-1]=f+E,r[b]=f+E,e[b-1]=P,e[b]=-P;b-=2,R=0}else{if(f=i.get(b,b),d=0,c=0,l<b&&(d=i.get(b-1,b-1),c=i.get(b,b-1)*i.get(b-1,b)),10===R){for(M+=f,o=_;o<=b;o++)i.set(o,o,i.get(o,o)-f);D=Math.abs(i.get(b,b-1))+Math.abs(i.get(b-1,b-2)),f=d=.75*D,c=-.4375*D*D}if(30===R&&(D=(d-f)/2,D=D*D+c,D>0)){for(D=Math.sqrt(D),d<f&&(D=-D),D=f-c/((d-f)/2+D),o=_;o<=b;o++)i.set(o,o,i.get(o,o)-D);M+=D,f=d=c=.964}for(R+=1,u=b-2;u>=l&&(P=i.get(u,u),C=f-P,D=d-P,E=(C*D-c)/i.get(u+1,u)+i.get(u,u+1),A=i.get(u+1,u+1)-P-C-D,C=i.get(u+2,u+1),D=Math.abs(E)+Math.abs(A)+Math.abs(C),E/=D,A/=D,C/=D,u!==l)&&!(Math.abs(i.get(u,u-1))*(Math.abs(A)+Math.abs(C))<k*(Math.abs(E)*(Math.abs(i.get(u-1,u-1))+Math.abs(P)+Math.abs(i.get(u+1,u+1)))));)u--;for(o=u+2;o<=b;o++)i.set(o,o-2,0),o>u+2&&i.set(o,o-3,0);for(a=u;a<=b-1&&(w=a!==b-1,a!==u&&(E=i.get(a,a-1),A=i.get(a+1,a-1),C=w?i.get(a+2,a-1):0,f=Math.abs(E)+Math.abs(A)+Math.abs(C),0!==f&&(E/=f,A/=f,C/=f)),0!==f);a++)if(D=Math.sqrt(E*E+A*A+C*C),E<0&&(D=-D),0!==D){for(a!==u?i.set(a,a-1,-D*f):l!==u&&i.set(a,a-1,-i.get(a,a-1)),E+=D,f=E/D,d=A/D,P=C/D,A/=E,C/=E,s=a;s<t;s++)E=i.get(a,s)+A*i.get(a+1,s),w&&(E+=C*i.get(a+2,s),i.set(a+2,s,i.get(a+2,s)-E*P)),i.set(a,s,i.get(a,s)-E*f),i.set(a+1,s,i.get(a+1,s)-E*d);for(o=0;o<=Math.min(b,a+3);o++)E=f*i.get(o,a)+d*i.get(o,a+1),w&&(E+=P*i.get(o,a+2),i.set(o,a+2,i.get(o,a+2)-E*C)),i.set(o,a,i.get(o,a)-E),i.set(o,a+1,i.get(o,a+1)-E*A);for(o=_;o<=x;o++)E=f*n.get(o,a)+d*n.get(o,a+1),w&&(E+=P*n.get(o,a+2),n.set(o,a+2,n.get(o,a+2)-E*C)),n.set(o,a,n.get(o,a)-E),n.set(o,a+1,n.get(o,a+1)-E*A)}}}if(0===S)return;for(b=t-1;b>=0;b--)if(E=r[b],A=e[b],0===A)for(l=b,i.set(b,b,1),o=b-1;o>=0;o--){for(c=i.get(o,o)-E,C=0,s=l;s<=b;s++)C+=i.get(o,s)*i.get(s,b);if(e[o]<0)P=c,D=C;else if(l=o,0===e[o]?i.set(o,b,0!==c?-C/c:-C/(k*S)):(f=i.get(o,o+1),d=i.get(o+1,o),A=(r[o]-E)*(r[o]-E)+e[o]*e[o],h=(f*D-P*C)/A,i.set(o,b,h),i.set(o+1,b,Math.abs(f)>Math.abs(P)?(-C-c*h)/f:(-D-d*h)/P)),h=Math.abs(i.get(o,b)),k*h*h>1)for(s=o;s<=b;s++)i.set(s,b,i.get(s,b)/h)}else if(A<0)for(l=b-1,Math.abs(i.get(b,b-1))>Math.abs(i.get(b-1,b))?(i.set(b-1,b-1,A/i.get(b,b-1)),i.set(b-1,b,-(i.get(b,b)-E)/i.get(b,b-1))):(y=O(0,-i.get(b-1,b),i.get(b-1,b-1)-E,A),i.set(b-1,b-1,y[0]),i.set(b-1,b,y[1])),i.set(b,b-1,0),i.set(b,b,1),o=b-2;o>=0;o--){for(p=0,m=0,s=l;s<=b;s++)p+=i.get(o,s)*i.get(s,b-1),m+=i.get(o,s)*i.get(s,b);if(c=i.get(o,o)-E,e[o]<0)P=c,C=p,D=m;else if(l=o,0===e[o]?(y=O(-p,-m,c,A),i.set(o,b-1,y[0]),i.set(o,b,y[1])):(f=i.get(o,o+1),d=i.get(o+1,o),g=(r[o]-E)*(r[o]-E)+e[o]*e[o]-A*A,v=2*(r[o]-E)*A,0===g&&0===v&&(g=k*S*(Math.abs(c)+Math.abs(A)+Math.abs(f)+Math.abs(d)+Math.abs(P))),y=O(f*C-P*p+A*m,f*D-P*m-A*p,g,v),i.set(o,b-1,y[0]),i.set(o,b,y[1]),Math.abs(f)>Math.abs(P)+Math.abs(A)?(i.set(o+1,b-1,(-p-c*i.get(o,b-1)+A*i.get(o,b))/f),i.set(o+1,b,(-m-c*i.get(o,b)-A*i.get(o,b-1))/f)):(y=O(-C-d*i.get(o,b-1),-D-d*i.get(o,b),P,A),i.set(o+1,b-1,y[0]),i.set(o+1,b,y[1]))),h=Math.max(Math.abs(i.get(o,b-1)),Math.abs(i.get(o,b))),k*h*h>1)for(s=o;s<=b;s++)i.set(s,b-1,i.get(s,b-1)/h),i.set(s,b,i.get(s,b)/h)}for(o=0;o<t;o++)if(o<_||o>x)for(s=o;s<t;s++)n.set(o,s,i.get(o,s));for(s=t-1;s>=_;s--)for(o=_;o<=x;o++){for(P=0,a=_;a<=Math.min(s,x);a++)P+=n.get(o,a)*i.get(a,s);n.set(o,s,P)}}(s,u,l,a,t)}this.n=s,this.e=u,this.d=l,this.V=a}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let t,e,r=this.n,i=this.e,o=this.d,s=new n.Z(r,r);for(t=0;t<r;t++){for(e=0;e<r;e++)s.set(t,e,0);s.set(t,t,o[t]),i[t]>0?s.set(t,t+1,i[t]):i[t]<0&&s.set(t,t-1,i[t])}return s}}function O(t,e,r,n){let i,o;return Math.abs(r)>Math.abs(n)?(i=n/r,o=r+i*n,[(t+i*e)/o,(e-i*t)/o]):(i=r/n,o=n+i*r,[(i*t+e)/o,(i*e-t)/o])}class P{constructor(t){if(!(t=g.Z.checkMatrix(t)).isSymmetric())throw new Error("Matrix is not symmetric");let e,r,i,o=t,s=o.rows,a=new n.Z(s,s),l=!0;for(r=0;r<s;r++){let t=0;for(i=0;i<r;i++){let n=0;for(e=0;e<i;e++)n+=a.get(i,e)*a.get(r,e);n=(o.get(r,i)-n)/a.get(i,i),a.set(r,i,n),t+=n*n}for(t=o.get(r,r)-t,l&=t>0,a.set(r,r,Math.sqrt(Math.max(t,0))),i=r+1;i<s;i++)a.set(r,i,0)}this.L=a,this.positiveDefinite=Boolean(l)}isPositiveDefinite(){return this.positiveDefinite}solve(t){t=g.Z.checkMatrix(t);let e=this.L,r=e.rows;if(t.rows!==r)throw new Error("Matrix dimensions do not match");if(!1===this.isPositiveDefinite())throw new Error("Matrix is not positive definite");let n,i,o,s=t.columns,a=t.clone();for(o=0;o<r;o++)for(i=0;i<s;i++){for(n=0;n<o;n++)a.set(o,i,a.get(o,i)-a.get(n,i)*e.get(o,n));a.set(o,i,a.get(o,i)/e.get(o,o))}for(o=r-1;o>=0;o--)for(i=0;i<s;i++){for(n=o+1;n<r;n++)a.set(o,i,a.get(o,i)-a.get(n,i)*e.get(n,o));a.set(o,i,a.get(o,i)/e.get(o,o))}return a}get lowerTriangularMatrix(){return this.L}}var R=r(5414);class I{constructor(t,e={}){t=g.Z.checkMatrix(t);let{Y:r}=e;const{scaleScores:i=!1,maxIterations:o=1e3,terminationCriteria:s=1e-10}=e;let a;if(r){if(r=Array.isArray(r)&&"number"==typeof r[0]?n.Z.columnVector(r):g.Z.checkMatrix(r),!r.isColumnVector()||r.rows!==t.rows)throw new Error("Y must be a column vector of length X.rows");a=r}else a=t.getColumnVector(0);let l,u,h,c,f=1;for(let e=0;e<o&&f>s;e++)h=t.transpose().mmul(a).div(a.transpose().mmul(a).get(0,0)),h=h.div(h.norm()),l=t.mmul(h).div(h.transpose().mmul(h).get(0,0)),e>0&&(f=l.clone().sub(c).pow(2).sum()),c=l.clone(),r?(u=r.transpose().mmul(l).div(l.transpose().mmul(l).get(0,0)),u=u.div(u.norm()),a=r.mmul(u).div(u.transpose().mmul(u).get(0,0))):a=l;if(r){let e=t.transpose().mmul(l).div(l.transpose().mmul(l).get(0,0));e=e.div(e.norm());let n=t.clone().sub(l.clone().mmul(e.transpose())),i=a.transpose().mmul(l).div(l.transpose().mmul(l).get(0,0)),o=r.clone().sub(l.clone().mulS(i.get(0,0)).mmul(u.transpose()));this.t=l,this.p=e.transpose(),this.w=h.transpose(),this.q=u,this.u=a,this.s=l.transpose().mmul(l),this.xResidual=n,this.yResidual=o,this.betas=i}else this.w=h.transpose(),this.s=l.transpose().mmul(l).sqrt(),this.t=i?l.clone().div(this.s.get(0,0)):l,this.xResidual=t.sub(l.mmul(h.transpose()))}}},5591:(t,e,r)=>{"use strict";r.d(e,{X:()=>u,Z:()=>c});var n=r(4805);const i=" ".repeat(2),o=" ".repeat(4);function s(t,e={}){const{maxRows:r=15,maxColumns:n=10,maxNumSize:s=8}=e;return`${t.constructor.name} {\n${i}[\n${o}${function(t,e,r,n){const{rows:i,columns:s}=t,l=Math.min(i,e),u=Math.min(s,r),h=[];for(let e=0;e<l;e++){let r=[];for(let i=0;i<u;i++)r.push(a(t.get(e,i),n));h.push(`${r.join(" ")}`)}u!==s&&(h[h.length-1]+=` ... ${s-r} more columns`);l!==i&&h.push(`... ${i-e} more rows`);return h.join(`\n${o}`)}(t,r,n,s)}\n${i}]\n${i}rows: ${t.rows}\n${i}columns: ${t.columns}\n}`}function a(t,e){const r=String(t);if(r.length<=e)return r.padEnd(e," ");const n=t.toPrecision(e-2);if(n.length<=e)return n;const i=t.toExponential(e-2),o=i.indexOf("e"),s=i.slice(o);return i.slice(0,e-s.length)+s}var l=r(7929);class u{static from1DArray(t,e,r){if(t*e!==r.length)throw new RangeError("data length does not match given dimensions");let n=new c(t,e);for(let i=0;i<t;i++)for(let t=0;t<e;t++)n.set(i,t,r[i*e+t]);return n}static rowVector(t){let e=new c(1,t.length);for(let r=0;r<t.length;r++)e.set(0,r,t[r]);return e}static columnVector(t){let e=new c(t.length,1);for(let r=0;r<t.length;r++)e.set(r,0,t[r]);return e}static zeros(t,e){return new c(t,e)}static ones(t,e){return new c(t,e).fill(1)}static rand(t,e,r={}){if("object"!=typeof r)throw new TypeError("options must be an object");const{random:n=Math.random}=r;let i=new c(t,e);for(let r=0;r<t;r++)for(let t=0;t<e;t++)i.set(r,t,n());return i}static randInt(t,e,r={}){if("object"!=typeof r)throw new TypeError("options must be an object");const{min:n=0,max:i=1e3,random:o=Math.random}=r;if(!Number.isInteger(n))throw new TypeError("min must be an integer");if(!Number.isInteger(i))throw new TypeError("max must be an integer");if(n>=i)throw new RangeError("min must be smaller than max");let s=i-n,a=new c(t,e);for(let r=0;r<t;r++)for(let t=0;t<e;t++){let e=n+Math.round(o()*s);a.set(r,t,e)}return a}static eye(t,e,r){void 0===e&&(e=t),void 0===r&&(r=1);let n=Math.min(t,e),i=this.zeros(t,e);for(let t=0;t<n;t++)i.set(t,t,r);return i}static diag(t,e,r){let n=t.length;void 0===e&&(e=n),void 0===r&&(r=e);let i=Math.min(n,e,r),o=this.zeros(e,r);for(let e=0;e<i;e++)o.set(e,e,t[e]);return o}static min(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);let r=t.rows,n=t.columns,i=new c(r,n);for(let o=0;o<r;o++)for(let r=0;r<n;r++)i.set(o,r,Math.min(t.get(o,r),e.get(o,r)));return i}static max(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);let r=t.rows,n=t.columns,i=new this(r,n);for(let o=0;o<r;o++)for(let r=0;r<n;r++)i.set(o,r,Math.max(t.get(o,r),e.get(o,r)));return i}static checkMatrix(t){return u.isMatrix(t)?t:new c(t)}static isMatrix(t){return null!=t&&"Matrix"===t.klass}get size(){return this.rows*this.columns}apply(t){if("function"!=typeof t)throw new TypeError("callback must be a function");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)t.call(this,e,r);return this}to1DArray(){let t=[];for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)t.push(this.get(e,r));return t}to2DArray(){let t=[];for(let e=0;e<this.rows;e++){t.push([]);for(let r=0;r<this.columns;r++)t[e].push(this.get(e,r))}return t}toJSON(){return this.to2DArray()}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isEmpty(){return 0===this.rows||0===this.columns}isSymmetric(){if(this.isSquare()){for(let t=0;t<this.rows;t++)for(let e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}isEchelonForm(){let t=0,e=0,r=-1,n=!0,i=!1;for(;t<this.rows&&n;){for(e=0,i=!1;e<this.columns&&!1===i;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>r?(i=!0,r=e):(n=!1,i=!0);t++}return n}isReducedEchelonForm(){let t=0,e=0,r=-1,n=!0,i=!1;for(;t<this.rows&&n;){for(e=0,i=!1;e<this.columns&&!1===i;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>r?(i=!0,r=e):(n=!1,i=!0);for(let r=e+1;r<this.rows;r++)0!==this.get(t,r)&&(n=!1);t++}return n}echelonForm(){let t=this.clone(),e=0,r=0;for(;e<t.rows&&r<t.columns;){let n=e;for(let i=e;i<t.rows;i++)t.get(i,r)>t.get(n,r)&&(n=i);if(0===t.get(n,r))r++;else{t.swapRows(e,n);let i=t.get(e,r);for(let n=r;n<t.columns;n++)t.set(e,n,t.get(e,n)/i);for(let n=e+1;n<t.rows;n++){let i=t.get(n,r)/t.get(e,r);t.set(n,r,0);for(let o=r+1;o<t.columns;o++)t.set(n,o,t.get(n,o)-t.get(e,o)*i)}e++,r++}}return t}reducedEchelonForm(){let t=this.echelonForm(),e=t.columns,r=t.rows,n=r-1;for(;n>=0;)if(0===t.maxRow(n))n--;else{let i=0,o=!1;for(;i<r&&!1===o;)1===t.get(n,i)?o=!0:i++;for(let r=0;r<n;r++){let o=t.get(r,i);for(let s=i;s<e;s++){let e=t.get(r,s)-o*t.get(n,s);t.set(r,s,e)}}n--}return t}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(t={}){if("object"!=typeof t)throw new TypeError("options must be an object");const{rows:e=1,columns:r=1}=t;if(!Number.isInteger(e)||e<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(r)||r<=0)throw new TypeError("columns must be a positive integer");let n=new c(this.rows*e,this.columns*r);for(let t=0;t<e;t++)for(let e=0;e<r;e++)n.setSubMatrix(this,this.rows*t,this.columns*e);return n}fill(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,t);return this}neg(){return this.mulS(-1)}getRow(t){(0,l.zb)(this,t);let e=[];for(let r=0;r<this.columns;r++)e.push(this.get(t,r));return e}getRowVector(t){return c.rowVector(this.getRow(t))}setRow(t,e){(0,l.zb)(this,t),e=(0,l.on)(this,e);for(let r=0;r<this.columns;r++)this.set(t,r,e[r]);return this}swapRows(t,e){(0,l.zb)(this,t),(0,l.zb)(this,e);for(let r=0;r<this.columns;r++){let n=this.get(t,r);this.set(t,r,this.get(e,r)),this.set(e,r,n)}return this}getColumn(t){(0,l.bp)(this,t);let e=[];for(let r=0;r<this.rows;r++)e.push(this.get(r,t));return e}getColumnVector(t){return c.columnVector(this.getColumn(t))}setColumn(t,e){(0,l.bp)(this,t),e=(0,l.Um)(this,e);for(let r=0;r<this.rows;r++)this.set(r,t,e[r]);return this}swapColumns(t,e){(0,l.bp)(this,t),(0,l.bp)(this,e);for(let r=0;r<this.rows;r++){let n=this.get(r,t);this.set(r,t,this.get(r,e)),this.set(r,e,n)}return this}addRowVector(t){t=(0,l.on)(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t[r]);return this}subRowVector(t){t=(0,l.on)(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t[r]);return this}mulRowVector(t){t=(0,l.on)(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t[r]);return this}divRowVector(t){t=(0,l.on)(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t[r]);return this}addColumnVector(t){t=(0,l.Um)(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t[e]);return this}subColumnVector(t){t=(0,l.Um)(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t[e]);return this}mulColumnVector(t){t=(0,l.Um)(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t[e]);return this}divColumnVector(t){t=(0,l.Um)(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t[e]);return this}mulRow(t,e){(0,l.zb)(this,t);for(let r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)*e);return this}mulColumn(t,e){(0,l.bp)(this,t);for(let r=0;r<this.rows;r++)this.set(r,t,this.get(r,t)*e);return this}max(){if(this.isEmpty())return NaN;let t=this.get(0,0);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.get(e,r)>t&&(t=this.get(e,r));return t}maxIndex(){(0,l.cT)(this);let t=this.get(0,0),e=[0,0];for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.get(r,n)>t&&(t=this.get(r,n),e[0]=r,e[1]=n);return e}min(){if(this.isEmpty())return NaN;let t=this.get(0,0);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.get(e,r)<t&&(t=this.get(e,r));return t}minIndex(){(0,l.cT)(this);let t=this.get(0,0),e=[0,0];for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.get(r,n)<t&&(t=this.get(r,n),e[0]=r,e[1]=n);return e}maxRow(t){if((0,l.zb)(this,t),this.isEmpty())return NaN;let e=this.get(t,0);for(let r=1;r<this.columns;r++)this.get(t,r)>e&&(e=this.get(t,r));return e}maxRowIndex(t){(0,l.zb)(this,t),(0,l.cT)(this);let e=this.get(t,0),r=[t,0];for(let n=1;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n),r[1]=n);return r}minRow(t){if((0,l.zb)(this,t),this.isEmpty())return NaN;let e=this.get(t,0);for(let r=1;r<this.columns;r++)this.get(t,r)<e&&(e=this.get(t,r));return e}minRowIndex(t){(0,l.zb)(this,t),(0,l.cT)(this);let e=this.get(t,0),r=[t,0];for(let n=1;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n),r[1]=n);return r}maxColumn(t){if((0,l.bp)(this,t),this.isEmpty())return NaN;let e=this.get(0,t);for(let r=1;r<this.rows;r++)this.get(r,t)>e&&(e=this.get(r,t));return e}maxColumnIndex(t){(0,l.bp)(this,t),(0,l.cT)(this);let e=this.get(0,t),r=[0,t];for(let n=1;n<this.rows;n++)this.get(n,t)>e&&(e=this.get(n,t),r[0]=n);return r}minColumn(t){if((0,l.bp)(this,t),this.isEmpty())return NaN;let e=this.get(0,t);for(let r=1;r<this.rows;r++)this.get(r,t)<e&&(e=this.get(r,t));return e}minColumnIndex(t){(0,l.bp)(this,t),(0,l.cT)(this);let e=this.get(0,t),r=[0,t];for(let n=1;n<this.rows;n++)this.get(n,t)<e&&(e=this.get(n,t),r[0]=n);return r}diag(){let t=Math.min(this.rows,this.columns),e=[];for(let r=0;r<t;r++)e.push(this.get(r,r));return e}norm(t="frobenius"){let e=0;if("max"===t)return this.max();if("frobenius"===t){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)e+=this.get(t,r)*this.get(t,r);return Math.sqrt(e)}throw new RangeError(`unknown norm type: ${t}`)}cumulativeSum(){let t=0;for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)t+=this.get(e,r),this.set(e,r,t);return this}dot(t){u.isMatrix(t)&&(t=t.to1DArray());let e=this.to1DArray();if(e.length!==t.length)throw new RangeError("vectors do not have the same size");let r=0;for(let n=0;n<e.length;n++)r+=e[n]*t[n];return r}mmul(t){t=c.checkMatrix(t);let e=this.rows,r=this.columns,n=t.columns,i=new c(e,n),o=new Float64Array(r);for(let s=0;s<n;s++){for(let e=0;e<r;e++)o[e]=t.get(e,s);for(let t=0;t<e;t++){let e=0;for(let n=0;n<r;n++)e+=this.get(t,n)*o[n];i.set(t,s,e)}}return i}strassen2x2(t){t=c.checkMatrix(t);let e=new c(2,2);const r=this.get(0,0),n=t.get(0,0),i=this.get(0,1),o=t.get(0,1),s=this.get(1,0),a=t.get(1,0),l=this.get(1,1),u=t.get(1,1),h=(r+l)*(n+u),f=(s+l)*n,d=r*(o-u),p=l*(a-n),m=(r+i)*u,g=h+p-m+(i-l)*(a+u),v=d+m,w=f+p,y=h-f+d+(s-r)*(n+o);return e.set(0,0,g),e.set(0,1,v),e.set(1,0,w),e.set(1,1,y),e}strassen3x3(t){t=c.checkMatrix(t);let e=new c(3,3);const r=this.get(0,0),n=this.get(0,1),i=this.get(0,2),o=this.get(1,0),s=this.get(1,1),a=this.get(1,2),l=this.get(2,0),u=this.get(2,1),h=this.get(2,2),f=t.get(0,0),d=t.get(0,1),p=t.get(0,2),m=t.get(1,0),g=t.get(1,1),v=t.get(1,2),w=t.get(2,0),y=t.get(2,1),b=t.get(2,2),_=(r-o)*(-d+g),x=(-r+o+s)*(f-d+g),k=(o+s)*(-f+d),M=r*f,S=(-r+l+u)*(f-p+v),E=(-r+l)*(p-v),A=(l+u)*(-f+p),C=(-i+u+h)*(g+w-y),D=(i-h)*(g-y),O=i*w,P=(u+h)*(-w+y),R=(-i+s+a)*(v+w-b),I=(i-a)*(v-b),T=(s+a)*(-w+b),F=M+O+n*m,j=(r+n+i-o-s-u-h)*g+x+k+M+C+O+P,N=M+S+A+(r+n+i-s-a-l-u)*v+O+R+T,B=_+s*(-f+d+m-g-v-w+b)+x+M+O+R+I,U=_+x+k+M+a*y,L=O+R+I+T+o*p,$=M+S+E+u*(-f+p+m-g-v-w+y)+C+D+O,z=C+D+O+P+l*d,q=M+S+E+A+h*b;return e.set(0,0,F),e.set(0,1,j),e.set(0,2,N),e.set(1,0,B),e.set(1,1,U),e.set(1,2,L),e.set(2,0,$),e.set(2,1,z),e.set(2,2,q),e}mmulStrassen(t){t=c.checkMatrix(t);let e=this.clone(),r=e.rows,n=e.columns,i=t.rows,o=t.columns;function s(t,e,r){let n=t.rows,i=t.columns;if(n===e&&i===r)return t;{let n=u.zeros(e,r);return n=n.setSubMatrix(t,0,0),n}}n!==i&&console.warn(`Multiplying ${r} x ${n} and ${i} x ${o} matrix: dimensions do not match.`);let a=Math.max(r,i),l=Math.max(n,o);return e=s(e,a,l),function t(e,r,n,i){if(n<=512||i<=512)return e.mmul(r);n%2==1&&i%2==1?(e=s(e,n+1,i+1),r=s(r,n+1,i+1)):n%2==1?(e=s(e,n+1,i),r=s(r,n+1,i)):i%2==1&&(e=s(e,n,i+1),r=s(r,n,i+1));let o=parseInt(e.rows/2,10),a=parseInt(e.columns/2,10),l=e.subMatrix(0,o-1,0,a-1),h=r.subMatrix(0,o-1,0,a-1),c=e.subMatrix(0,o-1,a,e.columns-1),f=r.subMatrix(0,o-1,a,r.columns-1),d=e.subMatrix(o,e.rows-1,0,a-1),p=r.subMatrix(o,r.rows-1,0,a-1),m=e.subMatrix(o,e.rows-1,a,e.columns-1),g=r.subMatrix(o,r.rows-1,a,r.columns-1),v=t(u.add(l,m),u.add(h,g),o,a),w=t(u.add(d,m),h,o,a),y=t(l,u.sub(f,g),o,a),b=t(m,u.sub(p,h),o,a),_=t(u.add(l,c),g,o,a),x=t(u.sub(d,l),u.add(h,f),o,a),k=t(u.sub(c,m),u.add(p,g),o,a),M=u.add(v,b);M.sub(_),M.add(k);let S=u.add(y,_),E=u.add(w,b),A=u.sub(v,w);A.add(y),A.add(x);let C=u.zeros(2*M.rows,2*M.columns);return C=C.setSubMatrix(M,0,0),C=C.setSubMatrix(S,M.rows,0),C=C.setSubMatrix(E,0,M.columns),C=C.setSubMatrix(A,M.rows,M.columns),C.subMatrix(0,n-1,0,i-1)}(e,t=s(t,a,l),a,l)}scaleRows(t={}){if("object"!=typeof t)throw new TypeError("options must be an object");const{min:e=0,max:r=1}=t;if(!Number.isFinite(e))throw new TypeError("min must be a number");if(!Number.isFinite(r))throw new TypeError("max must be a number");if(e>=r)throw new RangeError("min must be smaller than max");let i=new c(this.rows,this.columns);for(let t=0;t<this.rows;t++){const o=this.getRow(t);o.length>0&&(0,n.Z)(o,{min:e,max:r,output:o}),i.setRow(t,o)}return i}scaleColumns(t={}){if("object"!=typeof t)throw new TypeError("options must be an object");const{min:e=0,max:r=1}=t;if(!Number.isFinite(e))throw new TypeError("min must be a number");if(!Number.isFinite(r))throw new TypeError("max must be a number");if(e>=r)throw new RangeError("min must be smaller than max");let i=new c(this.rows,this.columns);for(let t=0;t<this.columns;t++){const o=this.getColumn(t);o.length&&(0,n.Z)(o,{min:e,max:r,output:o}),i.setColumn(t,o)}return i}flipRows(){const t=Math.ceil(this.columns/2);for(let e=0;e<this.rows;e++)for(let r=0;r<t;r++){let t=this.get(e,r),n=this.get(e,this.columns-1-r);this.set(e,r,n),this.set(e,this.columns-1-r,t)}return this}flipColumns(){const t=Math.ceil(this.rows/2);for(let e=0;e<this.columns;e++)for(let r=0;r<t;r++){let t=this.get(r,e),n=this.get(this.rows-1-r,e);this.set(r,e,n),this.set(this.rows-1-r,e,t)}return this}kroneckerProduct(t){t=c.checkMatrix(t);let e=this.rows,r=this.columns,n=t.rows,i=t.columns,o=new c(e*n,r*i);for(let s=0;s<e;s++)for(let e=0;e<r;e++)for(let r=0;r<n;r++)for(let a=0;a<i;a++)o.set(n*s+r,i*e+a,this.get(s,e)*t.get(r,a));return o}kroneckerSum(t){if(t=c.checkMatrix(t),!this.isSquare()||!t.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let e=this.rows,r=t.rows,n=this.kroneckerProduct(c.eye(r,r)),i=c.eye(e,e).kroneckerProduct(t);return n.add(i)}transpose(){let t=new c(this.columns,this.rows);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)t.set(r,e,this.get(e,r));return t}sortRows(t=h){for(let e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}sortColumns(t=h){for(let e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}subMatrix(t,e,r,n){(0,l.J5)(this,t,e,r,n);let i=new c(e-t+1,n-r+1);for(let o=t;o<=e;o++)for(let e=r;e<=n;e++)i.set(o-t,e-r,this.get(o,e));return i}subMatrixRow(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=this.columns-1),e>r||e<0||e>=this.columns||r<0||r>=this.columns)throw new RangeError("Argument out of range");let n=new c(t.length,r-e+1);for(let i=0;i<t.length;i++)for(let o=e;o<=r;o++){if(t[i]<0||t[i]>=this.rows)throw new RangeError(`Row index out of range: ${t[i]}`);n.set(i,o-e,this.get(t[i],o))}return n}subMatrixColumn(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=this.rows-1),e>r||e<0||e>=this.rows||r<0||r>=this.rows)throw new RangeError("Argument out of range");let n=new c(r-e+1,t.length);for(let i=0;i<t.length;i++)for(let o=e;o<=r;o++){if(t[i]<0||t[i]>=this.columns)throw new RangeError(`Column index out of range: ${t[i]}`);n.set(o-e,i,this.get(o,t[i]))}return n}setSubMatrix(t,e,r){if((t=c.checkMatrix(t)).isEmpty())return this;let n=e+t.rows-1,i=r+t.columns-1;(0,l.J5)(this,e,n,r,i);for(let n=0;n<t.rows;n++)for(let i=0;i<t.columns;i++)this.set(e+n,r+i,t.get(n,i));return this}selection(t,e){let r=(0,l.N2)(this,t,e),n=new c(t.length,e.length);for(let t=0;t<r.row.length;t++){let e=r.row[t];for(let i=0;i<r.column.length;i++){let o=r.column[i];n.set(t,i,this.get(e,o))}}return n}trace(){let t=Math.min(this.rows,this.columns),e=0;for(let r=0;r<t;r++)e+=this.get(r,r);return e}clone(){let t=new c(this.rows,this.columns);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)t.set(e,r,this.get(e,r));return t}sum(t){switch(t){case"row":return function(t){let e=(0,l.B4)(t.rows);for(let r=0;r<t.rows;++r)for(let n=0;n<t.columns;++n)e[r]+=t.get(r,n);return e}(this);case"column":return function(t){let e=(0,l.B4)(t.columns);for(let r=0;r<t.rows;++r)for(let n=0;n<t.columns;++n)e[n]+=t.get(r,n);return e}(this);case void 0:return function(t){let e=0;for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)e+=t.get(r,n);return e}(this);default:throw new Error(`invalid option: ${t}`)}}product(t){switch(t){case"row":return function(t){let e=(0,l.B4)(t.rows,1);for(let r=0;r<t.rows;++r)for(let n=0;n<t.columns;++n)e[r]*=t.get(r,n);return e}(this);case"column":return function(t){let e=(0,l.B4)(t.columns,1);for(let r=0;r<t.rows;++r)for(let n=0;n<t.columns;++n)e[n]*=t.get(r,n);return e}(this);case void 0:return function(t){let e=1;for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)e*=t.get(r,n);return e}(this);default:throw new Error(`invalid option: ${t}`)}}mean(t){const e=this.sum(t);switch(t){case"row":for(let t=0;t<this.rows;t++)e[t]/=this.columns;return e;case"column":for(let t=0;t<this.columns;t++)e[t]/=this.rows;return e;case void 0:return e/this.size;default:throw new Error(`invalid option: ${t}`)}}variance(t,e={}){if("object"==typeof t&&(e=t,t=void 0),"object"!=typeof e)throw new TypeError("options must be an object");const{unbiased:r=!0,mean:n=this.mean(t)}=e;if("boolean"!=typeof r)throw new TypeError("unbiased must be a boolean");switch(t){case"row":if(!Array.isArray(n))throw new TypeError("mean must be an array");return function(t,e,r){const n=t.rows,i=t.columns,o=[];for(let s=0;s<n;s++){let n=0,a=0,l=0;for(let e=0;e<i;e++)l=t.get(s,e)-r[s],n+=l,a+=l*l;e?o.push((a-n*n/i)/(i-1)):o.push((a-n*n/i)/i)}return o}(this,r,n);case"column":if(!Array.isArray(n))throw new TypeError("mean must be an array");return function(t,e,r){const n=t.rows,i=t.columns,o=[];for(let s=0;s<i;s++){let i=0,a=0,l=0;for(let e=0;e<n;e++)l=t.get(e,s)-r[s],i+=l,a+=l*l;e?o.push((a-i*i/n)/(n-1)):o.push((a-i*i/n)/n)}return o}(this,r,n);case void 0:if("number"!=typeof n)throw new TypeError("mean must be a number");return function(t,e,r){const n=t.rows,i=t.columns,o=n*i;let s=0,a=0,l=0;for(let e=0;e<n;e++)for(let n=0;n<i;n++)l=t.get(e,n)-r,s+=l,a+=l*l;return e?(a-s*s/o)/(o-1):(a-s*s/o)/o}(this,r,n);default:throw new Error(`invalid option: ${t}`)}}standardDeviation(t,e){"object"==typeof t&&(e=t,t=void 0);const r=this.variance(t,e);if(void 0===t)return Math.sqrt(r);for(let t=0;t<r.length;t++)r[t]=Math.sqrt(r[t]);return r}center(t,e={}){if("object"==typeof t&&(e=t,t=void 0),"object"!=typeof e)throw new TypeError("options must be an object");const{center:r=this.mean(t)}=e;switch(t){case"row":if(!Array.isArray(r))throw new TypeError("center must be an array");return function(t,e){for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)-e[r])}(this,r),this;case"column":if(!Array.isArray(r))throw new TypeError("center must be an array");return function(t,e){for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)-e[n])}(this,r),this;case void 0:if("number"!=typeof r)throw new TypeError("center must be a number");return function(t,e){for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)-e)}(this,r),this;default:throw new Error(`invalid option: ${t}`)}}scale(t,e={}){if("object"==typeof t&&(e=t,t=void 0),"object"!=typeof e)throw new TypeError("options must be an object");let r=e.scale;switch(t){case"row":if(void 0===r)r=function(t){const e=[];for(let r=0;r<t.rows;r++){let n=0;for(let e=0;e<t.columns;e++)n+=Math.pow(t.get(r,e),2)/(t.columns-1);e.push(Math.sqrt(n))}return e}(this);else if(!Array.isArray(r))throw new TypeError("scale must be an array");return function(t,e){for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)/e[r])}(this,r),this;case"column":if(void 0===r)r=function(t){const e=[];for(let r=0;r<t.columns;r++){let n=0;for(let e=0;e<t.rows;e++)n+=Math.pow(t.get(e,r),2)/(t.rows-1);e.push(Math.sqrt(n))}return e}(this);else if(!Array.isArray(r))throw new TypeError("scale must be an array");return function(t,e){for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)/e[n])}(this,r),this;case void 0:if(void 0===r)r=function(t){const e=t.size-1;let r=0;for(let n=0;n<t.columns;n++)for(let i=0;i<t.rows;i++)r+=Math.pow(t.get(i,n),2)/e;return Math.sqrt(r)}(this);else if("number"!=typeof r)throw new TypeError("scale must be a number");return function(t,e){for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)/e)}(this,r),this;default:throw new Error(`invalid option: ${t}`)}}toString(t){return s(this,t)}}function h(t,e){return t-e}u.prototype.klass="Matrix","undefined"!=typeof Symbol&&(u.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return s(this)}),u.random=u.rand,u.randomInt=u.randInt,u.diagonal=u.diag,u.prototype.diagonal=u.prototype.diag,u.identity=u.eye,u.prototype.negate=u.prototype.neg,u.prototype.tensorProduct=u.prototype.kroneckerProduct;class c extends u{constructor(t,e){if(super(),c.isMatrix(t))return t.clone();if(Number.isInteger(t)&&t>=0){if(this.data=[],!(Number.isInteger(e)&&e>=0))throw new TypeError("nColumns must be a positive integer");for(let r=0;r<t;r++)this.data.push(new Float64Array(e))}else{if(!Array.isArray(t))throw new TypeError("First argument must be a positive number or an array");{const r=t;if("number"!=typeof(e=(t=r.length)?r[0].length:0))throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let n=0;n<t;n++){if(r[n].length!==e)throw new RangeError("Inconsistent array dimensions");this.data.push(Float64Array.from(r[n]))}}}this.rows=t,this.columns=e}set(t,e,r){return this.data[t][e]=r,this}get(t,e){return this.data[t][e]}removeRow(t){return(0,l.zb)(this,t),this.data.splice(t,1),this.rows-=1,this}addRow(t,e){return void 0===e&&(e=t,t=this.rows),(0,l.zb)(this,t,!0),e=Float64Array.from((0,l.on)(this,e)),this.data.splice(t,0,e),this.rows+=1,this}removeColumn(t){(0,l.bp)(this,t);for(let e=0;e<this.rows;e++){const r=new Float64Array(this.columns-1);for(let n=0;n<t;n++)r[n]=this.data[e][n];for(let n=t+1;n<this.columns;n++)r[n-1]=this.data[e][n];this.data[e]=r}return this.columns-=1,this}addColumn(t,e){void 0===e&&(e=t,t=this.columns),(0,l.bp)(this,t,!0),e=(0,l.Um)(this,e);for(let r=0;r<this.rows;r++){const n=new Float64Array(this.columns+1);let i=0;for(;i<t;i++)n[i]=this.data[r][i];for(n[i++]=e[r];i<this.columns+1;i++)n[i]=this.data[r][i-1];this.data[r]=n}return this.columns+=1,this}}!function(t,e){t.prototype.add=function(t){return"number"==typeof t?this.addS(t):this.addM(t)},t.prototype.addS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t);return this},t.prototype.addM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t.get(e,r));return this},t.add=function(t,r){return new e(t).add(r)},t.prototype.sub=function(t){return"number"==typeof t?this.subS(t):this.subM(t)},t.prototype.subS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t);return this},t.prototype.subM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t.get(e,r));return this},t.sub=function(t,r){return new e(t).sub(r)},t.prototype.subtract=t.prototype.sub,t.prototype.subtractS=t.prototype.subS,t.prototype.subtractM=t.prototype.subM,t.subtract=t.sub,t.prototype.mul=function(t){return"number"==typeof t?this.mulS(t):this.mulM(t)},t.prototype.mulS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t);return this},t.prototype.mulM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t.get(e,r));return this},t.mul=function(t,r){return new e(t).mul(r)},t.prototype.multiply=t.prototype.mul,t.prototype.multiplyS=t.prototype.mulS,t.prototype.multiplyM=t.prototype.mulM,t.multiply=t.mul,t.prototype.div=function(t){return"number"==typeof t?this.divS(t):this.divM(t)},t.prototype.divS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t);return this},t.prototype.divM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t.get(e,r));return this},t.div=function(t,r){return new e(t).div(r)},t.prototype.divide=t.prototype.div,t.prototype.divideS=t.prototype.divS,t.prototype.divideM=t.prototype.divM,t.divide=t.div,t.prototype.mod=function(t){return"number"==typeof t?this.modS(t):this.modM(t)},t.prototype.modS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)%t);return this},t.prototype.modM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)%t.get(e,r));return this},t.mod=function(t,r){return new e(t).mod(r)},t.prototype.modulus=t.prototype.mod,t.prototype.modulusS=t.prototype.modS,t.prototype.modulusM=t.prototype.modM,t.modulus=t.mod,t.prototype.and=function(t){return"number"==typeof t?this.andS(t):this.andM(t)},t.prototype.andS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)&t);return this},t.prototype.andM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)&t.get(e,r));return this},t.and=function(t,r){return new e(t).and(r)},t.prototype.or=function(t){return"number"==typeof t?this.orS(t):this.orM(t)},t.prototype.orS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)|t);return this},t.prototype.orM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)|t.get(e,r));return this},t.or=function(t,r){return new e(t).or(r)},t.prototype.xor=function(t){return"number"==typeof t?this.xorS(t):this.xorM(t)},t.prototype.xorS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)^t);return this},t.prototype.xorM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)^t.get(e,r));return this},t.xor=function(t,r){return new e(t).xor(r)},t.prototype.leftShift=function(t){return"number"==typeof t?this.leftShiftS(t):this.leftShiftM(t)},t.prototype.leftShiftS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)<<t);return this},t.prototype.leftShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)<<t.get(e,r));return this},t.leftShift=function(t,r){return new e(t).leftShift(r)},t.prototype.signPropagatingRightShift=function(t){return"number"==typeof t?this.signPropagatingRightShiftS(t):this.signPropagatingRightShiftM(t)},t.prototype.signPropagatingRightShiftS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)>>t);return this},t.prototype.signPropagatingRightShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)>>t.get(e,r));return this},t.signPropagatingRightShift=function(t,r){return new e(t).signPropagatingRightShift(r)},t.prototype.rightShift=function(t){return"number"==typeof t?this.rightShiftS(t):this.rightShiftM(t)},t.prototype.rightShiftS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)>>>t);return this},t.prototype.rightShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)>>>t.get(e,r));return this},t.rightShift=function(t,r){return new e(t).rightShift(r)},t.prototype.zeroFillRightShift=t.prototype.rightShift,t.prototype.zeroFillRightShiftS=t.prototype.rightShiftS,t.prototype.zeroFillRightShiftM=t.prototype.rightShiftM,t.zeroFillRightShift=t.rightShift,t.prototype.not=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,~this.get(t,e));return this},t.not=function(t){return new e(t).not()},t.prototype.abs=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.abs(this.get(t,e)));return this},t.abs=function(t){return new e(t).abs()},t.prototype.acos=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.acos(this.get(t,e)));return this},t.acos=function(t){return new e(t).acos()},t.prototype.acosh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.acosh(this.get(t,e)));return this},t.acosh=function(t){return new e(t).acosh()},t.prototype.asin=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.asin(this.get(t,e)));return this},t.asin=function(t){return new e(t).asin()},t.prototype.asinh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.asinh(this.get(t,e)));return this},t.asinh=function(t){return new e(t).asinh()},t.prototype.atan=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.atan(this.get(t,e)));return this},t.atan=function(t){return new e(t).atan()},t.prototype.atanh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.atanh(this.get(t,e)));return this},t.atanh=function(t){return new e(t).atanh()},t.prototype.cbrt=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.cbrt(this.get(t,e)));return this},t.cbrt=function(t){return new e(t).cbrt()},t.prototype.ceil=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.ceil(this.get(t,e)));return this},t.ceil=function(t){return new e(t).ceil()},t.prototype.clz32=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.clz32(this.get(t,e)));return this},t.clz32=function(t){return new e(t).clz32()},t.prototype.cos=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.cos(this.get(t,e)));return this},t.cos=function(t){return new e(t).cos()},t.prototype.cosh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.cosh(this.get(t,e)));return this},t.cosh=function(t){return new e(t).cosh()},t.prototype.exp=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.exp(this.get(t,e)));return this},t.exp=function(t){return new e(t).exp()},t.prototype.expm1=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.expm1(this.get(t,e)));return this},t.expm1=function(t){return new e(t).expm1()},t.prototype.floor=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.floor(this.get(t,e)));return this},t.floor=function(t){return new e(t).floor()},t.prototype.fround=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.fround(this.get(t,e)));return this},t.fround=function(t){return new e(t).fround()},t.prototype.log=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log(this.get(t,e)));return this},t.log=function(t){return new e(t).log()},t.prototype.log1p=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log1p(this.get(t,e)));return this},t.log1p=function(t){return new e(t).log1p()},t.prototype.log10=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log10(this.get(t,e)));return this},t.log10=function(t){return new e(t).log10()},t.prototype.log2=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log2(this.get(t,e)));return this},t.log2=function(t){return new e(t).log2()},t.prototype.round=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.round(this.get(t,e)));return this},t.round=function(t){return new e(t).round()},t.prototype.sign=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sign(this.get(t,e)));return this},t.sign=function(t){return new e(t).sign()},t.prototype.sin=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sin(this.get(t,e)));return this},t.sin=function(t){return new e(t).sin()},t.prototype.sinh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sinh(this.get(t,e)));return this},t.sinh=function(t){return new e(t).sinh()},t.prototype.sqrt=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sqrt(this.get(t,e)));return this},t.sqrt=function(t){return new e(t).sqrt()},t.prototype.tan=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.tan(this.get(t,e)));return this},t.tan=function(t){return new e(t).tan()},t.prototype.tanh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.tanh(this.get(t,e)));return this},t.tanh=function(t){return new e(t).tanh()},t.prototype.trunc=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.trunc(this.get(t,e)));return this},t.trunc=function(t){return new e(t).trunc()},t.pow=function(t,r){return new e(t).pow(r)},t.prototype.pow=function(t){return"number"==typeof t?this.powS(t):this.powM(t)},t.prototype.powS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,Math.pow(this.get(e,r),t));return this},t.prototype.powM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,Math.pow(this.get(e,r),t.get(e,r)));return this}}(u,c)},7929:(t,e,r)=>{"use strict";function n(t,e,r){let n=r?t.rows:t.rows-1;if(e<0||e>n)throw new RangeError("Row index out of range")}function i(t,e,r){let n=r?t.columns:t.columns-1;if(e<0||e>n)throw new RangeError("Column index out of range")}function o(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.columns)throw new RangeError("vector size must be the same as the number of columns");return e}function s(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.rows)throw new RangeError("vector size must be the same as the number of rows");return e}function a(t,e,r){return{row:l(t,e),column:u(t,r)}}function l(t,e){if("object"!=typeof e)throw new TypeError("unexpected type for row indices");if(e.some((e=>e<0||e>=t.rows)))throw new RangeError("row indices are out of range");return Array.isArray(e)||(e=Array.from(e)),e}function u(t,e){if("object"!=typeof e)throw new TypeError("unexpected type for column indices");if(e.some((e=>e<0||e>=t.columns)))throw new RangeError("column indices are out of range");return Array.isArray(e)||(e=Array.from(e)),e}function h(t,e,r,n,i){if(5!==arguments.length)throw new RangeError("expected 4 arguments");if(f("startRow",e),f("endRow",r),f("startColumn",n),f("endColumn",i),e>r||n>i||e<0||e>=t.rows||r<0||r>=t.rows||n<0||n>=t.columns||i<0||i>=t.columns)throw new RangeError("Submatrix indices are out of range")}function c(t,e=0){let r=[];for(let n=0;n<t;n++)r.push(e);return r}function f(t,e){if("number"!=typeof e)throw new TypeError(`${t} must be a number`)}function d(t){if(t.isEmpty())throw new Error("Empty matrix has no elements to index")}r.d(e,{zb:()=>n,bp:()=>i,on:()=>o,Um:()=>s,N2:()=>a,ZR:()=>l,g:()=>u,J5:()=>h,B4:()=>c,cT:()=>d})},2014:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(5591);class i extends n.X{constructor(t){super(),this.data=t,this.rows=t.length,this.columns=t[0].length}set(t,e,r){return this.data[t][e]=r,this}get(t,e){return this.data[t][e]}}},5388:t=>{"use strict";const e={TD1:"TD1",TD2:"TD2",TD3:"TD3",SWISS_DRIVING_LICENSE:"SWISS_DRIVING_LICENSE",FRENCH_NATIONAL_ID:"FRENCH_NATIONAL_ID"};Object.freeze(e),t.exports=e},3437:t=>{"use strict";const e={AFG:"Afghanistan",ALA:"land Islands",ALB:"Albania",DZA:"Algeria",ASM:"American Samoa",AND:"Andorra",AGO:"Angola",AIA:"Anguilla",ATA:"Antarctica",ATG:"Antigua and Barbuda",ARG:"Argentina",ARM:"Armenia",ABW:"Aruba",AUS:"Australia",AUT:"Austria",AZE:"Azerbaijan",BHS:"Bahamas",BHR:"Bahrain",BGD:"Bangladesh",BRB:"Barbados",BLR:"Belarus",BEL:"Belgium",BLZ:"Belize",BEN:"Benin",BMU:"Bermuda",BTN:"Bhutan",BOL:"Bolivia, Plurinational State of",BES:"Bonaire, Sint Eustatius and Saba",BIH:"Bosnia and Herzegovina",BWA:"Botswana",BVT:"Bouvet Island",BRA:"Brazil",IOT:"British Indian Ocean Territory",BRN:"Brunei Darussalam",BGR:"Bulgaria",BFA:"Burkina Faso",BDI:"Burundi",CPV:"Cabo Verde",KHM:"Cambodia",CMR:"Cameroon",CAN:"Canada",CYM:"Cayman Islands",CAF:"Central African Republic",TCD:"Chad",CHL:"Chile",CHN:"China",CXR:"Christmas Island",CCK:"Cocos (Keeling) Islands",COL:"Colombia",COM:"Comoros",COG:"Congo",COD:"Congo, Democratic Republic of the",COK:"Cook Islands",CRI:"Costa Rica",CIV:"Cte dIvoire",HRV:"Croatia",CUB:"Cuba",CUW:"Curaao",CYP:"Cyprus",CZE:"Czech Republic",DNK:"Denmark",DJI:"Djibouti",DMA:"Dominica",DOM:"Dominican Republic",ECU:"Ecuador",EGY:"Egypt",SLV:"El Salvador",GNQ:"Equatorial Guinea",ERI:"Eritrea",EST:"Estonia",ETH:"Ethiopia",FLK:"Falkland Islands (Malvinas)",FRO:"Faroe Islands",FJI:"Fiji",FIN:"Finland",FRA:"France",GUF:"French Guiana",PYF:"French Polynesia",ATF:"French Southern Territories",GAB:"Gabon",GMB:"Gambia",GEO:"Georgia",D:"Germany",GHA:"Ghana",GIB:"Gibraltar",GRC:"Greece",GRL:"Greenland",GRD:"Grenada",GLP:"Guadeloupe",GUM:"Guam",GTM:"Guatemala",GGY:"Guernsey",GIN:"Guinea",GNB:"Guinea-Bissau",GUY:"Guyana",HTI:"Haiti",HMD:"Heard Island and McDonald Islands",VAT:"Holy See (Vatican City State)",HND:"Honduras",HKG:"Hong Kong Special Administrative Region of China",HUN:"Hungary",ISL:"Iceland",IND:"India",IDN:"Indonesia",IRN:"Iran (Islamic Republic of)",IRQ:"Iraq",IRL:"Ireland",IMN:"Isle of Man",ISR:"Israel",ITA:"Italy",JAM:"Jamaica",JPN:"Japan",JEY:"Jersey",JOR:"Jordan",KAZ:"Kazakhstan",KEN:"Kenya",KIR:"Kiribati",PRK:"Korea, Democratic Peoples Republic of",KOR:"Korea, Republic of",KWT:"Kuwait",KGZ:"Kyrgyzstan",LAO:"Lao Peoples Democratic Republic",LVA:"Latvia",LBN:"Lebanon",LSO:"Lesotho",LBR:"Liberia",LBY:"Libya",LIE:"Liechtenstein",LTU:"Lithuania",LUX:"Luxembourg",MAC:"Macao Special Administrative Region of China",MKD:"Macedonia, the former Yugoslav Republic of",MDG:"Madagascar",MWI:"Malawi",MYS:"Malaysia",MDV:"Maldives",MLI:"Mali",MLT:"Malta",MHL:"Marshall Islands",MTQ:"Martinique",MRT:"Mauritania",MUS:"Mauritius",MYT:"Mayotte",MEX:"Mexico",FSM:"Micronesia (Federated States of)",MDA:"Moldova, Republic of",MCO:"Monaco",MNG:"Mongolia",MNE:"Montenegro",MSR:"Montserrat",MAR:"Morocco",MOZ:"Mozambique",MMR:"Myanmar",NAM:"Namibia",NRU:"Nauru",NPL:"Nepal",NLD:"Netherlands",ANT:"Netherlands Antilles",NTZ:"Neutral Zone",NCL:"New Caledonia",NZL:"New Zealand",NIC:"Nicaragua",NER:"Niger",NGA:"Nigeria",NIU:"Niue",NFK:"Norfolk Island",MNP:"Northern Mariana Islands",NOR:"Norway",OMN:"Oman",PAK:"Pakistan",PLW:"Palau",PSE:"Palestine, State of",PAN:"Panama",PNG:"Papua New Guinea",PRY:"Paraguay",PER:"Peru",PHL:"Philippines",PCN:"Pitcairn",POL:"Poland",PRT:"Portugal",PRI:"Puerto Rico",QAT:"Qatar",REU:"Runion",ROU:"Romania",RUS:"Russian Federation",RWA:"Rwanda",BLM:"Saint Barthlemy",SHN:"Saint Helena, Ascension and Tristan da Cunha",KNA:"Saint Kitts and Nevis",LCA:"Saint Lucia",MAF:"Saint Martin (French part)",SPM:"Saint Pierre and Miquelon",VCT:"Saint Vincent and the Grenadines",WSM:"Samoa",SMR:"San Marino",STP:"Sao Tome and Principe",SAU:"Saudi Arabia",SEN:"Senegal",SRB:"Serbia",SYC:"Seychelles",SLE:"Sierra Leone",SGP:"Singapore",SXM:"Sint Maarten (Dutch part)",SVK:"Slovakia",SVN:"Slovenia",SLB:"Solomon Islands",SOM:"Somalia",ZAF:"South Africa",SGS:"South Georgia and the South Sandwich Islands",SSD:"South Sudan",ESP:"Spain",LKA:"Sri Lanka",SDN:"Sudan",SUR:"Suriname",SJM:"Svalbard and Jan Mayen",SWZ:"Swaziland",SWE:"Sweden",CHE:"Switzerland",SYR:"Syrian Arab Republic",TWN:"Taiwan Province of China",TJK:"Tajikistan",TZA:"Tanzania, United Republic of",THA:"Thailand",TLS:"Timor-Leste",TGO:"Togo",TKL:"Tokelau",TON:"Tonga",TTO:"Trinidad and Tobago",TUN:"Tunisia",TUR:"Turkey",TKM:"Turkmenistan",TCA:"Turks and Caicos Islands",TUV:"Tuvalu",UGA:"Uganda",UKR:"Ukraine",ARE:"United Arab Emirates",GBR:"United Kingdom - British Citizen",GBD:"United Kingdom - British Overseas Territories Citizen",GBN:"United Kingdom - British National (Overseas)",GBO:"United Kingdom - British Overseas Citizen",GBP:"United Kingdom - British Protected person",USA:"United States",UMI:"United States Minor Outlying Islands",URY:"Uruguay",UZB:"Uzbekistan",VUT:"Vanuatu",VEN:"Venezuela, Bolivarian Republic of",VNM:"Viet Nam",VGB:"Virgin Islands (British)",VIR:"Virgin Islands (U.S.)",WLF:"Wallis and Futuna",ESH:"Western Sahara",YEM:"Yemen",ZMB:"Zambia",ZWE:"Zimbabwe",EUE:"European Union (EU)",UNO:"United Nations Organization or one of its officials",UNA:"United Nations specialized agency or one of its officials",UNK:"Resident of Kosovo to whom a travel document has been issued by the United Nations Interim Administration Mission in Kosovo (UNMIK)",XBA:"African Development Bank (ADB)",XIM:"African Export-Import Bank (AFREXIM bank)",XCC:"Caribbean Community or one of its emissaries (CARICOM)",XCO:"Common Market for Eastern and Southern Africa (COMESA)",XEC:"Economic Community of West African States (ECOWAS)",XPO:"International Criminal Police Organization (INTERPOL)",XOM:"Sovereign Military Order of Malta or one of its emissaries",XXA:"Stateless person, as defined in Article 1 of the 1954 Convention Relating to the Status of Stateless Persons",XXB:"Refugee, as defined in Article 1 of the 1951 Convention Relating to the Status of Refugees as amended by the 1967 Protocol",XXX:"Refugee, other than as defined under the code XXB above XXC Person of unspecified nationality, for whom issuing State does not consider it necessary to specify any of the codes XXA, XXB or XXC above, whatever that persons status may be. This category may include a person who is neither stateless nor a refugee but who is of unknown nationality and legally residing in the State of issue."};Object.freeze(e),t.exports=e},4191:(t,e,r)=>{"use strict";const n=r(5388),i=r(3437),o=r(4176);t.exports={states:i,formats:n,parse:o}},3661:t=>{"use strict";t.exports=function(t){if("string"==typeof t&&(t=t.split(/[\r\n]+/)),!Array.isArray(t))throw new TypeError("input must be an array or string");for(const e of t)if(!e.match(/[A-Z0-9<]+/))throw new TypeError('lines must be composed of only alphanumerical characters and "<"');return t}},3502:t=>{"use strict";function e(t,e){return t[e.line].substring(e.start,e.end)}function r(t,e,r){if(typeof t[e]!==r)throw new TypeError(`${e} must be a ${r}`)}t.exports=function(t){r(t,"label","string"),null!==t.field&&r(t,"field","string"),r(t,"line","number"),r(t,"start","number"),r(t,"end","number"),r(t,"parser","function");const n=[{line:t.line,start:t.start,end:t.end}];if(Array.isArray(t.related))for(const e of t.related)r(e,"line","number"),r(e,"start","number"),r(e,"end","number"),n.push(e);return function(r){const i=e(r,t);let o=t.related||[];o=o.map((t=>e(r,t)));const s={label:t.label,field:t.field,value:null,valid:!1,ranges:n.map((t=>({line:t.line,start:t.start,end:t.end,raw:e(r,t)})))},a=s.ranges[0];s.line=a.line,s.start=a.start,s.end=a.end;try{let e=t.parser(i,...o);s.value="object"==typeof e?e.value:e,s.valid=!0,"object"==typeof e&&(s.start=a.start+e.start,s.end=a.start+e.end)}catch(t){s.error=t.message}return s}}},7428:(t,e,r)=>{"use strict";const n={label:"Document number",field:"documentNumber",parser:r(8676)},i={label:"Document number check digit",field:"documentNumberCheckDigit",parser:r(3861)},o={label:"Nationality",field:"nationality",parser:r(4749)},s={label:"Sex",field:"sex",parser:r(5606)},a={label:"Expiration date",field:"expirationDate",parser:r(9665)},l={label:"Expiration date check digit",field:"expirationDateCheckDigit",parser:r(9754)},u={label:"Composite check digit",field:"compositeCheckDigit",parser:r(3323)},h={label:"Birth date",field:"birthDate",parser:r(9665)},c={label:"Birth date check digit",field:"birthDateCheckDigit",parser:r(9754)},f={label:"Issue date",field:"issueDate",parser:r(9665)},d={label:"First name",field:"firstName",parser:r(2935)},p={label:"Last name",field:"lastName",parser:r(8638)},m={label:"Issuing state",field:"issuingState",parser:r(4749)};t.exports={documentNumberTemplate:n,documentNumberCheckDigitTemplate:i,documentCodeTemplate:{label:"Document code",field:"documentCode"},nationalityTemplate:o,sexTemplate:s,expirationDateTemplate:a,expirationDateCheckDigitTemplate:l,birthDateTemplate:h,birthDateCheckDigitTemplate:c,issueDateTemplate:f,compositeCheckDigitTemplate:u,firstNameTemplate:d,lastNameTemplate:p,issuingStateTemplate:m}},1453:(t,e,r)=>{"use strict";const{FRENCH_NATIONAL_ID:n}=r(5388),i=r(3661),o=r(7448),s=r(1914);t.exports=function(t){if(2!==(t=i(t)).length)throw new Error(`invalid number of lines: ${t.length}: Must be 2 for ${n}`);return t.forEach(((t,e)=>{if(36!==t.length)throw new Error(`invalid number of characters for line ${e+1}: ${t.length}. Must be 36 for ${n}`)})),s(n,t,o)}},7448:(t,e,r)=>{"use strict";const n=r(8690),i=r(811),o=r(3676),s=r(3502),{documentCodeTemplate:a,issuingStateTemplate:l,lastNameTemplate:u,issueDateTemplate:h,firstNameTemplate:c,documentNumberTemplate:f,documentNumberCheckDigitTemplate:d,birthDateTemplate:p,birthDateCheckDigitTemplate:m,sexTemplate:g,compositeCheckDigitTemplate:v}=r(7428);t.exports=[Object.assign({},a,{line:0,start:0,end:2,parser:i}),Object.assign({},l,{line:0,start:2,end:5}),Object.assign({},u,{line:0,start:5,end:30,parser:n}),{label:"Administrative code",field:"administrativeCode",line:0,start:30,end:36,parser:o},Object.assign({},h,{line:1,start:0,end:4}),{label:"Administrative code 2",field:"administrativeCode2",line:1,start:4,end:7,parser:o},Object.assign({},f,{line:1,start:7,end:12}),Object.assign({},d,{line:1,start:12,end:13,related:[{line:1,start:0,end:12}]}),Object.assign({},c,{line:1,start:13,end:27,parser:n}),Object.assign({},p,{line:1,start:27,end:33}),Object.assign({},m,{line:1,start:33,end:34,related:[{line:1,start:27,end:33}]}),Object.assign({},g,{line:1,start:34,end:35}),Object.assign({},v,{line:1,start:35,end:36,related:[{line:0,start:0,end:36},{line:1,start:0,end:35}]})].map(s)},1914:t=>{"use strict";t.exports=function(t,e,r){const n=function(t,e){const r=[];for(const n of e)r.push(n(t));return r}(e,r),i=function(t){const e={};let r=!0;for(const n of t)n.valid||(r=!1),n.field&&(e[n.field]=n.value);return{fields:e,valid:r}}(n);return{format:t,details:n,fields:i.fields,valid:i.valid}}},4176:(t,e,r)=>{"use strict";const n=r(5388),i=r(3661),o=r(5723);function s(t){switch((t=i(t)).length){case 2:case 3:switch(t[0].length){case 30:return o.TD1(t);case 36:return t[0].substr(30,36).match(/[0-9]/)?o.FRENCH_NATIONAL_ID(t):o.TD2(t);case 44:return o.TD3(t);case 9:return o.SWISS_DRIVING_LICENSE(t);default:throw new Error("unrecognized document format. First line of input must have 30 (TD1), 36 (TD2 or French National Id), 44 (TD3) or 9 (Swiss Driving License) characters")}default:throw new Error(`unrecognized document format. Input must have two or three lines, found${t.length}`)}}for(const t in n)s[t]=o[t];t.exports=s},5723:(t,e,r)=>{"use strict";const n=r(1453),i=r(8566),o=r(1857),s=r(6461),a=r(8969);t.exports={TD1:o,TD2:s,TD3:a,SWISS_DRIVING_LICENSE:i,FRENCH_NATIONAL_ID:n}},8566:(t,e,r)=>{"use strict";const{SWISS_DRIVING_LICENSE:n}=r(5388),i=r(3661),o=r(1914),s=r(3230);t.exports=function(t){if(3!==(t=i(t)).length)throw new Error(`invalid number of lines: ${t.length}: Must be 3 for ${n}`);if(9!==t[0].length)throw new Error(`invalid number of characters for line 1: ${t[0].length}. Must be 9 for ${n}`);if(30!==t[1].length)throw new Error(`invalid number of characters for line 2: ${t[1].length}. Must be 30 for ${n}`);if(30!==t[2].length)throw new Error(`invalid number of characters for line 3: ${t[2].length}. Must be 30 for ${n}`);return o(n,t,s)}},3230:(t,e,r)=>{"use strict";const n=r(3606),i=r(5789),o=r(5801),s=r(4726),a=r(8307),l=r(7125),u=r(3502),{documentNumberTemplate:h,documentCodeTemplate:c,issuingStateTemplate:f,birthDateTemplate:d,lastNameTemplate:p,firstNameTemplate:m}=r(7428);t.exports=[Object.assign({},h,{line:0,start:0,end:9,parser:s}),{label:"Language code",field:"languageCode",line:0,start:6,end:7,parser:l},Object.assign({},c,{line:1,start:0,end:2,parser:o}),Object.assign({},f,{line:1,start:2,end:5,parser:a}),{label:"PIN code",field:"pinCode",line:1,start:5,end:14,parser:n},{label:"Version number",field:"versionNumber",line:1,start:14,end:17,parser:n},{label:"Separator 1",field:null,line:1,start:17,end:19,parser:i},Object.assign({},d,{line:1,start:19,end:25}),{label:"Separator 2",field:null,line:1,start:25,end:30,parser:i},Object.assign({},p,{line:2,start:0,end:30}),Object.assign({},m,{line:2,start:0,end:30})].map(u)},1857:(t,e,r)=>{"use strict";const{TD1:n}=r(5388),i=r(3661),o=r(1914),s=r(1285);t.exports=function(t){if(3!==(t=i(t)).length)throw new Error(`invalid number of lines: ${t.length}: Must be 3 for ${n}`);return t.forEach(((t,e)=>{if(30!==t.length)throw new Error(`invalid number of characters for line ${e+1}: ${t.length}. Must be 30 for ${n}`)})),o(n,t,s)}},1285:(t,e,r)=>{"use strict";const n=r(811),i=r(5839),o=r(3676),s=r(3502),{documentCodeTemplate:a,issuingStateTemplate:l,documentNumberTemplate:u,documentNumberCheckDigitTemplate:h,birthDateTemplate:c,birthDateCheckDigitTemplate:f,sexTemplate:d,expirationDateTemplate:p,expirationDateCheckDigitTemplate:m,nationalityTemplate:g,compositeCheckDigitTemplate:v,lastNameTemplate:w,firstNameTemplate:y}=r(7428);t.exports=[Object.assign({},a,{line:0,start:0,end:2,parser:n}),Object.assign({},l,{line:0,start:2,end:5}),Object.assign({},u,{line:0,start:5,end:14,related:[{line:0,start:14,end:15},{line:0,start:15,end:30}]}),Object.assign(h,{line:0,start:14,end:15,related:[{line:0,start:5,end:14},{line:0,start:15,end:30}]}),{label:"Optional field 1",field:"optional1",line:0,start:15,end:30,related:[{line:0,start:5,end:14},{line:0,start:14,end:15}],parser:i},Object.assign({},c,{start:0,end:6,line:1}),Object.assign({},f,{line:1,start:6,end:7,related:[{line:1,start:0,end:6}]}),Object.assign({},d,{line:1,start:7,end:8}),Object.assign({},p,{line:1,start:8,end:14}),Object.assign({},m,{line:1,start:14,end:15,related:[{line:1,start:8,end:14}]}),Object.assign({},g,{line:1,start:15,end:18}),{label:"Optional field 2",field:"optional2",line:1,start:18,end:29,parser:o},Object.assign({},v,{line:1,start:29,end:30,related:[{line:0,start:5,end:30},{line:1,start:0,end:7},{line:1,start:8,end:15},{line:1,start:18,end:29}]}),Object.assign({},w,{line:2,start:0,end:30}),Object.assign({},y,{line:2,start:0,end:30})].map(s)},6461:(t,e,r)=>{"use strict";const{TD2:n}=r(5388),i=r(3661),o=r(1914),s=r(1119);t.exports=function(t){if(2!==(t=i(t)).length)throw new Error(`invalid number of lines: ${t.length}: Must be 2 for ${n}`);return t.forEach(((t,e)=>{if(36!==t.length)throw new Error(`invalid number of characters for line ${e+1}: ${t.length}. Must be 36 for TD2`)})),o(n,t,s)}},1119:(t,e,r)=>{"use strict";const n=r(811),i=r(3676),o=r(3502),{documentCodeTemplate:s,issuingStateTemplate:a,firstNameTemplate:l,lastNameTemplate:u,documentNumberTemplate:h,documentNumberCheckDigitTemplate:c,nationalityTemplate:f,birthDateTemplate:d,birthDateCheckDigitTemplate:p,sexTemplate:m,expirationDateTemplate:g,expirationDateCheckDigitTemplate:v,compositeCheckDigitTemplate:w}=r(7428);t.exports=[Object.assign({},s,{line:0,start:0,end:2,parser:n}),Object.assign({},a,{line:0,start:2,end:5}),Object.assign({},u,{line:0,start:5,end:36}),Object.assign({},l,{line:0,start:5,end:36}),Object.assign({},h,{line:1,start:0,end:9,related:[{line:1,start:9,end:10},{line:1,start:28,end:35}]}),Object.assign({},c,{line:1,start:9,end:10,related:[{line:1,start:0,end:9},{line:1,start:28,end:35}]}),Object.assign({},f,{line:1,start:10,end:13}),Object.assign({},d,{line:1,start:13,end:19}),Object.assign({},p,{line:1,start:19,end:20,related:[{line:1,start:13,end:19}]}),Object.assign({},m,{line:1,start:20,end:21}),Object.assign({},g,{line:1,start:21,end:27}),Object.assign({},v,{line:1,start:27,end:28,related:[{line:1,start:21,end:27}]}),{label:"Optional field",field:"optional",line:1,start:28,end:35,parser:i},Object.assign({},w,{line:1,start:35,end:36,related:[{line:1,start:0,end:10},{line:1,start:13,end:20},{line:1,start:21,end:35}]})].map(o)},8969:(t,e,r)=>{"use strict";const{TD3:n}=r(5388),i=r(3661),o=r(1914),s=r(3356);t.exports=function(t){if(2!==(t=i(t)).length)throw new Error(`invalid number of lines: ${t.length}: Must be 2 for ${n}`);return t.forEach(((t,e)=>{if(44!==t.length)throw new Error(`invalid number of characters for line ${e+1}: ${t.length}. Must be 44 for TD3`)})),o(n,t,s)}},3356:(t,e,r)=>{"use strict";const n=r(1581),i=r(8874),o=r(5786),s=r(3502),{documentCodeTemplate:a,issuingStateTemplate:l,lastNameTemplate:u,firstNameTemplate:h,documentNumberTemplate:c,documentNumberCheckDigitTemplate:f,nationalityTemplate:d,birthDateTemplate:p,birthDateCheckDigitTemplate:m,sexTemplate:g,expirationDateTemplate:v,expirationDateCheckDigitTemplate:w,compositeCheckDigitTemplate:y}=r(7428);t.exports=[Object.assign({},a,{line:0,start:0,end:2,parser:n}),Object.assign({},l,{line:0,start:2,end:5}),Object.assign({},u,{line:0,start:5,end:44}),Object.assign({},h,{line:0,start:5,end:44}),Object.assign({},c,{line:1,start:0,end:9}),Object.assign({},f,{line:1,start:9,end:10,related:[{line:1,start:0,end:9}]}),Object.assign({},d,{line:1,start:10,end:13}),Object.assign({},p,{line:1,start:13,end:19}),Object.assign({},m,{line:1,start:19,end:20,related:[{line:1,start:13,end:19}]}),Object.assign({},g,{line:1,start:20,end:21}),Object.assign({},v,{line:1,start:21,end:27}),Object.assign({},w,{line:1,start:27,end:28,related:[{line:1,start:21,end:27}]}),{label:"Personal number",field:"personalNumber",line:1,start:28,end:42,parser:i},{label:"Personal number check digit",field:"personalNumberCheckDigit",line:1,start:42,end:43,related:[{line:1,start:28,end:42}],parser:o},Object.assign({},y,{line:1,start:43,end:44,related:[{line:1,start:0,end:10},{line:1,start:13,end:20},{line:1,start:21,end:43}]})].map(s)},5370:t=>{"use strict";t.exports=function(t,e){let r=0,n=[7,3,1];for(let e=0;e<t.length;e++){let i=t.charCodeAt(e);60===i&&(i=0),i>=65&&(i-=55),i>=48&&(i-=48),i*=n[e%3],r+=i}if(r%=10,r!==Number(e))throw new Error(`invalid check digit: ${e}. Must be ${r}`)}},393:t=>{"use strict";t.exports=function(t){return t.replace(/<+$/g,"").replace(/</g," ")}},8690:(t,e,r)=>{"use strict";const n=r(393);t.exports=function(t){if(!t.match(/^[A-Z<]+$/))throw new Error(`invalid text: ${t}. Must be only alphabetical with <`);return n(t)}},3323:(t,e,r)=>{"use strict";let n=r(5370);t.exports=function(t,...e){const r=e.join("");return n(r,t),t}},9665:t=>{"use strict";t.exports=function(t){if(!t.match(/^[0-9<]{4,6}$/))throw new Error(`invalid date: ${t}`);const e=t.substring(2,4);if("<<"!==e&&(e<1||e>12))throw new Error(`invalid date month: ${e}`);if(6===t.length){const e=t.substring(4,6);if("<<"!==e&&(e<1||e>31))throw new Error(`invalid date day: ${e}`)}return t}},9754:(t,e,r)=>{"use strict";const n=r(5370);t.exports=function(t,e){return!1!==t&&n(e,t),t}},811:t=>{"use strict";t.exports=function(t){const e=t.charAt(0);if("A"!==e&&"C"!==e&&"I"!==e)throw new Error(`invalid document code: ${t}. First character must be A, C or I`);const r=t.charAt(1);if("V"===r)throw new Error(`invalid document code: ${t}. Second character may not be V`);return"<"===r?{value:e,start:0,end:1}:t}},1581:t=>{"use strict";t.exports=function(t){const e=t.charAt(0);if("P"!==e)throw new Error(`invalid document code: ${t}. First character must be P`);const r=t.charAt(1);if(!r.match(/[A-Z<]/))throw new Error(`invalid document code: ${t}. Second character must be a letter or <`);return"<"===r?{value:e,start:0,end:1}:t}},8676:(t,e,r)=>{"use strict";const n=r(393);t.exports=function(t,e,r){let i,o;if("<"===e&&r){const e=r.indexOf("<");o=t+r.substring(0,e-1),i=o.length+1}else o=n(t),i=o.length;return{value:o,start:0,end:i}}},3861:(t,e,r)=>{"use strict";let n=r(5370);t.exports=function(t,e,r){if("<"===t&&r){const i=r.indexOf("<");return e=`${e}<${r.substring(0,i-1)}`,t=r.charAt(i-1),n(e,t),{value:t,start:i,end:i+1}}return n(e,t),t}},5839:(t,e,r)=>{"use strict";let n=r(6791);t.exports=function(t,e,r){if("<"===r){const e=t.indexOf("<"),r=n(t.substring(e+1));return{value:r,start:e+1,end:e+1+r.length}}{const e=n(t);return{value:e,start:0,end:0+e.length}}}},2935:(t,e,r)=>{"use strict";let n=r(6791);t.exports=function(t){const e=t.replace(/.*?<{2}/,""),r=n(e,/^[A-Z<]+<*$/),i=t.length-e.length;return{value:r,start:i,end:i+r.length}}},8638:(t,e,r)=>{"use strict";let n=r(6791);t.exports=function(t){const e=n(t.replace(/<{2}.*/,""),/^[A-Z<]*<*$/);return{value:e,start:0,end:e.length}}},3606:t=>{"use strict";t.exports=function(t){if(!t.match(/^[0-9]+$/))throw new Error(`invalid number: ${t}`);return t}},3676:(t,e,r)=>{"use strict";let n=r(6791);t.exports=function(t){const e=n(t);return{value:e,start:0,end:0+e.length}}},8874:(t,e,r)=>{"use strict";let n=r(6791);t.exports=function(t){const e=n(t,/^[A-Z0-9<]+<*$/);return{value:e,start:0,end:e.length}}},5786:(t,e,r)=>{"use strict";let n=r(5370);const i=r(393);t.exports=function(t,e){if(""===i(e)){if("<"!==t&&"0"!==t)throw new Error(`invalid check digit ${t}: must be 0 or <`);return t}return n(e,t),t}},5606:t=>{"use strict";t.exports=function(t){switch(t){case"M":return"male";case"F":return"female";case"<":return"nonspecified";default:throw new Error(`invalid sex: ${t}. Must be M, F or <.`)}}},4749:(t,e,r)=>{"use strict";const n=r(3437),i=r(393);t.exports=function(t){if(t=i(t),!n[t])throw new Error(`invalid state code: ${t}`);return{value:t,start:0,end:t.length}}},6791:(t,e,r)=>{"use strict";const n=r(393);t.exports=function(t,e=/^[0-9A-Z<]+$/){if(!t.match(e))throw new Error(`invalid text: ${t}. Must match the following regular expression: ${e}`);return n(t)}},5789:t=>{"use strict";t.exports=function(t){if(!t.match(/^<*$/))throw new Error(`invalid separator: ${t}. Must be composed only of "<"`);return t}},5801:t=>{"use strict";t.exports=function(t){if("FA"!==t)throw new Error(`invalid document code: ${t}. Must be FA`);return t}},4726:(t,e,r)=>{"use strict";const n=r(7125);t.exports=function(t){let e=t.substring(0,3),r=t.substring(3,6),i=t.charAt(6),o=t.substring(7);if(!e.match(/^[A-Z0-9]{3}$/))throw new Error(`invalid document number: ${t}. Must start with three alphanumeric digits`);if(!r.match(/^[0-9]{3}$/))throw new Error(`invalid document number: ${t}. Must have numeric digits in positions 4, 5 and 6`);if("<<"!==o)throw new Error(`invalid document number: ${t}. Must end with <<`);return n(i),{value:t.substring(0,7),start:0,end:7}}},8307:t=>{"use strict";t.exports=function(t){if("CHE"!==t&&"LIE"!==t)throw new Error(`invalid state code: ${t}. Must be CHE or LIE`);return t}},7125:t=>{"use strict";t.exports=function(t){switch(t){case"D":case"F":case"I":case"R":return t;default:throw new Error(`invalid languageCode code: ${t}. Must be D, F, I or R`)}}},2664:t=>{t.exports=function(t,e){t=t||0;for(var r=new Array(t),n=0;n<t;n++)r[n]=e;return r}},995:t=>{t.exports=function(t){return 0===t?1:(t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,(t|=t>>16)+1)}},6563:(t,e)=>{"use strict";function r(t){if("number"!=typeof t)throw new TypeError("Expected a number")}e.j=(t,e)=>(r(t),r(e),Number.isNaN(t)?-1:Number.isNaN(e)?1:t-e)},1361:(t,e,r)=>{"use strict";r.d(e,{Gl:()=>C,re:()=>R});var n=null,i={},o=1,s="@wry/context:Slot",a=Array,l=a[s]||function(){var t=function(){function t(){this.id=["slot",o++,Date.now(),Math.random().toString(36).slice(2)].join(":")}return t.prototype.hasValue=function(){for(var t=n;t;t=t.parent)if(this.id in t.slots){var e=t.slots[this.id];if(e===i)break;return t!==n&&(n.slots[this.id]=e),!0}return n&&(n.slots[this.id]=i),!1},t.prototype.getValue=function(){if(this.hasValue())return n.slots[this.id]},t.prototype.withValue=function(t,e,r,i){var o,s=((o={__proto__:null})[this.id]=t,o),a=n;n={parent:a,slots:s};try{return e.apply(i,r)}finally{n=a}},t.bind=function(t){var e=n;return function(){var r=n;try{return n=e,t.apply(this,arguments)}finally{n=r}}},t.noContext=function(t,e,r){if(!n)return t.apply(r,e);var i=n;try{return n=null,t.apply(r,e)}finally{n=i}},t}();try{Object.defineProperty(a,s,{value:a[s]=t,enumerable:!1,writable:!1,configurable:!1})}finally{return t}}();l.bind,l.noContext;function u(){}var h=function(){function t(t,e){void 0===t&&(t=1/0),void 0===e&&(e=u),this.max=t,this.dispose=e,this.map=new Map,this.newest=null,this.oldest=null}return t.prototype.has=function(t){return this.map.has(t)},t.prototype.get=function(t){var e=this.getEntry(t);return e&&e.value},t.prototype.getEntry=function(t){var e=this.map.get(t);if(e&&e!==this.newest){var r=e.older,n=e.newer;n&&(n.older=r),r&&(r.newer=n),e.older=this.newest,e.older.newer=e,e.newer=null,this.newest=e,e===this.oldest&&(this.oldest=n)}return e},t.prototype.set=function(t,e){var r=this.getEntry(t);return r?r.value=e:(r={key:t,value:e,newer:null,older:this.newest},this.newest&&(this.newest.newer=r),this.newest=r,this.oldest=this.oldest||r,this.map.set(t,r),r.value)},t.prototype.clean=function(){for(;this.oldest&&this.map.size>this.max;)this.delete(this.oldest.key)},t.prototype.delete=function(t){var e=this.map.get(t);return!!e&&(e===this.newest&&(this.newest=e.older),e===this.oldest&&(this.oldest=e.newer),e.newer&&(e.newer.older=e.older),e.older&&(e.older.newer=e.newer),this.map.delete(t),this.dispose(e.value,t),!0)},t}(),c=new l,f=[],d=[];function p(t,e){if(!t)throw new Error(e||"assertion failure")}function m(t){switch(t.length){case 0:throw new Error("unknown value");case 1:return t[0];case 2:throw t[1]}}var g=function(){function t(e,r){this.fn=e,this.args=r,this.parents=new Set,this.childValues=new Map,this.dirtyChildren=null,this.dirty=!0,this.recomputing=!1,this.value=[],++t.count}return t.prototype.recompute=function(){if(p(!this.recomputing,"already recomputing"),function(t){var e=c.getValue();if(e)return t.parents.add(e),e.childValues.has(t)||e.childValues.set(t,[]),w(t)?_(e,t):x(e,t),e}(this)||!M(this))return w(this)?function(t){var e=S(t);c.withValue(t,v,[t]),function(t){if("function"==typeof t.subscribe)try{A(t),t.unsubscribe=t.subscribe.apply(null,t.args)}catch(e){return t.setDirty(),!1}return!0}(t)&&function(t){if(t.dirty=!1,w(t))return;b(t)}(t);return e.forEach(M),m(t.value)}(this):m(this.value)},t.prototype.setDirty=function(){this.dirty||(this.dirty=!0,this.value.length=0,y(this),A(this))},t.prototype.dispose=function(){var t=this;S(this).forEach(M),A(this),this.parents.forEach((function(e){e.setDirty(),E(e,t)}))},t.count=0,t}();function v(t){t.recomputing=!0,t.value.length=0;try{t.value[0]=t.fn.apply(null,t.args)}catch(e){t.value[1]=e}t.recomputing=!1}function w(t){return t.dirty||!(!t.dirtyChildren||!t.dirtyChildren.size)}function y(t){t.parents.forEach((function(e){return _(e,t)}))}function b(t){t.parents.forEach((function(e){return x(e,t)}))}function _(t,e){if(p(t.childValues.has(e)),p(w(e)),t.dirtyChildren){if(t.dirtyChildren.has(e))return}else t.dirtyChildren=d.pop()||new Set;t.dirtyChildren.add(e),y(t)}function x(t,e){p(t.childValues.has(e)),p(!w(e));var r,n,i,o=t.childValues.get(e);0===o.length?t.childValues.set(e,e.value.slice(0)):(r=o,n=e.value,(i=r.length)>0&&i===n.length&&r[i-1]===n[i-1]||t.setDirty()),k(t,e),w(t)||b(t)}function k(t,e){var r=t.dirtyChildren;r&&(r.delete(e),0===r.size&&(d.length<100&&d.push(r),t.dirtyChildren=null))}function M(t){return 0===t.parents.size&&"function"==typeof t.reportOrphan&&!0===t.reportOrphan()}function S(t){var e=f;return t.childValues.size>0&&(e=[],t.childValues.forEach((function(r,n){E(t,n),e.push(n)}))),p(null===t.dirtyChildren),e}function E(t,e){e.parents.delete(t),t.childValues.delete(e),k(t,e)}function A(t){var e=t.unsubscribe;"function"==typeof e&&(t.unsubscribe=void 0,e())}var C=function(){function t(t){this.weakness=t}return t.prototype.lookup=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.lookupArray(t)},t.prototype.lookupArray=function(t){var e=this;return t.forEach((function(t){return e=e.getChildTrie(t)})),e.data||(e.data=Object.create(null))},t.prototype.getChildTrie=function(e){var r=this.weakness&&function(t){switch(typeof t){case"object":if(null===t)break;case"function":return!0}return!1}(e)?this.weak||(this.weak=new WeakMap):this.strong||(this.strong=new Map),n=r.get(e);return n||r.set(e,n=new t(this.weakness)),n},t}();var D=new C("function"==typeof WeakMap);function O(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return D.lookupArray(t)}var P=new Set;function R(t,e){void 0===e&&(e=Object.create(null));var r=new h(e.max||Math.pow(2,16),(function(t){return t.dispose()})),n=!!e.disposable,i=e.makeCacheKey||O;function o(){if(!n||c.hasValue()){var o=i.apply(null,arguments);if(void 0===o)return t.apply(null,arguments);var s=Array.prototype.slice.call(arguments),a=r.get(o);a?a.args=s:(a=new g(t,s),r.set(o,a),a.subscribe=e.subscribe,n&&(a.reportOrphan=function(){return r.delete(o)}));var l=a.recompute();return r.set(o,a),P.add(r),c.hasValue()||(P.forEach((function(t){return t.clean()})),P.clear()),n?void 0:l}}return o.dirty=function(){var t=i.apply(null,arguments),e=void 0!==t&&r.get(t);e&&e.setDirty()},o}},9133:(t,e,r)=>{"use strict";r.d(e,{Z:()=>o}),t=r.hmd(t);let n={},i=function(){let t=/\blang(?:uage)?-([\w-]+)\b/i,e=0;var r=n.Prism={manual:n.Prism&&n.Prism.manual,disableWorkerMessageHandler:n.Prism&&n.Prism.disableWorkerMessageHandler,util:{encode:t=>t instanceof i?new i(t.type,r.util.encode(t.content),t.alias):"Array"===r.util.type(t)?t.map(r.util.encode):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," "),type:t=>Object.prototype.toString.call(t).match(/\[object (\w+)\]/)[1],objId:t=>(t.__id||Object.defineProperty(t,"__id",{value:++e}),t.__id),clone(t,e){var n=r.util.type(t);switch(e=e||{},n){case"Object":if(e[r.util.objId(t)])return e[r.util.objId(t)];var i={};for(var o in e[r.util.objId(t)]=i,t)t.hasOwnProperty(o)&&(i[o]=r.util.clone(t[o],e));return i;case"Array":if(e[r.util.objId(t)])return e[r.util.objId(t)];i=[];return e[r.util.objId(t)]=i,t.forEach((function(t,n){i[n]=r.util.clone(t,e)})),i}return t}},languages:{extend(t,e){var n=r.util.clone(r.languages[t]);for(var i in e)n[i]=e[i];return n},insertBefore(t,e,n,i){var o=(i=i||r.languages)[t];if(2==arguments.length){for(var s in n=arguments[1])n.hasOwnProperty(s)&&(o[s]=n[s]);return o}var a={};for(var l in o)if(o.hasOwnProperty(l)){if(l==e)for(var s in n)n.hasOwnProperty(s)&&(a[s]=n[s]);a[l]=o[l]}return r.languages.DFS(r.languages,(function(e,r){r===i[t]&&e!=t&&(this[e]=a)})),i[t]=a},DFS(t,e,n,i){for(var o in i=i||{},t)t.hasOwnProperty(o)&&(e.call(t,o,t[o],n||o),"Object"!==r.util.type(t[o])||i[r.util.objId(t[o])]?"Array"!==r.util.type(t[o])||i[r.util.objId(t[o])]||(i[r.util.objId(t[o])]=!0,r.languages.DFS(t[o],e,o,i)):(i[r.util.objId(t[o])]=!0,r.languages.DFS(t[o],e,null,i)))}},plugins:{},highlightAll(t,e){r.highlightAllUnder(document,t,e)},highlightAllUnder(t,e,n){var i={callback:n,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};r.hooks.run("before-highlightall",i);for(var o,s=i.elements||t.querySelectorAll(i.selector),a=0;o=s[a++];)r.highlightElement(o,!0===e,i.callback)},highlightElement(e,i,o){for(var s,a,l=e;l&&!t.test(l.className);)l=l.parentNode;l&&(s=(l.className.match(t)||[,""])[1].toLowerCase(),a=r.languages[s]),e.className=e.className.replace(t,"").replace(/\s+/g," ")+" language-"+s,e.parentNode&&(l=e.parentNode,/pre/i.test(l.nodeName)&&(l.className=l.className.replace(t,"").replace(/\s+/g," ")+" language-"+s));var u={element:e,language:s,grammar:a,code:e.textContent};if(r.hooks.run("before-sanity-check",u),!u.code||!u.grammar)return u.code&&(r.hooks.run("before-highlight",u),u.element.textContent=u.code,r.hooks.run("after-highlight",u)),void r.hooks.run("complete",u);if(r.hooks.run("before-highlight",u),i&&n.Worker){var h=new Worker(r.filename);h.onmessage=function(t){u.highlightedCode=t.data,r.hooks.run("before-insert",u),u.element.innerHTML=u.highlightedCode,o&&o.call(u.element),r.hooks.run("after-highlight",u),r.hooks.run("complete",u)},h.postMessage(JSON.stringify({language:u.language,code:u.code,immediateClose:!0}))}else u.highlightedCode=r.highlight(u.code,u.grammar,u.language),r.hooks.run("before-insert",u),u.element.innerHTML=u.highlightedCode,o&&o.call(e),r.hooks.run("after-highlight",u),r.hooks.run("complete",u)},highlight(t,e,n){var o={code:t,grammar:e,language:n};return r.hooks.run("before-tokenize",o),o.tokens=r.tokenize(o.code,o.grammar),r.hooks.run("after-tokenize",o),i.stringify(r.util.encode(o.tokens),o.language)},matchGrammar(t,e,n,i,o,s,a){var l=r.Token;for(var u in n)if(n.hasOwnProperty(u)&&n[u]){if(u==a)return;var h=n[u];h="Array"===r.util.type(h)?h:[h];for(var c=0;c<h.length;++c){var f=h[c],d=f.inside,p=!!f.lookbehind,m=!!f.greedy,g=0,v=f.alias;if(m&&!f.pattern.global){var w=f.pattern.toString().match(/[imuy]*$/)[0];f.pattern=RegExp(f.pattern.source,w+"g")}f=f.pattern||f;for(var y=i,b=o;y<e.length;b+=e[y].length,++y){var _=e[y];if(e.length>t.length)return;if(!(_ instanceof l)){if(m&&y!=e.length-1){if(f.lastIndex=b,!(A=f.exec(t)))break;for(var x=A.index+(p?A[1].length:0),k=A.index+A[0].length,M=y,S=b,E=e.length;M<E&&(S<k||!e[M].type&&!e[M-1].greedy);++M)x>=(S+=e[M].length)&&(++y,b=S);if(e[y]instanceof l)continue;C=M-y,_=t.slice(b,S),A.index-=b}else{f.lastIndex=0;var A=f.exec(_),C=1}if(A){p&&(g=A[1]?A[1].length:0);k=(x=A.index+g)+(A=A[0].slice(g)).length;var D=_.slice(0,x),O=_.slice(k),P=[y,C];D&&(++y,b+=D.length,P.push(D));var R=new l(u,d?r.tokenize(A,d):A,v,A,m);if(P.push(R),O&&P.push(O),Array.prototype.splice.apply(e,P),1!=C&&r.matchGrammar(t,e,n,y,b,!0,u),s)break}else if(s)break}}}}},tokenize(t,e,n){var i=[t],o=e.rest;if(o){for(var s in o)e[s]=o[s];delete e.rest}return r.matchGrammar(t,i,e,0,0,!1),i},hooks:{all:{},add(t,e){var n=r.hooks.all;n[t]=n[t]||[],n[t].push(e)},run(t,e){var n=r.hooks.all[t];if(n&&n.length)for(var i,o=0;i=n[o++];)i(e)}}},i=r.Token=function(t,e,r,n,i){this.type=t,this.content=e,this.alias=r,this.length=0|(n||"").length,this.greedy=!!i};return i.stringify=function(t,e,n){if("string"==typeof t)return t;if("Array"===r.util.type(t))return t.map((r=>i.stringify(r,e,t))).join("");let o={type:t.type,content:i.stringify(t.content,e,n),tag:"span",classes:["token",t.type],attributes:{},language:e,parent:n};if(t.alias){let e="Array"===r.util.type(t.alias)?t.alias:[t.alias];Array.prototype.push.apply(o.classes,e)}r.hooks.run("wrap",o);let s=Object.keys(o.attributes).map((t=>t+'="'+(o.attributes[t]||"").replace(/"/g,"&quot;")+'"')).join(" ");return`<${o.tag} class="${o.classes.join(" ")}"${s?" "+s:""}>${o.content}</${o.tag}>`},n.document?n.Prism:n.addEventListener?(r.disableWorkerMessageHandler||n.addEventListener("message",(t=>{var e=JSON.parse(t.data),i=e.language,o=e.code,s=e.immediateClose;n.postMessage(r.highlight(o,r.languages[i],i)),s&&n.close()}),!1),n.Prism):n.Prism}();t.exports&&(t.exports=i),void 0!==r.g&&(r.g.Prism=i),i.languages.markup={comment:/<!--[\s\S]*?-->/,prolog:/<\?[\s\S]+?\?>/,doctype:/<!DOCTYPE[\s\S]+?>/i,cdata:/<!\[CDATA\[[\s\S]*?]]>/i,tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s+[^\s>\/=]+(?:=(?:("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|[^\s'">=]+))?)*\s*\/?>/i,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"attr-value":{pattern:/=(?:("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|[^\s'">=]+)/i,inside:{punctuation:[/^=/,{pattern:/(^|[^\\])["']/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:/&#?[\da-z]{1,8};/i},i.languages.markup.tag.inside["attr-value"].inside.entity=i.languages.markup.entity,i.hooks.add("wrap",(t=>{"entity"===t.type&&(t.attributes.title=t.content.replace(/&amp;/,"&"))})),i.languages.xml=i.languages.markup,i.languages.html=i.languages.markup,i.languages.mathml=i.languages.markup,i.languages.svg=i.languages.markup,i.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:/@[\w-]+?.*?(?:;|(?=\s*\{))/i,inside:{rule:/@[\w-]+/}},url:/url\((?:(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1|.*?)\)/i,selector:/[^{}\s][^{};]*?(?=\s*\{)/,string:{pattern:/("|')(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},property:/[-_a-z\xA0-\uFFFF][-\w\xA0-\uFFFF]*(?=\s*:)/i,important:/\B!important\b/i,function:/[-a-z0-9]+(?=\()/i,punctuation:/[(){};:]/},i.languages.css.atrule.inside.rest=i.languages.css,i.languages.markup&&(i.languages.insertBefore("markup","tag",{style:{pattern:/(<style[\s\S]*?>)[\s\S]*?(?=<\/style>)/i,lookbehind:!0,inside:i.languages.css,alias:"language-css",greedy:!0}}),i.languages.insertBefore("inside","attr-value",{"style-attr":{pattern:/\s*style=("|')(?:\\[\s\S]|(?!\1)[^\\])*\1/i,inside:{"attr-name":{pattern:/^\s*style/i,inside:i.languages.markup.tag.inside},punctuation:/^\s*=\s*['"]|['"]\s*$/,"attr-value":{pattern:/.+/i,inside:i.languages.css}},alias:"language-css"}},i.languages.markup.tag)),i.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,boolean:/\b(?:true|false)\b/,function:/[a-z0-9_]+(?=\()/i,number:/\b0x[\da-f]+\b|(?:\b\d+\.?\d*|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/},i.languages.javascript=i.languages.extend("clike",{keyword:/\b(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|var|void|while|with|yield)\b/,number:/\b(?:0[xX][\dA-Fa-f]+|0[bB][01]+|0[oO][0-7]+|NaN|Infinity)\b|(?:\b\d+\.?\d*|\B\.\d+)(?:[Ee][+-]?\d+)?/,function:/[_$a-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*\()/i,operator:/-[-=]?|\+[+=]?|!=?=?|<<?=?|>>?>?=?|=(?:==?|>)?|&[&=]?|\|[|=]?|\*\*?=?|\/=?|~|\^=?|%=?|\?|\.{3}/}),i.languages.insertBefore("javascript","keyword",{regex:{pattern:/((?:^|[^$\w\xA0-\uFFFF."'\])\s])\s*)\/(\[[^\]\r\n]+]|\\.|[^/\\\[\r\n])+\/[gimyu]{0,5}(?=\s*($|[\r\n,.;})\]]))/,lookbehind:!0,greedy:!0},"function-variable":{pattern:/[_$a-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*=\s*(?:function\b|(?:\([^()]*\)|[_$a-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*)\s*=>))/i,alias:"function"},constant:/\b[A-Z][A-Z\d_]*\b/}),i.languages.insertBefore("javascript","string",{"template-string":{pattern:/`(?:\\[\s\S]|\${[^}]+}|[^\\`])*`/,greedy:!0,inside:{interpolation:{pattern:/\${[^}]+}/,inside:{"interpolation-punctuation":{pattern:/^\${|}$/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}}}),i.languages.javascript["template-string"].inside.interpolation.inside.rest=i.languages.javascript,i.languages.markup&&i.languages.insertBefore("markup","tag",{script:{pattern:/(<script[\s\S]*?>)[\s\S]*?(?=<\/script>)/i,lookbehind:!0,inside:i.languages.javascript,alias:"language-javascript",greedy:!0}}),i.languages.js=i.languages.javascript;const o=i},4155:t=>{var e,r,n=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(t){if(e===setTimeout)return setTimeout(t,0);if((e===i||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(r){try{return e.call(null,t,0)}catch(r){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:i}catch(t){e=i}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(t){r=o}}();var a,l=[],u=!1,h=-1;function c(){u&&a&&(u=!1,a.length?l=a.concat(l):h=-1,l.length&&f())}function f(){if(!u){var t=s(c);u=!0;for(var e=l.length;e;){for(a=l,l=[];++h<e;)a&&a[h].run();h=-1,e=l.length}a=null,u=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];l.push(new d(t,e)),1!==l.length||u||s(f)},d.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},7129:(t,e)=>{"use strict";var r=Object.prototype.hasOwnProperty;function n(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(t){return null}}function i(t){try{return encodeURIComponent(t)}catch(t){return null}}e.stringify=function(t,e){e=e||"";var n,o,s=[];for(o in"string"!=typeof e&&(e="?"),t)if(r.call(t,o)){if((n=t[o])||null!=n&&!isNaN(n)||(n=""),o=i(o),n=i(n),null===o||null===n)continue;s.push(o+"="+n)}return s.length?e+s.join("&"):""},e.parse=function(t){for(var e,r=/([^=?#&]+)=?([^&]*)/g,i={};e=r.exec(t);){var o=n(e[1]),s=n(e[2]);null===o||null===s||o in i||(i[o]=s)}return i}},5666:t=>{var e=function(t){"use strict";var e,r=Object.prototype,n=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,o=Object.create(i.prototype),s=new C(n||[]);return o._invoke=function(t,e,r){var n=c;return function(i,o){if(n===d)throw new Error("Generator is already running");if(n===p){if("throw"===i)throw o;return O()}for(r.method=i,r.arg=o;;){var s=r.delegate;if(s){var a=S(s,r);if(a){if(a===m)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===c)throw n=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=d;var l=h(t,e,r);if("normal"===l.type){if(n=r.done?p:f,l.arg===m)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n=p,r.method="throw",r.arg=l.arg)}}}(t,r,s),o}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var c="suspendedStart",f="suspendedYield",d="executing",p="completed",m={};function g(){}function v(){}function w(){}var y={};y[o]=function(){return this};var b=Object.getPrototypeOf,_=b&&b(b(D([])));_&&_!==r&&n.call(_,o)&&(y=_);var x=w.prototype=g.prototype=Object.create(y);function k(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function M(t,e){function r(i,o,s,a){var l=h(t[i],t,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==typeof c&&n.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(l.arg)}var i;this._invoke=function(t,n){function o(){return new e((function(e,i){r(t,n,e,i)}))}return i=i?i.then(o,o):o()}}function S(t,r){var n=t.iterator[r.method];if(n===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method))return m;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=h(n,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var o=i.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function D(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,s=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r};return s.next=s}}return{next:O}}function O(){return{value:e,done:!0}}return v.prototype=x.constructor=w,w.constructor=v,v.displayName=l(w,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,l(t,a,"GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},k(M.prototype),M.prototype[s]=function(){return this},t.AsyncIterator=M,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var s=new M(u(e,r,n,i),o);return t.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},k(x),l(x,a,"Generator"),x[o]=function(){return this},x.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=D,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function i(n,i){return a.type="throw",a.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var l=n.call(s,"catchLoc"),u=n.call(s,"finallyLoc");if(l&&u){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;A(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:D(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}},7418:t=>{"use strict";t.exports=function(t,e){if(e=e.split(":")[0],!(t=+t))return!1;switch(e){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t}},146:(t,e,r)=>{"use strict";var n=r(8005),i=r(6740),o=r(5442),s=r(7972);function a(t,e){for(var r=new Array(t.length-1),n=1;n<t.length;++n)for(var i=r[n-1]=new Array(t.length-1),o=0,s=0;o<t.length;++o)o!==e&&(i[s++]=t[n][o]);return r}function l(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",l(t.slice(0,e)),",",l(t.slice(e)),")"].join("")}function u(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var e=[],r=0;r<t.length;++r)e.push(["scale(",l(u(a(t,r))),",",(n=r,1&n?"-":""),t[0][r],")"].join(""));return e;var n}function h(t){for(var e=[],r=[],h=function(t){for(var e=new Array(t),r=0;r<t;++r){e[r]=new Array(t);for(var n=0;n<t;++n)e[r][n]=["m",n,"[",t-r-1,"]"].join("")}return e}(t),c=[],f=0;f<t;++f)0==(1&f)?e.push.apply(e,u(a(h,f))):r.push.apply(r,u(a(h,f))),c.push("m"+f);var d=l(e),p=l(r),m="orientation"+t+"Exact",g=["function ",m,"(",c.join(),"){var p=",d,",n=",p,",d=sub(p,n);return d[d.length-1];};return ",m].join("");return new Function("sum","prod","scale","sub",g)(i,n,o,s)}var c=h(3),f=h(4),d=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,r){var n,i=(t[1]-r[1])*(e[0]-r[0]),o=(t[0]-r[0])*(e[1]-r[1]),s=i-o;if(i>0){if(o<=0)return s;n=i+o}else{if(!(i<0))return s;if(o>=0)return s;n=-(i+o)}var a=33306690738754716e-32*n;return s>=a||s<=-a?s:c(t,e,r)},function(t,e,r,n){var i=t[0]-n[0],o=e[0]-n[0],s=r[0]-n[0],a=t[1]-n[1],l=e[1]-n[1],u=r[1]-n[1],h=t[2]-n[2],c=e[2]-n[2],d=r[2]-n[2],p=o*u,m=s*l,g=s*a,v=i*u,w=i*l,y=o*a,b=h*(p-m)+c*(g-v)+d*(w-y),_=7771561172376103e-31*((Math.abs(p)+Math.abs(m))*Math.abs(h)+(Math.abs(g)+Math.abs(v))*Math.abs(c)+(Math.abs(w)+Math.abs(y))*Math.abs(d));return b>_||-b>_?b:f(t,e,r,n)}];function p(t){var e=d[t.length];return e||(e=d[t.length]=h(t.length)),e.apply(void 0,t)}!function(){for(;d.length<=5;)d.push(h(d.length));for(var e=[],r=["slow"],n=0;n<=5;++n)e.push("a"+n),r.push("o"+n);var i=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(n=2;n<=5;++n)i.push("case ",n,":return o",n,"(",e.slice(0,n).join(),");");i.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),r.push(i.join(""));var o=Function.apply(void 0,r);for(t.exports=o.apply(void 0,[p].concat(d)),n=0;n<=5;++n)t.exports[n]=d[n]}()},4707:(t,e,r)=>{t.exports=function(t,e){for(var r=e[0],i=e[1],o=t.length,s=1,a=o,l=0,u=o-1;l<a;u=l++){var h=t[l],c=t[u],f=h[1],d=c[1];if(d<f){if(d<i&&i<f){if(0===(g=n(h,c,e)))return 0;s^=0<g|0}else if(i===f){var p=(m=t[(l+1)%o])[1];if(f<p){if(0===(g=n(h,c,e)))return 0;s^=0<g|0}}}else if(f<d){if(f<i&&i<d){if(0===(g=n(h,c,e)))return 0;s^=g<0|0}else if(i===f){var m=t[(l+1)%o];if((p=m[1])<f){var g;if(0===(g=n(h,c,e)))return 0;s^=g<0|0}}}else if(i===f){var v=Math.min(h[0],c[0]),w=Math.max(h[0],c[0]);if(0===l){for(;u>0;){var y=(u+o-1)%o;if((x=t[y])[1]!==i)break;var b=x[0];v=Math.min(v,b),w=Math.max(w,b),u=y}if(0===u)return v<=r&&r<=w?0:1;a=u+1}for(var _=t[(u+o-1)%o][1];l+1<a;){var x;if((x=t[l+1])[1]!==i)break;b=x[0];v=Math.min(v,b),w=Math.max(w,b),l+=1}if(v<=r&&r<=w)return 0;var k=t[(l+1)%o][1];r<v&&_<i!=k<i&&(s^=1)}}return 2*s-1};var n=r(146)},5442:(t,e,r)=>{"use strict";var n=r(8005),i=r(6359);t.exports=function(t,e){var r=t.length;if(1===r){var o=n(t[0],e);return o[0]?o:[o[1]]}var s=new Array(2*r),a=[.1,.1],l=[.1,.1],u=0;n(t[0],e,a),a[0]&&(s[u++]=a[0]);for(var h=1;h<r;++h){n(t[h],e,l);var c=a[1];i(c,l[0],a),a[0]&&(s[u++]=a[0]);var f=l[1],d=a[1],p=f+d,m=d-(p-f);a[1]=p,m&&(s[u++]=m)}a[1]&&(s[u++]=a[1]);0===u&&(s[u++]=0);return s.length=u,s}},7972:t=>{"use strict";t.exports=function(t,e){var r=0|t.length,n=0|e.length;if(1===r&&1===n)return function(t,e){var r=t+e,n=r-t,i=t-(r-n)+(e-n);if(i)return[i,r];return[r]}(t[0],-e[0]);var i,o,s=new Array(r+n),a=0,l=0,u=0,h=Math.abs,c=t[l],f=h(c),d=-e[u],p=h(d);f<p?(o=c,(l+=1)<r&&(c=t[l],f=h(c))):(o=d,(u+=1)<n&&(d=-e[u],p=h(d)));l<r&&f<p||u>=n?(i=c,(l+=1)<r&&(c=t[l],f=h(c))):(i=d,(u+=1)<n&&(d=-e[u],p=h(d)));var m,g,v=i+o,w=v-i,y=o-w,b=y,_=v;for(;l<r&&u<n;)f<p?(i=c,(l+=1)<r&&(c=t[l],f=h(c))):(i=d,(u+=1)<n&&(d=-e[u],p=h(d))),(y=(o=b)-(w=(v=i+o)-i))&&(s[a++]=y),b=_-((m=_+v)-(g=m-_))+(v-g),_=m;for(;l<r;)(y=(o=b)-(w=(v=(i=c)+o)-i))&&(s[a++]=y),b=_-((m=_+v)-(g=m-_))+(v-g),_=m,(l+=1)<r&&(c=t[l]);for(;u<n;)(y=(o=b)-(w=(v=(i=d)+o)-i))&&(s[a++]=y),b=_-((m=_+v)-(g=m-_))+(v-g),_=m,(u+=1)<n&&(d=-e[u]);b&&(s[a++]=b);_&&(s[a++]=_);a||(s[a++]=0);return s.length=a,s}},6740:t=>{"use strict";t.exports=function(t,e){var r=0|t.length,n=0|e.length;if(1===r&&1===n)return function(t,e){var r=t+e,n=r-t,i=t-(r-n)+(e-n);if(i)return[i,r];return[r]}(t[0],e[0]);var i,o,s=new Array(r+n),a=0,l=0,u=0,h=Math.abs,c=t[l],f=h(c),d=e[u],p=h(d);f<p?(o=c,(l+=1)<r&&(c=t[l],f=h(c))):(o=d,(u+=1)<n&&(d=e[u],p=h(d)));l<r&&f<p||u>=n?(i=c,(l+=1)<r&&(c=t[l],f=h(c))):(i=d,(u+=1)<n&&(d=e[u],p=h(d)));var m,g,v=i+o,w=v-i,y=o-w,b=y,_=v;for(;l<r&&u<n;)f<p?(i=c,(l+=1)<r&&(c=t[l],f=h(c))):(i=d,(u+=1)<n&&(d=e[u],p=h(d))),(y=(o=b)-(w=(v=i+o)-i))&&(s[a++]=y),b=_-((m=_+v)-(g=m-_))+(v-g),_=m;for(;l<r;)(y=(o=b)-(w=(v=(i=c)+o)-i))&&(s[a++]=y),b=_-((m=_+v)-(g=m-_))+(v-g),_=m,(l+=1)<r&&(c=t[l]);for(;u<n;)(y=(o=b)-(w=(v=(i=d)+o)-i))&&(s[a++]=y),b=_-((m=_+v)-(g=m-_))+(v-g),_=m,(u+=1)<n&&(d=e[u]);b&&(s[a++]=b);_&&(s[a++]=_);a||(s[a++]=0);return s.length=a,s}},3379:(t,e,r)=>{"use strict";var n,i=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},o=function(){var t={};return function(e){if(void 0===t[e]){var r=document.querySelector(e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}t[e]=r}return t[e]}}(),s=[];function a(t){for(var e=-1,r=0;r<s.length;r++)if(s[r].identifier===t){e=r;break}return e}function l(t,e){for(var r={},n=[],i=0;i<t.length;i++){var o=t[i],l=e.base?o[0]+e.base:o[0],u=r[l]||0,h="".concat(l," ").concat(u);r[l]=u+1;var c=a(h),f={css:o[1],media:o[2],sourceMap:o[3]};-1!==c?(s[c].references++,s[c].updater(f)):s.push({identifier:h,updater:g(f,e),references:1}),n.push(h)}return n}function u(t){var e=document.createElement("style"),n=t.attributes||{};if(void 0===n.nonce){var i=r.nc;i&&(n.nonce=i)}if(Object.keys(n).forEach((function(t){e.setAttribute(t,n[t])})),"function"==typeof t.insert)t.insert(e);else{var s=o(t.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(e)}return e}var h,c=(h=[],function(t,e){return h[t]=e,h.filter(Boolean).join("\n")});function f(t,e,r,n){var i=r?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(t.styleSheet)t.styleSheet.cssText=c(e,i);else{var o=document.createTextNode(i),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(o,s[e]):t.appendChild(o)}}function d(t,e,r){var n=r.css,i=r.media,o=r.sourceMap;if(i?t.setAttribute("media",i):t.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}var p=null,m=0;function g(t,e){var r,n,i;if(e.singleton){var o=m++;r=p||(p=u(e)),n=f.bind(null,r,o,!1),i=f.bind(null,r,o,!0)}else r=u(e),n=d.bind(null,r,e),i=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(r)};return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else i()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=i());var r=l(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var n=0;n<r.length;n++){var i=a(r[n]);s[i].references--}for(var o=l(t,e),u=0;u<r.length;u++){var h=a(r[u]);0===s[h].references&&(s[h].updater(),s.splice(h,1))}r=o}}}},7121:(t,e,r)=>{"use strict";r.d(e,{Z:()=>n}),t=r.hmd(t);const n=function(t){var e,r=t.Symbol;return"function"==typeof r?r.observable?e=r.observable:(e=r("observable"),r.observable=e):e="@@observable",e}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==r.g?r.g:t)},9798:function(){"use strict";!function(t){if(t.TextEncoder&&t.TextDecoder)return!1;function e(t="utf-8"){if("utf-8"!==t)throw new RangeError(`Failed to construct 'TextEncoder': The encoding label provided ('${t}') is invalid.`)}function r(t="utf-8",e={fatal:!1}){if("utf-8"!==t)throw new RangeError(`Failed to construct 'TextDecoder': The encoding label provided ('${t}') is invalid.`);if(e.fatal)throw new Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}Object.defineProperty(e.prototype,"encoding",{value:"utf-8"}),e.prototype.encode=function(t,e={stream:!1}){if(e.stream)throw new Error("Failed to encode: the 'stream' option is unsupported.");let r=0;const n=t.length;let i=0,o=Math.max(32,n+(n>>1)+7),s=new Uint8Array(o>>3<<3);for(;r<n;){let e=t.charCodeAt(r++);if(e>=55296&&e<=56319){if(r<n){const n=t.charCodeAt(r);56320==(64512&n)&&(++r,e=((1023&e)<<10)+(1023&n)+65536)}if(e>=55296&&e<=56319)continue}if(i+4>s.length){o+=8,o*=1+r/t.length*2,o=o>>3<<3;const e=new Uint8Array(o);e.set(s),s=e}if(0!=(4294967168&e)){if(0==(4294965248&e))s[i++]=e>>6&31|192;else if(0==(4294901760&e))s[i++]=e>>12&15|224,s[i++]=e>>6&63|128;else{if(0!=(4292870144&e))continue;s[i++]=e>>18&7|240,s[i++]=e>>12&63|128,s[i++]=e>>6&63|128}s[i++]=63&e|128}else s[i++]=e}return s.slice(0,i)},Object.defineProperty(r.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(r.prototype,"fatal",{value:!1}),Object.defineProperty(r.prototype,"ignoreBOM",{value:!1}),r.prototype.decode=function(t,e={stream:!1}){if(e.stream)throw new Error("Failed to decode: the 'stream' option is unsupported.");const r=new Uint8Array(t);let n=0;const i=r.length,o=[];for(;n<i;){const t=r[n++];if(0===t)break;if(0==(128&t))o.push(t);else if(192==(224&t)){const e=63&r[n++];o.push((31&t)<<6|e)}else if(224==(240&t)){const e=63&r[n++],i=63&r[n++];o.push((31&t)<<12|e<<6|i)}else if(240==(248&t)){let e=(7&t)<<18|(63&r[n++])<<12|(63&r[n++])<<6|63&r[n++];e>65535&&(e-=65536,o.push(e>>>10&1023|55296),e=56320|1023&e),o.push(e)}}return String.fromCharCode.apply(null,o)},t.TextEncoder=e,t.TextDecoder=r}("undefined"!=typeof window?window:"undefined"!=typeof self?self:this)},7591:(t,e,r)=>{"use strict";r.d(e,{ej:()=>l,kG:()=>u});var n=r(655),i=r(4155),o="Invariant Violation",s=Object.setPrototypeOf,a=void 0===s?function(t,e){return t.__proto__=e,t}:s,l=function(t){function e(r){void 0===r&&(r=o);var n=t.call(this,"number"==typeof r?o+": "+r+" (see https://github.com/apollographql/invariant-packages)":r)||this;return n.framesToPop=1,n.name=o,a(n,e.prototype),n}return(0,n.ZT)(e,t),e}(Error);function u(t,e){if(!t)throw new l(e)}function h(t){return function(){return console[t].apply(console,arguments)}}!function(t){t.warn=h("warn"),t.error=h("error")}(u||(u={}));var c={env:{}};if("object"==typeof i)c=i;else try{Function("stub","process = stub")(c)}catch(t){}},655:(t,e,r)=>{"use strict";r.d(e,{ZT:()=>i,pi:()=>o,_T:()=>s,mG:()=>a,Jh:()=>l,pr:()=>u});var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function i(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var o=function(){return(o=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r}function a(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}l((n=n.apply(t,e||[])).next())}))}function l(t,e){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<r;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n}},8005:t=>{"use strict";t.exports=function(t,r,n){var i=t*r,o=e*t,s=o-(o-t),a=t-s,l=e*r,u=l-(l-r),h=r-u,c=a*h-(i-s*u-a*u-s*h);if(n)return n[0]=c,n[1]=i,n;return[c,i]};var e=+(Math.pow(2,27)+1)},6359:t=>{"use strict";t.exports=function(t,e,r){var n=t+e,i=n-t,o=e-i,s=t-(n-i);if(r)return r[0]=s+o,r[1]=n,r;return[s+o,n]}},7458:function(t,e,r){var n;t=r.nmd(t),function(i){var o=e,s=(t&&t.exports,"object"==typeof r.g&&r.g);s.global!==s&&s.window;var a,l,u,h=String.fromCharCode;function c(t){for(var e,r,n=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(r=t.charCodeAt(i++)))?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),i--):n.push(e);return n}function f(t){if(t>=55296&&t<=57343)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function d(t,e){return h(t>>e&63|128)}function p(t){if(0==(4294967168&t))return h(t);var e="";return 0==(4294965248&t)?e=h(t>>6&31|192):0==(4294901760&t)?(f(t),e=h(t>>12&15|224),e+=d(t,6)):0==(4292870144&t)&&(e=h(t>>18&7|240),e+=d(t,12),e+=d(t,6)),e+=h(63&t|128)}function m(){if(u>=l)throw Error("Invalid byte index");var t=255&a[u];if(u++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function g(){var t,e;if(u>l)throw Error("Invalid byte index");if(u==l)return!1;if(t=255&a[u],u++,0==(128&t))return t;if(192==(224&t)){if((e=(31&t)<<6|m())>=128)return e;throw Error("Invalid continuation byte")}if(224==(240&t)){if((e=(15&t)<<12|m()<<6|m())>=2048)return f(e),e;throw Error("Invalid continuation byte")}if(240==(248&t)&&(e=(7&t)<<18|m()<<12|m()<<6|m())>=65536&&e<=1114111)return e;throw Error("Invalid UTF-8 detected")}var v={version:"2.1.2",encode:function(t){for(var e=c(t),r=e.length,n=-1,i="";++n<r;)i+=p(e[n]);return i},decode:function(t){a=c(t),l=a.length,u=0;for(var e,r=[];!1!==(e=g());)r.push(e);return function(t){for(var e,r=t.length,n=-1,i="";++n<r;)(e=t[n])>65535&&(i+=h((e-=65536)>>>10&1023|55296),e=56320|1023&e),i+=h(e);return i}(r)}};void 0===(n=function(){return v}.call(e,r,e,t))||(t.exports=n)}()},1900:(t,e,r)=>{"use strict";function n(t,e,r,n,i,o,s,a){var l,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=r,u._compiled=!0),n&&(u.functional=!0),o&&(u._scopeId="data-v-"+o),s?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},u._ssrRegister=l):i&&(l=a?function(){i.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:i),l)if(u.functional){u._injectStyles=l;var h=u.render;u.render=function(t,e){return l.call(e),h(t,e)}}else{var c=u.beforeCreate;u.beforeCreate=c?[].concat(c,l):[l]}return{exports:t,options:u}}r.d(e,{Z:()=>n})},792:t=>{window,t.exports=function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/dist/",r(r.s=0)}([function(t,e,r){"use strict";r.r(e);var n=function(t,e,r,n,i,o,s,a){var l,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=r,u._compiled=!0),n&&(u.functional=!0),o&&(u._scopeId="data-v-"+o),s?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},u._ssrRegister=l):i&&(l=a?function(){i.call(this,this.$root.$options.shadowRoot)}:i),l)if(u.functional){u._injectStyles=l;var h=u.render;u.render=function(t,e){return l.call(e),h(t,e)}}else{var c=u.beforeCreate;u.beforeCreate=c?[].concat(c,l):[l]}return{exports:t,options:u}}({name:"VueWebCam",props:{width:{type:[Number,String],default:"100%"},height:{type:[Number,String],default:500},autoplay:{type:Boolean,default:!0},screenshotFormat:{type:String,default:"image/jpeg"},selectFirstDevice:{type:Boolean,default:!1},deviceId:{type:String,default:null},playsinline:{type:Boolean,default:!0},resolution:{type:Object,default:null,validator:function(t){return t.height&&t.width}}},data:function(){return{source:null,canvas:null,camerasListEmitted:!1,cameras:[]}},watch:{deviceId:function(t){this.changeCamera(t)}},mounted:function(){this.setupMedia()},beforeDestroy:function(){this.stop()},methods:{legacyGetUserMediaSupport:function(){return function(t){var e=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia;return e?new Promise((function(r,n){e.call(navigator,t,r,n)})):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}},setupMedia:function(){void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=this.legacyGetUserMediaSupport()),this.testMediaAccess()},loadCameras:function(){var t=this;navigator.mediaDevices.enumerateDevices().then((function(e){for(var r=0;r!==e.length;++r){var n=e[r];"videoinput"===n.kind&&t.cameras.push(n)}})).then((function(){t.camerasListEmitted||(t.selectFirstDevice&&t.cameras.length>0&&(t.deviceId=t.cameras[0].deviceId),t.$emit("cameras",t.cameras),t.camerasListEmitted=!0)})).catch((function(e){return t.$emit("notsupported",e)}))},changeCamera:function(t){this.stop(),this.$emit("camera-change",t),this.loadCamera(t)},loadSrcStream:function(t){var e=this;"srcObject"in this.$refs.video?this.$refs.video.srcObject=t:this.source=window.HTMLMediaElement.srcObject(t),this.$refs.video.onloadedmetadata=function(){e.$emit("video-live",t)},this.$emit("started",t)},stopStreamedVideo:function(t){var e=this,r=t.srcObject;r.getTracks().forEach((function(t){t.stop(),e.$emit("stopped",r),e.$refs.video.srcObject=null,e.source=null}))},stop:function(){null!==this.$refs.video&&this.$refs.video.srcObject&&this.stopStreamedVideo(this.$refs.video)},start:function(){this.deviceId&&this.loadCamera(this.deviceId)},pause:function(){null!==this.$refs.video&&this.$refs.video.srcObject&&this.$refs.video.pause()},resume:function(){null!==this.$refs.video&&this.$refs.video.srcObject&&this.$refs.video.play()},testMediaAccess:function(){var t=this,e={video:!0};this.resolution&&(e.video={},e.video.height=this.resolution.height,e.video.width=this.resolution.width),navigator.mediaDevices.getUserMedia(e).then((function(e){e.getTracks().forEach((function(t){t.stop()})),t.loadCameras()})).catch((function(e){return t.$emit("error",e)}))},loadCamera:function(t){var e=this,r={video:{deviceId:{exact:t}}};this.resolution&&(r.video.height=this.resolution.height,r.video.width=this.resolution.width),navigator.mediaDevices.getUserMedia(r).then((function(t){return e.loadSrcStream(t)})).catch((function(t){return e.$emit("error",t)}))},capture:function(){return this.getCanvas().toDataURL(this.screenshotFormat)},getCanvas:function(){var t=this.$refs.video;if(!this.ctx){var e=document.createElement("canvas");e.height=t.videoHeight,e.width=t.videoWidth,this.canvas=e,this.ctx=e.getContext("2d")}var r=this.ctx,n=this.canvas;return r.drawImage(t,0,0,n.width,n.height),n}}},(function(){var t=this.$createElement;return(this._self._c||t)("video",{ref:"video",attrs:{width:this.width,height:this.height,src:this.source,autoplay:this.autoplay,playsinline:this.playsinline}})}),[],!1,null,null,null).exports;function i(t){t.component("vue-web-cam",n)}r.d(e,"version",(function(){return o})),r.d(e,"WebCam",(function(){return n})),"undefined"!=typeof window&&window.Vue&&window.Vue.use(i),e.default=i;var o="__VERSION__"}])},6732:(t,e,r)=>{"use strict";var n=r(7963),i=navigator.hardwareConcurrency||1;Function.prototype;function o(t,e){if("string"!=typeof t&&"function"!=typeof t)throw new TypeError("func argument must be a function");if(void 0===e&&(e={}),"object"!=typeof e||null===e)throw new TypeError("options argument must be an object");this._workerCode=t.toString(),void 0===e.maxWorkers||"auto"===e.maxWorkers?this._numWorkers=Math.min(i-1,1):e.maxWorkers>0?this._numWorkers=Math.min(e.maxWorkers,i):this._numWorkers=i,this._workers=new Map,this._timeout=e.timeout||0,this._terminateOnError=!!e.terminateOnError;var r=e.deps;"string"==typeof r&&(r=[r]),Array.isArray(r)||(r=void 0),this._id=0,this._terminated=!1,this._working=0,this._waiting=[],this._init(r)}o.prototype._init=function(t){for(var e=n.newWorkerURL(this._workerCode,t),r=0;r<this._numWorkers;r++){var i=new Worker(e);i.onmessage=this._onmessage.bind(this,i),i.onerror=this._onerror.bind(this,i),i.running=!1,i.id=r,this._workers.set(i,null)}URL.revokeObjectURL(e)},o.prototype._onerror=function(t,e){if(!this._terminated){this._working--,t.running=!1;var r=this._workers.get(t);r&&r[1](e.message),this._workers.set(t,null),this._terminateOnError?this.terminate():this._exec()}},o.prototype._onmessage=function(t,e){if(!this._terminated){this._working--,t.running=!1;var r=this._workers.get(t);r&&r[0](e.data.data),this._workers.set(t,null),this._exec()}},o.prototype._exec=function(){for(var t of this._workers.keys()){if(this._working===this._numWorkers||0===this._waiting.length)return;if(!t.running)for(var e=0;e<this._waiting.length;e++){var r=this._waiting[e];if("number"!=typeof r[4]||r[4]===t.id){this._waiting.splice(e,1),t.postMessage({action:"exec",event:r[0],args:r[1]},r[2]),t.running=!0,t.time=Date.now(),this._workers.set(t,r[3]),this._working++;break}}}},o.prototype.terminate=function(){if(!this._terminated){for(var t of this._workers)t[0].terminate(),t[1]&&t[1][1](new Error("Terminated"));this._workers.clear(),this._waiting=[],this._working=0,this._terminated=!0}},o.prototype.postAll=function(t,e){if(this._terminated)throw new Error("Cannot post (terminated)");var r=[];for(var n of this._workers.keys())r.push(this.post(t,e,[],n.id));return Promise.all(r)},o.prototype.post=function(t,e,r,n){void 0===e&&(e=[]),void 0===r&&(r=[]),Array.isArray(e)||(e=[e]),Array.isArray(r)||(r=[r]);var i=this;return new Promise((function(o,s){if(i._terminated)throw new Error("Cannot post (terminated)");i._waiting.push([t,e,r,[o,s],n]),i._exec()}))},t.exports=o},7963:(t,e)=>{"use strict";var r=function(){self.window=self;function t(){this._listeners={}}t.prototype.on=function(t,e){if(this._listeners[t])throw new RangeError("there is already a listener for "+t);if("function"!=typeof e)throw new TypeError("callback argument must be a function");this._listeners[t]=e},t.prototype._send=function(t,e,r){void 0===r?r=[]:Array.isArray(r)||(r=[r]),self.postMessage({id:t,data:e},r)},t.prototype._trigger=function(t,e){if(!this._listeners[t])throw new Error("event "+t+" is not defined");this._listeners[t].apply(null,e)};var e=new t;self.onmessage=function(t){switch(t.data.action){case"exec":t.data.args.unshift((function(r,n){e._send(t.data.id,r,n)})),e._trigger(t.data.event,t.data.args);break;case"ping":e._send(t.data.id,"pong");break;default:throw new Error("unexpected action: "+t.data.action)}}}.toString().split('"CODE";');e.newWorkerURL=function(t,e){var n=new Blob(["(",r[0],"importScripts.apply(self, "+JSON.stringify(e)+");\n","(",t,")();",r[1],")();"],{type:"application/javascript"});return URL.createObjectURL(n)}},9904:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(9329);const i=r.n(n)()},9329:(t,e,r)=>{t.exports=r(516).Observable},516:(t,e)=>{"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}e.Observable=void 0;var o=function(){return"function"==typeof Symbol},s=function(t){return o()&&Boolean(Symbol[t])},a=function(t){return s(t)?Symbol[t]:"@@"+t};o()&&!s("observable")&&(Symbol.observable=Symbol("observable"));var l=a("iterator"),u=a("observable"),h=a("species");function c(t,e){var r=t[e];if(null!=r){if("function"!=typeof r)throw new TypeError(r+" is not a function");return r}}function f(t){var e=t.constructor;return void 0!==e&&null===(e=e[h])&&(e=void 0),void 0!==e?e:x}function d(t){return t instanceof x}function p(t){p.log?p.log(t):setTimeout((function(){throw t}))}function m(t){Promise.resolve().then((function(){try{t()}catch(t){p(t)}}))}function g(t){var e=t._cleanup;if(void 0!==e&&(t._cleanup=void 0,e))try{if("function"==typeof e)e();else{var r=c(e,"unsubscribe");r&&r.call(e)}}catch(t){p(t)}}function v(t){t._observer=void 0,t._queue=void 0,t._state="closed"}function w(t,e,r){t._state="running";var n=t._observer;try{var i=c(n,e);switch(e){case"next":i&&i.call(n,r);break;case"error":if(v(t),!i)throw r;i.call(n,r);break;case"complete":v(t),i&&i.call(n)}}catch(t){p(t)}"closed"===t._state?g(t):"running"===t._state&&(t._state="ready")}function y(t,e,r){if("closed"!==t._state){if("buffering"!==t._state)return"ready"!==t._state?(t._state="buffering",t._queue=[{type:e,value:r}],void m((function(){return function(t){var e=t._queue;if(e){t._queue=void 0,t._state="ready";for(var r=0;r<e.length&&(w(t,e[r].type,e[r].value),"closed"!==t._state);++r);}}(t)}))):void w(t,e,r);t._queue.push({type:e,value:r})}}var b=function(){function t(e,n){r(this,t),this._cleanup=void 0,this._observer=e,this._queue=void 0,this._state="initializing";var i=new _(this);try{this._cleanup=n.call(void 0,i)}catch(t){i.error(t)}"initializing"===this._state&&(this._state="ready")}return i(t,[{key:"unsubscribe",value:function(){"closed"!==this._state&&(v(this),g(this))}},{key:"closed",get:function(){return"closed"===this._state}}]),t}(),_=function(){function t(e){r(this,t),this._subscription=e}return i(t,[{key:"next",value:function(t){y(this._subscription,"next",t)}},{key:"error",value:function(t){y(this._subscription,"error",t)}},{key:"complete",value:function(){y(this._subscription,"complete")}},{key:"closed",get:function(){return"closed"===this._subscription._state}}]),t}(),x=function(){function t(e){if(r(this,t),!(this instanceof t))throw new TypeError("Observable cannot be called as a function");if("function"!=typeof e)throw new TypeError("Observable initializer must be a function");this._subscriber=e}return i(t,[{key:"subscribe",value:function(t){return"object"==typeof t&&null!==t||(t={next:t,error:arguments[1],complete:arguments[2]}),new b(t,this._subscriber)}},{key:"forEach",value:function(t){var e=this;return new Promise((function(r,n){if("function"==typeof t)var i=e.subscribe({next:function(e){try{t(e,o)}catch(t){n(t),i.unsubscribe()}},error:n,complete:r});else n(new TypeError(t+" is not a function"));function o(){i.unsubscribe(),r()}}))}},{key:"map",value:function(t){var e=this;if("function"!=typeof t)throw new TypeError(t+" is not a function");return new(f(this))((function(r){return e.subscribe({next:function(e){try{e=t(e)}catch(t){return r.error(t)}r.next(e)},error:function(t){r.error(t)},complete:function(){r.complete()}})}))}},{key:"filter",value:function(t){var e=this;if("function"!=typeof t)throw new TypeError(t+" is not a function");return new(f(this))((function(r){return e.subscribe({next:function(e){try{if(!t(e))return}catch(t){return r.error(t)}r.next(e)},error:function(t){r.error(t)},complete:function(){r.complete()}})}))}},{key:"reduce",value:function(t){var e=this;if("function"!=typeof t)throw new TypeError(t+" is not a function");var r=f(this),n=arguments.length>1,i=!1,o=arguments[1],s=o;return new r((function(r){return e.subscribe({next:function(e){var o=!i;if(i=!0,!o||n)try{s=t(s,e)}catch(t){return r.error(t)}else s=e},error:function(t){r.error(t)},complete:function(){if(!i&&!n)return r.error(new TypeError("Cannot reduce an empty sequence"));r.next(s),r.complete()}})}))}},{key:"concat",value:function(){for(var t=this,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=f(this);return new i((function(e){var n,o=0;return function t(s){n=s.subscribe({next:function(t){e.next(t)},error:function(t){e.error(t)},complete:function(){o===r.length?(n=void 0,e.complete()):t(i.from(r[o++]))}})}(t),function(){n&&(n.unsubscribe(),n=void 0)}}))}},{key:"flatMap",value:function(t){var e=this;if("function"!=typeof t)throw new TypeError(t+" is not a function");var r=f(this);return new r((function(n){var i=[],o=e.subscribe({next:function(e){if(t)try{e=t(e)}catch(t){return n.error(t)}var o=r.from(e).subscribe({next:function(t){n.next(t)},error:function(t){n.error(t)},complete:function(){var t=i.indexOf(o);t>=0&&i.splice(t,1),s()}});i.push(o)},error:function(t){n.error(t)},complete:function(){s()}});function s(){o.closed&&0===i.length&&n.complete()}return function(){i.forEach((function(t){return t.unsubscribe()})),o.unsubscribe()}}))}},{key:u,value:function(){return this}}],[{key:"from",value:function(e){var r="function"==typeof this?this:t;if(null==e)throw new TypeError(e+" is not an object");var n=c(e,u);if(n){var i=n.call(e);if(Object(i)!==i)throw new TypeError(i+" is not an object");return d(i)&&i.constructor===r?i:new r((function(t){return i.subscribe(t)}))}if(s("iterator")&&(n=c(e,l)))return new r((function(t){m((function(){if(!t.closed){var r=!0,i=!1,o=void 0;try{for(var s,a=n.call(e)[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var l=s.value;if(t.next(l),t.closed)return}}catch(t){i=!0,o=t}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}t.complete()}}))}));if(Array.isArray(e))return new r((function(t){m((function(){if(!t.closed){for(var r=0;r<e.length;++r)if(t.next(e[r]),t.closed)return;t.complete()}}))}));throw new TypeError(e+" is not observable")}},{key:"of",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i="function"==typeof this?this:t;return new i((function(t){m((function(){if(!t.closed){for(var e=0;e<r.length;++e)if(t.next(r[e]),t.closed)return;t.complete()}}))}))}},{key:h,get:function(){return this}}]),t}();e.Observable=x,o()&&Object.defineProperty(x,Symbol("extensions"),{value:{symbol:u,hostReportError:p},configurable:!0})}},t=>{"use strict";t.O(0,[898],(()=>{return e=6099,t(t.s=e);var e}));t.O()}]);